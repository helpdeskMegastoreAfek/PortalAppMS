var rG=Object.defineProperty;var sG=(n,e,t)=>e in n?rG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var xt=(n,e,t)=>sG(n,typeof e!="symbol"?e+"":e,t);function lP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ig(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function jk(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var dC={exports:{}},t0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3;function aG(){if(S3)return t0;S3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:n,type:r,key:i,ref:s!==void 0?s:null,props:a}}return t0.Fragment=e,t0.jsx=t,t0.jsxs=t,t0}var T3;function iG(){return T3||(T3=1,dC.exports=aG()),dC.exports}var w=iG(),fC={exports:{}},Jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3;function oG(){if(N3)return Jt;N3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(j){return j===null||typeof j!="object"?null:(j=h&&j[h]||j["@@iterator"],typeof j=="function"?j:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function b(j,J,M){this.props=j,this.context=J,this.refs=y,this.updater=M||g}b.prototype.isReactComponent={},b.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},b.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function S(){}S.prototype=b.prototype;function T(j,J,M){this.props=j,this.context=J,this.refs=y,this.updater=M||g}var N=T.prototype=new S;N.constructor=T,x(N,b.prototype),N.isPureReactComponent=!0;var C=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function D(j,J,M,z,G,U){return M=U.ref,{$$typeof:n,type:j,key:J,ref:M!==void 0?M:null,props:U}}function A(j,J){return D(j.type,J,void 0,void 0,void 0,j.props)}function _(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function k(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(M){return J[M]})}var O=/\/+/g;function P(j,J){return typeof j=="object"&&j!==null&&j.key!=null?k(""+j.key):J.toString(36)}function W(){}function K(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(W,W):(j.status="pending",j.then(function(J){j.status==="pending"&&(j.status="fulfilled",j.value=J)},function(J){j.status==="pending"&&(j.status="rejected",j.reason=J)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function q(j,J,M,z,G){var U=typeof j;(U==="undefined"||U==="boolean")&&(j=null);var se=!1;if(j===null)se=!0;else switch(U){case"bigint":case"string":case"number":se=!0;break;case"object":switch(j.$$typeof){case n:case e:se=!0;break;case d:return se=j._init,q(se(j._payload),J,M,z,G)}}if(se)return G=G(j),se=z===""?"."+P(j,0):z,C(G)?(M="",se!=null&&(M=se.replace(O,"$&/")+"/"),q(G,J,M,"",function(be){return be})):G!=null&&(_(G)&&(G=A(G,M+(G.key==null||j&&j.key===G.key?"":(""+G.key).replace(O,"$&/")+"/")+se)),J.push(G)),1;se=0;var pe=z===""?".":z+":";if(C(j))for(var me=0;me<j.length;me++)z=j[me],U=pe+P(z,me),se+=q(z,J,M,U,G);else if(me=p(j),typeof me=="function")for(j=me.call(j),me=0;!(z=j.next()).done;)z=z.value,U=pe+P(z,me++),se+=q(z,J,M,U,G);else if(U==="object"){if(typeof j.then=="function")return q(K(j),J,M,z,G);throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return se}function V(j,J,M){if(j==null)return j;var z=[],G=0;return q(j,z,"","",function(U){return J.call(M,U,G++)}),z}function X(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(M){(j._status===0||j._status===-1)&&(j._status=1,j._result=M)},function(M){(j._status===0||j._status===-1)&&(j._status=2,j._result=M)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var Q=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Y(){}return Jt.Children={map:V,forEach:function(j,J,M){V(j,function(){J.apply(this,arguments)},M)},count:function(j){var J=0;return V(j,function(){J++}),J},toArray:function(j){return V(j,function(J){return J})||[]},only:function(j){if(!_(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Jt.Component=b,Jt.Fragment=t,Jt.Profiler=s,Jt.PureComponent=T,Jt.StrictMode=r,Jt.Suspense=l,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return I.H.useMemoCache(j)}},Jt.cache=function(j){return function(){return j.apply(null,arguments)}},Jt.cloneElement=function(j,J,M){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var z=x({},j.props),G=j.key,U=void 0;if(J!=null)for(se in J.ref!==void 0&&(U=void 0),J.key!==void 0&&(G=""+J.key),J)!F.call(J,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&J.ref===void 0||(z[se]=J[se]);var se=arguments.length-2;if(se===1)z.children=M;else if(1<se){for(var pe=Array(se),me=0;me<se;me++)pe[me]=arguments[me+2];z.children=pe}return D(j.type,G,void 0,void 0,U,z)},Jt.createContext=function(j){return j={$$typeof:i,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},Jt.createElement=function(j,J,M){var z,G={},U=null;if(J!=null)for(z in J.key!==void 0&&(U=""+J.key),J)F.call(J,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(G[z]=J[z]);var se=arguments.length-2;if(se===1)G.children=M;else if(1<se){for(var pe=Array(se),me=0;me<se;me++)pe[me]=arguments[me+2];G.children=pe}if(j&&j.defaultProps)for(z in se=j.defaultProps,se)G[z]===void 0&&(G[z]=se[z]);return D(j,U,void 0,void 0,null,G)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(j){return{$$typeof:o,render:j}},Jt.isValidElement=_,Jt.lazy=function(j){return{$$typeof:d,_payload:{_status:-1,_result:j},_init:X}},Jt.memo=function(j,J){return{$$typeof:c,type:j,compare:J===void 0?null:J}},Jt.startTransition=function(j){var J=I.T,M={};I.T=M;try{var z=j(),G=I.S;G!==null&&G(M,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(Y,Q)}catch(U){Q(U)}finally{I.T=J}},Jt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Jt.use=function(j){return I.H.use(j)},Jt.useActionState=function(j,J,M){return I.H.useActionState(j,J,M)},Jt.useCallback=function(j,J){return I.H.useCallback(j,J)},Jt.useContext=function(j){return I.H.useContext(j)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(j,J){return I.H.useDeferredValue(j,J)},Jt.useEffect=function(j,J,M){var z=I.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(j,J)},Jt.useId=function(){return I.H.useId()},Jt.useImperativeHandle=function(j,J,M){return I.H.useImperativeHandle(j,J,M)},Jt.useInsertionEffect=function(j,J){return I.H.useInsertionEffect(j,J)},Jt.useLayoutEffect=function(j,J){return I.H.useLayoutEffect(j,J)},Jt.useMemo=function(j,J){return I.H.useMemo(j,J)},Jt.useOptimistic=function(j,J){return I.H.useOptimistic(j,J)},Jt.useReducer=function(j,J,M){return I.H.useReducer(j,J,M)},Jt.useRef=function(j){return I.H.useRef(j)},Jt.useState=function(j){return I.H.useState(j)},Jt.useSyncExternalStore=function(j,J,M){return I.H.useSyncExternalStore(j,J,M)},Jt.useTransition=function(){return I.H.useTransition()},Jt.version="19.1.1",Jt}var C3;function zk(){return C3||(C3=1,fC.exports=oG()),fC.exports}var L=zk();const ao=Ig(L),hE=lP({__proto__:null,default:ao},[L]);var hC={exports:{}},n0={},pC={exports:{}},mC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E3;function lG(){return E3||(E3=1,function(n){function e(V,X){var Q=V.length;V.push(X);e:for(;0<Q;){var Y=Q-1>>>1,j=V[Y];if(0<s(j,X))V[Y]=X,V[Q]=j,Q=Y;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var X=V[0],Q=V.pop();if(Q!==X){V[0]=Q;e:for(var Y=0,j=V.length,J=j>>>1;Y<J;){var M=2*(Y+1)-1,z=V[M],G=M+1,U=V[G];if(0>s(z,Q))G<j&&0>s(U,z)?(V[Y]=U,V[G]=Q,Y=G):(V[Y]=z,V[M]=Q,Y=M);else if(G<j&&0>s(U,Q))V[Y]=U,V[G]=Q,Y=G;else break e}}return X}function s(V,X){var Q=V.sortIndex-X.sortIndex;return Q!==0?Q:V.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();n.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,h=null,p=3,g=!1,x=!1,y=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function C(V){for(var X=t(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=V)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function I(V){if(y=!1,C(V),!x)if(t(l)!==null)x=!0,F||(F=!0,P());else{var X=t(c);X!==null&&q(I,X.startTime-V)}}var F=!1,D=-1,A=5,_=-1;function k(){return b?!0:!(n.unstable_now()-_<A)}function O(){if(b=!1,F){var V=n.unstable_now();_=V;var X=!0;try{e:{x=!1,y&&(y=!1,T(D),D=-1),g=!0;var Q=p;try{t:{for(C(V),h=t(l);h!==null&&!(h.expirationTime>V&&k());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var j=Y(h.expirationTime<=V);if(V=n.unstable_now(),typeof j=="function"){h.callback=j,C(V),X=!0;break t}h===t(l)&&r(l),C(V)}else r(l);h=t(l)}if(h!==null)X=!0;else{var J=t(c);J!==null&&q(I,J.startTime-V),X=!1}}break e}finally{h=null,p=Q,g=!1}X=void 0}}finally{X?P():F=!1}}}var P;if(typeof N=="function")P=function(){N(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=O,P=function(){K.postMessage(null)}}else P=function(){S(O,0)};function q(V,X){D=S(function(){V(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_next=function(V){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var Q=p;p=X;try{return V()}finally{p=Q}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=p;p=V;try{return X()}finally{p=Q}},n.unstable_scheduleCallback=function(V,X,Q){var Y=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Y+Q:Y):Q=Y,V){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=Q+j,V={id:d++,callback:X,priorityLevel:V,startTime:Q,expirationTime:j,sortIndex:-1},Q>Y?(V.sortIndex=Q,e(c,V),t(l)===null&&V===t(c)&&(y?(T(D),D=-1):y=!0,q(I,Q-Y))):(V.sortIndex=j,e(l,V),x||g||(x=!0,F||(F=!0,P()))),V},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(V){var X=p;return function(){var Q=p;p=X;try{return V.apply(this,arguments)}finally{p=Q}}}}(mC)),mC}var k3;function cG(){return k3||(k3=1,pC.exports=lG()),pC.exports}var gC={exports:{}},qs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _3;function uG(){if(_3)return qs;_3=1;var n=zk();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var i=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qs.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,d)},qs.flushSync=function(l){var c=i.T,d=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=c,r.p=d,r.d.f()}},qs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},qs.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},qs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},qs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=o(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},qs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=o(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},qs.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=o(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},qs.requestFormReset=function(l){r.d.r(l)},qs.unstable_batchedUpdates=function(l,c){return l(c)},qs.useFormState=function(l,c,d){return i.H.useFormState(l,c,d)},qs.useFormStatus=function(){return i.H.useHostTransitionStatus()},qs.version="19.1.1",qs}var I3;function cP(){if(I3)return gC.exports;I3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gC.exports=uG(),gC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A3;function dG(){if(A3)return n0;A3=1;var n=cG(),e=zk(),t=cP();function r(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var f=u,m=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(m=f.return),u=f.return;while(u)}return f.tag===3?m:null}function i(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(r(188))}function l(u){var f=u.alternate;if(!f){if(f=a(u),f===null)throw Error(r(188));return f!==u?null:u}for(var m=u,v=f;;){var E=m.return;if(E===null)break;var R=E.alternate;if(R===null){if(v=E.return,v!==null){m=v;continue}break}if(E.child===R.child){for(R=E.child;R;){if(R===m)return o(E),u;if(R===v)return o(E),f;R=R.sibling}throw Error(r(188))}if(m.return!==v.return)m=E,v=R;else{for(var H=!1,re=E.child;re;){if(re===m){H=!0,m=E,v=R;break}if(re===v){H=!0,v=E,m=R;break}re=re.sibling}if(!H){for(re=R.child;re;){if(re===m){H=!0,m=R,v=E;break}if(re===v){H=!0,v=R,m=E;break}re=re.sibling}if(!H)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(u){return u===null||typeof u!="object"?null:(u=O&&u[O]||u["@@iterator"],typeof u=="function"?u:null)}var W=Symbol.for("react.client.reference");function K(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===W?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case x:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case I:return"Suspense";case F:return"SuspenseList";case _:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case N:return(u.displayName||"Context")+".Provider";case T:return(u._context.displayName||"Context")+".Consumer";case C:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case D:return f=u.displayName||null,f!==null?f:K(u.type)||"Memo";case A:f=u._payload,u=u._init;try{return K(u(f))}catch{}}return null}var q=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Y=[],j=-1;function J(u){return{current:u}}function M(u){0>j||(u.current=Y[j],Y[j]=null,j--)}function z(u,f){j++,Y[j]=u.current,u.current=f}var G=J(null),U=J(null),se=J(null),pe=J(null);function me(u,f){switch(z(se,f),z(U,u),z(G,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?YD(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=YD(f),u=QD(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}M(G),z(G,u)}function be(){M(G),M(U),M(se)}function ge(u){u.memoizedState!==null&&z(pe,u);var f=G.current,m=QD(f,u.type);f!==m&&(z(U,u),z(G,m))}function ke(u){U.current===u&&(M(G),M(U)),pe.current===u&&(M(pe),Ym._currentValue=Q)}var Le=Object.prototype.hasOwnProperty,rt=n.unstable_scheduleCallback,Be=n.unstable_cancelCallback,Ze=n.unstable_shouldYield,He=n.unstable_requestPaint,ne=n.unstable_now,Ae=n.unstable_getCurrentPriorityLevel,Me=n.unstable_ImmediatePriority,Ve=n.unstable_UserBlockingPriority,ot=n.unstable_NormalPriority,st=n.unstable_LowPriority,Ge=n.unstable_IdlePriority,at=n.log,Qt=n.unstable_setDisableYieldValue,Vt=null,Mt=null;function Ut(u){if(typeof at=="function"&&Qt(u),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Vt,u)}catch{}}var we=Math.clz32?Math.clz32:Xe,kt=Math.log,lt=Math.LN2;function Xe(u){return u>>>=0,u===0?32:31-(kt(u)/lt|0)|0}var pt=256,Xt=4194304;function _t(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function rs(u,f,m){var v=u.pendingLanes;if(v===0)return 0;var E=0,R=u.suspendedLanes,H=u.pingedLanes;u=u.warmLanes;var re=v&134217727;return re!==0?(v=re&~R,v!==0?E=_t(v):(H&=re,H!==0?E=_t(H):m||(m=re&~u,m!==0&&(E=_t(m))))):(re=v&~R,re!==0?E=_t(re):H!==0?E=_t(H):m||(m=v&~u,m!==0&&(E=_t(m)))),E===0?0:f!==0&&f!==E&&(f&R)===0&&(R=E&-E,m=f&-f,R>=m||R===32&&(m&4194048)!==0)?f:E}function yt(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function qt(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var u=pt;return pt<<=1,(pt&4194048)===0&&(pt=256),u}function oa(){var u=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),u}function fi(u){for(var f=[],m=0;31>m;m++)f.push(u);return f}function Wr(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function wo(u,f,m,v,E,R){var H=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var re=u.entanglements,fe=u.expirationTimes,_e=u.hiddenUpdates;for(m=H&~m;0<m;){var We=31-we(m),Ke=1<<We;re[We]=0,fe[We]=-1;var Re=_e[We];if(Re!==null)for(_e[We]=null,We=0;We<Re.length;We++){var De=Re[We];De!==null&&(De.lane&=-536870913)}m&=~Ke}v!==0&&uc(u,v,0),R!==0&&E===0&&u.tag!==0&&(u.suspendedLanes|=R&~(H&~f))}function uc(u,f,m){u.pendingLanes|=f,u.suspendedLanes&=~f;var v=31-we(f);u.entangledLanes|=f,u.entanglements[v]=u.entanglements[v]|1073741824|m&4194090}function Ua(u,f){var m=u.entangledLanes|=f;for(u=u.entanglements;m;){var v=31-we(m),E=1<<v;E&f|u[v]&f&&(u[v]|=f),m&=~E}}function dc(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function fc(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function So(){var u=X.p;return u!==0?u:(u=window.event,u===void 0?32:g3(u.type))}function tt(u,f){var m=X.p;try{return X.p=u,f()}finally{X.p=m}}var Qe=Math.random().toString(36).slice(2),wt="__reactFiber$"+Qe,Nt="__reactProps$"+Qe,ln="__reactContainer$"+Qe,ss="__reactEvents$"+Qe,Wi="__reactListeners$"+Qe,ee="__reactHandles$"+Qe,oe="__reactResources$"+Qe,ae="__reactMarker$"+Qe;function ie(u){delete u[wt],delete u[Nt],delete u[ss],delete u[Wi],delete u[ee]}function le(u){var f=u[wt];if(f)return f;for(var m=u.parentNode;m;){if(f=m[ln]||m[wt]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(u=t3(u);u!==null;){if(m=u[wt])return m;u=t3(u)}return f}u=m,m=u.parentNode}return null}function ce(u){if(u=u[wt]||u[ln]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function Ie(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(r(33))}function je(u){var f=u[oe];return f||(f=u[oe]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Ne(u){u[ae]=!0}var $e=new Set,Oe={};function nt(u,f){ct(u,f),ct(u+"Capture",f)}function ct(u,f){for(Oe[u]=f,u=0;u<f.length;u++)$e.add(f[u])}var vt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},mt={};function Kt(u){return Le.call(mt,u)?!0:Le.call(it,u)?!1:vt.test(u)?mt[u]=!0:(it[u]=!0,!1)}function Vn(u,f,m){if(Kt(f))if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var v=f.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+m)}}function Wn(u,f,m){if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+m)}}function ir(u,f,m,v){if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(f,m,""+v)}}var cl,hc;function hi(u){if(cl===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);cl=f&&f[1]||"",hc=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cl+u+hc}var Hi=!1;function Au(u,f){if(!u||Hi)return"";Hi=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(f){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(De){var Re=De}Reflect.construct(u,[],Ke)}else{try{Ke.call()}catch(De){Re=De}u.call(Ke.prototype)}}else{try{throw Error()}catch(De){Re=De}(Ke=u())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(De){if(De&&Re&&typeof De.stack=="string")return[De.stack,Re.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=v.DetermineComponentFrameRoot(),H=R[0],re=R[1];if(H&&re){var fe=H.split(`
`),_e=re.split(`
`);for(E=v=0;v<fe.length&&!fe[v].includes("DetermineComponentFrameRoot");)v++;for(;E<_e.length&&!_e[E].includes("DetermineComponentFrameRoot");)E++;if(v===fe.length||E===_e.length)for(v=fe.length-1,E=_e.length-1;1<=v&&0<=E&&fe[v]!==_e[E];)E--;for(;1<=v&&0<=E;v--,E--)if(fe[v]!==_e[E]){if(v!==1||E!==1)do if(v--,E--,0>E||fe[v]!==_e[E]){var We=`
`+fe[v].replace(" at new "," at ");return u.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",u.displayName)),We}while(1<=v&&0<=E);break}}}finally{Hi=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?hi(m):""}function Gi(u){switch(u.tag){case 26:case 27:case 5:return hi(u.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return Au(u.type,!1);case 11:return Au(u.type.render,!1);case 1:return Au(u.type,!0);case 31:return hi("Activity");default:return""}}function W$(u){try{var f="";do f+=Gi(u),u=u.return;while(u);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function pi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function H$(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Z7(u){var f=H$(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),v=""+u[f];if(!u.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,R=m.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return E.call(this)},set:function(H){v=""+H,R.call(this,H)}}),Object.defineProperty(u,f,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(H){v=""+H},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function M1(u){u._valueTracker||(u._valueTracker=Z7(u))}function G$(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var m=f.getValue(),v="";return u&&(v=H$(u)?u.checked?"true":"false":u.value),u=v,u!==m?(f.setValue(u),!0):!1}function P1(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var J7=/[\n"\\]/g;function mi(u){return u.replace(J7,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function lT(u,f,m,v,E,R,H,re){u.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?u.type=H:u.removeAttribute("type"),f!=null?H==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+pi(f)):u.value!==""+pi(f)&&(u.value=""+pi(f)):H!=="submit"&&H!=="reset"||u.removeAttribute("value"),f!=null?cT(u,H,pi(f)):m!=null?cT(u,H,pi(m)):v!=null&&u.removeAttribute("value"),E==null&&R!=null&&(u.defaultChecked=!!R),E!=null&&(u.checked=E&&typeof E!="function"&&typeof E!="symbol"),re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?u.name=""+pi(re):u.removeAttribute("name")}function q$(u,f,m,v,E,R,H,re){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(u.type=R),f!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||f!=null))return;m=m!=null?""+pi(m):"",f=f!=null?""+pi(f):m,re||f===u.value||(u.value=f),u.defaultValue=f}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,u.checked=re?u.checked:!!v,u.defaultChecked=!!v,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(u.name=H)}function cT(u,f,m){f==="number"&&P1(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function df(u,f,m,v){if(u=u.options,f){f={};for(var E=0;E<m.length;E++)f["$"+m[E]]=!0;for(m=0;m<u.length;m++)E=f.hasOwnProperty("$"+u[m].value),u[m].selected!==E&&(u[m].selected=E),E&&v&&(u[m].defaultSelected=!0)}else{for(m=""+pi(m),f=null,E=0;E<u.length;E++){if(u[E].value===m){u[E].selected=!0,v&&(u[E].defaultSelected=!0);return}f!==null||u[E].disabled||(f=u[E])}f!==null&&(f.selected=!0)}}function K$(u,f,m){if(f!=null&&(f=""+pi(f),f!==u.value&&(u.value=f),m==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=m!=null?""+pi(m):""}function X$(u,f,m,v){if(f==null){if(v!=null){if(m!=null)throw Error(r(92));if(q(v)){if(1<v.length)throw Error(r(93));v=v[0]}m=v}m==null&&(m=""),f=m}m=pi(f),u.defaultValue=m,v=u.textContent,v===m&&v!==""&&v!==null&&(u.value=v)}function ff(u,f){if(f){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=f;return}}u.textContent=f}var e9=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Y$(u,f,m){var v=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":v?u.setProperty(f,m):typeof m!="number"||m===0||e9.has(f)?f==="float"?u.cssFloat=m:u[f]=(""+m).trim():u[f]=m+"px"}function Q$(u,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(u=u.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||f!=null&&f.hasOwnProperty(v)||(v.indexOf("--")===0?u.setProperty(v,""):v==="float"?u.cssFloat="":u[v]="");for(var E in f)v=f[E],f.hasOwnProperty(E)&&m[E]!==v&&Y$(u,E,v)}else for(var R in f)f.hasOwnProperty(R)&&Y$(u,R,f[R])}function uT(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t9=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),n9=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function B1(u){return n9.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var dT=null;function fT(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var hf=null,pf=null;function Z$(u){var f=ce(u);if(f&&(u=f.stateNode)){var m=u[Nt]||null;e:switch(u=f.stateNode,f.type){case"input":if(lT(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+mi(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var v=m[f];if(v!==u&&v.form===u.form){var E=v[Nt]||null;if(!E)throw Error(r(90));lT(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<m.length;f++)v=m[f],v.form===u.form&&G$(v)}break e;case"textarea":K$(u,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&df(u,!!m.multiple,f,!1)}}}var hT=!1;function J$(u,f,m){if(hT)return u(f,m);hT=!0;try{var v=u(f);return v}finally{if(hT=!1,(hf!==null||pf!==null)&&(Ny(),hf&&(f=hf,u=pf,pf=hf=null,Z$(f),u)))for(f=0;f<u.length;f++)Z$(u[f])}}function cm(u,f){var m=u.stateNode;if(m===null)return null;var v=m[Nt]||null;if(v===null)return null;m=v[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(u=u.type,v=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!v;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var ul=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pT=!1;if(ul)try{var um={};Object.defineProperty(um,"passive",{get:function(){pT=!0}}),window.addEventListener("test",um,um),window.removeEventListener("test",um,um)}catch{pT=!1}var pc=null,mT=null,j1=null;function eR(){if(j1)return j1;var u,f=mT,m=f.length,v,E="value"in pc?pc.value:pc.textContent,R=E.length;for(u=0;u<m&&f[u]===E[u];u++);var H=m-u;for(v=1;v<=H&&f[m-v]===E[R-v];v++);return j1=E.slice(u,1<v?1-v:void 0)}function z1(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function U1(){return!0}function tR(){return!1}function Ca(u){function f(m,v,E,R,H){this._reactName=m,this._targetInst=E,this.type=v,this.nativeEvent=R,this.target=H,this.currentTarget=null;for(var re in u)u.hasOwnProperty(re)&&(m=u[re],this[re]=m?m(R):R[re]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?U1:tR,this.isPropagationStopped=tR,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=U1)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=U1)},persist:function(){},isPersistent:U1}),f}var $u={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V1=Ca($u),dm=d({},$u,{view:0,detail:0}),r9=Ca(dm),gT,xT,fm,W1=d({},dm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bT,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==fm&&(fm&&u.type==="mousemove"?(gT=u.screenX-fm.screenX,xT=u.screenY-fm.screenY):xT=gT=0,fm=u),gT)},movementY:function(u){return"movementY"in u?u.movementY:xT}}),nR=Ca(W1),s9=d({},W1,{dataTransfer:0}),a9=Ca(s9),i9=d({},dm,{relatedTarget:0}),yT=Ca(i9),o9=d({},$u,{animationName:0,elapsedTime:0,pseudoElement:0}),l9=Ca(o9),c9=d({},$u,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),u9=Ca(c9),d9=d({},$u,{data:0}),rR=Ca(d9),f9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m9(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=p9[u])?!!f[u]:!1}function bT(){return m9}var g9=d({},dm,{key:function(u){if(u.key){var f=f9[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=z1(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?h9[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bT,charCode:function(u){return u.type==="keypress"?z1(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?z1(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),x9=Ca(g9),y9=d({},W1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sR=Ca(y9),b9=d({},dm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bT}),v9=Ca(b9),w9=d({},$u,{propertyName:0,elapsedTime:0,pseudoElement:0}),S9=Ca(w9),T9=d({},W1,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),N9=Ca(T9),C9=d({},$u,{newState:0,oldState:0}),E9=Ca(C9),k9=[9,13,27,32],vT=ul&&"CompositionEvent"in window,hm=null;ul&&"documentMode"in document&&(hm=document.documentMode);var _9=ul&&"TextEvent"in window&&!hm,aR=ul&&(!vT||hm&&8<hm&&11>=hm),iR=" ",oR=!1;function lR(u,f){switch(u){case"keyup":return k9.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cR(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var mf=!1;function I9(u,f){switch(u){case"compositionend":return cR(f);case"keypress":return f.which!==32?null:(oR=!0,iR);case"textInput":return u=f.data,u===iR&&oR?null:u;default:return null}}function A9(u,f){if(mf)return u==="compositionend"||!vT&&lR(u,f)?(u=eR(),j1=mT=pc=null,mf=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return aR&&f.locale!=="ko"?null:f.data;default:return null}}var $9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uR(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!$9[u.type]:f==="textarea"}function dR(u,f,m,v){hf?pf?pf.push(v):pf=[v]:hf=v,f=Ay(f,"onChange"),0<f.length&&(m=new V1("onChange","change",null,m,v),u.push({event:m,listeners:f}))}var pm=null,mm=null;function R9(u){HD(u,0)}function H1(u){var f=Ie(u);if(G$(f))return u}function fR(u,f){if(u==="change")return f}var hR=!1;if(ul){var wT;if(ul){var ST="oninput"in document;if(!ST){var pR=document.createElement("div");pR.setAttribute("oninput","return;"),ST=typeof pR.oninput=="function"}wT=ST}else wT=!1;hR=wT&&(!document.documentMode||9<document.documentMode)}function mR(){pm&&(pm.detachEvent("onpropertychange",gR),mm=pm=null)}function gR(u){if(u.propertyName==="value"&&H1(mm)){var f=[];dR(f,mm,u,fT(u)),J$(R9,f)}}function O9(u,f,m){u==="focusin"?(mR(),pm=f,mm=m,pm.attachEvent("onpropertychange",gR)):u==="focusout"&&mR()}function D9(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return H1(mm)}function F9(u,f){if(u==="click")return H1(f)}function L9(u,f){if(u==="input"||u==="change")return H1(f)}function M9(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Va=typeof Object.is=="function"?Object.is:M9;function gm(u,f){if(Va(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var m=Object.keys(u),v=Object.keys(f);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var E=m[v];if(!Le.call(f,E)||!Va(u[E],f[E]))return!1}return!0}function xR(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function yR(u,f){var m=xR(u);u=0;for(var v;m;){if(m.nodeType===3){if(v=u+m.textContent.length,u<=f&&v>=f)return{node:m,offset:f-u};u=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=xR(m)}}function bR(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?bR(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function vR(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=P1(u.document);f instanceof u.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)u=f.contentWindow;else break;f=P1(u.document)}return f}function TT(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var P9=ul&&"documentMode"in document&&11>=document.documentMode,gf=null,NT=null,xm=null,CT=!1;function wR(u,f,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;CT||gf==null||gf!==P1(v)||(v=gf,"selectionStart"in v&&TT(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),xm&&gm(xm,v)||(xm=v,v=Ay(NT,"onSelect"),0<v.length&&(f=new V1("onSelect","select",null,f,m),u.push({event:f,listeners:v}),f.target=gf)))}function Ru(u,f){var m={};return m[u.toLowerCase()]=f.toLowerCase(),m["Webkit"+u]="webkit"+f,m["Moz"+u]="moz"+f,m}var xf={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionrun:Ru("Transition","TransitionRun"),transitionstart:Ru("Transition","TransitionStart"),transitioncancel:Ru("Transition","TransitionCancel"),transitionend:Ru("Transition","TransitionEnd")},ET={},SR={};ul&&(SR=document.createElement("div").style,"AnimationEvent"in window||(delete xf.animationend.animation,delete xf.animationiteration.animation,delete xf.animationstart.animation),"TransitionEvent"in window||delete xf.transitionend.transition);function Ou(u){if(ET[u])return ET[u];if(!xf[u])return u;var f=xf[u],m;for(m in f)if(f.hasOwnProperty(m)&&m in SR)return ET[u]=f[m];return u}var TR=Ou("animationend"),NR=Ou("animationiteration"),CR=Ou("animationstart"),B9=Ou("transitionrun"),j9=Ou("transitionstart"),z9=Ou("transitioncancel"),ER=Ou("transitionend"),kR=new Map,kT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kT.push("scrollEnd");function qi(u,f){kR.set(u,f),nt(f,[u])}var _R=new WeakMap;function gi(u,f){if(typeof u=="object"&&u!==null){var m=_R.get(u);return m!==void 0?m:(f={value:u,source:f,stack:W$(f)},_R.set(u,f),f)}return{value:u,source:f,stack:W$(f)}}var xi=[],yf=0,_T=0;function G1(){for(var u=yf,f=_T=yf=0;f<u;){var m=xi[f];xi[f++]=null;var v=xi[f];xi[f++]=null;var E=xi[f];xi[f++]=null;var R=xi[f];if(xi[f++]=null,v!==null&&E!==null){var H=v.pending;H===null?E.next=E:(E.next=H.next,H.next=E),v.pending=E}R!==0&&IR(m,E,R)}}function q1(u,f,m,v){xi[yf++]=u,xi[yf++]=f,xi[yf++]=m,xi[yf++]=v,_T|=v,u.lanes|=v,u=u.alternate,u!==null&&(u.lanes|=v)}function IT(u,f,m,v){return q1(u,f,m,v),K1(u)}function bf(u,f){return q1(u,null,null,f),K1(u)}function IR(u,f,m){u.lanes|=m;var v=u.alternate;v!==null&&(v.lanes|=m);for(var E=!1,R=u.return;R!==null;)R.childLanes|=m,v=R.alternate,v!==null&&(v.childLanes|=m),R.tag===22&&(u=R.stateNode,u===null||u._visibility&1||(E=!0)),u=R,R=R.return;return u.tag===3?(R=u.stateNode,E&&f!==null&&(E=31-we(m),u=R.hiddenUpdates,v=u[E],v===null?u[E]=[f]:v.push(f),f.lane=m|536870912),R):null}function K1(u){if(50<Um)throw Um=0,FN=null,Error(r(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var vf={};function U9(u,f,m,v){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wa(u,f,m,v){return new U9(u,f,m,v)}function AT(u){return u=u.prototype,!(!u||!u.isReactComponent)}function dl(u,f){var m=u.alternate;return m===null?(m=Wa(u.tag,f,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=f,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,f=u.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function AR(u,f){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,f=m.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function X1(u,f,m,v,E,R){var H=0;if(v=u,typeof u=="function")AT(u)&&(H=1);else if(typeof u=="string")H=WH(u,m,G.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case _:return u=Wa(31,m,f,E),u.elementType=_,u.lanes=R,u;case x:return Du(m.children,E,R,f);case y:H=8,E|=24;break;case b:return u=Wa(12,m,f,E|2),u.elementType=b,u.lanes=R,u;case I:return u=Wa(13,m,f,E),u.elementType=I,u.lanes=R,u;case F:return u=Wa(19,m,f,E),u.elementType=F,u.lanes=R,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case S:case N:H=10;break e;case T:H=9;break e;case C:H=11;break e;case D:H=14;break e;case A:H=16,v=null;break e}H=29,m=Error(r(130,u===null?"null":typeof u,"")),v=null}return f=Wa(H,m,f,E),f.elementType=u,f.type=v,f.lanes=R,f}function Du(u,f,m,v){return u=Wa(7,u,v,f),u.lanes=m,u}function $T(u,f,m){return u=Wa(6,u,null,f),u.lanes=m,u}function RT(u,f,m){return f=Wa(4,u.children!==null?u.children:[],u.key,f),f.lanes=m,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var wf=[],Sf=0,Y1=null,Q1=0,yi=[],bi=0,Fu=null,fl=1,hl="";function Lu(u,f){wf[Sf++]=Q1,wf[Sf++]=Y1,Y1=u,Q1=f}function $R(u,f,m){yi[bi++]=fl,yi[bi++]=hl,yi[bi++]=Fu,Fu=u;var v=fl;u=hl;var E=32-we(v)-1;v&=~(1<<E),m+=1;var R=32-we(f)+E;if(30<R){var H=E-E%5;R=(v&(1<<H)-1).toString(32),v>>=H,E-=H,fl=1<<32-we(f)+E|m<<E|v,hl=R+u}else fl=1<<R|m<<E|v,hl=u}function OT(u){u.return!==null&&(Lu(u,1),$R(u,1,0))}function DT(u){for(;u===Y1;)Y1=wf[--Sf],wf[Sf]=null,Q1=wf[--Sf],wf[Sf]=null;for(;u===Fu;)Fu=yi[--bi],yi[bi]=null,hl=yi[--bi],yi[bi]=null,fl=yi[--bi],yi[bi]=null}var la=null,Tr=null,Tn=!1,Mu=null,To=!1,FT=Error(r(519));function Pu(u){var f=Error(r(418,""));throw vm(gi(f,u)),FT}function RR(u){var f=u.stateNode,m=u.type,v=u.memoizedProps;switch(f[wt]=u,f[Nt]=v,m){case"dialog":fn("cancel",f),fn("close",f);break;case"iframe":case"object":case"embed":fn("load",f);break;case"video":case"audio":for(m=0;m<Wm.length;m++)fn(Wm[m],f);break;case"source":fn("error",f);break;case"img":case"image":case"link":fn("error",f),fn("load",f);break;case"details":fn("toggle",f);break;case"input":fn("invalid",f),q$(f,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),M1(f);break;case"select":fn("invalid",f);break;case"textarea":fn("invalid",f),X$(f,v.value,v.defaultValue,v.children),M1(f)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||v.suppressHydrationWarning===!0||XD(f.textContent,m)?(v.popover!=null&&(fn("beforetoggle",f),fn("toggle",f)),v.onScroll!=null&&fn("scroll",f),v.onScrollEnd!=null&&fn("scrollend",f),v.onClick!=null&&(f.onclick=$y),f=!0):f=!1,f||Pu(u)}function OR(u){for(la=u.return;la;)switch(la.tag){case 5:case 13:To=!1;return;case 27:case 3:To=!0;return;default:la=la.return}}function ym(u){if(u!==la)return!1;if(!Tn)return OR(u),Tn=!0,!1;var f=u.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||QN(u.type,u.memoizedProps)),m=!m),m&&Tr&&Pu(u),OR(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(f===0){Tr=Xi(u.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;u=u.nextSibling}Tr=null}}else f===27?(f=Tr,Ac(u.type)?(u=tC,tC=null,Tr=u):Tr=f):Tr=la?Xi(u.stateNode.nextSibling):null;return!0}function bm(){Tr=la=null,Tn=!1}function DR(){var u=Mu;return u!==null&&(_a===null?_a=u:_a.push.apply(_a,u),Mu=null),u}function vm(u){Mu===null?Mu=[u]:Mu.push(u)}var LT=J(null),Bu=null,pl=null;function mc(u,f,m){z(LT,f._currentValue),f._currentValue=m}function ml(u){u._currentValue=LT.current,M(LT)}function MT(u,f,m){for(;u!==null;){var v=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,v!==null&&(v.childLanes|=f)):v!==null&&(v.childLanes&f)!==f&&(v.childLanes|=f),u===m)break;u=u.return}}function PT(u,f,m,v){var E=u.child;for(E!==null&&(E.return=u);E!==null;){var R=E.dependencies;if(R!==null){var H=E.child;R=R.firstContext;e:for(;R!==null;){var re=R;R=E;for(var fe=0;fe<f.length;fe++)if(re.context===f[fe]){R.lanes|=m,re=R.alternate,re!==null&&(re.lanes|=m),MT(R.return,m,u),v||(H=null);break e}R=re.next}}else if(E.tag===18){if(H=E.return,H===null)throw Error(r(341));H.lanes|=m,R=H.alternate,R!==null&&(R.lanes|=m),MT(H,m,u),H=null}else H=E.child;if(H!==null)H.return=E;else for(H=E;H!==null;){if(H===u){H=null;break}if(E=H.sibling,E!==null){E.return=H.return,H=E;break}H=H.return}E=H}}function wm(u,f,m,v){u=null;for(var E=f,R=!1;E!==null;){if(!R){if((E.flags&524288)!==0)R=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var H=E.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var re=E.type;Va(E.pendingProps.value,H.value)||(u!==null?u.push(re):u=[re])}}else if(E===pe.current){if(H=E.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(u!==null?u.push(Ym):u=[Ym])}E=E.return}u!==null&&PT(f,u,m,v),f.flags|=262144}function Z1(u){for(u=u.firstContext;u!==null;){if(!Va(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function ju(u){Bu=u,pl=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Gs(u){return FR(Bu,u)}function J1(u,f){return Bu===null&&ju(u),FR(u,f)}function FR(u,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},pl===null){if(u===null)throw Error(r(308));pl=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else pl=pl.next=f;return m}var V9=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(m,v){u.push(v)}};this.abort=function(){f.aborted=!0,u.forEach(function(m){return m()})}},W9=n.unstable_scheduleCallback,H9=n.unstable_NormalPriority,as={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function BT(){return{controller:new V9,data:new Map,refCount:0}}function Sm(u){u.refCount--,u.refCount===0&&W9(H9,function(){u.controller.abort()})}var Tm=null,jT=0,Tf=0,Nf=null;function G9(u,f){if(Tm===null){var m=Tm=[];jT=0,Tf=UN(),Nf={status:"pending",value:void 0,then:function(v){m.push(v)}}}return jT++,f.then(LR,LR),f}function LR(){if(--jT===0&&Tm!==null){Nf!==null&&(Nf.status="fulfilled");var u=Tm;Tm=null,Tf=0,Nf=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function q9(u,f){var m=[],v={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return u.then(function(){v.status="fulfilled",v.value=f;for(var E=0;E<m.length;E++)(0,m[E])(f)},function(E){for(v.status="rejected",v.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),v}var MR=V.S;V.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&G9(u,f),MR!==null&&MR(u,f)};var zu=J(null);function zT(){var u=zu.current;return u!==null?u:or.pooledCache}function ey(u,f){f===null?z(zu,zu.current):z(zu,f.pool)}function PR(){var u=zT();return u===null?null:{parent:as._currentValue,pool:u}}var Nm=Error(r(460)),BR=Error(r(474)),ty=Error(r(542)),UT={then:function(){}};function jR(u){return u=u.status,u==="fulfilled"||u==="rejected"}function ny(){}function zR(u,f,m){switch(m=u[m],m===void 0?u.push(f):m!==f&&(f.then(ny,ny),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,VR(u),u;default:if(typeof f.status=="string")f.then(ny,ny);else{if(u=or,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=f,u.status="pending",u.then(function(v){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=v}},function(v){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=v}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,VR(u),u}throw Cm=f,Nm}}var Cm=null;function UR(){if(Cm===null)throw Error(r(459));var u=Cm;return Cm=null,u}function VR(u){if(u===Nm||u===ty)throw Error(r(483))}var gc=!1;function VT(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function WT(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function xc(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function yc(u,f,m){var v=u.updateQueue;if(v===null)return null;if(v=v.shared,(Dn&2)!==0){var E=v.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),v.pending=f,f=K1(u),IR(u,null,m),f}return q1(u,v,f,m),K1(u)}function Em(u,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var v=f.lanes;v&=u.pendingLanes,m|=v,f.lanes=m,Ua(u,m)}}function HT(u,f){var m=u.updateQueue,v=u.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var E=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var H={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?E=R=H:R=R.next=H,m=m.next}while(m!==null);R===null?E=R=f:R=R.next=f}else E=R=f;m={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:v.shared,callbacks:v.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=f}var GT=!1;function km(){if(GT){var u=Nf;if(u!==null)throw u}}function _m(u,f,m,v){GT=!1;var E=u.updateQueue;gc=!1;var R=E.firstBaseUpdate,H=E.lastBaseUpdate,re=E.shared.pending;if(re!==null){E.shared.pending=null;var fe=re,_e=fe.next;fe.next=null,H===null?R=_e:H.next=_e,H=fe;var We=u.alternate;We!==null&&(We=We.updateQueue,re=We.lastBaseUpdate,re!==H&&(re===null?We.firstBaseUpdate=_e:re.next=_e,We.lastBaseUpdate=fe))}if(R!==null){var Ke=E.baseState;H=0,We=_e=fe=null,re=R;do{var Re=re.lane&-536870913,De=Re!==re.lane;if(De?(yn&Re)===Re:(v&Re)===Re){Re!==0&&Re===Tf&&(GT=!0),We!==null&&(We=We.next={lane:0,tag:re.tag,payload:re.payload,callback:null,next:null});e:{var Wt=u,Pt=re;Re=f;var qn=m;switch(Pt.tag){case 1:if(Wt=Pt.payload,typeof Wt=="function"){Ke=Wt.call(qn,Ke,Re);break e}Ke=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=Pt.payload,Re=typeof Wt=="function"?Wt.call(qn,Ke,Re):Wt,Re==null)break e;Ke=d({},Ke,Re);break e;case 2:gc=!0}}Re=re.callback,Re!==null&&(u.flags|=64,De&&(u.flags|=8192),De=E.callbacks,De===null?E.callbacks=[Re]:De.push(Re))}else De={lane:Re,tag:re.tag,payload:re.payload,callback:re.callback,next:null},We===null?(_e=We=De,fe=Ke):We=We.next=De,H|=Re;if(re=re.next,re===null){if(re=E.shared.pending,re===null)break;De=re,re=De.next,De.next=null,E.lastBaseUpdate=De,E.shared.pending=null}}while(!0);We===null&&(fe=Ke),E.baseState=fe,E.firstBaseUpdate=_e,E.lastBaseUpdate=We,R===null&&(E.shared.lanes=0),Ec|=H,u.lanes=H,u.memoizedState=Ke}}function WR(u,f){if(typeof u!="function")throw Error(r(191,u));u.call(f)}function HR(u,f){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)WR(m[u],f)}var Cf=J(null),ry=J(0);function GR(u,f){u=Sl,z(ry,u),z(Cf,f),Sl=u|f.baseLanes}function qT(){z(ry,Sl),z(Cf,Cf.current)}function KT(){Sl=ry.current,M(Cf),M(ry)}var bc=0,an=null,Hn=null,Hr=null,sy=!1,Ef=!1,Uu=!1,ay=0,Im=0,kf=null,K9=0;function Fr(){throw Error(r(321))}function XT(u,f){if(f===null)return!1;for(var m=0;m<f.length&&m<u.length;m++)if(!Va(u[m],f[m]))return!1;return!0}function YT(u,f,m,v,E,R){return bc=R,an=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,V.H=u===null||u.memoizedState===null?IO:AO,Uu=!1,R=m(v,E),Uu=!1,Ef&&(R=KR(f,m,v,E)),qR(u),R}function qR(u){V.H=dy;var f=Hn!==null&&Hn.next!==null;if(bc=0,Hr=Hn=an=null,sy=!1,Im=0,kf=null,f)throw Error(r(300));u===null||gs||(u=u.dependencies,u!==null&&Z1(u)&&(gs=!0))}function KR(u,f,m,v){an=u;var E=0;do{if(Ef&&(kf=null),Im=0,Ef=!1,25<=E)throw Error(r(301));if(E+=1,Hr=Hn=null,u.updateQueue!=null){var R=u.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}V.H=tH,R=f(m,v)}while(Ef);return R}function X9(){var u=V.H,f=u.useState()[0];return f=typeof f.then=="function"?Am(f):f,u=u.useState()[0],(Hn!==null?Hn.memoizedState:null)!==u&&(an.flags|=1024),f}function QT(){var u=ay!==0;return ay=0,u}function ZT(u,f,m){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~m}function JT(u){if(sy){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}sy=!1}bc=0,Hr=Hn=an=null,Ef=!1,Im=ay=0,kf=null}function Ea(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hr===null?an.memoizedState=Hr=u:Hr=Hr.next=u,Hr}function Gr(){if(Hn===null){var u=an.alternate;u=u!==null?u.memoizedState:null}else u=Hn.next;var f=Hr===null?an.memoizedState:Hr.next;if(f!==null)Hr=f,Hn=u;else{if(u===null)throw an.alternate===null?Error(r(467)):Error(r(310));Hn=u,u={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},Hr===null?an.memoizedState=Hr=u:Hr=Hr.next=u}return Hr}function eN(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Am(u){var f=Im;return Im+=1,kf===null&&(kf=[]),u=zR(kf,u,f),f=an,(Hr===null?f.memoizedState:Hr.next)===null&&(f=f.alternate,V.H=f===null||f.memoizedState===null?IO:AO),u}function iy(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Am(u);if(u.$$typeof===N)return Gs(u)}throw Error(r(438,String(u)))}function tN(u){var f=null,m=an.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var v=an.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(f={data:v.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=eN(),an.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(u),v=0;v<u;v++)m[v]=k;return f.index++,m}function gl(u,f){return typeof f=="function"?f(u):f}function oy(u){var f=Gr();return nN(f,Hn,u)}function nN(u,f,m){var v=u.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var E=u.baseQueue,R=v.pending;if(R!==null){if(E!==null){var H=E.next;E.next=R.next,R.next=H}f.baseQueue=E=R,v.pending=null}if(R=u.baseState,E===null)u.memoizedState=R;else{f=E.next;var re=H=null,fe=null,_e=f,We=!1;do{var Ke=_e.lane&-536870913;if(Ke!==_e.lane?(yn&Ke)===Ke:(bc&Ke)===Ke){var Re=_e.revertLane;if(Re===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Ke===Tf&&(We=!0);else if((bc&Re)===Re){_e=_e.next,Re===Tf&&(We=!0);continue}else Ke={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},fe===null?(re=fe=Ke,H=R):fe=fe.next=Ke,an.lanes|=Re,Ec|=Re;Ke=_e.action,Uu&&m(R,Ke),R=_e.hasEagerState?_e.eagerState:m(R,Ke)}else Re={lane:Ke,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},fe===null?(re=fe=Re,H=R):fe=fe.next=Re,an.lanes|=Ke,Ec|=Ke;_e=_e.next}while(_e!==null&&_e!==f);if(fe===null?H=R:fe.next=re,!Va(R,u.memoizedState)&&(gs=!0,We&&(m=Nf,m!==null)))throw m;u.memoizedState=R,u.baseState=H,u.baseQueue=fe,v.lastRenderedState=R}return E===null&&(v.lanes=0),[u.memoizedState,v.dispatch]}function rN(u){var f=Gr(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var v=m.dispatch,E=m.pending,R=f.memoizedState;if(E!==null){m.pending=null;var H=E=E.next;do R=u(R,H.action),H=H.next;while(H!==E);Va(R,f.memoizedState)||(gs=!0),f.memoizedState=R,f.baseQueue===null&&(f.baseState=R),m.lastRenderedState=R}return[R,v]}function XR(u,f,m){var v=an,E=Gr(),R=Tn;if(R){if(m===void 0)throw Error(r(407));m=m()}else m=f();var H=!Va((Hn||E).memoizedState,m);H&&(E.memoizedState=m,gs=!0),E=E.queue;var re=ZR.bind(null,v,E,u);if($m(2048,8,re,[u]),E.getSnapshot!==f||H||Hr!==null&&Hr.memoizedState.tag&1){if(v.flags|=2048,_f(9,ly(),QR.bind(null,v,E,m,f),null),or===null)throw Error(r(349));R||(bc&124)!==0||YR(v,f,m)}return m}function YR(u,f,m){u.flags|=16384,u={getSnapshot:f,value:m},f=an.updateQueue,f===null?(f=eN(),an.updateQueue=f,f.stores=[u]):(m=f.stores,m===null?f.stores=[u]:m.push(u))}function QR(u,f,m,v){f.value=m,f.getSnapshot=v,JR(f)&&eO(u)}function ZR(u,f,m){return m(function(){JR(f)&&eO(u)})}function JR(u){var f=u.getSnapshot;u=u.value;try{var m=f();return!Va(u,m)}catch{return!0}}function eO(u){var f=bf(u,2);f!==null&&Xa(f,u,2)}function sN(u){var f=Ea();if(typeof u=="function"){var m=u;if(u=m(),Uu){Ut(!0);try{m()}finally{Ut(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:u},f}function tO(u,f,m,v){return u.baseState=m,nN(u,Hn,typeof v=="function"?v:gl)}function Y9(u,f,m,v,E){if(uy(u))throw Error(r(485));if(u=f.action,u!==null){var R={payload:E,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){R.listeners.push(H)}};V.T!==null?m(!0):R.isTransition=!1,v(R),m=f.pending,m===null?(R.next=f.pending=R,nO(f,R)):(R.next=m.next,f.pending=m.next=R)}}function nO(u,f){var m=f.action,v=f.payload,E=u.state;if(f.isTransition){var R=V.T,H={};V.T=H;try{var re=m(E,v),fe=V.S;fe!==null&&fe(H,re),rO(u,f,re)}catch(_e){aN(u,f,_e)}finally{V.T=R}}else try{R=m(E,v),rO(u,f,R)}catch(_e){aN(u,f,_e)}}function rO(u,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){sO(u,f,v)},function(v){return aN(u,f,v)}):sO(u,f,m)}function sO(u,f,m){f.status="fulfilled",f.value=m,aO(f),u.state=m,f=u.pending,f!==null&&(m=f.next,m===f?u.pending=null:(m=m.next,f.next=m,nO(u,m)))}function aN(u,f,m){var v=u.pending;if(u.pending=null,v!==null){v=v.next;do f.status="rejected",f.reason=m,aO(f),f=f.next;while(f!==v)}u.action=null}function aO(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function iO(u,f){return f}function oO(u,f){if(Tn){var m=or.formState;if(m!==null){e:{var v=an;if(Tn){if(Tr){t:{for(var E=Tr,R=To;E.nodeType!==8;){if(!R){E=null;break t}if(E=Xi(E.nextSibling),E===null){E=null;break t}}R=E.data,E=R==="F!"||R==="F"?E:null}if(E){Tr=Xi(E.nextSibling),v=E.data==="F!";break e}}Pu(v)}v=!1}v&&(f=m[0])}}return m=Ea(),m.memoizedState=m.baseState=f,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iO,lastRenderedState:f},m.queue=v,m=EO.bind(null,an,v),v.dispatch=m,v=sN(!1),R=uN.bind(null,an,!1,v.queue),v=Ea(),E={state:f,dispatch:null,action:u,pending:null},v.queue=E,m=Y9.bind(null,an,E,R,m),E.dispatch=m,v.memoizedState=u,[f,m,!1]}function lO(u){var f=Gr();return cO(f,Hn,u)}function cO(u,f,m){if(f=nN(u,f,iO)[0],u=oy(gl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var v=Am(f)}catch(H){throw H===Nm?ty:H}else v=f;f=Gr();var E=f.queue,R=E.dispatch;return m!==f.memoizedState&&(an.flags|=2048,_f(9,ly(),Q9.bind(null,E,m),null)),[v,R,u]}function Q9(u,f){u.action=f}function uO(u){var f=Gr(),m=Hn;if(m!==null)return cO(f,m,u);Gr(),f=f.memoizedState,m=Gr();var v=m.queue.dispatch;return m.memoizedState=u,[f,v,!1]}function _f(u,f,m,v){return u={tag:u,create:m,deps:v,inst:f,next:null},f=an.updateQueue,f===null&&(f=eN(),an.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=u.next=u:(v=m.next,m.next=u,u.next=v,f.lastEffect=u),u}function ly(){return{destroy:void 0,resource:void 0}}function dO(){return Gr().memoizedState}function cy(u,f,m,v){var E=Ea();v=v===void 0?null:v,an.flags|=u,E.memoizedState=_f(1|f,ly(),m,v)}function $m(u,f,m,v){var E=Gr();v=v===void 0?null:v;var R=E.memoizedState.inst;Hn!==null&&v!==null&&XT(v,Hn.memoizedState.deps)?E.memoizedState=_f(f,R,m,v):(an.flags|=u,E.memoizedState=_f(1|f,R,m,v))}function fO(u,f){cy(8390656,8,u,f)}function hO(u,f){$m(2048,8,u,f)}function pO(u,f){return $m(4,2,u,f)}function mO(u,f){return $m(4,4,u,f)}function gO(u,f){if(typeof f=="function"){u=u();var m=f(u);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function xO(u,f,m){m=m!=null?m.concat([u]):null,$m(4,4,gO.bind(null,f,u),m)}function iN(){}function yO(u,f){var m=Gr();f=f===void 0?null:f;var v=m.memoizedState;return f!==null&&XT(f,v[1])?v[0]:(m.memoizedState=[u,f],u)}function bO(u,f){var m=Gr();f=f===void 0?null:f;var v=m.memoizedState;if(f!==null&&XT(f,v[1]))return v[0];if(v=u(),Uu){Ut(!0);try{u()}finally{Ut(!1)}}return m.memoizedState=[v,f],v}function oN(u,f,m){return m===void 0||(bc&1073741824)!==0?u.memoizedState=f:(u.memoizedState=m,u=SD(),an.lanes|=u,Ec|=u,m)}function vO(u,f,m,v){return Va(m,f)?m:Cf.current!==null?(u=oN(u,m,v),Va(u,f)||(gs=!0),u):(bc&42)===0?(gs=!0,u.memoizedState=m):(u=SD(),an.lanes|=u,Ec|=u,f)}function wO(u,f,m,v,E){var R=X.p;X.p=R!==0&&8>R?R:8;var H=V.T,re={};V.T=re,uN(u,!1,f,m);try{var fe=E(),_e=V.S;if(_e!==null&&_e(re,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var We=q9(fe,v);Rm(u,f,We,Ka(u))}else Rm(u,f,v,Ka(u))}catch(Ke){Rm(u,f,{then:function(){},status:"rejected",reason:Ke},Ka())}finally{X.p=R,V.T=H}}function Z9(){}function lN(u,f,m,v){if(u.tag!==5)throw Error(r(476));var E=SO(u).queue;wO(u,E,f,Q,m===null?Z9:function(){return TO(u),m(v)})}function SO(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:Q},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:m},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function TO(u){var f=SO(u).next.queue;Rm(u,f,{},Ka())}function cN(){return Gs(Ym)}function NO(){return Gr().memoizedState}function CO(){return Gr().memoizedState}function J9(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var m=Ka();u=xc(m);var v=yc(f,u,m);v!==null&&(Xa(v,f,m),Em(v,f,m)),f={cache:BT()},u.payload=f;return}f=f.return}}function eH(u,f,m){var v=Ka();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},uy(u)?kO(f,m):(m=IT(u,f,m,v),m!==null&&(Xa(m,u,v),_O(m,f,v)))}function EO(u,f,m){var v=Ka();Rm(u,f,m,v)}function Rm(u,f,m,v){var E={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(uy(u))kO(f,E);else{var R=u.alternate;if(u.lanes===0&&(R===null||R.lanes===0)&&(R=f.lastRenderedReducer,R!==null))try{var H=f.lastRenderedState,re=R(H,m);if(E.hasEagerState=!0,E.eagerState=re,Va(re,H))return q1(u,f,E,0),or===null&&G1(),!1}catch{}finally{}if(m=IT(u,f,E,v),m!==null)return Xa(m,u,v),_O(m,f,v),!0}return!1}function uN(u,f,m,v){if(v={lane:2,revertLane:UN(),action:v,hasEagerState:!1,eagerState:null,next:null},uy(u)){if(f)throw Error(r(479))}else f=IT(u,m,v,2),f!==null&&Xa(f,u,2)}function uy(u){var f=u.alternate;return u===an||f!==null&&f===an}function kO(u,f){Ef=sy=!0;var m=u.pending;m===null?f.next=f:(f.next=m.next,m.next=f),u.pending=f}function _O(u,f,m){if((m&4194048)!==0){var v=f.lanes;v&=u.pendingLanes,m|=v,f.lanes=m,Ua(u,m)}}var dy={readContext:Gs,use:iy,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useLayoutEffect:Fr,useInsertionEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useSyncExternalStore:Fr,useId:Fr,useHostTransitionStatus:Fr,useFormState:Fr,useActionState:Fr,useOptimistic:Fr,useMemoCache:Fr,useCacheRefresh:Fr},IO={readContext:Gs,use:iy,useCallback:function(u,f){return Ea().memoizedState=[u,f===void 0?null:f],u},useContext:Gs,useEffect:fO,useImperativeHandle:function(u,f,m){m=m!=null?m.concat([u]):null,cy(4194308,4,gO.bind(null,f,u),m)},useLayoutEffect:function(u,f){return cy(4194308,4,u,f)},useInsertionEffect:function(u,f){cy(4,2,u,f)},useMemo:function(u,f){var m=Ea();f=f===void 0?null:f;var v=u();if(Uu){Ut(!0);try{u()}finally{Ut(!1)}}return m.memoizedState=[v,f],v},useReducer:function(u,f,m){var v=Ea();if(m!==void 0){var E=m(f);if(Uu){Ut(!0);try{m(f)}finally{Ut(!1)}}}else E=f;return v.memoizedState=v.baseState=E,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:E},v.queue=u,u=u.dispatch=eH.bind(null,an,u),[v.memoizedState,u]},useRef:function(u){var f=Ea();return u={current:u},f.memoizedState=u},useState:function(u){u=sN(u);var f=u.queue,m=EO.bind(null,an,f);return f.dispatch=m,[u.memoizedState,m]},useDebugValue:iN,useDeferredValue:function(u,f){var m=Ea();return oN(m,u,f)},useTransition:function(){var u=sN(!1);return u=wO.bind(null,an,u.queue,!0,!1),Ea().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,m){var v=an,E=Ea();if(Tn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),or===null)throw Error(r(349));(yn&124)!==0||YR(v,f,m)}E.memoizedState=m;var R={value:m,getSnapshot:f};return E.queue=R,fO(ZR.bind(null,v,R,u),[u]),v.flags|=2048,_f(9,ly(),QR.bind(null,v,R,m,f),null),m},useId:function(){var u=Ea(),f=or.identifierPrefix;if(Tn){var m=hl,v=fl;m=(v&~(1<<32-we(v)-1)).toString(32)+m,f=""+f+"R"+m,m=ay++,0<m&&(f+="H"+m.toString(32)),f+=""}else m=K9++,f=""+f+"r"+m.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:cN,useFormState:oO,useActionState:oO,useOptimistic:function(u){var f=Ea();f.memoizedState=f.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=uN.bind(null,an,!0,m),m.dispatch=f,[u,f]},useMemoCache:tN,useCacheRefresh:function(){return Ea().memoizedState=J9.bind(null,an)}},AO={readContext:Gs,use:iy,useCallback:yO,useContext:Gs,useEffect:hO,useImperativeHandle:xO,useInsertionEffect:pO,useLayoutEffect:mO,useMemo:bO,useReducer:oy,useRef:dO,useState:function(){return oy(gl)},useDebugValue:iN,useDeferredValue:function(u,f){var m=Gr();return vO(m,Hn.memoizedState,u,f)},useTransition:function(){var u=oy(gl)[0],f=Gr().memoizedState;return[typeof u=="boolean"?u:Am(u),f]},useSyncExternalStore:XR,useId:NO,useHostTransitionStatus:cN,useFormState:lO,useActionState:lO,useOptimistic:function(u,f){var m=Gr();return tO(m,Hn,u,f)},useMemoCache:tN,useCacheRefresh:CO},tH={readContext:Gs,use:iy,useCallback:yO,useContext:Gs,useEffect:hO,useImperativeHandle:xO,useInsertionEffect:pO,useLayoutEffect:mO,useMemo:bO,useReducer:rN,useRef:dO,useState:function(){return rN(gl)},useDebugValue:iN,useDeferredValue:function(u,f){var m=Gr();return Hn===null?oN(m,u,f):vO(m,Hn.memoizedState,u,f)},useTransition:function(){var u=rN(gl)[0],f=Gr().memoizedState;return[typeof u=="boolean"?u:Am(u),f]},useSyncExternalStore:XR,useId:NO,useHostTransitionStatus:cN,useFormState:uO,useActionState:uO,useOptimistic:function(u,f){var m=Gr();return Hn!==null?tO(m,Hn,u,f):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:tN,useCacheRefresh:CO},If=null,Om=0;function fy(u){var f=Om;return Om+=1,If===null&&(If=[]),zR(If,u,f)}function Dm(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function hy(u,f){throw f.$$typeof===h?Error(r(525)):(u=Object.prototype.toString.call(f),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function $O(u){var f=u._init;return f(u._payload)}function RO(u){function f(Se,ve){if(u){var Ee=Se.deletions;Ee===null?(Se.deletions=[ve],Se.flags|=16):Ee.push(ve)}}function m(Se,ve){if(!u)return null;for(;ve!==null;)f(Se,ve),ve=ve.sibling;return null}function v(Se){for(var ve=new Map;Se!==null;)Se.key!==null?ve.set(Se.key,Se):ve.set(Se.index,Se),Se=Se.sibling;return ve}function E(Se,ve){return Se=dl(Se,ve),Se.index=0,Se.sibling=null,Se}function R(Se,ve,Ee){return Se.index=Ee,u?(Ee=Se.alternate,Ee!==null?(Ee=Ee.index,Ee<ve?(Se.flags|=67108866,ve):Ee):(Se.flags|=67108866,ve)):(Se.flags|=1048576,ve)}function H(Se){return u&&Se.alternate===null&&(Se.flags|=67108866),Se}function re(Se,ve,Ee,qe){return ve===null||ve.tag!==6?(ve=$T(Ee,Se.mode,qe),ve.return=Se,ve):(ve=E(ve,Ee),ve.return=Se,ve)}function fe(Se,ve,Ee,qe){var Ct=Ee.type;return Ct===x?We(Se,ve,Ee.props.children,qe,Ee.key):ve!==null&&(ve.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===A&&$O(Ct)===ve.type)?(ve=E(ve,Ee.props),Dm(ve,Ee),ve.return=Se,ve):(ve=X1(Ee.type,Ee.key,Ee.props,null,Se.mode,qe),Dm(ve,Ee),ve.return=Se,ve)}function _e(Se,ve,Ee,qe){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ee.containerInfo||ve.stateNode.implementation!==Ee.implementation?(ve=RT(Ee,Se.mode,qe),ve.return=Se,ve):(ve=E(ve,Ee.children||[]),ve.return=Se,ve)}function We(Se,ve,Ee,qe,Ct){return ve===null||ve.tag!==7?(ve=Du(Ee,Se.mode,qe,Ct),ve.return=Se,ve):(ve=E(ve,Ee),ve.return=Se,ve)}function Ke(Se,ve,Ee){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=$T(""+ve,Se.mode,Ee),ve.return=Se,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case p:return Ee=X1(ve.type,ve.key,ve.props,null,Se.mode,Ee),Dm(Ee,ve),Ee.return=Se,Ee;case g:return ve=RT(ve,Se.mode,Ee),ve.return=Se,ve;case A:var qe=ve._init;return ve=qe(ve._payload),Ke(Se,ve,Ee)}if(q(ve)||P(ve))return ve=Du(ve,Se.mode,Ee,null),ve.return=Se,ve;if(typeof ve.then=="function")return Ke(Se,fy(ve),Ee);if(ve.$$typeof===N)return Ke(Se,J1(Se,ve),Ee);hy(Se,ve)}return null}function Re(Se,ve,Ee,qe){var Ct=ve!==null?ve.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ct!==null?null:re(Se,ve,""+Ee,qe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case p:return Ee.key===Ct?fe(Se,ve,Ee,qe):null;case g:return Ee.key===Ct?_e(Se,ve,Ee,qe):null;case A:return Ct=Ee._init,Ee=Ct(Ee._payload),Re(Se,ve,Ee,qe)}if(q(Ee)||P(Ee))return Ct!==null?null:We(Se,ve,Ee,qe,null);if(typeof Ee.then=="function")return Re(Se,ve,fy(Ee),qe);if(Ee.$$typeof===N)return Re(Se,ve,J1(Se,Ee),qe);hy(Se,Ee)}return null}function De(Se,ve,Ee,qe,Ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Se=Se.get(Ee)||null,re(ve,Se,""+qe,Ct);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case p:return Se=Se.get(qe.key===null?Ee:qe.key)||null,fe(ve,Se,qe,Ct);case g:return Se=Se.get(qe.key===null?Ee:qe.key)||null,_e(ve,Se,qe,Ct);case A:var cn=qe._init;return qe=cn(qe._payload),De(Se,ve,Ee,qe,Ct)}if(q(qe)||P(qe))return Se=Se.get(Ee)||null,We(ve,Se,qe,Ct,null);if(typeof qe.then=="function")return De(Se,ve,Ee,fy(qe),Ct);if(qe.$$typeof===N)return De(Se,ve,Ee,J1(ve,qe),Ct);hy(ve,qe)}return null}function Wt(Se,ve,Ee,qe){for(var Ct=null,cn=null,Ot=ve,Bt=ve=0,ys=null;Ot!==null&&Bt<Ee.length;Bt++){Ot.index>Bt?(ys=Ot,Ot=null):ys=Ot.sibling;var wn=Re(Se,Ot,Ee[Bt],qe);if(wn===null){Ot===null&&(Ot=ys);break}u&&Ot&&wn.alternate===null&&f(Se,Ot),ve=R(wn,ve,Bt),cn===null?Ct=wn:cn.sibling=wn,cn=wn,Ot=ys}if(Bt===Ee.length)return m(Se,Ot),Tn&&Lu(Se,Bt),Ct;if(Ot===null){for(;Bt<Ee.length;Bt++)Ot=Ke(Se,Ee[Bt],qe),Ot!==null&&(ve=R(Ot,ve,Bt),cn===null?Ct=Ot:cn.sibling=Ot,cn=Ot);return Tn&&Lu(Se,Bt),Ct}for(Ot=v(Ot);Bt<Ee.length;Bt++)ys=De(Ot,Se,Bt,Ee[Bt],qe),ys!==null&&(u&&ys.alternate!==null&&Ot.delete(ys.key===null?Bt:ys.key),ve=R(ys,ve,Bt),cn===null?Ct=ys:cn.sibling=ys,cn=ys);return u&&Ot.forEach(function(Fc){return f(Se,Fc)}),Tn&&Lu(Se,Bt),Ct}function Pt(Se,ve,Ee,qe){if(Ee==null)throw Error(r(151));for(var Ct=null,cn=null,Ot=ve,Bt=ve=0,ys=null,wn=Ee.next();Ot!==null&&!wn.done;Bt++,wn=Ee.next()){Ot.index>Bt?(ys=Ot,Ot=null):ys=Ot.sibling;var Fc=Re(Se,Ot,wn.value,qe);if(Fc===null){Ot===null&&(Ot=ys);break}u&&Ot&&Fc.alternate===null&&f(Se,Ot),ve=R(Fc,ve,Bt),cn===null?Ct=Fc:cn.sibling=Fc,cn=Fc,Ot=ys}if(wn.done)return m(Se,Ot),Tn&&Lu(Se,Bt),Ct;if(Ot===null){for(;!wn.done;Bt++,wn=Ee.next())wn=Ke(Se,wn.value,qe),wn!==null&&(ve=R(wn,ve,Bt),cn===null?Ct=wn:cn.sibling=wn,cn=wn);return Tn&&Lu(Se,Bt),Ct}for(Ot=v(Ot);!wn.done;Bt++,wn=Ee.next())wn=De(Ot,Se,Bt,wn.value,qe),wn!==null&&(u&&wn.alternate!==null&&Ot.delete(wn.key===null?Bt:wn.key),ve=R(wn,ve,Bt),cn===null?Ct=wn:cn.sibling=wn,cn=wn);return u&&Ot.forEach(function(nG){return f(Se,nG)}),Tn&&Lu(Se,Bt),Ct}function qn(Se,ve,Ee,qe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===x&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case p:e:{for(var Ct=Ee.key;ve!==null;){if(ve.key===Ct){if(Ct=Ee.type,Ct===x){if(ve.tag===7){m(Se,ve.sibling),qe=E(ve,Ee.props.children),qe.return=Se,Se=qe;break e}}else if(ve.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===A&&$O(Ct)===ve.type){m(Se,ve.sibling),qe=E(ve,Ee.props),Dm(qe,Ee),qe.return=Se,Se=qe;break e}m(Se,ve);break}else f(Se,ve);ve=ve.sibling}Ee.type===x?(qe=Du(Ee.props.children,Se.mode,qe,Ee.key),qe.return=Se,Se=qe):(qe=X1(Ee.type,Ee.key,Ee.props,null,Se.mode,qe),Dm(qe,Ee),qe.return=Se,Se=qe)}return H(Se);case g:e:{for(Ct=Ee.key;ve!==null;){if(ve.key===Ct)if(ve.tag===4&&ve.stateNode.containerInfo===Ee.containerInfo&&ve.stateNode.implementation===Ee.implementation){m(Se,ve.sibling),qe=E(ve,Ee.children||[]),qe.return=Se,Se=qe;break e}else{m(Se,ve);break}else f(Se,ve);ve=ve.sibling}qe=RT(Ee,Se.mode,qe),qe.return=Se,Se=qe}return H(Se);case A:return Ct=Ee._init,Ee=Ct(Ee._payload),qn(Se,ve,Ee,qe)}if(q(Ee))return Wt(Se,ve,Ee,qe);if(P(Ee)){if(Ct=P(Ee),typeof Ct!="function")throw Error(r(150));return Ee=Ct.call(Ee),Pt(Se,ve,Ee,qe)}if(typeof Ee.then=="function")return qn(Se,ve,fy(Ee),qe);if(Ee.$$typeof===N)return qn(Se,ve,J1(Se,Ee),qe);hy(Se,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,ve!==null&&ve.tag===6?(m(Se,ve.sibling),qe=E(ve,Ee),qe.return=Se,Se=qe):(m(Se,ve),qe=$T(Ee,Se.mode,qe),qe.return=Se,Se=qe),H(Se)):m(Se,ve)}return function(Se,ve,Ee,qe){try{Om=0;var Ct=qn(Se,ve,Ee,qe);return If=null,Ct}catch(Ot){if(Ot===Nm||Ot===ty)throw Ot;var cn=Wa(29,Ot,null,Se.mode);return cn.lanes=qe,cn.return=Se,cn}finally{}}}var Af=RO(!0),OO=RO(!1),vi=J(null),No=null;function vc(u){var f=u.alternate;z(is,is.current&1),z(vi,u),No===null&&(f===null||Cf.current!==null||f.memoizedState!==null)&&(No=u)}function DO(u){if(u.tag===22){if(z(is,is.current),z(vi,u),No===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(No=u)}}else wc()}function wc(){z(is,is.current),z(vi,vi.current)}function xl(u){M(vi),No===u&&(No=null),M(is)}var is=J(0);function py(u){for(var f=u;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||eC(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function dN(u,f,m,v){f=u.memoizedState,m=m(v,f),m=m==null?f:d({},f,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var fN={enqueueSetState:function(u,f,m){u=u._reactInternals;var v=Ka(),E=xc(v);E.payload=f,m!=null&&(E.callback=m),f=yc(u,E,v),f!==null&&(Xa(f,u,v),Em(f,u,v))},enqueueReplaceState:function(u,f,m){u=u._reactInternals;var v=Ka(),E=xc(v);E.tag=1,E.payload=f,m!=null&&(E.callback=m),f=yc(u,E,v),f!==null&&(Xa(f,u,v),Em(f,u,v))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var m=Ka(),v=xc(m);v.tag=2,f!=null&&(v.callback=f),f=yc(u,v,m),f!==null&&(Xa(f,u,m),Em(f,u,m))}};function FO(u,f,m,v,E,R,H){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(v,R,H):f.prototype&&f.prototype.isPureReactComponent?!gm(m,v)||!gm(E,R):!0}function LO(u,f,m,v){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,v),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,v),f.state!==u&&fN.enqueueReplaceState(f,f.state,null)}function Vu(u,f){var m=f;if("ref"in f){m={};for(var v in f)v!=="ref"&&(m[v]=f[v])}if(u=u.defaultProps){m===f&&(m=d({},m));for(var E in u)m[E]===void 0&&(m[E]=u[E])}return m}var my=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function MO(u){my(u)}function PO(u){console.error(u)}function BO(u){my(u)}function gy(u,f){try{var m=u.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(v){setTimeout(function(){throw v})}}function jO(u,f,m){try{var v=u.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function hN(u,f,m){return m=xc(m),m.tag=3,m.payload={element:null},m.callback=function(){gy(u,f)},m}function zO(u){return u=xc(u),u.tag=3,u}function UO(u,f,m,v){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var R=v.value;u.payload=function(){return E(R)},u.callback=function(){jO(f,m,v)}}var H=m.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(u.callback=function(){jO(f,m,v),typeof E!="function"&&(kc===null?kc=new Set([this]):kc.add(this));var re=v.stack;this.componentDidCatch(v.value,{componentStack:re!==null?re:""})})}function nH(u,f,m,v,E){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(f=m.alternate,f!==null&&wm(f,m,E,!0),m=vi.current,m!==null){switch(m.tag){case 13:return No===null?MN():m.alternate===null&&Nr===0&&(Nr=3),m.flags&=-257,m.flags|=65536,m.lanes=E,v===UT?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([v]):f.add(v),BN(u,v,E)),!1;case 22:return m.flags|=65536,v===UT?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([v]):m.add(v)),BN(u,v,E)),!1}throw Error(r(435,m.tag))}return BN(u,v,E),MN(),!1}if(Tn)return f=vi.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,v!==FT&&(u=Error(r(422),{cause:v}),vm(gi(u,m)))):(v!==FT&&(f=Error(r(423),{cause:v}),vm(gi(f,m))),u=u.current.alternate,u.flags|=65536,E&=-E,u.lanes|=E,v=gi(v,m),E=hN(u.stateNode,v,E),HT(u,E),Nr!==4&&(Nr=2)),!1;var R=Error(r(520),{cause:v});if(R=gi(R,m),zm===null?zm=[R]:zm.push(R),Nr!==4&&(Nr=2),f===null)return!0;v=gi(v,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,u=E&-E,m.lanes|=u,u=hN(m.stateNode,v,u),HT(m,u),!1;case 1:if(f=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(kc===null||!kc.has(R))))return m.flags|=65536,E&=-E,m.lanes|=E,E=zO(E),UO(E,u,m,v),HT(m,E),!1}m=m.return}while(m!==null);return!1}var VO=Error(r(461)),gs=!1;function Rs(u,f,m,v){f.child=u===null?OO(f,null,m,v):Af(f,u.child,m,v)}function WO(u,f,m,v,E){m=m.render;var R=f.ref;if("ref"in v){var H={};for(var re in v)re!=="ref"&&(H[re]=v[re])}else H=v;return ju(f),v=YT(u,f,m,H,R,E),re=QT(),u!==null&&!gs?(ZT(u,f,E),yl(u,f,E)):(Tn&&re&&OT(f),f.flags|=1,Rs(u,f,v,E),f.child)}function HO(u,f,m,v,E){if(u===null){var R=m.type;return typeof R=="function"&&!AT(R)&&R.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=R,GO(u,f,R,v,E)):(u=X1(m.type,null,v,f,f.mode,E),u.ref=f.ref,u.return=f,f.child=u)}if(R=u.child,!wN(u,E)){var H=R.memoizedProps;if(m=m.compare,m=m!==null?m:gm,m(H,v)&&u.ref===f.ref)return yl(u,f,E)}return f.flags|=1,u=dl(R,v),u.ref=f.ref,u.return=f,f.child=u}function GO(u,f,m,v,E){if(u!==null){var R=u.memoizedProps;if(gm(R,v)&&u.ref===f.ref)if(gs=!1,f.pendingProps=v=R,wN(u,E))(u.flags&131072)!==0&&(gs=!0);else return f.lanes=u.lanes,yl(u,f,E)}return pN(u,f,m,v,E)}function qO(u,f,m){var v=f.pendingProps,E=v.children,R=u!==null?u.memoizedState:null;if(v.mode==="hidden"){if((f.flags&128)!==0){if(v=R!==null?R.baseLanes|m:m,u!==null){for(E=f.child=u.child,R=0;E!==null;)R=R|E.lanes|E.childLanes,E=E.sibling;f.childLanes=R&~v}else f.childLanes=0,f.child=null;return KO(u,f,v,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&ey(f,R!==null?R.cachePool:null),R!==null?GR(f,R):qT(),DO(f);else return f.lanes=f.childLanes=536870912,KO(u,f,R!==null?R.baseLanes|m:m,m)}else R!==null?(ey(f,R.cachePool),GR(f,R),wc(),f.memoizedState=null):(u!==null&&ey(f,null),qT(),wc());return Rs(u,f,E,m),f.child}function KO(u,f,m,v){var E=zT();return E=E===null?null:{parent:as._currentValue,pool:E},f.memoizedState={baseLanes:m,cachePool:E},u!==null&&ey(f,null),qT(),DO(f),u!==null&&wm(u,f,v,!0),null}function xy(u,f){var m=f.ref;if(m===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(f.flags|=4194816)}}function pN(u,f,m,v,E){return ju(f),m=YT(u,f,m,v,void 0,E),v=QT(),u!==null&&!gs?(ZT(u,f,E),yl(u,f,E)):(Tn&&v&&OT(f),f.flags|=1,Rs(u,f,m,E),f.child)}function XO(u,f,m,v,E,R){return ju(f),f.updateQueue=null,m=KR(f,v,m,E),qR(u),v=QT(),u!==null&&!gs?(ZT(u,f,R),yl(u,f,R)):(Tn&&v&&OT(f),f.flags|=1,Rs(u,f,m,R),f.child)}function YO(u,f,m,v,E){if(ju(f),f.stateNode===null){var R=vf,H=m.contextType;typeof H=="object"&&H!==null&&(R=Gs(H)),R=new m(v,R),f.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=fN,f.stateNode=R,R._reactInternals=f,R=f.stateNode,R.props=v,R.state=f.memoizedState,R.refs={},VT(f),H=m.contextType,R.context=typeof H=="object"&&H!==null?Gs(H):vf,R.state=f.memoizedState,H=m.getDerivedStateFromProps,typeof H=="function"&&(dN(f,m,H,v),R.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(H=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),H!==R.state&&fN.enqueueReplaceState(R,R.state,null),_m(f,v,R,E),km(),R.state=f.memoizedState),typeof R.componentDidMount=="function"&&(f.flags|=4194308),v=!0}else if(u===null){R=f.stateNode;var re=f.memoizedProps,fe=Vu(m,re);R.props=fe;var _e=R.context,We=m.contextType;H=vf,typeof We=="object"&&We!==null&&(H=Gs(We));var Ke=m.getDerivedStateFromProps;We=typeof Ke=="function"||typeof R.getSnapshotBeforeUpdate=="function",re=f.pendingProps!==re,We||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(re||_e!==H)&&LO(f,R,v,H),gc=!1;var Re=f.memoizedState;R.state=Re,_m(f,v,R,E),km(),_e=f.memoizedState,re||Re!==_e||gc?(typeof Ke=="function"&&(dN(f,m,Ke,v),_e=f.memoizedState),(fe=gc||FO(f,m,fe,v,Re,_e,H))?(We||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(f.flags|=4194308)):(typeof R.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=v,f.memoizedState=_e),R.props=v,R.state=_e,R.context=H,v=fe):(typeof R.componentDidMount=="function"&&(f.flags|=4194308),v=!1)}else{R=f.stateNode,WT(u,f),H=f.memoizedProps,We=Vu(m,H),R.props=We,Ke=f.pendingProps,Re=R.context,_e=m.contextType,fe=vf,typeof _e=="object"&&_e!==null&&(fe=Gs(_e)),re=m.getDerivedStateFromProps,(_e=typeof re=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(H!==Ke||Re!==fe)&&LO(f,R,v,fe),gc=!1,Re=f.memoizedState,R.state=Re,_m(f,v,R,E),km();var De=f.memoizedState;H!==Ke||Re!==De||gc||u!==null&&u.dependencies!==null&&Z1(u.dependencies)?(typeof re=="function"&&(dN(f,m,re,v),De=f.memoizedState),(We=gc||FO(f,m,We,v,Re,De,fe)||u!==null&&u.dependencies!==null&&Z1(u.dependencies))?(_e||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(v,De,fe),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(v,De,fe)),typeof R.componentDidUpdate=="function"&&(f.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof R.componentDidUpdate!="function"||H===u.memoizedProps&&Re===u.memoizedState||(f.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===u.memoizedProps&&Re===u.memoizedState||(f.flags|=1024),f.memoizedProps=v,f.memoizedState=De),R.props=v,R.state=De,R.context=fe,v=We):(typeof R.componentDidUpdate!="function"||H===u.memoizedProps&&Re===u.memoizedState||(f.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||H===u.memoizedProps&&Re===u.memoizedState||(f.flags|=1024),v=!1)}return R=v,xy(u,f),v=(f.flags&128)!==0,R||v?(R=f.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:R.render(),f.flags|=1,u!==null&&v?(f.child=Af(f,u.child,null,E),f.child=Af(f,null,m,E)):Rs(u,f,m,E),f.memoizedState=R.state,u=f.child):u=yl(u,f,E),u}function QO(u,f,m,v){return bm(),f.flags|=256,Rs(u,f,m,v),f.child}var mN={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gN(u){return{baseLanes:u,cachePool:PR()}}function xN(u,f,m){return u=u!==null?u.childLanes&~m:0,f&&(u|=wi),u}function ZO(u,f,m){var v=f.pendingProps,E=!1,R=(f.flags&128)!==0,H;if((H=R)||(H=u!==null&&u.memoizedState===null?!1:(is.current&2)!==0),H&&(E=!0,f.flags&=-129),H=(f.flags&32)!==0,f.flags&=-33,u===null){if(Tn){if(E?vc(f):wc(),Tn){var re=Tr,fe;if(fe=re){e:{for(fe=re,re=To;fe.nodeType!==8;){if(!re){re=null;break e}if(fe=Xi(fe.nextSibling),fe===null){re=null;break e}}re=fe}re!==null?(f.memoizedState={dehydrated:re,treeContext:Fu!==null?{id:fl,overflow:hl}:null,retryLane:536870912,hydrationErrors:null},fe=Wa(18,null,null,0),fe.stateNode=re,fe.return=f,f.child=fe,la=f,Tr=null,fe=!0):fe=!1}fe||Pu(f)}if(re=f.memoizedState,re!==null&&(re=re.dehydrated,re!==null))return eC(re)?f.lanes=32:f.lanes=536870912,null;xl(f)}return re=v.children,v=v.fallback,E?(wc(),E=f.mode,re=yy({mode:"hidden",children:re},E),v=Du(v,E,m,null),re.return=f,v.return=f,re.sibling=v,f.child=re,E=f.child,E.memoizedState=gN(m),E.childLanes=xN(u,H,m),f.memoizedState=mN,v):(vc(f),yN(f,re))}if(fe=u.memoizedState,fe!==null&&(re=fe.dehydrated,re!==null)){if(R)f.flags&256?(vc(f),f.flags&=-257,f=bN(u,f,m)):f.memoizedState!==null?(wc(),f.child=u.child,f.flags|=128,f=null):(wc(),E=v.fallback,re=f.mode,v=yy({mode:"visible",children:v.children},re),E=Du(E,re,m,null),E.flags|=2,v.return=f,E.return=f,v.sibling=E,f.child=v,Af(f,u.child,null,m),v=f.child,v.memoizedState=gN(m),v.childLanes=xN(u,H,m),f.memoizedState=mN,f=E);else if(vc(f),eC(re)){if(H=re.nextSibling&&re.nextSibling.dataset,H)var _e=H.dgst;H=_e,v=Error(r(419)),v.stack="",v.digest=H,vm({value:v,source:null,stack:null}),f=bN(u,f,m)}else if(gs||wm(u,f,m,!1),H=(m&u.childLanes)!==0,gs||H){if(H=or,H!==null&&(v=m&-m,v=(v&42)!==0?1:dc(v),v=(v&(H.suspendedLanes|m))!==0?0:v,v!==0&&v!==fe.retryLane))throw fe.retryLane=v,bf(u,v),Xa(H,u,v),VO;re.data==="$?"||MN(),f=bN(u,f,m)}else re.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=fe.treeContext,Tr=Xi(re.nextSibling),la=f,Tn=!0,Mu=null,To=!1,u!==null&&(yi[bi++]=fl,yi[bi++]=hl,yi[bi++]=Fu,fl=u.id,hl=u.overflow,Fu=f),f=yN(f,v.children),f.flags|=4096);return f}return E?(wc(),E=v.fallback,re=f.mode,fe=u.child,_e=fe.sibling,v=dl(fe,{mode:"hidden",children:v.children}),v.subtreeFlags=fe.subtreeFlags&65011712,_e!==null?E=dl(_e,E):(E=Du(E,re,m,null),E.flags|=2),E.return=f,v.return=f,v.sibling=E,f.child=v,v=E,E=f.child,re=u.child.memoizedState,re===null?re=gN(m):(fe=re.cachePool,fe!==null?(_e=as._currentValue,fe=fe.parent!==_e?{parent:_e,pool:_e}:fe):fe=PR(),re={baseLanes:re.baseLanes|m,cachePool:fe}),E.memoizedState=re,E.childLanes=xN(u,H,m),f.memoizedState=mN,v):(vc(f),m=u.child,u=m.sibling,m=dl(m,{mode:"visible",children:v.children}),m.return=f,m.sibling=null,u!==null&&(H=f.deletions,H===null?(f.deletions=[u],f.flags|=16):H.push(u)),f.child=m,f.memoizedState=null,m)}function yN(u,f){return f=yy({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function yy(u,f){return u=Wa(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function bN(u,f,m){return Af(f,u.child,null,m),u=yN(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function JO(u,f,m){u.lanes|=f;var v=u.alternate;v!==null&&(v.lanes|=f),MT(u.return,f,m)}function vN(u,f,m,v,E){var R=u.memoizedState;R===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:E}:(R.isBackwards=f,R.rendering=null,R.renderingStartTime=0,R.last=v,R.tail=m,R.tailMode=E)}function eD(u,f,m){var v=f.pendingProps,E=v.revealOrder,R=v.tail;if(Rs(u,f,v.children,m),v=is.current,(v&2)!==0)v=v&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&JO(u,m,f);else if(u.tag===19)JO(u,m,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}v&=1}switch(z(is,v),E){case"forwards":for(m=f.child,E=null;m!==null;)u=m.alternate,u!==null&&py(u)===null&&(E=m),m=m.sibling;m=E,m===null?(E=f.child,f.child=null):(E=m.sibling,m.sibling=null),vN(f,!1,E,m,R);break;case"backwards":for(m=null,E=f.child,f.child=null;E!==null;){if(u=E.alternate,u!==null&&py(u)===null){f.child=E;break}u=E.sibling,E.sibling=m,m=E,E=u}vN(f,!0,m,null,R);break;case"together":vN(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function yl(u,f,m){if(u!==null&&(f.dependencies=u.dependencies),Ec|=f.lanes,(m&f.childLanes)===0)if(u!==null){if(wm(u,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(r(153));if(f.child!==null){for(u=f.child,m=dl(u,u.pendingProps),f.child=m,m.return=f;u.sibling!==null;)u=u.sibling,m=m.sibling=dl(u,u.pendingProps),m.return=f;m.sibling=null}return f.child}function wN(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Z1(u)))}function rH(u,f,m){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),mc(f,as,u.memoizedState.cache),bm();break;case 27:case 5:ge(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:mc(f,f.type,f.memoizedProps.value);break;case 13:var v=f.memoizedState;if(v!==null)return v.dehydrated!==null?(vc(f),f.flags|=128,null):(m&f.child.childLanes)!==0?ZO(u,f,m):(vc(f),u=yl(u,f,m),u!==null?u.sibling:null);vc(f);break;case 19:var E=(u.flags&128)!==0;if(v=(m&f.childLanes)!==0,v||(wm(u,f,m,!1),v=(m&f.childLanes)!==0),E){if(v)return eD(u,f,m);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),z(is,is.current),v)break;return null;case 22:case 23:return f.lanes=0,qO(u,f,m);case 24:mc(f,as,u.memoizedState.cache)}return yl(u,f,m)}function tD(u,f,m){if(u!==null)if(u.memoizedProps!==f.pendingProps)gs=!0;else{if(!wN(u,m)&&(f.flags&128)===0)return gs=!1,rH(u,f,m);gs=(u.flags&131072)!==0}else gs=!1,Tn&&(f.flags&1048576)!==0&&$R(f,Q1,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var v=f.elementType,E=v._init;if(v=E(v._payload),f.type=v,typeof v=="function")AT(v)?(u=Vu(v,u),f.tag=1,f=YO(null,f,v,u,m)):(f.tag=0,f=pN(null,f,v,u,m));else{if(v!=null){if(E=v.$$typeof,E===C){f.tag=11,f=WO(null,f,v,u,m);break e}else if(E===D){f.tag=14,f=HO(null,f,v,u,m);break e}}throw f=K(v)||v,Error(r(306,f,""))}}return f;case 0:return pN(u,f,f.type,f.pendingProps,m);case 1:return v=f.type,E=Vu(v,f.pendingProps),YO(u,f,v,E,m);case 3:e:{if(me(f,f.stateNode.containerInfo),u===null)throw Error(r(387));v=f.pendingProps;var R=f.memoizedState;E=R.element,WT(u,f),_m(f,v,null,m);var H=f.memoizedState;if(v=H.cache,mc(f,as,v),v!==R.cache&&PT(f,[as],m,!0),km(),v=H.element,R.isDehydrated)if(R={element:v,isDehydrated:!1,cache:H.cache},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){f=QO(u,f,v,m);break e}else if(v!==E){E=gi(Error(r(424)),f),vm(E),f=QO(u,f,v,m);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Tr=Xi(u.firstChild),la=f,Tn=!0,Mu=null,To=!0,m=OO(f,null,v,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(bm(),v===E){f=yl(u,f,m);break e}Rs(u,f,v,m)}f=f.child}return f;case 26:return xy(u,f),u===null?(m=a3(f.type,null,f.pendingProps,null))?f.memoizedState=m:Tn||(m=f.type,u=f.pendingProps,v=Ry(se.current).createElement(m),v[wt]=f,v[Nt]=u,Ds(v,m,u),Ne(v),f.stateNode=v):f.memoizedState=a3(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return ge(f),u===null&&Tn&&(v=f.stateNode=n3(f.type,f.pendingProps,se.current),la=f,To=!0,E=Tr,Ac(f.type)?(tC=E,Tr=Xi(v.firstChild)):Tr=E),Rs(u,f,f.pendingProps.children,m),xy(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Tn&&((E=v=Tr)&&(v=$H(v,f.type,f.pendingProps,To),v!==null?(f.stateNode=v,la=f,Tr=Xi(v.firstChild),To=!1,E=!0):E=!1),E||Pu(f)),ge(f),E=f.type,R=f.pendingProps,H=u!==null?u.memoizedProps:null,v=R.children,QN(E,R)?v=null:H!==null&&QN(E,H)&&(f.flags|=32),f.memoizedState!==null&&(E=YT(u,f,X9,null,null,m),Ym._currentValue=E),xy(u,f),Rs(u,f,v,m),f.child;case 6:return u===null&&Tn&&((u=m=Tr)&&(m=RH(m,f.pendingProps,To),m!==null?(f.stateNode=m,la=f,Tr=null,u=!0):u=!1),u||Pu(f)),null;case 13:return ZO(u,f,m);case 4:return me(f,f.stateNode.containerInfo),v=f.pendingProps,u===null?f.child=Af(f,null,v,m):Rs(u,f,v,m),f.child;case 11:return WO(u,f,f.type,f.pendingProps,m);case 7:return Rs(u,f,f.pendingProps,m),f.child;case 8:return Rs(u,f,f.pendingProps.children,m),f.child;case 12:return Rs(u,f,f.pendingProps.children,m),f.child;case 10:return v=f.pendingProps,mc(f,f.type,v.value),Rs(u,f,v.children,m),f.child;case 9:return E=f.type._context,v=f.pendingProps.children,ju(f),E=Gs(E),v=v(E),f.flags|=1,Rs(u,f,v,m),f.child;case 14:return HO(u,f,f.type,f.pendingProps,m);case 15:return GO(u,f,f.type,f.pendingProps,m);case 19:return eD(u,f,m);case 31:return v=f.pendingProps,m=f.mode,v={mode:v.mode,children:v.children},u===null?(m=yy(v,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=dl(u.child,v),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return qO(u,f,m);case 24:return ju(f),v=Gs(as),u===null?(E=zT(),E===null&&(E=or,R=BT(),E.pooledCache=R,R.refCount++,R!==null&&(E.pooledCacheLanes|=m),E=R),f.memoizedState={parent:v,cache:E},VT(f),mc(f,as,E)):((u.lanes&m)!==0&&(WT(u,f),_m(f,null,null,m),km()),E=u.memoizedState,R=f.memoizedState,E.parent!==v?(E={parent:v,cache:v},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),mc(f,as,v)):(v=R.cache,mc(f,as,v),v!==E.cache&&PT(f,[as],m,!0))),Rs(u,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function bl(u){u.flags|=4}function nD(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!u3(f)){if(f=vi.current,f!==null&&((yn&4194048)===yn?No!==null:(yn&62914560)!==yn&&(yn&536870912)===0||f!==No))throw Cm=UT,BR;u.flags|=8192}}function by(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?oa():536870912,u.lanes|=f,Df|=f)}function Fm(u,f){if(!Tn)switch(u.tailMode){case"hidden":f=u.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:v.sibling=null}}function br(u){var f=u.alternate!==null&&u.alternate.child===u.child,m=0,v=0;if(f)for(var E=u.child;E!==null;)m|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)m|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=v,u.childLanes=m,f}function sH(u,f,m){var v=f.pendingProps;switch(DT(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(f),null;case 1:return br(f),null;case 3:return m=f.stateNode,v=null,u!==null&&(v=u.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),ml(as),be(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(ym(f)?bl(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,DR())),br(f),null;case 26:return m=f.memoizedState,u===null?(bl(f),m!==null?(br(f),nD(f,m)):(br(f),f.flags&=-16777217)):m?m!==u.memoizedState?(bl(f),br(f),nD(f,m)):(br(f),f.flags&=-16777217):(u.memoizedProps!==v&&bl(f),br(f),f.flags&=-16777217),null;case 27:ke(f),m=se.current;var E=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==v&&bl(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return br(f),null}u=G.current,ym(f)?RR(f):(u=n3(E,v,m),f.stateNode=u,bl(f))}return br(f),null;case 5:if(ke(f),m=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==v&&bl(f);else{if(!v){if(f.stateNode===null)throw Error(r(166));return br(f),null}if(u=G.current,ym(f))RR(f);else{switch(E=Ry(se.current),u){case 1:u=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=E.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof v.is=="string"?E.createElement("select",{is:v.is}):E.createElement("select"),v.multiple?u.multiple=!0:v.size&&(u.size=v.size);break;default:u=typeof v.is=="string"?E.createElement(m,{is:v.is}):E.createElement(m)}}u[wt]=f,u[Nt]=v;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)u.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=u;e:switch(Ds(u,m,v),m){case"button":case"input":case"select":case"textarea":u=!!v.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&bl(f)}}return br(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==v&&bl(f);else{if(typeof v!="string"&&f.stateNode===null)throw Error(r(166));if(u=se.current,ym(f)){if(u=f.stateNode,m=f.memoizedProps,v=null,E=la,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}u[wt]=f,u=!!(u.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||XD(u.nodeValue,m)),u||Pu(f)}else u=Ry(u).createTextNode(v),u[wt]=f,f.stateNode=u}return br(f),null;case 13:if(v=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(E=ym(f),v!==null&&v.dehydrated!==null){if(u===null){if(!E)throw Error(r(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[wt]=f}else bm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;br(f),E=!1}else E=DR(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(xl(f),f):(xl(f),null)}if(xl(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=v!==null,u=u!==null&&u.memoizedState!==null,m){v=f.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool);var R=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(R=v.memoizedState.cachePool.pool),R!==E&&(v.flags|=2048)}return m!==u&&m&&(f.child.flags|=8192),by(f,f.updateQueue),br(f),null;case 4:return be(),u===null&&GN(f.stateNode.containerInfo),br(f),null;case 10:return ml(f.type),br(f),null;case 19:if(M(is),E=f.memoizedState,E===null)return br(f),null;if(v=(f.flags&128)!==0,R=E.rendering,R===null)if(v)Fm(E,!1);else{if(Nr!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(R=py(u),R!==null){for(f.flags|=128,Fm(E,!1),u=R.updateQueue,f.updateQueue=u,by(f,u),f.subtreeFlags=0,u=m,m=f.child;m!==null;)AR(m,u),m=m.sibling;return z(is,is.current&1|2),f.child}u=u.sibling}E.tail!==null&&ne()>Sy&&(f.flags|=128,v=!0,Fm(E,!1),f.lanes=4194304)}else{if(!v)if(u=py(R),u!==null){if(f.flags|=128,v=!0,u=u.updateQueue,f.updateQueue=u,by(f,u),Fm(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!Tn)return br(f),null}else 2*ne()-E.renderingStartTime>Sy&&m!==536870912&&(f.flags|=128,v=!0,Fm(E,!1),f.lanes=4194304);E.isBackwards?(R.sibling=f.child,f.child=R):(u=E.last,u!==null?u.sibling=R:f.child=R,E.last=R)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=ne(),f.sibling=null,u=is.current,z(is,v?u&1|2:u&1),f):(br(f),null);case 22:case 23:return xl(f),KT(),v=f.memoizedState!==null,u!==null?u.memoizedState!==null!==v&&(f.flags|=8192):v&&(f.flags|=8192),v?(m&536870912)!==0&&(f.flags&128)===0&&(br(f),f.subtreeFlags&6&&(f.flags|=8192)):br(f),m=f.updateQueue,m!==null&&by(f,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),v=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==m&&(f.flags|=2048),u!==null&&M(zu),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),ml(as),br(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function aH(u,f){switch(DT(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return ml(as),be(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return ke(f),null;case 13:if(xl(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(r(340));bm()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return M(is),null;case 4:return be(),null;case 10:return ml(f.type),null;case 22:case 23:return xl(f),KT(),u!==null&&M(zu),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return ml(as),null;case 25:return null;default:return null}}function rD(u,f){switch(DT(f),f.tag){case 3:ml(as),be();break;case 26:case 27:case 5:ke(f);break;case 4:be();break;case 13:xl(f);break;case 19:M(is);break;case 10:ml(f.type);break;case 22:case 23:xl(f),KT(),u!==null&&M(zu);break;case 24:ml(as)}}function Lm(u,f){try{var m=f.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var E=v.next;m=E;do{if((m.tag&u)===u){v=void 0;var R=m.create,H=m.inst;v=R(),H.destroy=v}m=m.next}while(m!==E)}}catch(re){er(f,f.return,re)}}function Sc(u,f,m){try{var v=f.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var R=E.next;v=R;do{if((v.tag&u)===u){var H=v.inst,re=H.destroy;if(re!==void 0){H.destroy=void 0,E=f;var fe=m,_e=re;try{_e()}catch(We){er(E,fe,We)}}}v=v.next}while(v!==R)}}catch(We){er(f,f.return,We)}}function sD(u){var f=u.updateQueue;if(f!==null){var m=u.stateNode;try{HR(f,m)}catch(v){er(u,u.return,v)}}}function aD(u,f,m){m.props=Vu(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(v){er(u,f,v)}}function Mm(u,f){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var v=u.stateNode;break;case 30:v=u.stateNode;break;default:v=u.stateNode}typeof m=="function"?u.refCleanup=m(v):m.current=v}}catch(E){er(u,f,E)}}function Co(u,f){var m=u.ref,v=u.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(E){er(u,f,E)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){er(u,f,E)}else m.current=null}function iD(u){var f=u.type,m=u.memoizedProps,v=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(E){er(u,u.return,E)}}function SN(u,f,m){try{var v=u.stateNode;EH(v,u.type,m,f),v[Nt]=f}catch(E){er(u,u.return,E)}}function oD(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Ac(u.type)||u.tag===4}function TN(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||oD(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Ac(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function NN(u,f,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(u),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=$y));else if(v!==4&&(v===27&&Ac(u.type)&&(m=u.stateNode,f=null),u=u.child,u!==null))for(NN(u,f,m),u=u.sibling;u!==null;)NN(u,f,m),u=u.sibling}function vy(u,f,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,f?m.insertBefore(u,f):m.appendChild(u);else if(v!==4&&(v===27&&Ac(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(vy(u,f,m),u=u.sibling;u!==null;)vy(u,f,m),u=u.sibling}function lD(u){var f=u.stateNode,m=u.memoizedProps;try{for(var v=u.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);Ds(f,v,m),f[wt]=u,f[Nt]=m}catch(R){er(u,u.return,R)}}var vl=!1,Lr=!1,CN=!1,cD=typeof WeakSet=="function"?WeakSet:Set,xs=null;function iH(u,f){if(u=u.containerInfo,XN=Py,u=vR(u),TT(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var E=v.anchorOffset,R=v.focusNode;v=v.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var H=0,re=-1,fe=-1,_e=0,We=0,Ke=u,Re=null;t:for(;;){for(var De;Ke!==m||E!==0&&Ke.nodeType!==3||(re=H+E),Ke!==R||v!==0&&Ke.nodeType!==3||(fe=H+v),Ke.nodeType===3&&(H+=Ke.nodeValue.length),(De=Ke.firstChild)!==null;)Re=Ke,Ke=De;for(;;){if(Ke===u)break t;if(Re===m&&++_e===E&&(re=H),Re===R&&++We===v&&(fe=H),(De=Ke.nextSibling)!==null)break;Ke=Re,Re=Ke.parentNode}Ke=De}m=re===-1||fe===-1?null:{start:re,end:fe}}else m=null}m=m||{start:0,end:0}}else m=null;for(YN={focusedElem:u,selectionRange:m},Py=!1,xs=f;xs!==null;)if(f=xs,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,xs=u;else for(;xs!==null;){switch(f=xs,R=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&R!==null){u=void 0,m=f,E=R.memoizedProps,R=R.memoizedState,v=m.stateNode;try{var Wt=Vu(m.type,E,m.elementType===m.type);u=v.getSnapshotBeforeUpdate(Wt,R),v.__reactInternalSnapshotBeforeUpdate=u}catch(Pt){er(m,m.return,Pt)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,m=u.nodeType,m===9)JN(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":JN(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=f.sibling,u!==null){u.return=f.return,xs=u;break}xs=f.return}}function uD(u,f,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:Tc(u,m),v&4&&Lm(5,m);break;case 1:if(Tc(u,m),v&4)if(u=m.stateNode,f===null)try{u.componentDidMount()}catch(H){er(m,m.return,H)}else{var E=Vu(m.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(E,f,u.__reactInternalSnapshotBeforeUpdate)}catch(H){er(m,m.return,H)}}v&64&&sD(m),v&512&&Mm(m,m.return);break;case 3:if(Tc(u,m),v&64&&(u=m.updateQueue,u!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{HR(u,f)}catch(H){er(m,m.return,H)}}break;case 27:f===null&&v&4&&lD(m);case 26:case 5:Tc(u,m),f===null&&v&4&&iD(m),v&512&&Mm(m,m.return);break;case 12:Tc(u,m);break;case 13:Tc(u,m),v&4&&hD(u,m),v&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=mH.bind(null,m),OH(u,m))));break;case 22:if(v=m.memoizedState!==null||vl,!v){f=f!==null&&f.memoizedState!==null||Lr,E=vl;var R=Lr;vl=v,(Lr=f)&&!R?Nc(u,m,(m.subtreeFlags&8772)!==0):Tc(u,m),vl=E,Lr=R}break;case 30:break;default:Tc(u,m)}}function dD(u){var f=u.alternate;f!==null&&(u.alternate=null,dD(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&ie(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var dr=null,ka=!1;function wl(u,f,m){for(m=m.child;m!==null;)fD(u,f,m),m=m.sibling}function fD(u,f,m){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Vt,m)}catch{}switch(m.tag){case 26:Lr||Co(m,f),wl(u,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Lr||Co(m,f);var v=dr,E=ka;Ac(m.type)&&(dr=m.stateNode,ka=!1),wl(u,f,m),Gm(m.stateNode),dr=v,ka=E;break;case 5:Lr||Co(m,f);case 6:if(v=dr,E=ka,dr=null,wl(u,f,m),dr=v,ka=E,dr!==null)if(ka)try{(dr.nodeType===9?dr.body:dr.nodeName==="HTML"?dr.ownerDocument.body:dr).removeChild(m.stateNode)}catch(R){er(m,f,R)}else try{dr.removeChild(m.stateNode)}catch(R){er(m,f,R)}break;case 18:dr!==null&&(ka?(u=dr,e3(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),e0(u)):e3(dr,m.stateNode));break;case 4:v=dr,E=ka,dr=m.stateNode.containerInfo,ka=!0,wl(u,f,m),dr=v,ka=E;break;case 0:case 11:case 14:case 15:Lr||Sc(2,m,f),Lr||Sc(4,m,f),wl(u,f,m);break;case 1:Lr||(Co(m,f),v=m.stateNode,typeof v.componentWillUnmount=="function"&&aD(m,f,v)),wl(u,f,m);break;case 21:wl(u,f,m);break;case 22:Lr=(v=Lr)||m.memoizedState!==null,wl(u,f,m),Lr=v;break;default:wl(u,f,m)}}function hD(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{e0(u)}catch(m){er(f,f.return,m)}}function oH(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new cD),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new cD),f;default:throw Error(r(435,u.tag))}}function EN(u,f){var m=oH(u);f.forEach(function(v){var E=gH.bind(null,u,v);m.has(v)||(m.add(v),v.then(E,E))})}function Ha(u,f){var m=f.deletions;if(m!==null)for(var v=0;v<m.length;v++){var E=m[v],R=u,H=f,re=H;e:for(;re!==null;){switch(re.tag){case 27:if(Ac(re.type)){dr=re.stateNode,ka=!1;break e}break;case 5:dr=re.stateNode,ka=!1;break e;case 3:case 4:dr=re.stateNode.containerInfo,ka=!0;break e}re=re.return}if(dr===null)throw Error(r(160));fD(R,H,E),dr=null,ka=!1,R=E.alternate,R!==null&&(R.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)pD(f,u),f=f.sibling}var Ki=null;function pD(u,f){var m=u.alternate,v=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ha(f,u),Ga(u),v&4&&(Sc(3,u,u.return),Lm(3,u),Sc(5,u,u.return));break;case 1:Ha(f,u),Ga(u),v&512&&(Lr||m===null||Co(m,m.return)),v&64&&vl&&(u=u.updateQueue,u!==null&&(v=u.callbacks,v!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var E=Ki;if(Ha(f,u),Ga(u),v&512&&(Lr||m===null||Co(m,m.return)),v&4){var R=m!==null?m.memoizedState:null;if(v=u.memoizedState,m===null)if(v===null)if(u.stateNode===null){e:{v=u.type,m=u.memoizedProps,E=E.ownerDocument||E;t:switch(v){case"title":R=E.getElementsByTagName("title")[0],(!R||R[ae]||R[wt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=E.createElement(v),E.head.insertBefore(R,E.querySelector("head > title"))),Ds(R,v,m),R[wt]=u,Ne(R),v=R;break e;case"link":var H=l3("link","href",E).get(v+(m.href||""));if(H){for(var re=0;re<H.length;re++)if(R=H[re],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){H.splice(re,1);break t}}R=E.createElement(v),Ds(R,v,m),E.head.appendChild(R);break;case"meta":if(H=l3("meta","content",E).get(v+(m.content||""))){for(re=0;re<H.length;re++)if(R=H[re],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){H.splice(re,1);break t}}R=E.createElement(v),Ds(R,v,m),E.head.appendChild(R);break;default:throw Error(r(468,v))}R[wt]=u,Ne(R),v=R}u.stateNode=v}else c3(E,u.type,u.stateNode);else u.stateNode=o3(E,v,u.memoizedProps);else R!==v?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,v===null?c3(E,u.type,u.stateNode):o3(E,v,u.memoizedProps)):v===null&&u.stateNode!==null&&SN(u,u.memoizedProps,m.memoizedProps)}break;case 27:Ha(f,u),Ga(u),v&512&&(Lr||m===null||Co(m,m.return)),m!==null&&v&4&&SN(u,u.memoizedProps,m.memoizedProps);break;case 5:if(Ha(f,u),Ga(u),v&512&&(Lr||m===null||Co(m,m.return)),u.flags&32){E=u.stateNode;try{ff(E,"")}catch(De){er(u,u.return,De)}}v&4&&u.stateNode!=null&&(E=u.memoizedProps,SN(u,E,m!==null?m.memoizedProps:E)),v&1024&&(CN=!0);break;case 6:if(Ha(f,u),Ga(u),v&4){if(u.stateNode===null)throw Error(r(162));v=u.memoizedProps,m=u.stateNode;try{m.nodeValue=v}catch(De){er(u,u.return,De)}}break;case 3:if(Fy=null,E=Ki,Ki=Oy(f.containerInfo),Ha(f,u),Ki=E,Ga(u),v&4&&m!==null&&m.memoizedState.isDehydrated)try{e0(f.containerInfo)}catch(De){er(u,u.return,De)}CN&&(CN=!1,mD(u));break;case 4:v=Ki,Ki=Oy(u.stateNode.containerInfo),Ha(f,u),Ga(u),Ki=v;break;case 12:Ha(f,u),Ga(u);break;case 13:Ha(f,u),Ga(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(RN=ne()),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,EN(u,v)));break;case 22:E=u.memoizedState!==null;var fe=m!==null&&m.memoizedState!==null,_e=vl,We=Lr;if(vl=_e||E,Lr=We||fe,Ha(f,u),Lr=We,vl=_e,Ga(u),v&8192)e:for(f=u.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(m===null||fe||vl||Lr||Wu(u)),m=null,f=u;;){if(f.tag===5||f.tag===26){if(m===null){fe=m=f;try{if(R=fe.stateNode,E)H=R.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{re=fe.stateNode;var Ke=fe.memoizedProps.style,Re=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;re.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(De){er(fe,fe.return,De)}}}else if(f.tag===6){if(m===null){fe=f;try{fe.stateNode.nodeValue=E?"":fe.memoizedProps}catch(De){er(fe,fe.return,De)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}v&4&&(v=u.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,EN(u,m))));break;case 19:Ha(f,u),Ga(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,EN(u,v)));break;case 30:break;case 21:break;default:Ha(f,u),Ga(u)}}function Ga(u){var f=u.flags;if(f&2){try{for(var m,v=u.return;v!==null;){if(oD(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var E=m.stateNode,R=TN(u);vy(u,R,E);break;case 5:var H=m.stateNode;m.flags&32&&(ff(H,""),m.flags&=-33);var re=TN(u);vy(u,re,H);break;case 3:case 4:var fe=m.stateNode.containerInfo,_e=TN(u);NN(u,_e,fe);break;default:throw Error(r(161))}}catch(We){er(u,u.return,We)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function mD(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;mD(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function Tc(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)uD(u,f.alternate,f),f=f.sibling}function Wu(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Sc(4,f,f.return),Wu(f);break;case 1:Co(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&aD(f,f.return,m),Wu(f);break;case 27:Gm(f.stateNode);case 26:case 5:Co(f,f.return),Wu(f);break;case 22:f.memoizedState===null&&Wu(f);break;case 30:Wu(f);break;default:Wu(f)}u=u.sibling}}function Nc(u,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var v=f.alternate,E=u,R=f,H=R.flags;switch(R.tag){case 0:case 11:case 15:Nc(E,R,m),Lm(4,R);break;case 1:if(Nc(E,R,m),v=R,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(_e){er(v,v.return,_e)}if(v=R,E=v.updateQueue,E!==null){var re=v.stateNode;try{var fe=E.shared.hiddenCallbacks;if(fe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<fe.length;E++)WR(fe[E],re)}catch(_e){er(v,v.return,_e)}}m&&H&64&&sD(R),Mm(R,R.return);break;case 27:lD(R);case 26:case 5:Nc(E,R,m),m&&v===null&&H&4&&iD(R),Mm(R,R.return);break;case 12:Nc(E,R,m);break;case 13:Nc(E,R,m),m&&H&4&&hD(E,R);break;case 22:R.memoizedState===null&&Nc(E,R,m),Mm(R,R.return);break;case 30:break;default:Nc(E,R,m)}f=f.sibling}}function kN(u,f){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Sm(m))}function _N(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Sm(u))}function Eo(u,f,m,v){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)gD(u,f,m,v),f=f.sibling}function gD(u,f,m,v){var E=f.flags;switch(f.tag){case 0:case 11:case 15:Eo(u,f,m,v),E&2048&&Lm(9,f);break;case 1:Eo(u,f,m,v);break;case 3:Eo(u,f,m,v),E&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Sm(u)));break;case 12:if(E&2048){Eo(u,f,m,v),u=f.stateNode;try{var R=f.memoizedProps,H=R.id,re=R.onPostCommit;typeof re=="function"&&re(H,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(fe){er(f,f.return,fe)}}else Eo(u,f,m,v);break;case 13:Eo(u,f,m,v);break;case 23:break;case 22:R=f.stateNode,H=f.alternate,f.memoizedState!==null?R._visibility&2?Eo(u,f,m,v):Pm(u,f):R._visibility&2?Eo(u,f,m,v):(R._visibility|=2,$f(u,f,m,v,(f.subtreeFlags&10256)!==0)),E&2048&&kN(H,f);break;case 24:Eo(u,f,m,v),E&2048&&_N(f.alternate,f);break;default:Eo(u,f,m,v)}}function $f(u,f,m,v,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var R=u,H=f,re=m,fe=v,_e=H.flags;switch(H.tag){case 0:case 11:case 15:$f(R,H,re,fe,E),Lm(8,H);break;case 23:break;case 22:var We=H.stateNode;H.memoizedState!==null?We._visibility&2?$f(R,H,re,fe,E):Pm(R,H):(We._visibility|=2,$f(R,H,re,fe,E)),E&&_e&2048&&kN(H.alternate,H);break;case 24:$f(R,H,re,fe,E),E&&_e&2048&&_N(H.alternate,H);break;default:$f(R,H,re,fe,E)}f=f.sibling}}function Pm(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=u,v=f,E=v.flags;switch(v.tag){case 22:Pm(m,v),E&2048&&kN(v.alternate,v);break;case 24:Pm(m,v),E&2048&&_N(v.alternate,v);break;default:Pm(m,v)}f=f.sibling}}var Bm=8192;function Rf(u){if(u.subtreeFlags&Bm)for(u=u.child;u!==null;)xD(u),u=u.sibling}function xD(u){switch(u.tag){case 26:Rf(u),u.flags&Bm&&u.memoizedState!==null&&GH(Ki,u.memoizedState,u.memoizedProps);break;case 5:Rf(u);break;case 3:case 4:var f=Ki;Ki=Oy(u.stateNode.containerInfo),Rf(u),Ki=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Bm,Bm=16777216,Rf(u),Bm=f):Rf(u));break;default:Rf(u)}}function yD(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function jm(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];xs=v,vD(v,u)}yD(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)bD(u),u=u.sibling}function bD(u){switch(u.tag){case 0:case 11:case 15:jm(u),u.flags&2048&&Sc(9,u,u.return);break;case 3:jm(u);break;case 12:jm(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,wy(u)):jm(u);break;default:jm(u)}}function wy(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var v=f[m];xs=v,vD(v,u)}yD(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Sc(8,f,f.return),wy(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,wy(f));break;default:wy(f)}u=u.sibling}}function vD(u,f){for(;xs!==null;){var m=xs;switch(m.tag){case 0:case 11:case 15:Sc(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Sm(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,xs=v;else e:for(m=u;xs!==null;){v=xs;var E=v.sibling,R=v.return;if(dD(v),v===m){xs=null;break e}if(E!==null){E.return=R,xs=E;break e}xs=R}}}var lH={getCacheForType:function(u){var f=Gs(as),m=f.data.get(u);return m===void 0&&(m=u(),f.data.set(u,m)),m}},cH=typeof WeakMap=="function"?WeakMap:Map,Dn=0,or=null,dn=null,yn=0,Fn=0,qa=null,Cc=!1,Of=!1,IN=!1,Sl=0,Nr=0,Ec=0,Hu=0,AN=0,wi=0,Df=0,zm=null,_a=null,$N=!1,RN=0,Sy=1/0,Ty=null,kc=null,Os=0,_c=null,Ff=null,Lf=0,ON=0,DN=null,wD=null,Um=0,FN=null;function Ka(){if((Dn&2)!==0&&yn!==0)return yn&-yn;if(V.T!==null){var u=Tf;return u!==0?u:UN()}return So()}function SD(){wi===0&&(wi=(yn&536870912)===0||Tn?gn():536870912);var u=vi.current;return u!==null&&(u.flags|=32),wi}function Xa(u,f,m){(u===or&&(Fn===2||Fn===9)||u.cancelPendingCommit!==null)&&(Mf(u,0),Ic(u,yn,wi,!1)),Wr(u,m),((Dn&2)===0||u!==or)&&(u===or&&((Dn&2)===0&&(Hu|=m),Nr===4&&Ic(u,yn,wi,!1)),ko(u))}function TD(u,f,m){if((Dn&6)!==0)throw Error(r(327));var v=!m&&(f&124)===0&&(f&u.expiredLanes)===0||yt(u,f),E=v?fH(u,f):PN(u,f,!0),R=v;do{if(E===0){Of&&!v&&Ic(u,f,0,!1);break}else{if(m=u.current.alternate,R&&!uH(m)){E=PN(u,f,!1),R=!1;continue}if(E===2){if(R=f,u.errorRecoveryDisabledLanes&R)var H=0;else H=u.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){f=H;e:{var re=u;E=zm;var fe=re.current.memoizedState.isDehydrated;if(fe&&(Mf(re,H).flags|=256),H=PN(re,H,!1),H!==2){if(IN&&!fe){re.errorRecoveryDisabledLanes|=R,Hu|=R,E=4;break e}R=_a,_a=E,R!==null&&(_a===null?_a=R:_a.push.apply(_a,R))}E=H}if(R=!1,E!==2)continue}}if(E===1){Mf(u,0),Ic(u,f,0,!0);break}e:{switch(v=u,R=E,R){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Ic(v,f,wi,!Cc);break e;case 2:_a=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(E=RN+300-ne(),10<E)){if(Ic(v,f,wi,!Cc),rs(v,0,!0)!==0)break e;v.timeoutHandle=ZD(ND.bind(null,v,m,_a,Ty,$N,f,wi,Hu,Df,Cc,R,2,-0,0),E);break e}ND(v,m,_a,Ty,$N,f,wi,Hu,Df,Cc,R,0,-0,0)}}break}while(!0);ko(u)}function ND(u,f,m,v,E,R,H,re,fe,_e,We,Ke,Re,De){if(u.timeoutHandle=-1,Ke=f.subtreeFlags,(Ke&8192||(Ke&16785408)===16785408)&&(Xm={stylesheets:null,count:0,unsuspend:HH},xD(f),Ke=qH(),Ke!==null)){u.cancelPendingCommit=Ke($D.bind(null,u,f,R,m,v,E,H,re,fe,We,1,Re,De)),Ic(u,R,H,!_e);return}$D(u,f,R,m,v,E,H,re,fe)}function uH(u){for(var f=u;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var E=m[v],R=E.getSnapshot;E=E.value;try{if(!Va(R(),E))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ic(u,f,m,v){f&=~AN,f&=~Hu,u.suspendedLanes|=f,u.pingedLanes&=~f,v&&(u.warmLanes|=f),v=u.expirationTimes;for(var E=f;0<E;){var R=31-we(E),H=1<<R;v[R]=-1,E&=~H}m!==0&&uc(u,m,f)}function Ny(){return(Dn&6)===0?(Vm(0),!1):!0}function LN(){if(dn!==null){if(Fn===0)var u=dn.return;else u=dn,pl=Bu=null,JT(u),If=null,Om=0,u=dn;for(;u!==null;)rD(u.alternate,u),u=u.return;dn=null}}function Mf(u,f){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,_H(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),LN(),or=u,dn=m=dl(u.current,null),yn=f,Fn=0,qa=null,Cc=!1,Of=yt(u,f),IN=!1,Df=wi=AN=Hu=Ec=Nr=0,_a=zm=null,$N=!1,(f&8)!==0&&(f|=f&32);var v=u.entangledLanes;if(v!==0)for(u=u.entanglements,v&=f;0<v;){var E=31-we(v),R=1<<E;f|=u[E],v&=~R}return Sl=f,G1(),m}function CD(u,f){an=null,V.H=dy,f===Nm||f===ty?(f=UR(),Fn=3):f===BR?(f=UR(),Fn=4):Fn=f===VO?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,qa=f,dn===null&&(Nr=1,gy(u,gi(f,u.current)))}function ED(){var u=V.H;return V.H=dy,u===null?dy:u}function kD(){var u=V.A;return V.A=lH,u}function MN(){Nr=4,Cc||(yn&4194048)!==yn&&vi.current!==null||(Of=!0),(Ec&134217727)===0&&(Hu&134217727)===0||or===null||Ic(or,yn,wi,!1)}function PN(u,f,m){var v=Dn;Dn|=2;var E=ED(),R=kD();(or!==u||yn!==f)&&(Ty=null,Mf(u,f)),f=!1;var H=Nr;e:do try{if(Fn!==0&&dn!==null){var re=dn,fe=qa;switch(Fn){case 8:LN(),H=6;break e;case 3:case 2:case 9:case 6:vi.current===null&&(f=!0);var _e=Fn;if(Fn=0,qa=null,Pf(u,re,fe,_e),m&&Of){H=0;break e}break;default:_e=Fn,Fn=0,qa=null,Pf(u,re,fe,_e)}}dH(),H=Nr;break}catch(We){CD(u,We)}while(!0);return f&&u.shellSuspendCounter++,pl=Bu=null,Dn=v,V.H=E,V.A=R,dn===null&&(or=null,yn=0,G1()),H}function dH(){for(;dn!==null;)_D(dn)}function fH(u,f){var m=Dn;Dn|=2;var v=ED(),E=kD();or!==u||yn!==f?(Ty=null,Sy=ne()+500,Mf(u,f)):Of=yt(u,f);e:do try{if(Fn!==0&&dn!==null){f=dn;var R=qa;t:switch(Fn){case 1:Fn=0,qa=null,Pf(u,f,R,1);break;case 2:case 9:if(jR(R)){Fn=0,qa=null,ID(f);break}f=function(){Fn!==2&&Fn!==9||or!==u||(Fn=7),ko(u)},R.then(f,f);break e;case 3:Fn=7;break e;case 4:Fn=5;break e;case 7:jR(R)?(Fn=0,qa=null,ID(f)):(Fn=0,qa=null,Pf(u,f,R,7));break;case 5:var H=null;switch(dn.tag){case 26:H=dn.memoizedState;case 5:case 27:var re=dn;if(!H||u3(H)){Fn=0,qa=null;var fe=re.sibling;if(fe!==null)dn=fe;else{var _e=re.return;_e!==null?(dn=_e,Cy(_e)):dn=null}break t}}Fn=0,qa=null,Pf(u,f,R,5);break;case 6:Fn=0,qa=null,Pf(u,f,R,6);break;case 8:LN(),Nr=6;break e;default:throw Error(r(462))}}hH();break}catch(We){CD(u,We)}while(!0);return pl=Bu=null,V.H=v,V.A=E,Dn=m,dn!==null?0:(or=null,yn=0,G1(),Nr)}function hH(){for(;dn!==null&&!Ze();)_D(dn)}function _D(u){var f=tD(u.alternate,u,Sl);u.memoizedProps=u.pendingProps,f===null?Cy(u):dn=f}function ID(u){var f=u,m=f.alternate;switch(f.tag){case 15:case 0:f=XO(m,f,f.pendingProps,f.type,void 0,yn);break;case 11:f=XO(m,f,f.pendingProps,f.type.render,f.ref,yn);break;case 5:JT(f);default:rD(m,f),f=dn=AR(f,Sl),f=tD(m,f,Sl)}u.memoizedProps=u.pendingProps,f===null?Cy(u):dn=f}function Pf(u,f,m,v){pl=Bu=null,JT(f),If=null,Om=0;var E=f.return;try{if(nH(u,E,f,m,yn)){Nr=1,gy(u,gi(m,u.current)),dn=null;return}}catch(R){if(E!==null)throw dn=E,R;Nr=1,gy(u,gi(m,u.current)),dn=null;return}f.flags&32768?(Tn||v===1?u=!0:Of||(yn&536870912)!==0?u=!1:(Cc=u=!0,(v===2||v===9||v===3||v===6)&&(v=vi.current,v!==null&&v.tag===13&&(v.flags|=16384))),AD(f,u)):Cy(f)}function Cy(u){var f=u;do{if((f.flags&32768)!==0){AD(f,Cc);return}u=f.return;var m=sH(f.alternate,f,Sl);if(m!==null){dn=m;return}if(f=f.sibling,f!==null){dn=f;return}dn=f=u}while(f!==null);Nr===0&&(Nr=5)}function AD(u,f){do{var m=aH(u.alternate,u);if(m!==null){m.flags&=32767,dn=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(u=u.sibling,u!==null)){dn=u;return}dn=u=m}while(u!==null);Nr=6,dn=null}function $D(u,f,m,v,E,R,H,re,fe){u.cancelPendingCommit=null;do Ey();while(Os!==0);if((Dn&6)!==0)throw Error(r(327));if(f!==null){if(f===u.current)throw Error(r(177));if(R=f.lanes|f.childLanes,R|=_T,wo(u,m,R,H,re,fe),u===or&&(dn=or=null,yn=0),Ff=f,_c=u,Lf=m,ON=R,DN=E,wD=v,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,xH(ot,function(){return LD(),null})):(u.callbackNode=null,u.callbackPriority=0),v=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||v){v=V.T,V.T=null,E=X.p,X.p=2,H=Dn,Dn|=4;try{iH(u,f,m)}finally{Dn=H,X.p=E,V.T=v}}Os=1,RD(),OD(),DD()}}function RD(){if(Os===1){Os=0;var u=_c,f=Ff,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=V.T,V.T=null;var v=X.p;X.p=2;var E=Dn;Dn|=4;try{pD(f,u);var R=YN,H=vR(u.containerInfo),re=R.focusedElem,fe=R.selectionRange;if(H!==re&&re&&re.ownerDocument&&bR(re.ownerDocument.documentElement,re)){if(fe!==null&&TT(re)){var _e=fe.start,We=fe.end;if(We===void 0&&(We=_e),"selectionStart"in re)re.selectionStart=_e,re.selectionEnd=Math.min(We,re.value.length);else{var Ke=re.ownerDocument||document,Re=Ke&&Ke.defaultView||window;if(Re.getSelection){var De=Re.getSelection(),Wt=re.textContent.length,Pt=Math.min(fe.start,Wt),qn=fe.end===void 0?Pt:Math.min(fe.end,Wt);!De.extend&&Pt>qn&&(H=qn,qn=Pt,Pt=H);var Se=yR(re,Pt),ve=yR(re,qn);if(Se&&ve&&(De.rangeCount!==1||De.anchorNode!==Se.node||De.anchorOffset!==Se.offset||De.focusNode!==ve.node||De.focusOffset!==ve.offset)){var Ee=Ke.createRange();Ee.setStart(Se.node,Se.offset),De.removeAllRanges(),Pt>qn?(De.addRange(Ee),De.extend(ve.node,ve.offset)):(Ee.setEnd(ve.node,ve.offset),De.addRange(Ee))}}}}for(Ke=[],De=re;De=De.parentNode;)De.nodeType===1&&Ke.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<Ke.length;re++){var qe=Ke[re];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}Py=!!XN,YN=XN=null}finally{Dn=E,X.p=v,V.T=m}}u.current=f,Os=2}}function OD(){if(Os===2){Os=0;var u=_c,f=Ff,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=V.T,V.T=null;var v=X.p;X.p=2;var E=Dn;Dn|=4;try{uD(u,f.alternate,f)}finally{Dn=E,X.p=v,V.T=m}}Os=3}}function DD(){if(Os===4||Os===3){Os=0,He();var u=_c,f=Ff,m=Lf,v=wD;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Os=5:(Os=0,Ff=_c=null,FD(u,u.pendingLanes));var E=u.pendingLanes;if(E===0&&(kc=null),fc(m),f=f.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Vt,f,void 0,(f.current.flags&128)===128)}catch{}if(v!==null){f=V.T,E=X.p,X.p=2,V.T=null;try{for(var R=u.onRecoverableError,H=0;H<v.length;H++){var re=v[H];R(re.value,{componentStack:re.stack})}}finally{V.T=f,X.p=E}}(Lf&3)!==0&&Ey(),ko(u),E=u.pendingLanes,(m&4194090)!==0&&(E&42)!==0?u===FN?Um++:(Um=0,FN=u):Um=0,Vm(0)}}function FD(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Sm(f)))}function Ey(u){return RD(),OD(),DD(),LD()}function LD(){if(Os!==5)return!1;var u=_c,f=ON;ON=0;var m=fc(Lf),v=V.T,E=X.p;try{X.p=32>m?32:m,V.T=null,m=DN,DN=null;var R=_c,H=Lf;if(Os=0,Ff=_c=null,Lf=0,(Dn&6)!==0)throw Error(r(331));var re=Dn;if(Dn|=4,bD(R.current),gD(R,R.current,H,m),Dn=re,Vm(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Vt,R)}catch{}return!0}finally{X.p=E,V.T=v,FD(u,f)}}function MD(u,f,m){f=gi(m,f),f=hN(u.stateNode,f,2),u=yc(u,f,2),u!==null&&(Wr(u,2),ko(u))}function er(u,f,m){if(u.tag===3)MD(u,u,m);else for(;f!==null;){if(f.tag===3){MD(f,u,m);break}else if(f.tag===1){var v=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(kc===null||!kc.has(v))){u=gi(m,u),m=zO(2),v=yc(f,m,2),v!==null&&(UO(m,v,f,u),Wr(v,2),ko(v));break}}f=f.return}}function BN(u,f,m){var v=u.pingCache;if(v===null){v=u.pingCache=new cH;var E=new Set;v.set(f,E)}else E=v.get(f),E===void 0&&(E=new Set,v.set(f,E));E.has(m)||(IN=!0,E.add(m),u=pH.bind(null,u,f,m),f.then(u,u))}function pH(u,f,m){var v=u.pingCache;v!==null&&v.delete(f),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,or===u&&(yn&m)===m&&(Nr===4||Nr===3&&(yn&62914560)===yn&&300>ne()-RN?(Dn&2)===0&&Mf(u,0):AN|=m,Df===yn&&(Df=0)),ko(u)}function PD(u,f){f===0&&(f=oa()),u=bf(u,f),u!==null&&(Wr(u,f),ko(u))}function mH(u){var f=u.memoizedState,m=0;f!==null&&(m=f.retryLane),PD(u,m)}function gH(u,f){var m=0;switch(u.tag){case 13:var v=u.stateNode,E=u.memoizedState;E!==null&&(m=E.retryLane);break;case 19:v=u.stateNode;break;case 22:v=u.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(f),PD(u,m)}function xH(u,f){return rt(u,f)}var ky=null,Bf=null,jN=!1,_y=!1,zN=!1,Gu=0;function ko(u){u!==Bf&&u.next===null&&(Bf===null?ky=Bf=u:Bf=Bf.next=u),_y=!0,jN||(jN=!0,bH())}function Vm(u,f){if(!zN&&_y){zN=!0;do for(var m=!1,v=ky;v!==null;){if(u!==0){var E=v.pendingLanes;if(E===0)var R=0;else{var H=v.suspendedLanes,re=v.pingedLanes;R=(1<<31-we(42|u)+1)-1,R&=E&~(H&~re),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,UD(v,R))}else R=yn,R=rs(v,v===or?R:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(R&3)===0||yt(v,R)||(m=!0,UD(v,R));v=v.next}while(m);zN=!1}}function yH(){BD()}function BD(){_y=jN=!1;var u=0;Gu!==0&&(kH()&&(u=Gu),Gu=0);for(var f=ne(),m=null,v=ky;v!==null;){var E=v.next,R=jD(v,f);R===0?(v.next=null,m===null?ky=E:m.next=E,E===null&&(Bf=m)):(m=v,(u!==0||(R&3)!==0)&&(_y=!0)),v=E}Vm(u)}function jD(u,f){for(var m=u.suspendedLanes,v=u.pingedLanes,E=u.expirationTimes,R=u.pendingLanes&-62914561;0<R;){var H=31-we(R),re=1<<H,fe=E[H];fe===-1?((re&m)===0||(re&v)!==0)&&(E[H]=qt(re,f)):fe<=f&&(u.expiredLanes|=re),R&=~re}if(f=or,m=yn,m=rs(u,u===f?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v=u.callbackNode,m===0||u===f&&(Fn===2||Fn===9)||u.cancelPendingCommit!==null)return v!==null&&v!==null&&Be(v),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||yt(u,m)){if(f=m&-m,f===u.callbackPriority)return f;switch(v!==null&&Be(v),fc(m)){case 2:case 8:m=Ve;break;case 32:m=ot;break;case 268435456:m=Ge;break;default:m=ot}return v=zD.bind(null,u),m=rt(m,v),u.callbackPriority=f,u.callbackNode=m,f}return v!==null&&v!==null&&Be(v),u.callbackPriority=2,u.callbackNode=null,2}function zD(u,f){if(Os!==0&&Os!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Ey()&&u.callbackNode!==m)return null;var v=yn;return v=rs(u,u===or?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v===0?null:(TD(u,v,f),jD(u,ne()),u.callbackNode!=null&&u.callbackNode===m?zD.bind(null,u):null)}function UD(u,f){if(Ey())return null;TD(u,f,!0)}function bH(){IH(function(){(Dn&6)!==0?rt(Me,yH):BD()})}function UN(){return Gu===0&&(Gu=gn()),Gu}function VD(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:B1(""+u)}function WD(u,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,u.id&&m.setAttribute("form",u.id),f.parentNode.insertBefore(m,f),u=new FormData(u),m.parentNode.removeChild(m),u}function vH(u,f,m,v,E){if(f==="submit"&&m&&m.stateNode===E){var R=VD((E[Nt]||null).action),H=v.submitter;H&&(f=(f=H[Nt]||null)?VD(f.formAction):H.getAttribute("formAction"),f!==null&&(R=f,H=null));var re=new V1("action","action",null,v,E);u.push({event:re,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Gu!==0){var fe=H?WD(E,H):new FormData(E);lN(m,{pending:!0,data:fe,method:E.method,action:R},null,fe)}}else typeof R=="function"&&(re.preventDefault(),fe=H?WD(E,H):new FormData(E),lN(m,{pending:!0,data:fe,method:E.method,action:R},R,fe))},currentTarget:E}]})}}for(var VN=0;VN<kT.length;VN++){var WN=kT[VN],wH=WN.toLowerCase(),SH=WN[0].toUpperCase()+WN.slice(1);qi(wH,"on"+SH)}qi(TR,"onAnimationEnd"),qi(NR,"onAnimationIteration"),qi(CR,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(B9,"onTransitionRun"),qi(j9,"onTransitionStart"),qi(z9,"onTransitionCancel"),qi(ER,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wm));function HD(u,f){f=(f&4)!==0;for(var m=0;m<u.length;m++){var v=u[m],E=v.event;v=v.listeners;e:{var R=void 0;if(f)for(var H=v.length-1;0<=H;H--){var re=v[H],fe=re.instance,_e=re.currentTarget;if(re=re.listener,fe!==R&&E.isPropagationStopped())break e;R=re,E.currentTarget=_e;try{R(E)}catch(We){my(We)}E.currentTarget=null,R=fe}else for(H=0;H<v.length;H++){if(re=v[H],fe=re.instance,_e=re.currentTarget,re=re.listener,fe!==R&&E.isPropagationStopped())break e;R=re,E.currentTarget=_e;try{R(E)}catch(We){my(We)}E.currentTarget=null,R=fe}}}}function fn(u,f){var m=f[ss];m===void 0&&(m=f[ss]=new Set);var v=u+"__bubble";m.has(v)||(GD(f,u,2,!1),m.add(v))}function HN(u,f,m){var v=0;f&&(v|=4),GD(m,u,v,f)}var Iy="_reactListening"+Math.random().toString(36).slice(2);function GN(u){if(!u[Iy]){u[Iy]=!0,$e.forEach(function(m){m!=="selectionchange"&&(TH.has(m)||HN(m,!1,u),HN(m,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Iy]||(f[Iy]=!0,HN("selectionchange",!1,f))}}function GD(u,f,m,v){switch(g3(f)){case 2:var E=YH;break;case 8:E=QH;break;default:E=iC}m=E.bind(null,f,m,u),E=void 0,!pT||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),v?E!==void 0?u.addEventListener(f,m,{capture:!0,passive:E}):u.addEventListener(f,m,!0):E!==void 0?u.addEventListener(f,m,{passive:E}):u.addEventListener(f,m,!1)}function qN(u,f,m,v,E){var R=v;if((f&1)===0&&(f&2)===0&&v!==null)e:for(;;){if(v===null)return;var H=v.tag;if(H===3||H===4){var re=v.stateNode.containerInfo;if(re===E)break;if(H===4)for(H=v.return;H!==null;){var fe=H.tag;if((fe===3||fe===4)&&H.stateNode.containerInfo===E)return;H=H.return}for(;re!==null;){if(H=le(re),H===null)return;if(fe=H.tag,fe===5||fe===6||fe===26||fe===27){v=R=H;continue e}re=re.parentNode}}v=v.return}J$(function(){var _e=R,We=fT(m),Ke=[];e:{var Re=kR.get(u);if(Re!==void 0){var De=V1,Wt=u;switch(u){case"keypress":if(z1(m)===0)break e;case"keydown":case"keyup":De=x9;break;case"focusin":Wt="focus",De=yT;break;case"focusout":Wt="blur",De=yT;break;case"beforeblur":case"afterblur":De=yT;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=nR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=a9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=v9;break;case TR:case NR:case CR:De=l9;break;case ER:De=S9;break;case"scroll":case"scrollend":De=r9;break;case"wheel":De=N9;break;case"copy":case"cut":case"paste":De=u9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=sR;break;case"toggle":case"beforetoggle":De=E9}var Pt=(f&4)!==0,qn=!Pt&&(u==="scroll"||u==="scrollend"),Se=Pt?Re!==null?Re+"Capture":null:Re;Pt=[];for(var ve=_e,Ee;ve!==null;){var qe=ve;if(Ee=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ee===null||Se===null||(qe=cm(ve,Se),qe!=null&&Pt.push(Hm(ve,qe,Ee))),qn)break;ve=ve.return}0<Pt.length&&(Re=new De(Re,Wt,null,m,We),Ke.push({event:Re,listeners:Pt}))}}if((f&7)===0){e:{if(Re=u==="mouseover"||u==="pointerover",De=u==="mouseout"||u==="pointerout",Re&&m!==dT&&(Wt=m.relatedTarget||m.fromElement)&&(le(Wt)||Wt[ln]))break e;if((De||Re)&&(Re=We.window===We?We:(Re=We.ownerDocument)?Re.defaultView||Re.parentWindow:window,De?(Wt=m.relatedTarget||m.toElement,De=_e,Wt=Wt?le(Wt):null,Wt!==null&&(qn=a(Wt),Pt=Wt.tag,Wt!==qn||Pt!==5&&Pt!==27&&Pt!==6)&&(Wt=null)):(De=null,Wt=_e),De!==Wt)){if(Pt=nR,qe="onMouseLeave",Se="onMouseEnter",ve="mouse",(u==="pointerout"||u==="pointerover")&&(Pt=sR,qe="onPointerLeave",Se="onPointerEnter",ve="pointer"),qn=De==null?Re:Ie(De),Ee=Wt==null?Re:Ie(Wt),Re=new Pt(qe,ve+"leave",De,m,We),Re.target=qn,Re.relatedTarget=Ee,qe=null,le(We)===_e&&(Pt=new Pt(Se,ve+"enter",Wt,m,We),Pt.target=Ee,Pt.relatedTarget=qn,qe=Pt),qn=qe,De&&Wt)t:{for(Pt=De,Se=Wt,ve=0,Ee=Pt;Ee;Ee=jf(Ee))ve++;for(Ee=0,qe=Se;qe;qe=jf(qe))Ee++;for(;0<ve-Ee;)Pt=jf(Pt),ve--;for(;0<Ee-ve;)Se=jf(Se),Ee--;for(;ve--;){if(Pt===Se||Se!==null&&Pt===Se.alternate)break t;Pt=jf(Pt),Se=jf(Se)}Pt=null}else Pt=null;De!==null&&qD(Ke,Re,De,Pt,!1),Wt!==null&&qn!==null&&qD(Ke,qn,Wt,Pt,!0)}}e:{if(Re=_e?Ie(_e):window,De=Re.nodeName&&Re.nodeName.toLowerCase(),De==="select"||De==="input"&&Re.type==="file")var Ct=fR;else if(uR(Re))if(hR)Ct=L9;else{Ct=D9;var cn=O9}else De=Re.nodeName,!De||De.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?_e&&uT(_e.elementType)&&(Ct=fR):Ct=F9;if(Ct&&(Ct=Ct(u,_e))){dR(Ke,Ct,m,We);break e}cn&&cn(u,Re,_e),u==="focusout"&&_e&&Re.type==="number"&&_e.memoizedProps.value!=null&&cT(Re,"number",Re.value)}switch(cn=_e?Ie(_e):window,u){case"focusin":(uR(cn)||cn.contentEditable==="true")&&(gf=cn,NT=_e,xm=null);break;case"focusout":xm=NT=gf=null;break;case"mousedown":CT=!0;break;case"contextmenu":case"mouseup":case"dragend":CT=!1,wR(Ke,m,We);break;case"selectionchange":if(P9)break;case"keydown":case"keyup":wR(Ke,m,We)}var Ot;if(vT)e:{switch(u){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else mf?lR(u,m)&&(Bt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Bt="onCompositionStart");Bt&&(aR&&m.locale!=="ko"&&(mf||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&mf&&(Ot=eR()):(pc=We,mT="value"in pc?pc.value:pc.textContent,mf=!0)),cn=Ay(_e,Bt),0<cn.length&&(Bt=new rR(Bt,u,null,m,We),Ke.push({event:Bt,listeners:cn}),Ot?Bt.data=Ot:(Ot=cR(m),Ot!==null&&(Bt.data=Ot)))),(Ot=_9?I9(u,m):A9(u,m))&&(Bt=Ay(_e,"onBeforeInput"),0<Bt.length&&(cn=new rR("onBeforeInput","beforeinput",null,m,We),Ke.push({event:cn,listeners:Bt}),cn.data=Ot)),vH(Ke,u,_e,m,We)}HD(Ke,f)})}function Hm(u,f,m){return{instance:u,listener:f,currentTarget:m}}function Ay(u,f){for(var m=f+"Capture",v=[];u!==null;){var E=u,R=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||R===null||(E=cm(u,m),E!=null&&v.unshift(Hm(u,E,R)),E=cm(u,f),E!=null&&v.push(Hm(u,E,R))),u.tag===3)return v;u=u.return}return[]}function jf(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function qD(u,f,m,v,E){for(var R=f._reactName,H=[];m!==null&&m!==v;){var re=m,fe=re.alternate,_e=re.stateNode;if(re=re.tag,fe!==null&&fe===v)break;re!==5&&re!==26&&re!==27||_e===null||(fe=_e,E?(_e=cm(m,R),_e!=null&&H.unshift(Hm(m,_e,fe))):E||(_e=cm(m,R),_e!=null&&H.push(Hm(m,_e,fe)))),m=m.return}H.length!==0&&u.push({event:f,listeners:H})}var NH=/\r\n?/g,CH=/\u0000|\uFFFD/g;function KD(u){return(typeof u=="string"?u:""+u).replace(NH,`
`).replace(CH,"")}function XD(u,f){return f=KD(f),KD(u)===f}function $y(){}function Gn(u,f,m,v,E,R){switch(m){case"children":typeof v=="string"?f==="body"||f==="textarea"&&v===""||ff(u,v):(typeof v=="number"||typeof v=="bigint")&&f!=="body"&&ff(u,""+v);break;case"className":Wn(u,"class",v);break;case"tabIndex":Wn(u,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(u,m,v);break;case"style":Q$(u,v,R);break;case"data":if(f!=="object"){Wn(u,"data",v);break}case"src":case"href":if(v===""&&(f!=="a"||m!=="href")){u.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=B1(""+v),u.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(f!=="input"&&Gn(u,f,"name",E.name,E,null),Gn(u,f,"formEncType",E.formEncType,E,null),Gn(u,f,"formMethod",E.formMethod,E,null),Gn(u,f,"formTarget",E.formTarget,E,null)):(Gn(u,f,"encType",E.encType,E,null),Gn(u,f,"method",E.method,E,null),Gn(u,f,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=B1(""+v),u.setAttribute(m,v);break;case"onClick":v!=null&&(u.onclick=$y);break;case"onScroll":v!=null&&fn("scroll",u);break;case"onScrollEnd":v!=null&&fn("scrollend",u);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(E.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":u.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){u.removeAttribute("xlink:href");break}m=B1(""+v),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""+v):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":v===!0?u.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,v):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?u.setAttribute(m,v):u.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?u.removeAttribute(m):u.setAttribute(m,v);break;case"popover":fn("beforetoggle",u),fn("toggle",u),Vn(u,"popover",v);break;case"xlinkActuate":ir(u,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ir(u,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ir(u,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ir(u,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ir(u,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ir(u,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ir(u,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ir(u,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ir(u,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Vn(u,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=t9.get(m)||m,Vn(u,m,v))}}function KN(u,f,m,v,E,R){switch(m){case"style":Q$(u,v,R);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(E.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof v=="string"?ff(u,v):(typeof v=="number"||typeof v=="bigint")&&ff(u,""+v);break;case"onScroll":v!=null&&fn("scroll",u);break;case"onScrollEnd":v!=null&&fn("scrollend",u);break;case"onClick":v!=null&&(u.onclick=$y);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oe.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),f=m.slice(2,E?m.length-7:void 0),R=u[Nt]||null,R=R!=null?R[m]:null,typeof R=="function"&&u.removeEventListener(f,R,E),typeof v=="function")){typeof R!="function"&&R!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(f,v,E);break e}m in u?u[m]=v:v===!0?u.setAttribute(m,""):Vn(u,m,v)}}}function Ds(u,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",u),fn("load",u);var v=!1,E=!1,R;for(R in m)if(m.hasOwnProperty(R)){var H=m[R];if(H!=null)switch(R){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Gn(u,f,R,H,m,null)}}E&&Gn(u,f,"srcSet",m.srcSet,m,null),v&&Gn(u,f,"src",m.src,m,null);return;case"input":fn("invalid",u);var re=R=H=E=null,fe=null,_e=null;for(v in m)if(m.hasOwnProperty(v)){var We=m[v];if(We!=null)switch(v){case"name":E=We;break;case"type":H=We;break;case"checked":fe=We;break;case"defaultChecked":_e=We;break;case"value":R=We;break;case"defaultValue":re=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(r(137,f));break;default:Gn(u,f,v,We,m,null)}}q$(u,R,re,fe,_e,H,E,!1),M1(u);return;case"select":fn("invalid",u),v=H=R=null;for(E in m)if(m.hasOwnProperty(E)&&(re=m[E],re!=null))switch(E){case"value":R=re;break;case"defaultValue":H=re;break;case"multiple":v=re;default:Gn(u,f,E,re,m,null)}f=R,m=H,u.multiple=!!v,f!=null?df(u,!!v,f,!1):m!=null&&df(u,!!v,m,!0);return;case"textarea":fn("invalid",u),R=E=v=null;for(H in m)if(m.hasOwnProperty(H)&&(re=m[H],re!=null))switch(H){case"value":v=re;break;case"defaultValue":E=re;break;case"children":R=re;break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(91));break;default:Gn(u,f,H,re,m,null)}X$(u,v,E,R),M1(u);return;case"option":for(fe in m)if(m.hasOwnProperty(fe)&&(v=m[fe],v!=null))switch(fe){case"selected":u.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Gn(u,f,fe,v,m,null)}return;case"dialog":fn("beforetoggle",u),fn("toggle",u),fn("cancel",u),fn("close",u);break;case"iframe":case"object":fn("load",u);break;case"video":case"audio":for(v=0;v<Wm.length;v++)fn(Wm[v],u);break;case"image":fn("error",u),fn("load",u);break;case"details":fn("toggle",u);break;case"embed":case"source":case"link":fn("error",u),fn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in m)if(m.hasOwnProperty(_e)&&(v=m[_e],v!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Gn(u,f,_e,v,m,null)}return;default:if(uT(f)){for(We in m)m.hasOwnProperty(We)&&(v=m[We],v!==void 0&&KN(u,f,We,v,m,void 0));return}}for(re in m)m.hasOwnProperty(re)&&(v=m[re],v!=null&&Gn(u,f,re,v,m,null))}function EH(u,f,m,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,R=null,H=null,re=null,fe=null,_e=null,We=null;for(De in m){var Ke=m[De];if(m.hasOwnProperty(De)&&Ke!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":fe=Ke;default:v.hasOwnProperty(De)||Gn(u,f,De,null,v,Ke)}}for(var Re in v){var De=v[Re];if(Ke=m[Re],v.hasOwnProperty(Re)&&(De!=null||Ke!=null))switch(Re){case"type":R=De;break;case"name":E=De;break;case"checked":_e=De;break;case"defaultChecked":We=De;break;case"value":H=De;break;case"defaultValue":re=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,f));break;default:De!==Ke&&Gn(u,f,Re,De,v,Ke)}}lT(u,H,re,fe,_e,We,R,E);return;case"select":De=H=re=Re=null;for(R in m)if(fe=m[R],m.hasOwnProperty(R)&&fe!=null)switch(R){case"value":break;case"multiple":De=fe;default:v.hasOwnProperty(R)||Gn(u,f,R,null,v,fe)}for(E in v)if(R=v[E],fe=m[E],v.hasOwnProperty(E)&&(R!=null||fe!=null))switch(E){case"value":Re=R;break;case"defaultValue":re=R;break;case"multiple":H=R;default:R!==fe&&Gn(u,f,E,R,v,fe)}f=re,m=H,v=De,Re!=null?df(u,!!m,Re,!1):!!v!=!!m&&(f!=null?df(u,!!m,f,!0):df(u,!!m,m?[]:"",!1));return;case"textarea":De=Re=null;for(re in m)if(E=m[re],m.hasOwnProperty(re)&&E!=null&&!v.hasOwnProperty(re))switch(re){case"value":break;case"children":break;default:Gn(u,f,re,null,v,E)}for(H in v)if(E=v[H],R=m[H],v.hasOwnProperty(H)&&(E!=null||R!=null))switch(H){case"value":Re=E;break;case"defaultValue":De=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==R&&Gn(u,f,H,E,v,R)}K$(u,Re,De);return;case"option":for(var Wt in m)if(Re=m[Wt],m.hasOwnProperty(Wt)&&Re!=null&&!v.hasOwnProperty(Wt))switch(Wt){case"selected":u.selected=!1;break;default:Gn(u,f,Wt,null,v,Re)}for(fe in v)if(Re=v[fe],De=m[fe],v.hasOwnProperty(fe)&&Re!==De&&(Re!=null||De!=null))switch(fe){case"selected":u.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:Gn(u,f,fe,Re,v,De)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in m)Re=m[Pt],m.hasOwnProperty(Pt)&&Re!=null&&!v.hasOwnProperty(Pt)&&Gn(u,f,Pt,null,v,Re);for(_e in v)if(Re=v[_e],De=m[_e],v.hasOwnProperty(_e)&&Re!==De&&(Re!=null||De!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,f));break;default:Gn(u,f,_e,Re,v,De)}return;default:if(uT(f)){for(var qn in m)Re=m[qn],m.hasOwnProperty(qn)&&Re!==void 0&&!v.hasOwnProperty(qn)&&KN(u,f,qn,void 0,v,Re);for(We in v)Re=v[We],De=m[We],!v.hasOwnProperty(We)||Re===De||Re===void 0&&De===void 0||KN(u,f,We,Re,v,De);return}}for(var Se in m)Re=m[Se],m.hasOwnProperty(Se)&&Re!=null&&!v.hasOwnProperty(Se)&&Gn(u,f,Se,null,v,Re);for(Ke in v)Re=v[Ke],De=m[Ke],!v.hasOwnProperty(Ke)||Re===De||Re==null&&De==null||Gn(u,f,Ke,Re,v,De)}var XN=null,YN=null;function Ry(u){return u.nodeType===9?u:u.ownerDocument}function YD(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QD(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function QN(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var ZN=null;function kH(){var u=window.event;return u&&u.type==="popstate"?u===ZN?!1:(ZN=u,!0):(ZN=null,!1)}var ZD=typeof setTimeout=="function"?setTimeout:void 0,_H=typeof clearTimeout=="function"?clearTimeout:void 0,JD=typeof Promise=="function"?Promise:void 0,IH=typeof queueMicrotask=="function"?queueMicrotask:typeof JD<"u"?function(u){return JD.resolve(null).then(u).catch(AH)}:ZD;function AH(u){setTimeout(function(){throw u})}function Ac(u){return u==="head"}function e3(u,f){var m=f,v=0,E=0;do{var R=m.nextSibling;if(u.removeChild(m),R&&R.nodeType===8)if(m=R.data,m==="/$"){if(0<v&&8>v){m=v;var H=u.ownerDocument;if(m&1&&Gm(H.documentElement),m&2&&Gm(H.body),m&4)for(m=H.head,Gm(m),H=m.firstChild;H;){var re=H.nextSibling,fe=H.nodeName;H[ae]||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&H.rel.toLowerCase()==="stylesheet"||m.removeChild(H),H=re}}if(E===0){u.removeChild(R),e0(f);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:v=m.charCodeAt(0)-48;else v=0;m=R}while(m);e0(f)}function JN(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":JN(m),ie(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function $H(u,f,m,v){for(;u.nodeType===1;){var E=m;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!v&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(v){if(!u[ae])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(R=u.getAttribute("rel"),R==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(R!==E.rel||u.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||u.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||u.getAttribute("title")!==(E.title==null?null:E.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(R=u.getAttribute("src"),(R!==(E.src==null?null:E.src)||u.getAttribute("type")!==(E.type==null?null:E.type)||u.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&R&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var R=E.name==null?null:""+E.name;if(E.type==="hidden"&&u.getAttribute("name")===R)return u}else return u;if(u=Xi(u.nextSibling),u===null)break}return null}function RH(u,f,m){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Xi(u.nextSibling),u===null))return null;return u}function eC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function OH(u,f){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")f();else{var v=function(){f(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),u._reactRetry=v}}function Xi(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var tC=null;function t3(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return u;f--}else m==="/$"&&f++}u=u.previousSibling}return null}function n3(u,f,m){switch(f=Ry(m),u){case"html":if(u=f.documentElement,!u)throw Error(r(452));return u;case"head":if(u=f.head,!u)throw Error(r(453));return u;case"body":if(u=f.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function Gm(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);ie(u)}var Si=new Map,r3=new Set;function Oy(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Tl=X.d;X.d={f:DH,r:FH,D:LH,C:MH,L:PH,m:BH,X:zH,S:jH,M:UH};function DH(){var u=Tl.f(),f=Ny();return u||f}function FH(u){var f=ce(u);f!==null&&f.tag===5&&f.type==="form"?TO(f):Tl.r(u)}var zf=typeof document>"u"?null:document;function s3(u,f,m){var v=zf;if(v&&typeof f=="string"&&f){var E=mi(f);E='link[rel="'+u+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),r3.has(E)||(r3.add(E),u={rel:u,crossOrigin:m,href:f},v.querySelector(E)===null&&(f=v.createElement("link"),Ds(f,"link",u),Ne(f),v.head.appendChild(f)))}}function LH(u){Tl.D(u),s3("dns-prefetch",u,null)}function MH(u,f){Tl.C(u,f),s3("preconnect",u,f)}function PH(u,f,m){Tl.L(u,f,m);var v=zf;if(v&&u&&f){var E='link[rel="preload"][as="'+mi(f)+'"]';f==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+mi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+mi(m.imageSizes)+'"]')):E+='[href="'+mi(u)+'"]';var R=E;switch(f){case"style":R=Uf(u);break;case"script":R=Vf(u)}Si.has(R)||(u=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:u,as:f},m),Si.set(R,u),v.querySelector(E)!==null||f==="style"&&v.querySelector(qm(R))||f==="script"&&v.querySelector(Km(R))||(f=v.createElement("link"),Ds(f,"link",u),Ne(f),v.head.appendChild(f)))}}function BH(u,f){Tl.m(u,f);var m=zf;if(m&&u){var v=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+mi(v)+'"][href="'+mi(u)+'"]',R=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Vf(u)}if(!Si.has(R)&&(u=d({rel:"modulepreload",href:u},f),Si.set(R,u),m.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Km(R)))return}v=m.createElement("link"),Ds(v,"link",u),Ne(v),m.head.appendChild(v)}}}function jH(u,f,m){Tl.S(u,f,m);var v=zf;if(v&&u){var E=je(v).hoistableStyles,R=Uf(u);f=f||"default";var H=E.get(R);if(!H){var re={loading:0,preload:null};if(H=v.querySelector(qm(R)))re.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":f},m),(m=Si.get(R))&&nC(u,m);var fe=H=v.createElement("link");Ne(fe),Ds(fe,"link",u),fe._p=new Promise(function(_e,We){fe.onload=_e,fe.onerror=We}),fe.addEventListener("load",function(){re.loading|=1}),fe.addEventListener("error",function(){re.loading|=2}),re.loading|=4,Dy(H,f,v)}H={type:"stylesheet",instance:H,count:1,state:re},E.set(R,H)}}}function zH(u,f){Tl.X(u,f);var m=zf;if(m&&u){var v=je(m).hoistableScripts,E=Vf(u),R=v.get(E);R||(R=m.querySelector(Km(E)),R||(u=d({src:u,async:!0},f),(f=Si.get(E))&&rC(u,f),R=m.createElement("script"),Ne(R),Ds(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(E,R))}}function UH(u,f){Tl.M(u,f);var m=zf;if(m&&u){var v=je(m).hoistableScripts,E=Vf(u),R=v.get(E);R||(R=m.querySelector(Km(E)),R||(u=d({src:u,async:!0,type:"module"},f),(f=Si.get(E))&&rC(u,f),R=m.createElement("script"),Ne(R),Ds(R,"link",u),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},v.set(E,R))}}function a3(u,f,m,v){var E=(E=se.current)?Oy(E):null;if(!E)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Uf(m.href),m=je(E).hoistableStyles,v=m.get(f),v||(v={type:"style",instance:null,count:0,state:null},m.set(f,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Uf(m.href);var R=je(E).hoistableStyles,H=R.get(u);if(H||(E=E.ownerDocument||E,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(u,H),(R=E.querySelector(qm(u)))&&!R._p&&(H.instance=R,H.state.loading=5),Si.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Si.set(u,m),R||VH(E,u,m,H.state))),f&&v===null)throw Error(r(528,""));return H}if(f&&v!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Vf(m),m=je(E).hoistableScripts,v=m.get(f),v||(v={type:"script",instance:null,count:0,state:null},m.set(f,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Uf(u){return'href="'+mi(u)+'"'}function qm(u){return'link[rel="stylesheet"]['+u+"]"}function i3(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function VH(u,f,m,v){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?v.loading=1:(f=u.createElement("link"),v.preload=f,f.addEventListener("load",function(){return v.loading|=1}),f.addEventListener("error",function(){return v.loading|=2}),Ds(f,"link",m),Ne(f),u.head.appendChild(f))}function Vf(u){return'[src="'+mi(u)+'"]'}function Km(u){return"script[async]"+u}function o3(u,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var v=u.querySelector('style[data-href~="'+mi(m.href)+'"]');if(v)return f.instance=v,Ne(v),v;var E=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(u.ownerDocument||u).createElement("style"),Ne(v),Ds(v,"style",E),Dy(v,m.precedence,u),f.instance=v;case"stylesheet":E=Uf(m.href);var R=u.querySelector(qm(E));if(R)return f.state.loading|=4,f.instance=R,Ne(R),R;v=i3(m),(E=Si.get(E))&&nC(v,E),R=(u.ownerDocument||u).createElement("link"),Ne(R);var H=R;return H._p=new Promise(function(re,fe){H.onload=re,H.onerror=fe}),Ds(R,"link",v),f.state.loading|=4,Dy(R,m.precedence,u),f.instance=R;case"script":return R=Vf(m.src),(E=u.querySelector(Km(R)))?(f.instance=E,Ne(E),E):(v=m,(E=Si.get(R))&&(v=d({},m),rC(v,E)),u=u.ownerDocument||u,E=u.createElement("script"),Ne(E),Ds(E,"link",v),u.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(v=f.instance,f.state.loading|=4,Dy(v,m.precedence,u));return f.instance}function Dy(u,f,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,R=E,H=0;H<v.length;H++){var re=v[H];if(re.dataset.precedence===f)R=re;else if(R!==E)break}R?R.parentNode.insertBefore(u,R.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(u,f.firstChild))}function nC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function rC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var Fy=null;function l3(u,f,m){if(Fy===null){var v=new Map,E=Fy=new Map;E.set(m,v)}else E=Fy,v=E.get(m),v||(v=new Map,E.set(m,v));if(v.has(u))return v;for(v.set(u,null),m=m.getElementsByTagName(u),E=0;E<m.length;E++){var R=m[E];if(!(R[ae]||R[wt]||u==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var H=R.getAttribute(f)||"";H=u+H;var re=v.get(H);re?re.push(R):v.set(H,[R])}}return v}function c3(u,f,m){u=u.ownerDocument||u,u.head.insertBefore(m,f==="title"?u.querySelector("head > title"):null)}function WH(u,f,m){if(m===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function u3(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Xm=null;function HH(){}function GH(u,f,m){if(Xm===null)throw Error(r(475));var v=Xm;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=Uf(m.href),R=u.querySelector(qm(E));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(v.count++,v=Ly.bind(v),u.then(v,v)),f.state.loading|=4,f.instance=R,Ne(R);return}R=u.ownerDocument||u,m=i3(m),(E=Si.get(E))&&nC(m,E),R=R.createElement("link"),Ne(R);var H=R;H._p=new Promise(function(re,fe){H.onload=re,H.onerror=fe}),Ds(R,"link",m),f.instance=R}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(v.count++,f=Ly.bind(v),u.addEventListener("load",f),u.addEventListener("error",f))}}function qH(){if(Xm===null)throw Error(r(475));var u=Xm;return u.stylesheets&&u.count===0&&sC(u,u.stylesheets),0<u.count?function(f){var m=setTimeout(function(){if(u.stylesheets&&sC(u,u.stylesheets),u.unsuspend){var v=u.unsuspend;u.unsuspend=null,v()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(m)}}:null}function Ly(){if(this.count--,this.count===0){if(this.stylesheets)sC(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var My=null;function sC(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,My=new Map,f.forEach(KH,u),My=null,Ly.call(u))}function KH(u,f){if(!(f.state.loading&4)){var m=My.get(u);if(m)var v=m.get(null);else{m=new Map,My.set(u,m);for(var E=u.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<E.length;R++){var H=E[R];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(m.set(H.dataset.precedence,H),v=H)}v&&m.set(null,v)}E=f.instance,H=E.getAttribute("data-precedence"),R=m.get(H)||v,R===v&&m.set(null,E),m.set(H,E),this.count++,v=Ly.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),R?R.parentNode.insertBefore(E,R.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(E,u.firstChild)),f.state.loading|=4}}var Ym={$$typeof:N,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function XH(u,f,m,v,E,R,H,re){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=R,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function d3(u,f,m,v,E,R,H,re,fe,_e,We,Ke){return u=new XH(u,f,m,H,re,fe,_e,Ke),f=1,R===!0&&(f|=24),R=Wa(3,null,null,f),u.current=R,R.stateNode=u,f=BT(),f.refCount++,u.pooledCache=f,f.refCount++,R.memoizedState={element:v,isDehydrated:m,cache:f},VT(R),u}function f3(u){return u?(u=vf,u):vf}function h3(u,f,m,v,E,R){E=f3(E),v.context===null?v.context=E:v.pendingContext=E,v=xc(f),v.payload={element:m},R=R===void 0?null:R,R!==null&&(v.callback=R),m=yc(u,v,f),m!==null&&(Xa(m,u,f),Em(m,u,f))}function p3(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<f?m:f}}function aC(u,f){p3(u,f),(u=u.alternate)&&p3(u,f)}function m3(u){if(u.tag===13){var f=bf(u,67108864);f!==null&&Xa(f,u,67108864),aC(u,67108864)}}var Py=!0;function YH(u,f,m,v){var E=V.T;V.T=null;var R=X.p;try{X.p=2,iC(u,f,m,v)}finally{X.p=R,V.T=E}}function QH(u,f,m,v){var E=V.T;V.T=null;var R=X.p;try{X.p=8,iC(u,f,m,v)}finally{X.p=R,V.T=E}}function iC(u,f,m,v){if(Py){var E=oC(v);if(E===null)qN(u,f,v,By,m),x3(u,v);else if(JH(E,u,f,m,v))v.stopPropagation();else if(x3(u,v),f&4&&-1<ZH.indexOf(u)){for(;E!==null;){var R=ce(E);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var H=_t(R.pendingLanes);if(H!==0){var re=R;for(re.pendingLanes|=2,re.entangledLanes|=2;H;){var fe=1<<31-we(H);re.entanglements[1]|=fe,H&=~fe}ko(R),(Dn&6)===0&&(Sy=ne()+500,Vm(0))}}break;case 13:re=bf(R,2),re!==null&&Xa(re,R,2),Ny(),aC(R,2)}if(R=oC(v),R===null&&qN(u,f,v,By,m),R===E)break;E=R}E!==null&&v.stopPropagation()}else qN(u,f,v,null,m)}}function oC(u){return u=fT(u),lC(u)}var By=null;function lC(u){if(By=null,u=le(u),u!==null){var f=a(u);if(f===null)u=null;else{var m=f.tag;if(m===13){if(u=i(f),u!==null)return u;u=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return By=u,null}function g3(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case Me:return 2;case Ve:return 8;case ot:case st:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var cC=!1,$c=null,Rc=null,Oc=null,Qm=new Map,Zm=new Map,Dc=[],ZH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x3(u,f){switch(u){case"focusin":case"focusout":$c=null;break;case"dragenter":case"dragleave":Rc=null;break;case"mouseover":case"mouseout":Oc=null;break;case"pointerover":case"pointerout":Qm.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zm.delete(f.pointerId)}}function Jm(u,f,m,v,E,R){return u===null||u.nativeEvent!==R?(u={blockedOn:f,domEventName:m,eventSystemFlags:v,nativeEvent:R,targetContainers:[E]},f!==null&&(f=ce(f),f!==null&&m3(f)),u):(u.eventSystemFlags|=v,f=u.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),u)}function JH(u,f,m,v,E){switch(f){case"focusin":return $c=Jm($c,u,f,m,v,E),!0;case"dragenter":return Rc=Jm(Rc,u,f,m,v,E),!0;case"mouseover":return Oc=Jm(Oc,u,f,m,v,E),!0;case"pointerover":var R=E.pointerId;return Qm.set(R,Jm(Qm.get(R)||null,u,f,m,v,E)),!0;case"gotpointercapture":return R=E.pointerId,Zm.set(R,Jm(Zm.get(R)||null,u,f,m,v,E)),!0}return!1}function y3(u){var f=le(u.target);if(f!==null){var m=a(f);if(m!==null){if(f=m.tag,f===13){if(f=i(m),f!==null){u.blockedOn=f,tt(u.priority,function(){if(m.tag===13){var v=Ka();v=dc(v);var E=bf(m,v);E!==null&&Xa(E,m,v),aC(m,v)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function jy(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var m=oC(u.nativeEvent);if(m===null){m=u.nativeEvent;var v=new m.constructor(m.type,m);dT=v,m.target.dispatchEvent(v),dT=null}else return f=ce(m),f!==null&&m3(f),u.blockedOn=m,!1;f.shift()}return!0}function b3(u,f,m){jy(u)&&m.delete(f)}function eG(){cC=!1,$c!==null&&jy($c)&&($c=null),Rc!==null&&jy(Rc)&&(Rc=null),Oc!==null&&jy(Oc)&&(Oc=null),Qm.forEach(b3),Zm.forEach(b3)}function zy(u,f){u.blockedOn===f&&(u.blockedOn=null,cC||(cC=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,eG)))}var Uy=null;function v3(u){Uy!==u&&(Uy=u,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Uy===u&&(Uy=null);for(var f=0;f<u.length;f+=3){var m=u[f],v=u[f+1],E=u[f+2];if(typeof v!="function"){if(lC(v||m)===null)continue;break}var R=ce(m);R!==null&&(u.splice(f,3),f-=3,lN(R,{pending:!0,data:E,method:m.method,action:v},v,E))}}))}function e0(u){function f(fe){return zy(fe,u)}$c!==null&&zy($c,u),Rc!==null&&zy(Rc,u),Oc!==null&&zy(Oc,u),Qm.forEach(f),Zm.forEach(f);for(var m=0;m<Dc.length;m++){var v=Dc[m];v.blockedOn===u&&(v.blockedOn=null)}for(;0<Dc.length&&(m=Dc[0],m.blockedOn===null);)y3(m),m.blockedOn===null&&Dc.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var E=m[v],R=m[v+1],H=E[Nt]||null;if(typeof R=="function")H||v3(m);else if(H){var re=null;if(R&&R.hasAttribute("formAction")){if(E=R,H=R[Nt]||null)re=H.formAction;else if(lC(E)!==null)continue}else re=H.action;typeof re=="function"?m[v+1]=re:(m.splice(v,3),v-=3),v3(m)}}}function uC(u){this._internalRoot=u}Vy.prototype.render=uC.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,v=Ka();h3(m,v,u,f,null,null)},Vy.prototype.unmount=uC.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;h3(u.current,2,null,u,null,null),Ny(),f[ln]=null}};function Vy(u){this._internalRoot=u}Vy.prototype.unstable_scheduleHydration=function(u){if(u){var f=So();u={blockedOn:null,target:u,priority:f};for(var m=0;m<Dc.length&&f!==0&&f<Dc[m].priority;m++);Dc.splice(m,0,u),m===0&&y3(u)}};var w3=e.version;if(w3!=="19.1.1")throw Error(r(527,w3,"19.1.1"));X.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var tG={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wy.isDisabled&&Wy.supportsFiber)try{Vt=Wy.inject(tG),Mt=Wy}catch{}}return n0.createRoot=function(u,f){if(!s(u))throw Error(r(299));var m=!1,v="",E=MO,R=PO,H=BO,re=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(R=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(re=f.unstable_transitionCallbacks)),f=d3(u,1,!1,null,null,m,v,E,R,H,re,null),u[ln]=f.current,GN(u),new uC(f)},n0.hydrateRoot=function(u,f,m){if(!s(u))throw Error(r(299));var v=!1,E="",R=MO,H=PO,re=BO,fe=null,_e=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(H=m.onCaughtError),m.onRecoverableError!==void 0&&(re=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(fe=m.unstable_transitionCallbacks),m.formState!==void 0&&(_e=m.formState)),f=d3(u,1,!0,f,m??null,v,E,R,H,re,fe,_e),f.context=f3(null),m=f.current,v=Ka(),v=dc(v),E=xc(v),E.callback=null,yc(m,E,v),m=v,f.current.lanes=m,Wr(f,m),ko(f),u[ln]=f.current,GN(u),new Vy(f)},n0.version="19.1.1",n0}var $3;function fG(){if($3)return hC.exports;$3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hC.exports=dG(),hC.exports}var hG=fG();const pG=Ig(hG),Ht=n=>typeof n=="string",r0=()=>{let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t},R3=n=>n==null?"":""+n,mG=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},gG=/###/g,O3=n=>n&&n.indexOf("###")>-1?n.replace(gG,"."):n,D3=n=>!n||Ht(n),D0=(n,e,t)=>{const r=Ht(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(D3(n))return{};const a=O3(r[s]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++s}return D3(n)?{}:{obj:n,k:O3(r[s])}},F3=(n,e,t)=>{const{obj:r,k:s}=D0(n,e,Object);if(r!==void 0||e.length===1){r[s]=t;return}let a=e[e.length-1],i=e.slice(0,e.length-1),o=D0(n,i,Object);for(;o.obj===void 0&&i.length;)a=`${i[i.length-1]}.${a}`,i=i.slice(0,i.length-1),o=D0(n,i,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${a}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${a}`]=t},xG=(n,e,t,r)=>{const{obj:s,k:a}=D0(n,e,Object);s[a]=s[a]||[],s[a].push(t)},Zb=(n,e)=>{const{obj:t,k:r}=D0(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},yG=(n,e,t)=>{const r=Zb(n,t);return r!==void 0?r:Zb(e,t)},uP=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Ht(n[r])||n[r]instanceof String||Ht(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):uP(n[r],e[r],t):n[r]=e[r]);return n},Wf=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var bG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const vG=n=>Ht(n)?n.replace(/[&<>"'\/]/g,e=>bG[e]):n;class wG{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const SG=[" ",",","?","!",";"],TG=new wG(20),NG=(n,e,t)=>{e=e||"",t=t||"";const r=SG.filter(i=>e.indexOf(i)<0&&t.indexOf(i)<0);if(r.length===0)return!0;const s=TG.getRegExp(`(${r.map(i=>i==="?"?"\\?":i).join("|")})`);let a=!s.test(n);if(!a){const i=n.indexOf(t);i>0&&!s.test(n.substring(0,i))&&(a=!0)}return a},pE=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let s=n;for(let a=0;a<r.length;){if(!s||typeof s!="object")return;let i,o="";for(let l=a;l<r.length;++l)if(l!==a&&(o+=t),o+=r[l],i=s[o],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&l<r.length-1)continue;a+=l-a+1;break}s=i}return s},q0=n=>n==null?void 0:n.replace("_","-"),CG={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};let EG=class mE{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||CG,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,s){return s&&!this.debug?null:(Ht(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new mE(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new mE(this.logger,e)}};var jo=new EG;class ow{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(t)||0;this.observers[r].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,a])=>{for(let i=0;i<a;i++)s(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,a])=>{for(let i=0;i<a;i++)s.apply(s,[e,...t])})}}class L3 extends ow{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,s={}){var c,d;const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,i=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Ht(r)&&a?o.push(...r.split(a)):o.push(r)));const l=Zb(this.data,o);return!l&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),l||!i||!Ht(r)?l:pE((d=(c=this.data)==null?void 0:c[e])==null?void 0:d[t],r,a)}addResource(e,t,r,s,a={silent:!1}){const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(i?r.split(i):r)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),F3(this.data,o,s),a.silent||this.emit("added",e,t,r,s)}addResources(e,t,r,s={silent:!1}){for(const a in r)(Ht(r[a])||Array.isArray(r[a]))&&this.addResource(e,t,a,r[a],{silent:!0});s.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,s,a,i={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=r,r=t,t=o[1]),this.addNamespaces(t);let l=Zb(this.data,o)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?uP(l,r,a):l={...l,...r},F3(this.data,o,l),i.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var dP={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,s){return n.forEach(a=>{var i;e=((i=this.processors[a])==null?void 0:i.process(e,t,r,s))??e}),e}};const M3={},P3=n=>!Ht(n)&&typeof n!="boolean"&&typeof n!="number";class Jb extends ow{constructor(e,t={}){super(),mG(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=jo.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(e==null)return!1;const s=this.resolve(e,r);return(s==null?void 0:s.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const i=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!NG(e,r,s);if(i&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Ht(a)?[a]:a};const c=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(c[0])>-1)&&(a=c.shift()),e=c.join(s)}return{key:e,namespaces:Ht(a)?[a]:a}}translate(e,t,r){let s=typeof t=="object"?{...t}:t;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(s={...s}),s||(s={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],s),c=l[l.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,p=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return p?a?{res:`${c}${d}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${d}${o}`:a?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:o;const g=this.resolve(e,s);let x=g==null?void 0:g.res;const y=(g==null?void 0:g.usedKey)||o,b=(g==null?void 0:g.exactUsedKey)||o,S=["[object Number]","[object Function]","[object RegExp]"],T=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,C=s.count!==void 0&&!Ht(s.count),I=Jb.hasDefaultValue(s),F=C?this.pluralResolver.getSuffix(h,s.count,s):"",D=s.ordinal&&C?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",A=C&&!s.ordinal&&s.count===0,_=A&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${F}`]||s[`defaultValue${D}`]||s.defaultValue;let k=x;N&&!x&&I&&(k=_);const O=P3(k),P=Object.prototype.toString.apply(k);if(N&&k&&O&&S.indexOf(P)<0&&!(Ht(T)&&Array.isArray(k))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const W=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,k,{...s,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(g.res=W,g.usedParams=this.getUsedParamsDetails(s),g):W}if(i){const W=Array.isArray(k),K=W?[]:{},q=W?b:y;for(const V in k)if(Object.prototype.hasOwnProperty.call(k,V)){const X=`${q}${i}${V}`;I&&!x?K[V]=this.translate(X,{...s,defaultValue:P3(_)?_[V]:void 0,joinArrays:!1,ns:l}):K[V]=this.translate(X,{...s,joinArrays:!1,ns:l}),K[V]===X&&(K[V]=k[V])}x=K}}else if(N&&Ht(T)&&Array.isArray(x))x=x.join(T),x&&(x=this.extendTranslation(x,e,s,r));else{let W=!1,K=!1;!this.isValidLookup(x)&&I&&(W=!0,x=_),this.isValidLookup(x)||(K=!0,x=o);const V=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&K?void 0:x,X=I&&_!==x&&this.options.updateMissing;if(K||W||X){if(this.logger.log(X?"updateKey":"missingKey",h,c,o,X?_:x),i){const J=this.resolve(o,{...s,keySeparator:!1});J&&J.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Q=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let J=0;J<Y.length;J++)Q.push(Y[J]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(s.lng||this.language):Q.push(s.lng||this.language);const j=(J,M,z)=>{var U;const G=I&&z!==x?z:V;this.options.missingKeyHandler?this.options.missingKeyHandler(J,c,M,G,X,s):(U=this.backendConnector)!=null&&U.saveMissing&&this.backendConnector.saveMissing(J,c,M,G,X,s),this.emit("missingKey",J,c,M,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?Q.forEach(J=>{const M=this.pluralResolver.getSuffixes(J,s);A&&s[`defaultValue${this.options.pluralSeparator}zero`]&&M.indexOf(`${this.options.pluralSeparator}zero`)<0&&M.push(`${this.options.pluralSeparator}zero`),M.forEach(z=>{j([J],o+z,s[`defaultValue${z}`]||_)})}):j(Q,o,_))}x=this.extendTranslation(x,e,s,g,r),K&&x===o&&this.options.appendNamespaceToMissingKey&&(x=`${c}${d}${o}`),(K||W)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${d}${o}`:o,W?x:void 0,s))}return a?(g.res=x,g.usedParams=this.getUsedParamsDetails(s),g):x}extendTranslation(e,t,r,s,a){var l,c;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=Ht(e)&&(((c=r==null?void 0:r.interpolation)==null?void 0:c.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const g=e.match(this.interpolator.nestingRegexp);h=g&&g.length}let p=r.replace&&!Ht(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,r.lng||this.language||s.usedLng,r),d){const g=e.match(this.interpolator.nestingRegexp),x=g&&g.length;h<x&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(a==null?void 0:a[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):this.translate(...g,t),r)),r.interpolation&&this.interpolator.reset()}const i=r.postProcess||this.options.postProcess,o=Ht(i)?[i]:i;return e!=null&&(o!=null&&o.length)&&r.applyPostProcessor!==!1&&(e=dP.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,s,a,i,o;return Ht(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,t),d=c.key;s=d;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=t.count!==void 0&&!Ht(t.count),g=p&&!t.ordinal&&t.count===0,x=t.context!==void 0&&(Ht(t.context)||typeof t.context=="number")&&t.context!=="",y=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);h.forEach(b=>{var S,T;this.isValidLookup(r)||(o=b,!M3[`${y[0]}-${b}`]&&((S=this.utils)!=null&&S.hasLoadedNamespace)&&!((T=this.utils)!=null&&T.hasLoadedNamespace(o))&&(M3[`${y[0]}-${b}`]=!0,this.logger.warn(`key "${s}" for languages "${y.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(N=>{var F;if(this.isValidLookup(r))return;i=N;const C=[d];if((F=this.i18nFormat)!=null&&F.addLookupKeys)this.i18nFormat.addLookupKeys(C,d,N,b,t);else{let D;p&&(D=this.pluralResolver.getSuffix(N,t.count,t));const A=`${this.options.pluralSeparator}zero`,_=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(C.push(d+D),t.ordinal&&D.indexOf(_)===0&&C.push(d+D.replace(_,this.options.pluralSeparator)),g&&C.push(d+A)),x){const k=`${d}${this.options.contextSeparator}${t.context}`;C.push(k),p&&(C.push(k+D),t.ordinal&&D.indexOf(_)===0&&C.push(k+D.replace(_,this.options.pluralSeparator)),g&&C.push(k+A))}}let I;for(;I=C.pop();)this.isValidLookup(r)||(a=I,r=this.getResource(N,b,I,t))}))})}),{res:r,usedKey:s,exactUsedKey:a,usedLng:i,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,s={}){var a;return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,t,r,s):this.resourceStore.getResource(e,t,r,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ht(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const a of t)delete s[a]}return s}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class B3{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=jo.create("languageUtils")}getScriptPartFromCode(e){if(e=q0(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=q0(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ht(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return t=s;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ht(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),s=[],a=i=>{i&&(this.isSupportedCode(i)?s.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return Ht(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Ht(e)&&a(this.formatLanguageCode(e)),r.forEach(i=>{s.indexOf(i)<0&&a(this.formatLanguageCode(i))}),s}}const j3={zero:0,one:1,two:2,few:3,many:4,other:5},z3={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class kG{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=jo.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=q0(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:s});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let i;try{i=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),z3;if(!e.match(/-|_/))return z3;const l=this.languageUtils.getLanguagePartFromCode(e);i=this.getRule(l,t)}return this.pluralRulesCache[a]=i,i}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(s=>`${t}${s}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((s,a)=>j3[s]-j3[a]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,t,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const U3=(n,e,t,r=".",s=!0)=>{let a=yG(n,e,t);return!a&&s&&Ht(t)&&(a=pE(n,t,r),a===void 0&&(a=pE(e,t,r))),a},xC=n=>n.replace(/\$/g,"$$$$");class _G{constructor(e={}){var t;this.logger=jo.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:s,prefix:a,prefixEscaped:i,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:x,nestingSuffixEscaped:y,nestingOptionsSeparator:b,maxReplaces:S,alwaysFormat:T}=e.interpolation;this.escape=t!==void 0?t:vG,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=a?Wf(a):i||"{{",this.suffix=o?Wf(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Wf(p):g||Wf("$t("),this.nestingSuffix=x?Wf(x):y||Wf(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=S||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,s){var g;let a,i,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=x=>{if(x.indexOf(this.formatSeparator)<0){const T=U3(t,l,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,r,{...s,...t,interpolationkey:x}):T}const y=x.split(this.formatSeparator),b=y.shift().trim(),S=y.join(this.formatSeparator).trim();return this.format(U3(t,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...s,...t,interpolationkey:b})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((g=s==null?void 0:s.interpolation)==null?void 0:g.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>xC(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?xC(this.escape(x)):xC(x)}].forEach(x=>{for(o=0;a=x.regex.exec(e);){const y=a[1].trim();if(i=c(y),i===void 0)if(typeof d=="function"){const S=d(e,a,s);i=Ht(S)?S:""}else if(s&&Object.prototype.hasOwnProperty.call(s,y))i="";else if(h){i=a[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),i="";else!Ht(i)&&!this.useRawValueToEscape&&(i=R3(i));const b=x.safeValue(i);if(e=e.replace(a[0],b),h?(x.regex.lastIndex+=i.length,x.regex.lastIndex-=a[0].length):x.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,r={}){let s,a,i;const o=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const h=l.split(new RegExp(`${d}[ ]*{`));let p=`{${h[1]}`;l=h[0],p=this.interpolate(p,i);const g=p.match(/'/g),x=p.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!x||x.length%2!==0)&&(p=p.replace(/'/g,'"'));try{i=JSON.parse(p),c&&(i={...c,...i})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,y),`${l}${d}${p}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];i={...r},i=i.replace&&!Ht(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;const c=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(c!==-1&&(l=s[1].slice(c).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,c)),a=t(o.call(this,s[1].trim(),i),i),a&&s[0]===e&&!Ht(a))return a;Ht(a)||(a=R3(a)),a||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),a=""),l.length&&(a=l.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:s[1].trim()}),a.trim())),e=e.replace(s[0],a),this.regexp.lastIndex=0}return e}}const IG=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(i=>{if(i){const[o,...l]=i.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();t[d]||(t[d]=c),c==="false"&&(t[d]=!1),c==="true"&&(t[d]=!0),isNaN(c)||(t[d]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},V3=n=>{const e={};return(t,r,s)=>{let a=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(a={...a,[s.interpolationkey]:void 0});const i=r+JSON.stringify(a);let o=e[i];return o||(o=n(q0(r),s),e[i]=o),o(t)}},AG=n=>(e,t,r)=>n(q0(t),r)(e);class $G{constructor(e={}){this.logger=jo.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?V3:AG;this.formats={number:r((s,a)=>{const i=new Intl.NumberFormat(s,{...a});return o=>i.format(o)}),currency:r((s,a)=>{const i=new Intl.NumberFormat(s,{...a,style:"currency"});return o=>i.format(o)}),datetime:r((s,a)=>{const i=new Intl.DateTimeFormat(s,{...a});return o=>i.format(o)}),relativetime:r((s,a)=>{const i=new Intl.RelativeTimeFormat(s,{...a});return o=>i.format(o,a.range||"day")}),list:r((s,a)=>{const i=new Intl.ListFormat(s,{...a});return o=>i.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=V3(t)}format(e,t,r,s={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(o=>o.indexOf(")")>-1)){const o=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,o)].join(this.formatSeparator)}return a.reduce((o,l)=>{var h;const{formatName:c,formatOptions:d}=IG(l);if(this.formats[c]){let p=o;try{const g=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},x=g.locale||g.lng||s.locale||s.lng||r;p=this.formats[c](o,x,{...d,...s,...g})}catch(g){this.logger.warn(g)}return p}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const RG=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class OG extends ow{constructor(e,t,r,s={}){var a,i;super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=jo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(i=(a=this.backend)==null?void 0:a.init)==null||i.call(a,r,s.backend,s)}queueLoad(e,t,r,s){const a={},i={},o={},l={};return e.forEach(c=>{let d=!0;t.forEach(h=>{const p=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?i[p]===void 0&&(i[p]=!0):(this.state[p]=1,d=!1,i[p]===void 0&&(i[p]=!0),a[p]===void 0&&(a[p]=!0),l[h]===void 0&&(l[h]=!0)))}),d||(o[c]=!0)}),(Object.keys(a).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(a),pending:Object.keys(i),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,r){const s=e.split("|"),a=s[0],i=s[1];t&&this.emit("failedLoading",a,i,t),!t&&r&&this.store.addResourceBundle(a,i,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(l=>{xG(l.loaded,[a],i),RG(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const d=l.loaded[c];d.length&&d.forEach(h=>{o[c][h]===void 0&&(o[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,r,s=0,a=this.retryTimeout,i){if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:s,wait:a,callback:i});return}this.readingCalls++;const o=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,s+1,a*2,i)},a);return}i(c,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(d=>o(null,d)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,t,o)}prepareLoading(e,t,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Ht(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ht(t)&&(t=[t]);const a=this.queueLoad(e,t,r,s);if(!a.toLoad.length)return a.pending.length||s(),null;a.toLoad.forEach(i=>{this.loadOne(i)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),s=r[0],a=r[1];this.read(s,a,"read",void 0,void 0,(i,o)=>{i&&this.logger.warn(`${t}loading namespace ${a} for language ${s} failed`,i),!i&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${s}`,o),this.loaded(e,i,o)})}saveMissing(e,t,r,s,a,i={},o=()=>{}){var l,c,d,h,p;if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((p=this.backend)!=null&&p.create){const g={...i,isUpdate:a},x=this.backend.create.bind(this.backend);if(x.length<6)try{let y;x.length===5?y=x(e,t,r,s,g):y=x(e,t,r,s),y&&typeof y.then=="function"?y.then(b=>o(null,b)).catch(o):o(null,y)}catch(y){o(y)}else x(e,t,r,s,o,g)}!e||!e[0]||this.store.addResource(e[0],t,r,s)}}}const W3=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Ht(n[1])&&(e.defaultValue=n[1]),Ht(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),H3=n=>{var e,t;return Ht(n.ns)&&(n.ns=[n.ns]),Ht(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ht(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},Gy=()=>{},DG=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class K0 extends ow{constructor(e={},t){if(super(),this.options=H3(e),this.services={},this.logger=jo,this.modules={external:[]},DG(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ht(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=W3();this.options={...r,...this.options,...H3(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?jo.init(s(this.modules.logger),this.options):jo.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=$G;const d=new B3(this.options);this.store=new L3(this.options.resources,this.options);const h=this.services;h.logger=jo,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new kG(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=s(c),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new _G(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new OG(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(g,...x)=>{this.emit(g,...x)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Jb(this.services,this.options),this.translator.on("*",(g,...x)=>{this.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Gy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...d)=>this.store[c](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...d)=>(this.store[c](...d),this)});const o=r0(),l=()=>{const c=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),t(d,h)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(e,t=Gy){var a,i;let r=t;const s=Ht(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(i=(a=this.options.preload)==null?void 0:a.forEach)==null||i.call(a,c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,t,r){const s=r0();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Gy),this.services.backendConnector.reload(e,t,a=>{s.resolve(),r(a)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&dP.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=r0();this.emit("languageChanging",e);const s=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},a=(o,l)=>{l?this.isLanguageChangingTo===e&&(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...c)=>this.t(...c)),t&&t(o,(...c)=>this.t(...c))},i=o=>{var d,h;!e&&!o&&this.services.languageDetector&&(o=[]);const l=Ht(o)?o:o&&o[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(Ht(o)?[o]:o);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,c)),this.loadResources(c,p=>{a(p,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?i(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(i):this.services.languageDetector.detect(i):i(e),r}getFixedT(e,t,r){const s=(a,i,...o)=>{let l;typeof i!="object"?l=this.options.overloadTranslationOptionHandler([a,i].concat(o)):l={...i},l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const c=this.options.keySeparator||".";let d;return l.keyPrefix&&Array.isArray(a)?d=a.map(h=>`${l.keyPrefix}${c}${h}`):d=l.keyPrefix?`${l.keyPrefix}${c}${a}`:a,this.t(d,l)};return Ht(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(...e){var t;return(t=this.translator)==null?void 0:t.translate(...e)}exists(...e){var t;return(t=this.translator)==null?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const o=t.precheck(this,i);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(r,e)&&(!s||i(a,e)))}loadNamespaces(e,t){const r=r0();return this.options.ns?(Ht(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),t&&t(s)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=r0();Ht(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter(i=>s.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return a.length?(this.options.preload=s.concat(a),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}dir(e){var s,a;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new B3(W3());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new K0(e,t)}cloneInstance(e={},t=Gy){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},a=new K0(s);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(o=>{a[o]=this[o]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const o=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((d,h)=>(d[h]={...l[c][h]},d),l[c]),l),{});a.store=new L3(o,s),a.services.resourceStore=a.store}return a.translator=new Jb(a.services,s),a.translator.on("*",(o,...l)=>{a.emit(o,...l)}),a.init(s,t),a.translator.options=s,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const sa=K0.createInstance();sa.createInstance=K0.createInstance;sa.createInstance;sa.dir;sa.init;sa.loadResources;sa.reloadResources;sa.use;sa.changeLanguage;sa.getFixedT;sa.t;sa.exists;sa.setDefaultNamespace;sa.hasLoadedNamespace;sa.loadNamespaces;sa.loadLanguages;function Th(){return Th=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Th.apply(null,arguments)}function FG(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const G3={};function gE(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&G3[e[0]]||(typeof e[0]=="string"&&(G3[e[0]]=new Date),FG(...e))}const fP=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}};function q3(n,e,t){n.loadNamespaces(e,fP(n,t))}function K3(n,e,t,r){typeof t=="string"&&(t=[t]),t.forEach(s=>{n.options.ns.indexOf(s)<0&&n.options.ns.push(s)}),n.loadLanguages(e,fP(n,r))}function LG(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,a=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(o,l)=>{const c=e.services.backendConnector.state[`${o}|${l}`];return c===-1||c===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!i(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||i(r,n)&&(!s||i(a,n)))}function MG(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(gE("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(s,a)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!a(s.isLanguageChangingTo,n))return!1}}):LG(n,e,t)}const PG=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,BG={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},jG=n=>BG[n],zG=n=>n.replace(PG,jG);let xE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:zG};function UG(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xE={...xE,...n}}function VG(){return xE}let hP;function WG(n){hP=n}function HG(){return hP}const GG={type:"3rdParty",init(n){UG(n.options.react),WG(n)}},qG=L.createContext();class KG{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const XG=(n,e)=>{const t=L.useRef();return L.useEffect(()=>{t.current=n},[n,e]),t.current};function pP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:r,defaultNS:s}=L.useContext(qG)||{},a=t||r||HG();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new KG),!a){gE("You will need to pass in an i18next instance by using initReactI18next");const N=(I,F)=>typeof F=="string"?F:F&&typeof F=="object"&&typeof F.defaultValue=="string"?F.defaultValue:Array.isArray(I)?I[I.length-1]:I,C=[N,{},!1];return C.t=N,C.i18n={},C.ready=!1,C}a.options.react&&a.options.react.wait!==void 0&&gE("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...VG(),...a.options.react,...e},{useSuspense:o,keyPrefix:l}=i;let c=s||a.options&&a.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(c);const d=(a.isInitialized||a.initializedStoreOnce)&&c.every(N=>MG(N,a,i));function h(){return a.getFixedT(e.lng||null,i.nsMode==="fallback"?c:c[0],l)}const[p,g]=L.useState(h);let x=c.join();e.lng&&(x=`${e.lng}${x}`);const y=XG(x),b=L.useRef(!0);L.useEffect(()=>{const{bindI18n:N,bindI18nStore:C}=i;b.current=!0,!d&&!o&&(e.lng?K3(a,e.lng,c,()=>{b.current&&g(h)}):q3(a,c,()=>{b.current&&g(h)})),d&&y&&y!==x&&b.current&&g(h);function I(){b.current&&g(h)}return N&&a&&a.on(N,I),C&&a&&a.store.on(C,I),()=>{b.current=!1,N&&a&&N.split(" ").forEach(F=>a.off(F,I)),C&&a&&C.split(" ").forEach(F=>a.store.off(F,I))}},[a,x]);const S=L.useRef(!0);L.useEffect(()=>{b.current&&!S.current&&g(h),S.current=!1},[a,l]);const T=[p,a,d];if(T.t=p,T.i18n=a,T.ready=d,d||!d&&!o)return T;throw new Promise(N=>{e.lng?K3(a,e.lng,c,()=>N()):q3(a,c,()=>N())})}const{slice:YG,forEach:QG}=[];function ZG(n){return QG.call(YG.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function JG(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const X3=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,eq=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let a=`${n}=${s}`;if(r.maxAge>0){const i=r.maxAge-0;if(Number.isNaN(i))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(i)}`}if(r.domain){if(!X3.test(r.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${r.domain}`}if(r.path){if(!X3.test(r.path))throw new TypeError("option path is invalid");a+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(a+="; Partitioned"),a},Y3={create(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+t*60*1e3)),r&&(s.domain=r),document.cookie=eq(n,e,s)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let s=t[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var tq={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return Y3.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:s,cookieOptions:a}=e;t&&typeof document<"u"&&Y3.create(t,n,r,s,a)}},nq={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const i=s.substring(1).split("&");for(let o=0;o<i.length;o++){const l=i[o].indexOf("=");l>0&&i[o].substring(0,l)===e&&(t=i[o].substring(l+1))}}return t}},rq={name:"hash",lookup(n){var s;let{lookupHash:e,lookupFromHashIndex:t}=n,r;if(typeof window<"u"){const{hash:a}=window.location;if(a&&a.length>2){const i=a.substring(1);if(e){const o=i.split("&");for(let l=0;l<o.length;l++){const c=o[l].indexOf("=");c>0&&o[l].substring(0,c)===e&&(r=o[l].substring(c+1))}}if(r)return r;if(!r&&t>-1){const o=a.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(s=o[typeof t=="number"?t:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let Hf=null;const Q3=()=>{if(Hf!==null)return Hf;try{if(Hf=typeof window<"u"&&window.localStorage!==null,!Hf)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{Hf=!1}return Hf};var sq={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&Q3())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&Q3()&&window.localStorage.setItem(t,n)}};let Gf=null;const Z3=()=>{if(Gf!==null)return Gf;try{if(Gf=typeof window<"u"&&window.sessionStorage!==null,!Gf)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{Gf=!1}return Gf};var aq={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&Z3())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&Z3()&&window.sessionStorage.setItem(t,n)}},iq={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:s}=navigator;if(t)for(let a=0;a<t.length;a++)e.push(t[a]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},oq={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},lq={name:"path",lookup(n){var s;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(s=t[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},cq={name:"subdomain",lookup(n){var s,a;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((a=(s=window.location)==null?void 0:s.hostname)==null?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let mP=!1;try{document.cookie,mP=!0}catch{}const gP=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];mP||gP.splice(1,1);const uq=()=>({order:gP,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class xP{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=ZG(t,this.options||{},uq()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(tq),this.addDetector(nq),this.addDetector(sq),this.addDetector(aq),this.addDetector(iq),this.addDetector(oq),this.addDetector(lq),this.addDetector(cq),this.addDetector(rq)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(t=t.concat(s))}}),t=t.filter(r=>r!=null&&!JG(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}xP.type="languageDetector";const dq={en:{translation:{dashboard:"Dashboard",logout:"Logout",invoicesDashboard:"Invoices Dashboard",totalIncome:"Total Income",totalCredits:"Total Credits",netTotal:"Net Total",invoices:"invoices",creditNotes:"credit notes",allInvoices:"All invoices",searchInvoices:"Search invoices...",startDate:"Start Date",endDate:"End Date",clear:"Clear",alertInvoice:"There are invoices with missing fields  highlighted in red.",file:"File",date:"Date",amount:"Amount",reference:"Reference",city:"City",rowCount:"Row Count",actions:"Actions",next:"Next",previous:"Previous",total:"Total",perPage:"Per Page",page:"Page",of:"of",cancel:"Cancel",save:"Save",undo:"Undo",confirm:"Confirm",edit:"Edit",all:"ALL",negativeAmount:"Negative Amounts",allCities:"All Cities"}},he:{translation:{dashboard:" ",logout:"",invoicesDashboard:" ",totalIncome:"  ",totalCredits:"  ",netTotal:"  ",invoices:"",creditNotes:" ",allInvoices:" ",searchInvoices:" ",startDate:" ",endDate:" ",clear:"",alertInvoice:".     -  ",file:"",date:"",amount:"",reference:"",city:"",rowCount:" ",actions:"",next:"",previous:"",total:" ",perPage:" ",page:"",of:"",cancel:"",save:"",undo:"",confirm:"",edit:"",all:"",negativeAmount:" ",allCities:" "}}};sa.use(xP).use(GG).init({resources:dq,fallbackLng:"en",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var J3="popstate";function fq(n={}){function e(r,s){let{pathname:a,search:i,hash:o}=r.location;return yE("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:X0(s)}return pq(e,t,null,n)}function Sr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Yo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hq(){return Math.random().toString(36).substring(2,10)}function e4(n,e){return{usr:n.state,key:n.key,idx:e}}function yE(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vh(e):e,state:t,key:e&&e.key||r||hq()}}function X0({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function pq(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,c=d();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function d(){return(i.state||{idx:null}).idx}function h(){o="POP";let b=d(),S=b==null?null:b-c;c=b,l&&l({action:o,location:y.location,delta:S})}function p(b,S){o="PUSH";let T=yE(y.location,b,S);c=d()+1;let N=e4(T,c),C=y.createHref(T);try{i.pushState(N,"",C)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(C)}a&&l&&l({action:o,location:y.location,delta:1})}function g(b,S){o="REPLACE";let T=yE(y.location,b,S);c=d();let N=e4(T,c),C=y.createHref(T);i.replaceState(N,"",C),a&&l&&l({action:o,location:y.location,delta:0})}function x(b){return mq(b)}let y={get action(){return o},get location(){return n(s,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(J3,h),l=b,()=>{s.removeEventListener(J3,h),l=null}},createHref(b){return e(s,b)},createURL:x,encodeLocation(b){let S=x(b);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:g,go(b){return i.go(b)}};return y}function mq(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Sr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:X0(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function yP(n,e,t="/"){return gq(n,e,t,!1)}function gq(n,e,t,r){let s=typeof e=="string"?Vh(e):e,a=Pl(s.pathname||"/",t);if(a==null)return null;let i=bP(n);xq(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let c=_q(a);o=Eq(i[l],c,r)}return o}function bP(n,e=[],t=[],r=""){let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(Sr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=Ol([r,l.relativePath]),d=t.concat(l);a.children&&a.children.length>0&&(Sr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),bP(a.children,e,d,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:Nq(c,a.index),routesMeta:d})};return n.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of vP(a.path))s(a,i,l)}),e}function vP(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=vP(r.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function xq(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Cq(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var yq=/^:[\w-]+$/,bq=3,vq=2,wq=1,Sq=10,Tq=-2,t4=n=>n==="*";function Nq(n,e){let t=n.split("/"),r=t.length;return t.some(t4)&&(r+=Tq),e&&(r+=vq),t.filter(s=>!t4(s)).reduce((s,a)=>s+(yq.test(a)?bq:a===""?wq:Sq),r)}function Cq(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Eq(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",i=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=ev({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=ev({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:Ol([a,h.pathname]),pathnameBase:Rq(Ol([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=Ol([a,h.pathnameBase]))}return i}function ev(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kq(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let x=o[p]||"";i=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const g=o[p];return h&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:n}}function kq(n,e=!1,t=!0){Yo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _q(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Pl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Iq(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Vh(n):n;return{pathname:t?t.startsWith("/")?t:Aq(t,e):e,search:Oq(r),hash:Dq(s)}}function Aq(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function yC(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $q(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wP(n){let e=$q(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function SP(n,e,t,r=!1){let s;typeof n=="string"?s=Vh(n):(s={...n},Sr(!s.pathname||!s.pathname.includes("?"),yC("?","pathname","search",s)),Sr(!s.pathname||!s.pathname.includes("#"),yC("#","pathname","hash",s)),Sr(!s.search||!s.search.includes("#"),yC("#","search","hash",s)));let a=n===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=t;else{let h=e.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}o=h>=0?e[h]:"/"}let l=Iq(s,o),c=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Ol=n=>n.join("/").replace(/\/\/+/g,"/"),Rq=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Oq=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Dq=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Fq(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var TP=["POST","PUT","PATCH","DELETE"];new Set(TP);var Lq=["GET",...TP];new Set(Lq);var Wh=L.createContext(null);Wh.displayName="DataRouter";var lw=L.createContext(null);lw.displayName="DataRouterState";L.createContext(!1);var NP=L.createContext({isTransitioning:!1});NP.displayName="ViewTransition";var Mq=L.createContext(new Map);Mq.displayName="Fetchers";var Pq=L.createContext(null);Pq.displayName="Await";var sl=L.createContext(null);sl.displayName="Navigation";var Ag=L.createContext(null);Ag.displayName="Location";var Zl=L.createContext({outlet:null,matches:[],isDataRoute:!1});Zl.displayName="Route";var Uk=L.createContext(null);Uk.displayName="RouteError";function Bq(n,{relative:e}={}){Sr($g(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=L.useContext(sl),{hash:s,pathname:a,search:i}=Rg(n,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:Ol([t,a])),r.createHref({pathname:o,search:i,hash:s})}function $g(){return L.useContext(Ag)!=null}function pu(){return Sr($g(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Ag).location}var CP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EP(n){L.useContext(sl).static||L.useLayoutEffect(n)}function kP(){let{isDataRoute:n}=L.useContext(Zl);return n?Zq():jq()}function jq(){Sr($g(),"useNavigate() may be used only in the context of a <Router> component.");let n=L.useContext(Wh),{basename:e,navigator:t}=L.useContext(sl),{matches:r}=L.useContext(Zl),{pathname:s}=pu(),a=JSON.stringify(wP(r)),i=L.useRef(!1);return EP(()=>{i.current=!0}),L.useCallback((l,c={})=>{if(Yo(i.current,CP),!i.current)return;if(typeof l=="number"){t.go(l);return}let d=SP(l,JSON.parse(a),s,c.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ol([e,d.pathname])),(c.replace?t.replace:t.push)(d,c.state,c)},[e,t,a,s,n])}L.createContext(null);function Rg(n,{relative:e}={}){let{matches:t}=L.useContext(Zl),{pathname:r}=pu(),s=JSON.stringify(wP(t));return L.useMemo(()=>SP(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function zq(n,e){return _P(n,e)}function _P(n,e,t,r){var S;Sr($g(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=L.useContext(sl),{matches:a}=L.useContext(Zl),i=a[a.length-1],o=i?i.params:{},l=i?i.pathname:"/",c=i?i.pathnameBase:"/",d=i&&i.route;{let T=d&&d.path||"";IP(l,!d||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let h=pu(),p;if(e){let T=typeof e=="string"?Vh(e):e;Sr(c==="/"||((S=T.pathname)==null?void 0:S.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${T.pathname}" was given in the \`location\` prop.`),p=T}else p=h;let g=p.pathname||"/",x=g;if(c!=="/"){let T=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let y=yP(n,{pathname:x});Yo(d||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Yo(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Gq(y&&y.map(T=>Object.assign({},T,{params:Object.assign({},o,T.params),pathname:Ol([c,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Ol([c,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,t,r);return e&&b?L.createElement(Ag.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},b):b}function Uq(){let n=Qq(),e=Fq(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",n),i=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:a},"ErrorBoundary")," or"," ",L.createElement("code",{style:a},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),t?L.createElement("pre",{style:s},t):null,i)}var Vq=L.createElement(Uq,null),Wq=class extends L.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?L.createElement(Zl.Provider,{value:this.props.routeContext},L.createElement(Uk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hq({routeContext:n,match:e,children:t}){let r=L.useContext(Wh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Zl.Provider,{value:n},t)}function Gq(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let l=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);Sr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let i=!1,o=-1;if(t)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:d,errors:h}=t,p=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||p){i=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((l,c,d)=>{let h,p=!1,g=null,x=null;t&&(h=a&&c.route.id?a[c.route.id]:void 0,g=c.route.errorElement||Vq,i&&(o<0&&d===0?(IP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,x=null):o===d&&(p=!0,x=c.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,d+1)),b=()=>{let S;return h?S=g:p?S=x:c.route.Component?S=L.createElement(c.route.Component,null):c.route.element?S=c.route.element:S=l,L.createElement(Hq,{match:c,routeContext:{outlet:l,matches:y,isDataRoute:t!=null},children:S})};return t&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?L.createElement(Wq,{location:t.location,revalidation:t.revalidation,component:g,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}function Vk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qq(n){let e=L.useContext(Wh);return Sr(e,Vk(n)),e}function Kq(n){let e=L.useContext(lw);return Sr(e,Vk(n)),e}function Xq(n){let e=L.useContext(Zl);return Sr(e,Vk(n)),e}function Wk(n){let e=Xq(n),t=e.matches[e.matches.length-1];return Sr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Yq(){return Wk("useRouteId")}function Qq(){var r;let n=L.useContext(Uk),e=Kq("useRouteError"),t=Wk("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function Zq(){let{router:n}=qq("useNavigate"),e=Wk("useNavigate"),t=L.useRef(!1);return EP(()=>{t.current=!0}),L.useCallback(async(s,a={})=>{Yo(t.current,CP),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var n4={};function IP(n,e,t){!e&&!n4[n]&&(n4[n]=!0,Yo(!1,t))}L.memo(Jq);function Jq({routes:n,future:e,state:t}){return _P(n,void 0,t,e)}function Ei(n){Sr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eK({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){Sr(!$g(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=n.replace(/^\/*/,"/"),o=L.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);typeof t=="string"&&(t=Vh(t));let{pathname:l="/",search:c="",hash:d="",state:h=null,key:p="default"}=t,g=L.useMemo(()=>{let x=Pl(l,i);return x==null?null:{location:{pathname:x,search:c,hash:d,state:h,key:p},navigationType:r}},[i,l,c,d,h,p,r]);return Yo(g!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(sl.Provider,{value:o},L.createElement(Ag.Provider,{children:e,value:g}))}function tK({children:n,location:e}){return zq(bE(n),e)}function bE(n,e=[]){let t=[];return L.Children.forEach(n,(r,s)=>{if(!L.isValidElement(r))return;let a=[...e,s];if(r.type===L.Fragment){t.push.apply(t,bE(r.props.children,a));return}Sr(r.type===Ei,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Sr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=bE(r.props.children,a)),t.push(i)}),t}var Ab="get",$b="application/x-www-form-urlencoded";function cw(n){return n!=null&&typeof n.tagName=="string"}function nK(n){return cw(n)&&n.tagName.toLowerCase()==="button"}function rK(n){return cw(n)&&n.tagName.toLowerCase()==="form"}function sK(n){return cw(n)&&n.tagName.toLowerCase()==="input"}function aK(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iK(n,e){return n.button===0&&(!e||e==="_self")&&!aK(n)}var qy=null;function oK(){if(qy===null)try{new FormData(document.createElement("form"),0),qy=!1}catch{qy=!0}return qy}var lK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bC(n){return n!=null&&!lK.has(n)?(Yo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$b}"`),null):n}function cK(n,e){let t,r,s,a,i;if(rK(n)){let o=n.getAttribute("action");r=o?Pl(o,e):null,t=n.getAttribute("method")||Ab,s=bC(n.getAttribute("enctype"))||$b,a=new FormData(n)}else if(nK(n)||sK(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(r=l?Pl(l,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||Ab,s=bC(n.getAttribute("formenctype"))||bC(o.getAttribute("enctype"))||$b,a=new FormData(o,n),!oK()){let{name:c,type:d,value:h}=n;if(d==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,h)}}else{if(cw(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ab,r=null,s=$b,i=n}return a&&s==="text/plain"&&(i=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hk(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uK(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Pl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function dK(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fK(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hK(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let i=await dK(a,t);return i.links?i.links():[]}return[]}));return xK(r.flat(1).filter(fK).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function r4(n,e,t,r,s,a){let i=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>{var d;return t[c].pathname!==l.pathname||((d=t[c].route.path)==null?void 0:d.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>i(l,c)||o(l,c)):a==="data"?e.filter((l,c)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(i(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function pK(n,e,{includeHydrateFallback:t}={}){return mK(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function mK(n){return[...new Set(n)]}function gK(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function xK(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(gK(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function AP(){let n=L.useContext(Wh);return Hk(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yK(){let n=L.useContext(lw);return Hk(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Gk=L.createContext(void 0);Gk.displayName="FrameworkContext";function $P(){let n=L.useContext(Gk);return Hk(n,"You must render this element inside a <HydratedRouter> element"),n}function bK(n,e){let t=L.useContext(Gk),[r,s]=L.useState(!1),[a,i]=L.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=L.useRef(null);L.useEffect(()=>{if(n==="render"&&i(!0),n==="viewport"){let y=S=>{S.forEach(T=>{i(T.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[n]),L.useEffect(()=>{if(r){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[r]);let g=()=>{s(!0)},x=()=>{s(!1),i(!1)};return t?n!=="intent"?[a,p,{}]:[a,p,{onFocus:s0(o,g),onBlur:s0(l,x),onMouseEnter:s0(c,g),onMouseLeave:s0(d,x),onTouchStart:s0(h,g)}]:[!1,p,{}]}function s0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vK({page:n,...e}){let{router:t}=AP(),r=L.useMemo(()=>yP(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?L.createElement(SK,{page:n,matches:r,...e}):null}function wK(n){let{manifest:e,routeModules:t}=$P(),[r,s]=L.useState([]);return L.useEffect(()=>{let a=!1;return hK(n,e,t).then(i=>{a||s(i)}),()=>{a=!0}},[n,e,t]),r}function SK({page:n,matches:e,...t}){let r=pu(),{manifest:s,routeModules:a}=$P(),{basename:i}=AP(),{loaderData:o,matches:l}=yK(),c=L.useMemo(()=>r4(n,e,l,s,r,"data"),[n,e,l,s,r]),d=L.useMemo(()=>r4(n,e,l,s,r,"assets"),[n,e,l,s,r]),h=L.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,y=!1;if(e.forEach(S=>{var N;let T=s.routes[S.route.id];!T||!T.hasLoader||(!c.some(C=>C.route.id===S.route.id)&&S.route.id in o&&((N=a[S.route.id])!=null&&N.shouldRevalidate)||T.hasClientLoader?y=!0:x.add(S.route.id))}),x.size===0)return[];let b=uK(n,i,"data");return y&&x.size>0&&b.searchParams.set("_routes",e.filter(S=>x.has(S.route.id)).map(S=>S.route.id).join(",")),[b.pathname+b.search]},[i,o,r,s,c,e,n,a]),p=L.useMemo(()=>pK(d,s),[d,s]),g=wK(d);return L.createElement(L.Fragment,null,h.map(x=>L.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),p.map(x=>L.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),g.map(({key:x,link:y})=>L.createElement("link",{key:x,...y})))}function TK(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var RP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RP&&(window.__reactRouterVersion="7.7.1")}catch{}function NK({basename:n,children:e,window:t}){let r=L.useRef();r.current==null&&(r.current=fq({window:t,v5Compat:!0}));let s=r.current,[a,i]=L.useState({action:s.action,location:s.location}),o=L.useCallback(l=>{L.startTransition(()=>i(l))},[i]);return L.useLayoutEffect(()=>s.listen(o),[s,o]),L.createElement(eK,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var OP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qk=L.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:i,state:o,target:l,to:c,preventScrollReset:d,viewTransition:h,...p},g){let{basename:x}=L.useContext(sl),y=typeof c=="string"&&OP.test(c),b,S=!1;if(typeof c=="string"&&y&&(b=c,RP))try{let _=new URL(window.location.href),k=c.startsWith("//")?new URL(_.protocol+c):new URL(c),O=Pl(k.pathname,x);k.origin===_.origin&&O!=null?c=O+k.search+k.hash:S=!0}catch{Yo(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=Bq(c,{relative:s}),[N,C,I]=bK(r,p),F=_K(c,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:h});function D(_){e&&e(_),_.defaultPrevented||F(_)}let A=L.createElement("a",{...p,...I,href:b||T,onClick:S||a?e:D,ref:TK(g,C),target:l,"data-discover":!y&&t==="render"?"true":void 0});return N&&!y?L.createElement(L.Fragment,null,A,L.createElement(vK,{page:T})):A});qk.displayName="Link";var CK=L.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:i,viewTransition:o,children:l,...c},d){let h=Rg(i,{relative:c.relative}),p=pu(),g=L.useContext(lw),{navigator:x,basename:y}=L.useContext(sl),b=g!=null&&OK(h)&&o===!0,S=x.encodeLocation?x.encodeLocation(h).pathname:h.pathname,T=p.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(T=T.toLowerCase(),N=N?N.toLowerCase():null,S=S.toLowerCase()),N&&y&&(N=Pl(N,y)||N);const C=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let I=T===S||!s&&T.startsWith(S)&&T.charAt(C)==="/",F=N!=null&&(N===S||!s&&N.startsWith(S)&&N.charAt(S.length)==="/"),D={isActive:I,isPending:F,isTransitioning:b},A=I?e:void 0,_;typeof r=="function"?_=r(D):_=[r,I?"active":null,F?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(D):a;return L.createElement(qk,{...c,"aria-current":A,className:_,ref:d,style:k,to:i,viewTransition:o},typeof l=="function"?l(D):l)});CK.displayName="NavLink";var EK=L.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:i=Ab,action:o,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,...p},g)=>{let x=$K(),y=RK(o,{relative:c}),b=i.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&OP.test(o),T=N=>{if(l&&l(N),N.defaultPrevented)return;N.preventDefault();let C=N.nativeEvent.submitter,I=(C==null?void 0:C.getAttribute("formmethod"))||i;x(C||N.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:s,state:a,relative:c,preventScrollReset:d,viewTransition:h})};return L.createElement("form",{ref:g,method:b,action:y,onSubmit:r?l:T,...p,"data-discover":!S&&n==="render"?"true":void 0})});EK.displayName="Form";function kK(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DP(n){let e=L.useContext(Wh);return Sr(e,kK(n)),e}function _K(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=kP(),l=pu(),c=Rg(n,{relative:a});return L.useCallback(d=>{if(iK(d,e)){d.preventDefault();let h=t!==void 0?t:X0(l)===X0(c);o(n,{replace:h,state:r,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,c,t,r,e,n,s,a,i])}var IK=0,AK=()=>`__${String(++IK)}__`;function $K(){let{router:n}=DP("useSubmit"),{basename:e}=L.useContext(sl),t=Yq();return L.useCallback(async(r,s={})=>{let{action:a,method:i,encType:o,formData:l,body:c}=cK(r,e);if(s.navigate===!1){let d=s.fetcherKey||AK();await n.fetch(d,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function RK(n,{relative:e}={}){let{basename:t}=L.useContext(sl),r=L.useContext(Zl);Sr(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Rg(n||".",{relative:e})},i=pu();if(n==null){a.search=i.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let d=o.toString();a.search=d?`?${d}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ol([t,a.pathname])),X0(a)}function OK(n,{relative:e}={}){let t=L.useContext(NP);Sr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=DP("useViewTransitionState"),s=Rg(n,{relative:e});if(!t.isTransitioning)return!1;let a=Pl(t.currentLocation.pathname,r)||t.currentLocation.pathname,i=Pl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ev(s.pathname,i)!=null||ev(s.pathname,a)!=null}var FP=cP();const Ky=Ig(FP);function Kk(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function LP(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=LP(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function jt(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=LP(n))&&(r&&(r+=" "),r+=e);return r}function Bl(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const Og="$$material";function DK(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function FK(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var LK=function(){function n(t){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(FK(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=DK(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Ks="-ms-",tv="-moz-",Nn="-webkit-",MP="comm",Xk="rule",Yk="decl",MK="@import",PP="@keyframes",PK="@layer",BK=Math.abs,uw=String.fromCharCode,jK=Object.assign;function zK(n,e){return Ms(n,0)^45?(((e<<2^Ms(n,0))<<2^Ms(n,1))<<2^Ms(n,2))<<2^Ms(n,3):0}function BP(n){return n.trim()}function UK(n,e){return(n=e.exec(n))?n[0]:n}function Cn(n,e,t){return n.replace(e,t)}function vE(n,e){return n.indexOf(e)}function Ms(n,e){return n.charCodeAt(e)|0}function Y0(n,e,t){return n.slice(e,t)}function Ro(n){return n.length}function Qk(n){return n.length}function Xy(n,e){return e.push(n),n}function VK(n,e){return n.map(e).join("")}var dw=1,Nh=1,jP=0,Da=0,Kr=0,Hh="";function fw(n,e,t,r,s,a,i){return{value:n,root:e,parent:t,type:r,props:s,children:a,line:dw,column:Nh,length:i,return:""}}function a0(n,e){return jK(fw("",null,null,"",null,null,0),n,{length:-n.length},e)}function WK(){return Kr}function HK(){return Kr=Da>0?Ms(Hh,--Da):0,Nh--,Kr===10&&(Nh=1,dw--),Kr}function ai(){return Kr=Da<jP?Ms(Hh,Da++):0,Nh++,Kr===10&&(Nh=1,dw++),Kr}function Vo(){return Ms(Hh,Da)}function Rb(){return Da}function Dg(n,e){return Y0(Hh,n,e)}function Q0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zP(n){return dw=Nh=1,jP=Ro(Hh=n),Da=0,[]}function UP(n){return Hh="",n}function Ob(n){return BP(Dg(Da-1,wE(n===91?n+2:n===40?n+1:n)))}function GK(n){for(;(Kr=Vo())&&Kr<33;)ai();return Q0(n)>2||Q0(Kr)>3?"":" "}function qK(n,e){for(;--e&&ai()&&!(Kr<48||Kr>102||Kr>57&&Kr<65||Kr>70&&Kr<97););return Dg(n,Rb()+(e<6&&Vo()==32&&ai()==32))}function wE(n){for(;ai();)switch(Kr){case n:return Da;case 34:case 39:n!==34&&n!==39&&wE(Kr);break;case 40:n===41&&wE(n);break;case 92:ai();break}return Da}function KK(n,e){for(;ai()&&n+Kr!==57;)if(n+Kr===84&&Vo()===47)break;return"/*"+Dg(e,Da-1)+"*"+uw(n===47?n:ai())}function XK(n){for(;!Q0(Vo());)ai();return Dg(n,Da)}function YK(n){return UP(Db("",null,null,null,[""],n=zP(n),0,[0],n))}function Db(n,e,t,r,s,a,i,o,l){for(var c=0,d=0,h=i,p=0,g=0,x=0,y=1,b=1,S=1,T=0,N="",C=s,I=a,F=r,D=N;b;)switch(x=T,T=ai()){case 40:if(x!=108&&Ms(D,h-1)==58){vE(D+=Cn(Ob(T),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:D+=Ob(T);break;case 9:case 10:case 13:case 32:D+=GK(x);break;case 92:D+=qK(Rb()-1,7);continue;case 47:switch(Vo()){case 42:case 47:Xy(QK(KK(ai(),Rb()),e,t),l);break;default:D+="/"}break;case 123*y:o[c++]=Ro(D)*S;case 125*y:case 59:case 0:switch(T){case 0:case 125:b=0;case 59+d:S==-1&&(D=Cn(D,/\f/g,"")),g>0&&Ro(D)-h&&Xy(g>32?a4(D+";",r,t,h-1):a4(Cn(D," ","")+";",r,t,h-2),l);break;case 59:D+=";";default:if(Xy(F=s4(D,e,t,c,d,s,o,N,C=[],I=[],h),a),T===123)if(d===0)Db(D,e,F,F,C,a,h,o,I);else switch(p===99&&Ms(D,3)===110?100:p){case 100:case 108:case 109:case 115:Db(n,F,F,r&&Xy(s4(n,F,F,0,0,s,o,N,s,C=[],h),I),s,I,h,o,r?C:I);break;default:Db(D,F,F,F,[""],I,0,o,I)}}c=d=g=0,y=S=1,N=D="",h=i;break;case 58:h=1+Ro(D),g=x;default:if(y<1){if(T==123)--y;else if(T==125&&y++==0&&HK()==125)continue}switch(D+=uw(T),T*y){case 38:S=d>0?1:(D+="\f",-1);break;case 44:o[c++]=(Ro(D)-1)*S,S=1;break;case 64:Vo()===45&&(D+=Ob(ai())),p=Vo(),d=h=Ro(N=D+=XK(Rb())),T++;break;case 45:x===45&&Ro(D)==2&&(y=0)}}return a}function s4(n,e,t,r,s,a,i,o,l,c,d){for(var h=s-1,p=s===0?a:[""],g=Qk(p),x=0,y=0,b=0;x<r;++x)for(var S=0,T=Y0(n,h+1,h=BK(y=i[x])),N=n;S<g;++S)(N=BP(y>0?p[S]+" "+T:Cn(T,/&\f/g,p[S])))&&(l[b++]=N);return fw(n,e,t,s===0?Xk:o,l,c,d)}function QK(n,e,t){return fw(n,e,t,MP,uw(WK()),Y0(n,2,-2),0)}function a4(n,e,t,r){return fw(n,e,t,Yk,Y0(n,0,r),Y0(n,r+1,-1),r)}function dh(n,e){for(var t="",r=Qk(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function ZK(n,e,t,r){switch(n.type){case PK:if(n.children.length)break;case MK:case Yk:return n.return=n.return||n.value;case MP:return"";case PP:return n.return=n.value+"{"+dh(n.children,r)+"}";case Xk:n.value=n.props.join(",")}return Ro(t=dh(n.children,r))?n.return=n.value+"{"+t+"}":""}function JK(n){var e=Qk(n);return function(t,r,s,a){for(var i="",o=0;o<e;o++)i+=n[o](t,r,s,a)||"";return i}}function eX(n){return function(e){e.root||(e=e.return)&&n(e)}}function VP(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var tX=function(e,t,r){for(var s=0,a=0;s=a,a=Vo(),s===38&&a===12&&(t[r]=1),!Q0(a);)ai();return Dg(e,Da)},nX=function(e,t){var r=-1,s=44;do switch(Q0(s)){case 0:s===38&&Vo()===12&&(t[r]=1),e[r]+=tX(Da-1,t,r);break;case 2:e[r]+=Ob(s);break;case 4:if(s===44){e[++r]=Vo()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=uw(s)}while(s=ai());return e},rX=function(e,t){return UP(nX(zP(e),t))},i4=new WeakMap,sX=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!i4.get(r))&&!s){i4.set(e,!0);for(var a=[],i=rX(t,a),o=r.props,l=0,c=0;l<i.length;l++)for(var d=0;d<o.length;d++,c++)e.props[c]=a[l]?i[l].replace(/&\f/g,o[d]):o[d]+" "+i[l]}}},aX=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function WP(n,e){switch(zK(n,e)){case 5103:return Nn+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nn+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Nn+n+tv+n+Ks+n+n;case 6828:case 4268:return Nn+n+Ks+n+n;case 6165:return Nn+n+Ks+"flex-"+n+n;case 5187:return Nn+n+Cn(n,/(\w+).+(:[^]+)/,Nn+"box-$1$2"+Ks+"flex-$1$2")+n;case 5443:return Nn+n+Ks+"flex-item-"+Cn(n,/flex-|-self/,"")+n;case 4675:return Nn+n+Ks+"flex-line-pack"+Cn(n,/align-content|flex-|-self/,"")+n;case 5548:return Nn+n+Ks+Cn(n,"shrink","negative")+n;case 5292:return Nn+n+Ks+Cn(n,"basis","preferred-size")+n;case 6060:return Nn+"box-"+Cn(n,"-grow","")+Nn+n+Ks+Cn(n,"grow","positive")+n;case 4554:return Nn+Cn(n,/([^-])(transform)/g,"$1"+Nn+"$2")+n;case 6187:return Cn(Cn(Cn(n,/(zoom-|grab)/,Nn+"$1"),/(image-set)/,Nn+"$1"),n,"")+n;case 5495:case 3959:return Cn(n,/(image-set\([^]*)/,Nn+"$1$`$1");case 4968:return Cn(Cn(n,/(.+:)(flex-)?(.*)/,Nn+"box-pack:$3"+Ks+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nn+n+n;case 4095:case 3583:case 4068:case 2532:return Cn(n,/(.+)-inline(.+)/,Nn+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ro(n)-1-e>6)switch(Ms(n,e+1)){case 109:if(Ms(n,e+4)!==45)break;case 102:return Cn(n,/(.+:)(.+)-([^]+)/,"$1"+Nn+"$2-$3$1"+tv+(Ms(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~vE(n,"stretch")?WP(Cn(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ms(n,e+1)!==115)break;case 6444:switch(Ms(n,Ro(n)-3-(~vE(n,"!important")&&10))){case 107:return Cn(n,":",":"+Nn)+n;case 101:return Cn(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Nn+(Ms(n,14)===45?"inline-":"")+"box$3$1"+Nn+"$2$3$1"+Ks+"$2box$3")+n}break;case 5936:switch(Ms(n,e+11)){case 114:return Nn+n+Ks+Cn(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Nn+n+Ks+Cn(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Nn+n+Ks+Cn(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Nn+n+Ks+n+n}return n}var iX=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case Yk:e.return=WP(e.value,e.length);break;case PP:return dh([a0(e,{value:Cn(e.value,"@","@"+Nn)})],s);case Xk:if(e.length)return VK(e.props,function(a){switch(UK(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return dh([a0(e,{props:[Cn(a,/:(read-\w+)/,":"+tv+"$1")]})],s);case"::placeholder":return dh([a0(e,{props:[Cn(a,/:(plac\w+)/,":"+Nn+"input-$1")]}),a0(e,{props:[Cn(a,/:(plac\w+)/,":"+tv+"$1")]}),a0(e,{props:[Cn(a,/:(plac\w+)/,Ks+"input-$1")]})],s)}return""})}},oX=[iX],lX=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var b=y.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var s=e.stylisPlugins||oX,a={},i,o=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var b=y.getAttribute("data-emotion").split(" "),S=1;S<b.length;S++)a[b[S]]=!0;o.push(y)});var l,c=[sX,aX];{var d,h=[ZK,eX(function(y){d.insert(y)})],p=JK(c.concat(s,h)),g=function(b){return dh(YK(b),p)};l=function(b,S,T,N){d=T,g(b?b+"{"+S.styles+"}":S.styles),N&&(x.inserted[S.name]=!0)}}var x={key:t,sheet:new LK({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:l};return x.sheet.hydrate(o),x},vC={exports:{}},In={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4;function cX(){if(o4)return In;o4=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,i=n?Symbol.for("react.provider"):60109,o=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,x=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,S=n?Symbol.for("react.responder"):60118,T=n?Symbol.for("react.scope"):60119;function N(I){if(typeof I=="object"&&I!==null){var F=I.$$typeof;switch(F){case e:switch(I=I.type,I){case l:case c:case r:case a:case s:case h:return I;default:switch(I=I&&I.$$typeof,I){case o:case d:case x:case g:case i:return I;default:return F}}case t:return F}}}function C(I){return N(I)===c}return In.AsyncMode=l,In.ConcurrentMode=c,In.ContextConsumer=o,In.ContextProvider=i,In.Element=e,In.ForwardRef=d,In.Fragment=r,In.Lazy=x,In.Memo=g,In.Portal=t,In.Profiler=a,In.StrictMode=s,In.Suspense=h,In.isAsyncMode=function(I){return C(I)||N(I)===l},In.isConcurrentMode=C,In.isContextConsumer=function(I){return N(I)===o},In.isContextProvider=function(I){return N(I)===i},In.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},In.isForwardRef=function(I){return N(I)===d},In.isFragment=function(I){return N(I)===r},In.isLazy=function(I){return N(I)===x},In.isMemo=function(I){return N(I)===g},In.isPortal=function(I){return N(I)===t},In.isProfiler=function(I){return N(I)===a},In.isStrictMode=function(I){return N(I)===s},In.isSuspense=function(I){return N(I)===h},In.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===r||I===c||I===a||I===s||I===h||I===p||typeof I=="object"&&I!==null&&(I.$$typeof===x||I.$$typeof===g||I.$$typeof===i||I.$$typeof===o||I.$$typeof===d||I.$$typeof===b||I.$$typeof===S||I.$$typeof===T||I.$$typeof===y)},In.typeOf=N,In}var l4;function uX(){return l4||(l4=1,vC.exports=cX()),vC.exports}var wC,c4;function dX(){if(c4)return wC;c4=1;var n=uX(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[n.ForwardRef]=r,a[n.Memo]=s;function i(x){return n.isMemo(x)?s:a[x.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function g(x,y,b){if(typeof y!="string"){if(p){var S=h(y);S&&S!==p&&g(x,S,b)}var T=l(y);c&&(T=T.concat(c(y)));for(var N=i(x),C=i(y),I=0;I<T.length;++I){var F=T[I];if(!t[F]&&!(b&&b[F])&&!(C&&C[F])&&!(N&&N[F])){var D=d(y,F);try{o(x,F,D)}catch{}}}}return x}return wC=g,wC}dX();var fX=!0;function HP(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var Zk=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||fX===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},Jk=function(e,t,r){Zk(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a=t;do e.insert(t===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function hX(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var pX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mX=/[A-Z]|^ms/g,gX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GP=function(e){return e.charCodeAt(1)===45},u4=function(e){return e!=null&&typeof e!="boolean"},SC=VP(function(n){return GP(n)?n:n.replace(mX,"-$&").toLowerCase()}),d4=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(gX,function(r,s,a){return Oo={name:s,styles:a,next:Oo},s})}return pX[e]!==1&&!GP(e)&&typeof t=="number"&&t!==0?t+"px":t};function Z0(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Oo={name:s.name,styles:s.styles,next:Oo},s.name;var a=t;if(a.styles!==void 0){var i=a.next;if(i!==void 0)for(;i!==void 0;)Oo={name:i.name,styles:i.styles,next:Oo},i=i.next;var o=a.styles+";";return o}return xX(n,e,t)}case"function":{if(n!==void 0){var l=Oo,c=t(n);return Oo=l,Z0(n,e,c)}break}}var d=t;if(e==null)return d;var h=e[d];return h!==void 0?h:d}function xX(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=Z0(n,e,t[s])+";";else for(var a in t){var i=t[a];if(typeof i!="object"){var o=i;e!=null&&e[o]!==void 0?r+=a+"{"+e[o]+"}":u4(o)&&(r+=SC(a)+":"+d4(a,o)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(e==null||e[i[0]]===void 0))for(var l=0;l<i.length;l++)u4(i[l])&&(r+=SC(a)+":"+d4(a,i[l])+";");else{var c=Z0(n,e,i);switch(a){case"animation":case"animationName":{r+=SC(a)+":"+c+";";break}default:r+=a+"{"+c+"}"}}}return r}var f4=/label:\s*([^\s;{]+)\s*(;|$)/g,Oo;function Fg(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Oo=void 0;var a=n[0];if(a==null||a.raw===void 0)r=!1,s+=Z0(t,e,a);else{var i=a;s+=i[0]}for(var o=1;o<n.length;o++)if(s+=Z0(t,e,n[o]),r){var l=a;s+=l[o]}f4.lastIndex=0;for(var c="",d;(d=f4.exec(s))!==null;)c+="-"+d[1];var h=hX(s)+c;return{name:h,styles:s,next:Oo}}var yX=function(e){return e()},qP=hE.useInsertionEffect?hE.useInsertionEffect:!1,KP=qP||yX,h4=qP||L.useLayoutEffect,XP=L.createContext(typeof HTMLElement<"u"?lX({key:"css"}):null);XP.Provider;var e_=function(e){return L.forwardRef(function(t,r){var s=L.useContext(XP);return e(t,s,r)})},hw=L.createContext({}),t_={}.hasOwnProperty,SE="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",bX=function(e,t){var r={};for(var s in t)t_.call(t,s)&&(r[s]=t[s]);return r[SE]=e,r},vX=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return Zk(t,r,s),KP(function(){return Jk(t,r,s)}),null},wX=e_(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[SE],a=[r],i="";typeof n.className=="string"?i=HP(e.registered,a,n.className):n.className!=null&&(i=n.className+" ");var o=Fg(a,void 0,L.useContext(hw));i+=e.key+"-"+o.name;var l={};for(var c in n)t_.call(n,c)&&c!=="css"&&c!==SE&&(l[c]=n[c]);return l.className=i,t&&(l.ref=t),L.createElement(L.Fragment,null,L.createElement(vX,{cache:e,serialized:o,isStringTag:typeof s=="string"}),L.createElement(s,l))}),SX=wX,p4=function(e,t){var r=arguments;if(t==null||!t_.call(t,"css"))return L.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=SX,a[1]=bX(e,t);for(var i=2;i<s;i++)a[i]=r[i];return L.createElement.apply(null,a)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(p4||(p4={}));var TX=e_(function(n,e){var t=n.styles,r=Fg([t],void 0,L.useContext(hw)),s=L.useRef();return h4(function(){var a=e.key+"-global",i=new e.sheet.constructor({key:a,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+a+" "+r.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",a),i.hydrate([l])),s.current=[i,o],function(){i.flush()}},[e]),h4(function(){var a=s.current,i=a[0],o=a[1];if(o){a[1]=!1;return}if(r.next!==void 0&&Jk(e,r.next,!0),i.tags.length){var l=i.tags[i.tags.length-1].nextElementSibling;i.before=l,i.flush()}e.insert("",r,i,!1)},[e,r.name]),null});function NX(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Fg(e)}function n_(){var n=NX.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var CX=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,EX=VP(function(n){return CX.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),kX=EX,_X=function(e){return e!=="theme"},m4=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?kX:_X},g4=function(e,t,r){var s;if(t){var a=t.shouldForwardProp;s=e.__emotion_forwardProp&&a?function(i){return e.__emotion_forwardProp(i)&&a(i)}:a}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},IX=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return Zk(t,r,s),KP(function(){return Jk(t,r,s)}),null},AX=function n(e,t){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,a,i;t!==void 0&&(a=t.label,i=t.target);var o=g4(e,t,r),l=o||m4(s),c=!l("as");return function(){var d=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&h.push("label:"+a+";"),d[0]==null||d[0].raw===void 0)h.push.apply(h,d);else{var p=d[0];h.push(p[0]);for(var g=d.length,x=1;x<g;x++)h.push(d[x],p[x])}var y=e_(function(b,S,T){var N=c&&b.as||s,C="",I=[],F=b;if(b.theme==null){F={};for(var D in b)F[D]=b[D];F.theme=L.useContext(hw)}typeof b.className=="string"?C=HP(S.registered,I,b.className):b.className!=null&&(C=b.className+" ");var A=Fg(h.concat(I),S.registered,F);C+=S.key+"-"+A.name,i!==void 0&&(C+=" "+i);var _=c&&o===void 0?m4(N):l,k={};for(var O in b)c&&O==="as"||_(O)&&(k[O]=b[O]);return k.className=C,T&&(k.ref=T),L.createElement(L.Fragment,null,L.createElement(IX,{cache:S,serialized:A,isStringTag:typeof N=="string"}),L.createElement(N,k))});return y.displayName=a!==void 0?a:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",y.defaultProps=e.defaultProps,y.__emotion_real=y,y.__emotion_base=s,y.__emotion_styles=h,y.__emotion_forwardProp=o,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(b,S){var T=n(b,Th({},t,S,{shouldForwardProp:g4(y,S,!0)}));return T.apply(void 0,h)},y}},$X=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],TE=AX.bind(null);$X.forEach(function(n){TE[n]=TE(n)});function RX(n){return n==null||Object.keys(n).length===0}function OX(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?s=>e(RX(s)?t:s):e;return w.jsx(TX,{styles:r})}function YP(n,e){return TE(n,e)}function DX(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const x4=[];function qc(n){return x4[0]=n,Fg(x4)}var TC={exports:{}},Kn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y4;function FX(){if(y4)return Kn;y4=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function x(y){if(typeof y=="object"&&y!==null){var b=y.$$typeof;switch(b){case n:switch(y=y.type,y){case t:case s:case r:case l:case c:case p:return y;default:switch(y=y&&y.$$typeof,y){case i:case o:case h:case d:return y;case a:return y;default:return b}}case e:return b}}}return Kn.ContextConsumer=a,Kn.ContextProvider=i,Kn.Element=n,Kn.ForwardRef=o,Kn.Fragment=t,Kn.Lazy=h,Kn.Memo=d,Kn.Portal=e,Kn.Profiler=s,Kn.StrictMode=r,Kn.Suspense=l,Kn.SuspenseList=c,Kn.isContextConsumer=function(y){return x(y)===a},Kn.isContextProvider=function(y){return x(y)===i},Kn.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===n},Kn.isForwardRef=function(y){return x(y)===o},Kn.isFragment=function(y){return x(y)===t},Kn.isLazy=function(y){return x(y)===h},Kn.isMemo=function(y){return x(y)===d},Kn.isPortal=function(y){return x(y)===e},Kn.isProfiler=function(y){return x(y)===s},Kn.isStrictMode=function(y){return x(y)===r},Kn.isSuspense=function(y){return x(y)===l},Kn.isSuspenseList=function(y){return x(y)===c},Kn.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===s||y===r||y===l||y===c||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===d||y.$$typeof===i||y.$$typeof===a||y.$$typeof===o||y.$$typeof===g||y.getModuleId!==void 0)},Kn.typeOf=x,Kn}var b4;function LX(){return b4||(b4=1,TC.exports=FX()),TC.exports}var QP=LX();function Mo(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function ZP(n){if(L.isValidElement(n)||QP.isValidElementType(n)||!Mo(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=ZP(n[t])}),e}function ea(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Mo(n)&&Mo(e)&&Object.keys(e).forEach(s=>{L.isValidElement(e[s])||QP.isValidElementType(e[s])?r[s]=e[s]:Mo(e[s])&&Object.prototype.hasOwnProperty.call(n,s)&&Mo(n[s])?r[s]=ea(n[s],e[s],t):t.clone?r[s]=Mo(e[s])?ZP(e[s]):e[s]:r[s]=e[s]}),r}const MX=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function PX(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...s}=n,a=MX(e),i=Object.keys(a);function o(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${t})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${t})`}function c(p,g){const x=i.indexOf(g);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${t}) and (max-width:${(x!==-1&&typeof e[i[x]]=="number"?e[i[x]]:g)-r/100}${t})`}function d(p){return i.indexOf(p)+1<i.length?c(p,i[i.indexOf(p)+1]):o(p)}function h(p){const g=i.indexOf(p);return g===0?o(i[1]):g===i.length-1?l(i[g]):c(p,i[i.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:i,values:a,up:o,down:l,between:c,only:d,not:h,unit:t,...s}}function v4(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var i,o;const a=/min-width:\s*([0-9.]+)/;return+(((i=r.match(a))==null?void 0:i[1])||0)-+(((o=s.match(a))==null?void 0:o[1])||0)});return t.length?t.reduce((r,s)=>{const a=e[s];return delete r[s],r[s]=a,r},{...e}):e}function BX(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function jX(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,s]=t,a=Number.isNaN(+r)?r||0:+r;return n.containerQueries(s).up(a)}function zX(n){const e=(a,i)=>a.replace("@media",i?`@container ${i}`:"@container");function t(a,i){a.up=(...o)=>e(n.breakpoints.up(...o),i),a.down=(...o)=>e(n.breakpoints.down(...o),i),a.between=(...o)=>e(n.breakpoints.between(...o),i),a.only=(...o)=>e(n.breakpoints.only(...o),i),a.not=(...o)=>{const l=e(n.breakpoints.not(...o),i);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=a=>(t(r,a),r);return t(s),{...n,containerQueries:s}}const UX={borderRadius:4};function F0(n,e){return e?ea(n,e,{clone:!1}):n}const pw={xs:0,sm:600,md:900,lg:1200,xl:1536},w4={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${pw[n]}px)`},VX={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:pw[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function jl(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const a=r.breakpoints||w4;return e.reduce((i,o,l)=>(i[a.up(a.keys[l])]=t(e[l]),i),{})}if(typeof e=="object"){const a=r.breakpoints||w4;return Object.keys(e).reduce((i,o)=>{if(BX(a.keys,o)){const l=jX(r.containerQueries?r:VX,o);l&&(i[l]=t(e[o],o))}else if(Object.keys(a.values||pw).includes(o)){const l=a.up(o);i[l]=t(e[o],o)}else{const l=o;i[l]=e[l]}return i},{})}return t(e)}function WX(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,s)=>{const a=n.up(s);return r[a]={},r},{}))||{}}function S4(n,e){return n.reduce((t,r)=>{const s=t[r];return(!s||Object.keys(s).length===0)&&delete t[r],t},e)}function pn(n){if(typeof n!="string")throw new Error(Bl(7));return n.charAt(0).toUpperCase()+n.slice(1)}function mw(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((s,a)=>s&&s[a]?s[a]:null,n);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,n)}function nv(n,e,t,r=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||r:s=mw(n,t)||r,e&&(s=e(s,r,n)),s}function Vr(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:s}=n,a=i=>{if(i[e]==null)return null;const o=i[e],l=i.theme,c=mw(l,r)||{};return jl(i,o,h=>{let p=nv(c,s,h);return h===p&&typeof h=="string"&&(p=nv(c,s,`${e}${h==="default"?"":pn(h)}`,h)),t===!1?p:{[t]:p}})};return a.propTypes={},a.filterProps=[e],a}function HX(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const GX={m:"margin",p:"padding"},qX={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},T4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},KX=HX(n=>{if(n.length>2)if(T4[n])n=T4[n];else return[n];const[e,t]=n.split(""),r=GX[e],s=qX[t]||"";return Array.isArray(s)?s.map(a=>r+a):[r+s]}),r_=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],s_=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...r_,...s_];function Lg(n,e,t,r){const s=mw(n,e,!0)??t;return typeof s=="number"||typeof s=="string"?a=>typeof a=="string"?a:typeof s=="string"?s.startsWith("var(")&&a===0?0:s.startsWith("var(")&&a===1?s:`calc(${a} * ${s})`:s*a:Array.isArray(s)?a=>{if(typeof a=="string")return a;const i=Math.abs(a),o=s[i];return a>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof s=="function"?s:()=>{}}function a_(n){return Lg(n,"spacing",8)}function Mg(n,e){return typeof e=="string"||e==null?e:n(e)}function XX(n,e){return t=>n.reduce((r,s)=>(r[s]=Mg(e,t),r),{})}function YX(n,e,t,r){if(!e.includes(t))return null;const s=KX(t),a=XX(s,r),i=n[t];return jl(n,i,a)}function JP(n,e){const t=a_(n.theme);return Object.keys(n).map(r=>YX(n,e,r,t)).reduce(F0,{})}function Cr(n){return JP(n,r_)}Cr.propTypes={};Cr.filterProps=r_;function Er(n){return JP(n,s_)}Er.propTypes={};Er.filterProps=s_;function eB(n=8,e=a_({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(a=>{const i=e(a);return typeof i=="number"?`${i}px`:i}).join(" ");return t.mui=!0,t}function gw(...n){const e=n.reduce((r,s)=>(s.filterProps.forEach(a=>{r[a]=s}),r),{}),t=r=>Object.keys(r).reduce((s,a)=>e[a]?F0(s,e[a](r)):s,{});return t.propTypes={},t.filterProps=n.reduce((r,s)=>r.concat(s.filterProps),[]),t}function Ri(n){return typeof n!="number"?n:`${n}px solid`}function Pi(n,e){return Vr({prop:n,themeKey:"borders",transform:e})}const QX=Pi("border",Ri),ZX=Pi("borderTop",Ri),JX=Pi("borderRight",Ri),eY=Pi("borderBottom",Ri),tY=Pi("borderLeft",Ri),nY=Pi("borderColor"),rY=Pi("borderTopColor"),sY=Pi("borderRightColor"),aY=Pi("borderBottomColor"),iY=Pi("borderLeftColor"),oY=Pi("outline",Ri),lY=Pi("outlineColor"),xw=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=Lg(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:Mg(e,r)});return jl(n,n.borderRadius,t)}return null};xw.propTypes={};xw.filterProps=["borderRadius"];gw(QX,ZX,JX,eY,tY,nY,rY,sY,aY,iY,xw,oY,lY);const yw=n=>{if(n.gap!==void 0&&n.gap!==null){const e=Lg(n.theme,"spacing",8),t=r=>({gap:Mg(e,r)});return jl(n,n.gap,t)}return null};yw.propTypes={};yw.filterProps=["gap"];const bw=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=Lg(n.theme,"spacing",8),t=r=>({columnGap:Mg(e,r)});return jl(n,n.columnGap,t)}return null};bw.propTypes={};bw.filterProps=["columnGap"];const vw=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=Lg(n.theme,"spacing",8),t=r=>({rowGap:Mg(e,r)});return jl(n,n.rowGap,t)}return null};vw.propTypes={};vw.filterProps=["rowGap"];const cY=Vr({prop:"gridColumn"}),uY=Vr({prop:"gridRow"}),dY=Vr({prop:"gridAutoFlow"}),fY=Vr({prop:"gridAutoColumns"}),hY=Vr({prop:"gridAutoRows"}),pY=Vr({prop:"gridTemplateColumns"}),mY=Vr({prop:"gridTemplateRows"}),gY=Vr({prop:"gridTemplateAreas"}),xY=Vr({prop:"gridArea"});gw(yw,bw,vw,cY,uY,dY,fY,hY,pY,mY,gY,xY);function fh(n,e){return e==="grey"?e:n}const yY=Vr({prop:"color",themeKey:"palette",transform:fh}),bY=Vr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:fh}),vY=Vr({prop:"backgroundColor",themeKey:"palette",transform:fh});gw(yY,bY,vY);function ei(n){return n<=1&&n!==0?`${n*100}%`:n}const wY=Vr({prop:"width",transform:ei}),i_=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var s,a,i,o,l;const r=((i=(a=(s=n.theme)==null?void 0:s.breakpoints)==null?void 0:a.values)==null?void 0:i[t])||pw[t];return r?((l=(o=n.theme)==null?void 0:o.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ei(t)}};return jl(n,n.maxWidth,e)}return null};i_.filterProps=["maxWidth"];const SY=Vr({prop:"minWidth",transform:ei}),TY=Vr({prop:"height",transform:ei}),NY=Vr({prop:"maxHeight",transform:ei}),CY=Vr({prop:"minHeight",transform:ei});Vr({prop:"size",cssProperty:"width",transform:ei});Vr({prop:"size",cssProperty:"height",transform:ei});const EY=Vr({prop:"boxSizing"});gw(wY,i_,SY,TY,NY,CY,EY);const Pg={border:{themeKey:"borders",transform:Ri},borderTop:{themeKey:"borders",transform:Ri},borderRight:{themeKey:"borders",transform:Ri},borderBottom:{themeKey:"borders",transform:Ri},borderLeft:{themeKey:"borders",transform:Ri},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ri},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xw},color:{themeKey:"palette",transform:fh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:fh},backgroundColor:{themeKey:"palette",transform:fh},p:{style:Er},pt:{style:Er},pr:{style:Er},pb:{style:Er},pl:{style:Er},px:{style:Er},py:{style:Er},padding:{style:Er},paddingTop:{style:Er},paddingRight:{style:Er},paddingBottom:{style:Er},paddingLeft:{style:Er},paddingX:{style:Er},paddingY:{style:Er},paddingInline:{style:Er},paddingInlineStart:{style:Er},paddingInlineEnd:{style:Er},paddingBlock:{style:Er},paddingBlockStart:{style:Er},paddingBlockEnd:{style:Er},m:{style:Cr},mt:{style:Cr},mr:{style:Cr},mb:{style:Cr},ml:{style:Cr},mx:{style:Cr},my:{style:Cr},margin:{style:Cr},marginTop:{style:Cr},marginRight:{style:Cr},marginBottom:{style:Cr},marginLeft:{style:Cr},marginX:{style:Cr},marginY:{style:Cr},marginInline:{style:Cr},marginInlineStart:{style:Cr},marginInlineEnd:{style:Cr},marginBlock:{style:Cr},marginBlockStart:{style:Cr},marginBlockEnd:{style:Cr},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:yw},rowGap:{style:vw},columnGap:{style:bw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ei},maxWidth:{style:i_},minWidth:{transform:ei},height:{transform:ei},maxHeight:{transform:ei},minHeight:{transform:ei},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function kY(...n){const e=n.reduce((r,s)=>r.concat(Object.keys(s)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function _Y(n,e){return typeof n=="function"?n(e):n}function IY(){function n(t,r,s,a){const i={[t]:r,theme:s},o=a[t];if(!o)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:d,style:h}=o;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const p=mw(s,c)||{};return h?h(i):jl(i,r,x=>{let y=nv(p,d,x);return x===y&&typeof x=="string"&&(y=nv(p,d,`${t}${x==="default"?"":pn(x)}`,x)),l===!1?y:{[l]:y}})}function e(t){const{sx:r,theme:s={},nested:a}=t||{};if(!r)return null;const i=s.unstable_sxConfig??Pg;function o(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const d=WX(s.breakpoints),h=Object.keys(d);let p=d;return Object.keys(c).forEach(g=>{const x=_Y(c[g],s);if(x!=null)if(typeof x=="object")if(i[g])p=F0(p,n(g,x,s,i));else{const y=jl({theme:s},x,b=>({[g]:b}));kY(y,x)?p[g]=e({sx:x,theme:s,nested:!0}):p=F0(p,y)}else p=F0(p,n(g,x,s,i))}),!a&&s.modularCssLayers?{"@layer sx":v4(s,S4(h,p))}:v4(s,S4(h,p))}return Array.isArray(r)?r.map(o):o(r)}return e}const Td=IY();Td.filterProps=["sx"];function AY(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let s=t.getColorSchemeSelector(n);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return t.palette.mode===n?e:{}}function o_(n={},...e){const{breakpoints:t={},palette:r={},spacing:s,shape:a={},...i}=n,o=PX(t),l=eB(s);let c=ea({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...UX,...a}},i);return c=zX(c),c.applyStyles=AY,c=e.reduce((d,h)=>ea(d,h),c),c.unstable_sxConfig={...Pg,...i==null?void 0:i.unstable_sxConfig},c.unstable_sx=function(h){return Td({sx:h,theme:this})},c}function $Y(n){return Object.keys(n).length===0}function RY(n=null){const e=L.useContext(hw);return!e||$Y(e)?n:e}const OY=o_();function ww(n=OY){return RY(n)}function NC(n){const e=qc(n);return n!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):n}function DY({styles:n,themeId:e,defaultTheme:t={}}){const r=ww(t),s=e&&r[e]||r;let a=typeof n=="function"?n(s):n;return s.modularCssLayers&&(Array.isArray(a)?a=a.map(i=>NC(typeof i=="function"?i(s):i)):a=NC(a)),w.jsx(OX,{styles:a})}const FY=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??Pg;return Object.keys(n).forEach(s=>{t[s]?e.systemProps[s]=n[s]:e.otherProps[s]=n[s]}),e};function tB(n){const{sx:e,...t}=n,{systemProps:r,otherProps:s}=FY(t);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...i)=>{const o=e(...i);return Mo(o)?{...r,...o}:r}:a={...r,...e},{...s,sx:a}}const N4=n=>n,LY=()=>{let n=N4;return{configure(e){n=e},generate(e){return n(e)},reset(){n=N4}}},nB=LY();function MY(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:s}=n,a=YP("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Td);return L.forwardRef(function(l,c){const d=ww(t),{className:h,component:p="div",...g}=tB(l);return w.jsx(a,{as:p,ref:c,className:jt(h,s?s(r):r),theme:e&&d[e]||d,...g})})}const PY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function $n(n,e,t="Mui"){const r=PY[e];return r?`${t}-${r}`:`${nB.generate(n)}-${e}`}function vn(n,e,t="Mui"){const r={};return e.forEach(s=>{r[s]=$n(n,s,t)}),r}function rB(n){const{variants:e,...t}=n,r={variants:e,style:qc(t),isProcessed:!0};return r.style===t||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=qc(s.style))}),r}const BY=o_();function CC(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function fd(n,e){return e&&n&&typeof n=="object"&&n.styles&&!n.styles.startsWith("@layer")&&(n.styles=`@layer ${e}{${String(n.styles)}}`),n}function jY(n){return n?(e,t)=>t[n]:null}function zY(n,e,t){n.theme=WY(n.theme)?t:n.theme[e]||n.theme}function Fb(n,e,t){const r=typeof e=="function"?e(n):e;if(Array.isArray(r))return r.flatMap(s=>Fb(n,s,t));if(Array.isArray(r==null?void 0:r.variants)){let s;if(r.isProcessed)s=t?fd(r.style,t):r.style;else{const{variants:a,...i}=r;s=t?fd(qc(i),t):i}return sB(n,r.variants,[s],t)}return r!=null&&r.isProcessed?t?fd(qc(r.style),t):r.style:t?fd(qc(r),t):r}function sB(n,e,t=[],r=void 0){var a;let s;e:for(let i=0;i<e.length;i+=1){const o=e[i];if(typeof o.props=="function"){if(s??(s={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(s))continue}else for(const l in o.props)if(n[l]!==o.props[l]&&((a=n.ownerState)==null?void 0:a[l])!==o.props[l])continue e;typeof o.style=="function"?(s??(s={...n,...n.ownerState,ownerState:n.ownerState}),t.push(r?fd(qc(o.style(s)),r):o.style(s))):t.push(r?fd(qc(o.style),r):o.style)}return t}function UY(n={}){const{themeId:e,defaultTheme:t=BY,rootShouldForwardProp:r=CC,slotShouldForwardProp:s=CC}=n;function a(o){zY(o,e,t)}return(o,l={})=>{DX(o,F=>F.filter(D=>D!==Td));const{name:c,slot:d,skipVariantsResolver:h,skipSx:p,overridesResolver:g=jY(GY(d)),...x}=l,y=c&&c.startsWith("Mui")||d?"components":"custom",b=h!==void 0?h:d&&d!=="Root"&&d!=="root"||!1,S=p||!1;let T=CC;d==="Root"||d==="root"?T=r:d?T=s:HY(o)&&(T=void 0);const N=YP(o,{shouldForwardProp:T,label:VY(),...x}),C=F=>{if(F.__emotion_real===F)return F;if(typeof F=="function")return function(A){return Fb(A,F,A.theme.modularCssLayers?y:void 0)};if(Mo(F)){const D=rB(F);return function(_){return D.variants?Fb(_,D,_.theme.modularCssLayers?y:void 0):_.theme.modularCssLayers?fd(D.style,y):D.style}}return F},I=(...F)=>{const D=[],A=F.map(C),_=[];if(D.push(a),c&&g&&_.push(function(W){var X,Q;const q=(Q=(X=W.theme.components)==null?void 0:X[c])==null?void 0:Q.styleOverrides;if(!q)return null;const V={};for(const Y in q)V[Y]=Fb(W,q[Y],W.theme.modularCssLayers?"theme":void 0);return g(W,V)}),c&&!b&&_.push(function(W){var V,X;const K=W.theme,q=(X=(V=K==null?void 0:K.components)==null?void 0:V[c])==null?void 0:X.variants;return q?sB(W,q,[],W.theme.modularCssLayers?"theme":void 0):null}),S||_.push(Td),Array.isArray(A[0])){const P=A.shift(),W=new Array(D.length).fill(""),K=new Array(_.length).fill("");let q;q=[...W,...P,...K],q.raw=[...W,...P.raw,...K],D.unshift(q)}const k=[...D,...A,..._],O=N(...k);return o.muiName&&(O.muiName=o.muiName),O};return N.withConfig&&(I.withConfig=N.withConfig),I}}function VY(n,e){return void 0}function WY(n){for(const e in n)return!1;return!0}function HY(n){return typeof n=="string"&&n.charCodeAt(0)>96}function GY(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function rv(n,e,t=!1){const r={...e};for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const a=s;if(a==="components"||a==="slots")r[a]={...n[a],...r[a]};else if(a==="componentsProps"||a==="slotProps"){const i=n[a],o=e[a];if(!o)r[a]=i||{};else if(!i)r[a]=o;else{r[a]={...o};for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const c=l;r[a][c]=rv(i[c],o[c],t)}}}else a==="className"&&t&&e.className?r.className=jt(n==null?void 0:n.className,e==null?void 0:e.className):a==="style"&&t&&e.style?r.style={...n==null?void 0:n.style,...e==null?void 0:e.style}:r[a]===void 0&&(r[a]=n[a])}return r}function qY(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:rv(e.components[t].defaultProps,r)}function KY({props:n,name:e,defaultTheme:t,themeId:r}){let s=ww(t);return s=s[r]||s,qY({theme:s,name:e,props:n})}const zl=typeof window<"u"?L.useLayoutEffect:L.useEffect;function XY(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function l_(n,e=0,t=1){return XY(n,e,t)}function YY(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Qc(n){if(n.type)return n;if(n.charAt(0)==="#")return Qc(YY(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Bl(9,n));let r=n.substring(e+1,n.length-1),s;if(t==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Bl(10,s))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:t,values:r,colorSpace:s}}const QY=n=>{const e=Qc(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},S0=(n,e)=>{try{return QY(n)}catch{return n}};function Sw(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((s,a)=>a<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function aB(n){n=Qc(n);const{values:e}=n,t=e[0],r=e[1]/100,s=e[2]/100,a=r*Math.min(s,1-s),i=(c,d=(c+t/30)%12)=>s-a*Math.max(Math.min(d-3,9-d,1),-1);let o="rgb";const l=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return n.type==="hsla"&&(o+="a",l.push(e[3])),Sw({type:o,values:l})}function NE(n){n=Qc(n);let e=n.type==="hsl"||n.type==="hsla"?Qc(aB(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function ZY(n,e){const t=NE(n),r=NE(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function Rl(n,e){return n=Qc(n),e=l_(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,Sw(n)}function Yy(n,e,t){try{return Rl(n,e)}catch{return n}}function Tw(n,e){if(n=Qc(n),e=l_(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return Sw(n)}function tr(n,e,t){try{return Tw(n,e)}catch{return n}}function Nw(n,e){if(n=Qc(n),e=l_(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return Sw(n)}function nr(n,e,t){try{return Nw(n,e)}catch{return n}}function JY(n,e=.15){return NE(n)>.5?Tw(n,e):Nw(n,e)}function Qy(n,e,t){try{return JY(n,e)}catch{return n}}const eQ=L.createContext(),c_=()=>L.useContext(eQ)??!1,tQ=L.createContext(void 0);function nQ(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const s=e.components[t];return s.defaultProps?rv(s.defaultProps,r,e.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?rv(s,r,e.components.mergeClassNameAndStyle):r}function rQ({props:n,name:e}){const t=L.useContext(tQ);return nQ({props:n,name:e,theme:{components:t}})}let C4=0;function sQ(n){const[e,t]=L.useState(n),r=n||e;return L.useEffect(()=>{e==null&&(C4+=1,t(`mui-${C4}`))},[e]),r}const aQ={...hE},E4=aQ.useId;function iB(n){if(E4!==void 0){const e=E4();return n??e}return sQ(n)}const k4={theme:void 0};function iQ(n){let e,t;return function(s){let a=e;return(a===void 0||s.theme!==t)&&(k4.theme=s.theme,a=rB(n(k4)),e=a,t=s.theme),a}}function oQ(n=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${n?`${n}-`:""}${r}${e(...s)})`}const _4=(n,e,t,r=[])=>{let s=n;e.forEach((a,i)=>{i===e.length-1?Array.isArray(s)?s[Number(a)]=t:s&&typeof s=="object"&&(s[a]=t):s&&typeof s=="object"&&(s[a]||(s[a]=r.includes(a)?[]:{}),s=s[a])})},lQ=(n,e,t)=>{function r(s,a=[],i=[]){Object.entries(s).forEach(([o,l])=>{(!t||t&&!t([...a,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...a,o],Array.isArray(l)?[...i,o]:i):e([...a,o],l,i))})}r(n)},cQ=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function EC(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},s={},a={},i={};return lQ(n,(o,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(o,l))){const d=`--${t?`${t}-`:""}${o.join("-")}`,h=cQ(o,l);Object.assign(s,{[d]:h}),_4(a,o,`var(${d})`,c),_4(i,o,`var(${d}, ${h})`,c)}},o=>o[0]==="vars"),{css:s,vars:a,varsWithDefaults:i}}function uQ(n,e={}){const{getSelector:t=b,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:a={},components:i,defaultColorScheme:o="light",...l}=n,{vars:c,css:d,varsWithDefaults:h}=EC(l,e);let p=h;const g={},{[o]:x,...y}=a;if(Object.entries(y||{}).forEach(([N,C])=>{const{vars:I,css:F,varsWithDefaults:D}=EC(C,e);p=ea(p,D),g[N]={css:F,vars:I}}),x){const{css:N,vars:C,varsWithDefaults:I}=EC(x,e);p=ea(p,I),g[o]={css:N,vars:C}}function b(N,C){var F,D;let I=s;if(s==="class"&&(I=".%s"),s==="data"&&(I="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(I=`[${s}="%s"]`),N){if(I==="media")return n.defaultColorScheme===N?":root":{[`@media (prefers-color-scheme: ${((D=(F=a[N])==null?void 0:F.palette)==null?void 0:D.mode)||N})`]:{":root":C}};if(I)return n.defaultColorScheme===N?`:root, ${I.replace("%s",String(N))}`:I.replace("%s",String(N))}return":root"}return{vars:p,generateThemeVars:()=>{let N={...c};return Object.entries(g).forEach(([,{vars:C}])=>{N=ea(N,C)}),N},generateStyleSheets:()=>{var A,_;const N=[],C=n.defaultColorScheme||"light";function I(k,O){Object.keys(O).length&&N.push(typeof k=="string"?{[k]:{...O}}:k)}I(t(void 0,{...d}),d);const{[C]:F,...D}=g;if(F){const{css:k}=F,O=(_=(A=a[C])==null?void 0:A.palette)==null?void 0:_.mode,P=!r&&O?{colorScheme:O,...k}:{...k};I(t(C,{...P}),P)}return Object.entries(D).forEach(([k,{css:O}])=>{var K,q;const P=(q=(K=a[k])==null?void 0:K.palette)==null?void 0:q.mode,W=!r&&P?{colorScheme:P,...O}:{...O};I(t(k,{...W}),W)}),N}}}function dQ(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function Rn(n,e,t=void 0){const r={};for(const s in n){const a=n[s];let i="",o=!0;for(let l=0;l<a.length;l+=1){const c=a[l];c&&(i+=(o===!0?"":" ")+e(c),o=!1,t&&t[c]&&(i+=" "+t[c]))}r[s]=i}return r}function kC(n,e){var t,r,s;return L.isValidElement(n)&&e.indexOf(n.type.muiName??((s=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}const J0={black:"#000",white:"#fff"},fQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},qf={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Kf={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},i0={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Xf={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Yf={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Qf={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function oB(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:J0.white,default:J0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const hQ=oB();function lB(){return{text:{primary:J0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:J0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const I4=lB();function A4(n,e,t,r){const s=r.light||r,a=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=Nw(n.main,s):e==="dark"&&(n.dark=Tw(n.main,a)))}function pQ(n="light"){return n==="dark"?{main:Xf[200],light:Xf[50],dark:Xf[400]}:{main:Xf[700],light:Xf[400],dark:Xf[800]}}function mQ(n="light"){return n==="dark"?{main:qf[200],light:qf[50],dark:qf[400]}:{main:qf[500],light:qf[300],dark:qf[700]}}function gQ(n="light"){return n==="dark"?{main:Kf[500],light:Kf[300],dark:Kf[700]}:{main:Kf[700],light:Kf[400],dark:Kf[800]}}function xQ(n="light"){return n==="dark"?{main:Yf[400],light:Yf[300],dark:Yf[700]}:{main:Yf[700],light:Yf[500],dark:Yf[900]}}function yQ(n="light"){return n==="dark"?{main:Qf[400],light:Qf[300],dark:Qf[700]}:{main:Qf[800],light:Qf[500],dark:Qf[900]}}function bQ(n="light"){return n==="dark"?{main:i0[400],light:i0[300],dark:i0[700]}:{main:"#ed6c02",light:i0[500],dark:i0[900]}}function u_(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...s}=n,a=n.primary||pQ(e),i=n.secondary||mQ(e),o=n.error||gQ(e),l=n.info||xQ(e),c=n.success||yQ(e),d=n.warning||bQ(e);function h(y){return ZY(y,I4.text.primary)>=t?I4.text.primary:hQ.text.primary}const p=({color:y,name:b,mainShade:S=500,lightShade:T=300,darkShade:N=700})=>{if(y={...y},!y.main&&y[S]&&(y.main=y[S]),!y.hasOwnProperty("main"))throw new Error(Bl(11,b?` (${b})`:"",S));if(typeof y.main!="string")throw new Error(Bl(12,b?` (${b})`:"",JSON.stringify(y.main)));return A4(y,"light",T,r),A4(y,"dark",N,r),y.contrastText||(y.contrastText=h(y.main)),y};let g;return e==="light"?g=oB():e==="dark"&&(g=lB()),ea({common:{...J0},mode:e,primary:p({color:a,name:"primary"}),secondary:p({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:o,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:c,name:"success"}),grey:fQ,contrastThreshold:t,getContrastText:h,augmentColor:p,tonalOffset:r,...g},s)}function vQ(n){const e={};return Object.entries(n).forEach(r=>{const[s,a]=r;typeof a=="object"&&(e[s]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function wQ(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function SQ(n){return Math.round(n*1e5)/1e5}const $4={textTransform:"uppercase"},R4='"Roboto", "Helvetica", "Arial", sans-serif';function TQ(n,e){const{fontFamily:t=R4,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:i=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:c,pxToRem:d,...h}=typeof e=="function"?e(n):e,p=r/14,g=d||(b=>`${b/l*p}rem`),x=(b,S,T,N,C)=>({fontFamily:t,fontWeight:b,fontSize:g(S),lineHeight:T,...t===R4?{letterSpacing:`${SQ(N/S)}em`}:{},...C,...c}),y={h1:x(s,96,1.167,-1.5),h2:x(s,60,1.2,-.5),h3:x(a,48,1.167,0),h4:x(a,34,1.235,.25),h5:x(a,24,1.334,0),h6:x(i,20,1.6,.15),subtitle1:x(a,16,1.75,.15),subtitle2:x(i,14,1.57,.1),body1:x(a,16,1.5,.15),body2:x(a,14,1.43,.15),button:x(i,14,1.75,.4,$4),caption:x(a,12,1.66,.4),overline:x(a,12,2.66,1,$4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ea({htmlFontSize:l,pxToRem:g,fontFamily:t,fontSize:r,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:i,fontWeightBold:o,...y},h,{clone:!1})}const NQ=.2,CQ=.14,EQ=.12;function fr(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${NQ})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${CQ})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${EQ})`].join(",")}const kQ=["none",fr(0,2,1,-1,0,1,1,0,0,1,3,0),fr(0,3,1,-2,0,2,2,0,0,1,5,0),fr(0,3,3,-2,0,3,4,0,0,1,8,0),fr(0,2,4,-1,0,4,5,0,0,1,10,0),fr(0,3,5,-1,0,5,8,0,0,1,14,0),fr(0,3,5,-1,0,6,10,0,0,1,18,0),fr(0,4,5,-2,0,7,10,1,0,2,16,1),fr(0,5,5,-3,0,8,10,1,0,3,14,2),fr(0,5,6,-3,0,9,12,1,0,3,16,2),fr(0,6,6,-3,0,10,14,1,0,4,18,3),fr(0,6,7,-4,0,11,15,1,0,4,20,3),fr(0,7,8,-4,0,12,17,2,0,5,22,4),fr(0,7,8,-4,0,13,19,2,0,5,24,4),fr(0,7,9,-4,0,14,21,2,0,5,26,4),fr(0,8,9,-5,0,15,22,2,0,6,28,5),fr(0,8,10,-5,0,16,24,2,0,6,30,5),fr(0,8,11,-5,0,17,26,2,0,6,32,5),fr(0,9,11,-5,0,18,28,2,0,7,34,6),fr(0,9,12,-6,0,19,29,2,0,7,36,6),fr(0,10,13,-6,0,20,31,3,0,8,38,7),fr(0,10,13,-6,0,21,33,3,0,8,40,7),fr(0,10,14,-6,0,22,35,3,0,8,42,7),fr(0,11,14,-7,0,23,36,3,0,9,44,8),fr(0,11,15,-7,0,24,38,3,0,9,46,8)],_Q={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},IQ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function O4(n){return`${Math.round(n)}ms`}function AQ(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function $Q(n){const e={..._Q,...n.easing},t={...IQ,...n.duration};return{getAutoHeightDuration:AQ,create:(s=["all"],a={})=>{const{duration:i=t.standard,easing:o=e.easeInOut,delay:l=0,...c}=a;return(Array.isArray(s)?s:[s]).map(d=>`${d} ${typeof i=="string"?i:O4(i)} ${o} ${typeof l=="string"?l:O4(l)}`).join(",")},...n,easing:e,duration:t}}const RQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function OQ(n){return Mo(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function cB(n={}){const e={...n};function t(r){const s=Object.entries(r);for(let a=0;a<s.length;a++){const[i,o]=s[a];!OQ(o)||i.startsWith("unstable_")?delete r[i]:Mo(o)&&(r[i]={...o},t(r[i]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function CE(n={},...e){const{breakpoints:t,mixins:r={},spacing:s,palette:a={},transitions:i={},typography:o={},shape:l,...c}=n;if(n.vars&&n.generateThemeVars===void 0)throw new Error(Bl(20));const d=u_(a),h=o_(n);let p=ea(h,{mixins:wQ(h.breakpoints,r),palette:d,shadows:kQ.slice(),typography:TQ(d,o),transitions:$Q(i),zIndex:{...RQ}});return p=ea(p,c),p=e.reduce((g,x)=>ea(g,x),p),p.unstable_sxConfig={...Pg,...c==null?void 0:c.unstable_sxConfig},p.unstable_sx=function(x){return Td({sx:x,theme:this})},p.toRuntimeSource=cB,p}function EE(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const DQ=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=EE(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function uB(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function dB(n){return n==="dark"?DQ:[]}function FQ(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...s}=n,a=u_(e);return{palette:a,opacity:{...uB(a.mode),...t},overlays:r||dB(a.mode),...s}}function LQ(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const MQ=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],PQ=n=>(e,t)=>{const r=n.rootSelector||":root",s=n.colorSchemeSelector;let a=s;if(s==="class"&&(a=".%s"),s==="data"&&(a="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(a=`[${s}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const i={};return MQ(n.cssVarPrefix).forEach(o=>{i[o]=t[o],delete t[o]}),a==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:i}}:a?{[a.replace("%s",e)]:i,[`${r}, ${a.replace("%s",e)}`]:t}:{[r]:{...t,...i}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(a)return a.replace("%s",String(e))}return r};function BQ(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function Ue(n,e,t){!n[e]&&t&&(n[e]=t)}function T0(n){return typeof n!="string"||!n.startsWith("hsl")?n:aB(n)}function Nl(n,e){`${e}Channel`in n||(n[`${e}Channel`]=S0(T0(n[e])))}function jQ(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const _o=n=>{try{return n()}catch{}},zQ=(n="mui")=>oQ(n);function _C(n,e,t,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!t){n[r]=FQ({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:a,...i}=CE({...t,palette:{mode:s,...e==null?void 0:e.palette}});return n[r]={...e,palette:a,opacity:{...uB(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||dB(s)},i}function UQ(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:i=LQ,colorSchemeSelector:o=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=n,d=Object.keys(t)[0],h=r||(t.light&&d!=="light"?"light":d),p=zQ(a),{[h]:g,light:x,dark:y,...b}=t,S={...b};let T=g;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(T=!0),!T)throw new Error(Bl(21,h));const N=_C(S,T,c,h);x&&!S.light&&_C(S,x,void 0,"light"),y&&!S.dark&&_C(S,y,void 0,"dark");let C={defaultColorScheme:h,...N,cssVarPrefix:a,colorSchemeSelector:o,rootSelector:l,getCssVar:p,colorSchemes:S,font:{...vQ(N.typography),...N.font},spacing:jQ(c.spacing)};Object.keys(C.colorSchemes).forEach(_=>{const k=C.colorSchemes[_].palette,O=P=>{const W=P.split("-"),K=W[1],q=W[2];return p(P,k[K][q])};if(k.mode==="light"&&(Ue(k.common,"background","#fff"),Ue(k.common,"onBackground","#000")),k.mode==="dark"&&(Ue(k.common,"background","#000"),Ue(k.common,"onBackground","#fff")),BQ(k,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),k.mode==="light"){Ue(k.Alert,"errorColor",tr(k.error.light,.6)),Ue(k.Alert,"infoColor",tr(k.info.light,.6)),Ue(k.Alert,"successColor",tr(k.success.light,.6)),Ue(k.Alert,"warningColor",tr(k.warning.light,.6)),Ue(k.Alert,"errorFilledBg",O("palette-error-main")),Ue(k.Alert,"infoFilledBg",O("palette-info-main")),Ue(k.Alert,"successFilledBg",O("palette-success-main")),Ue(k.Alert,"warningFilledBg",O("palette-warning-main")),Ue(k.Alert,"errorFilledColor",_o(()=>k.getContrastText(k.error.main))),Ue(k.Alert,"infoFilledColor",_o(()=>k.getContrastText(k.info.main))),Ue(k.Alert,"successFilledColor",_o(()=>k.getContrastText(k.success.main))),Ue(k.Alert,"warningFilledColor",_o(()=>k.getContrastText(k.warning.main))),Ue(k.Alert,"errorStandardBg",nr(k.error.light,.9)),Ue(k.Alert,"infoStandardBg",nr(k.info.light,.9)),Ue(k.Alert,"successStandardBg",nr(k.success.light,.9)),Ue(k.Alert,"warningStandardBg",nr(k.warning.light,.9)),Ue(k.Alert,"errorIconColor",O("palette-error-main")),Ue(k.Alert,"infoIconColor",O("palette-info-main")),Ue(k.Alert,"successIconColor",O("palette-success-main")),Ue(k.Alert,"warningIconColor",O("palette-warning-main")),Ue(k.AppBar,"defaultBg",O("palette-grey-100")),Ue(k.Avatar,"defaultBg",O("palette-grey-400")),Ue(k.Button,"inheritContainedBg",O("palette-grey-300")),Ue(k.Button,"inheritContainedHoverBg",O("palette-grey-A100")),Ue(k.Chip,"defaultBorder",O("palette-grey-400")),Ue(k.Chip,"defaultAvatarColor",O("palette-grey-700")),Ue(k.Chip,"defaultIconColor",O("palette-grey-700")),Ue(k.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ue(k.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ue(k.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ue(k.LinearProgress,"primaryBg",nr(k.primary.main,.62)),Ue(k.LinearProgress,"secondaryBg",nr(k.secondary.main,.62)),Ue(k.LinearProgress,"errorBg",nr(k.error.main,.62)),Ue(k.LinearProgress,"infoBg",nr(k.info.main,.62)),Ue(k.LinearProgress,"successBg",nr(k.success.main,.62)),Ue(k.LinearProgress,"warningBg",nr(k.warning.main,.62)),Ue(k.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.11)`),Ue(k.Slider,"primaryTrack",nr(k.primary.main,.62)),Ue(k.Slider,"secondaryTrack",nr(k.secondary.main,.62)),Ue(k.Slider,"errorTrack",nr(k.error.main,.62)),Ue(k.Slider,"infoTrack",nr(k.info.main,.62)),Ue(k.Slider,"successTrack",nr(k.success.main,.62)),Ue(k.Slider,"warningTrack",nr(k.warning.main,.62));const P=Qy(k.background.default,.8);Ue(k.SnackbarContent,"bg",P),Ue(k.SnackbarContent,"color",_o(()=>k.getContrastText(P))),Ue(k.SpeedDialAction,"fabHoverBg",Qy(k.background.paper,.15)),Ue(k.StepConnector,"border",O("palette-grey-400")),Ue(k.StepContent,"border",O("palette-grey-400")),Ue(k.Switch,"defaultColor",O("palette-common-white")),Ue(k.Switch,"defaultDisabledColor",O("palette-grey-100")),Ue(k.Switch,"primaryDisabledColor",nr(k.primary.main,.62)),Ue(k.Switch,"secondaryDisabledColor",nr(k.secondary.main,.62)),Ue(k.Switch,"errorDisabledColor",nr(k.error.main,.62)),Ue(k.Switch,"infoDisabledColor",nr(k.info.main,.62)),Ue(k.Switch,"successDisabledColor",nr(k.success.main,.62)),Ue(k.Switch,"warningDisabledColor",nr(k.warning.main,.62)),Ue(k.TableCell,"border",nr(Yy(k.divider,1),.88)),Ue(k.Tooltip,"bg",Yy(k.grey[700],.92))}if(k.mode==="dark"){Ue(k.Alert,"errorColor",nr(k.error.light,.6)),Ue(k.Alert,"infoColor",nr(k.info.light,.6)),Ue(k.Alert,"successColor",nr(k.success.light,.6)),Ue(k.Alert,"warningColor",nr(k.warning.light,.6)),Ue(k.Alert,"errorFilledBg",O("palette-error-dark")),Ue(k.Alert,"infoFilledBg",O("palette-info-dark")),Ue(k.Alert,"successFilledBg",O("palette-success-dark")),Ue(k.Alert,"warningFilledBg",O("palette-warning-dark")),Ue(k.Alert,"errorFilledColor",_o(()=>k.getContrastText(k.error.dark))),Ue(k.Alert,"infoFilledColor",_o(()=>k.getContrastText(k.info.dark))),Ue(k.Alert,"successFilledColor",_o(()=>k.getContrastText(k.success.dark))),Ue(k.Alert,"warningFilledColor",_o(()=>k.getContrastText(k.warning.dark))),Ue(k.Alert,"errorStandardBg",tr(k.error.light,.9)),Ue(k.Alert,"infoStandardBg",tr(k.info.light,.9)),Ue(k.Alert,"successStandardBg",tr(k.success.light,.9)),Ue(k.Alert,"warningStandardBg",tr(k.warning.light,.9)),Ue(k.Alert,"errorIconColor",O("palette-error-main")),Ue(k.Alert,"infoIconColor",O("palette-info-main")),Ue(k.Alert,"successIconColor",O("palette-success-main")),Ue(k.Alert,"warningIconColor",O("palette-warning-main")),Ue(k.AppBar,"defaultBg",O("palette-grey-900")),Ue(k.AppBar,"darkBg",O("palette-background-paper")),Ue(k.AppBar,"darkColor",O("palette-text-primary")),Ue(k.Avatar,"defaultBg",O("palette-grey-600")),Ue(k.Button,"inheritContainedBg",O("palette-grey-800")),Ue(k.Button,"inheritContainedHoverBg",O("palette-grey-700")),Ue(k.Chip,"defaultBorder",O("palette-grey-700")),Ue(k.Chip,"defaultAvatarColor",O("palette-grey-300")),Ue(k.Chip,"defaultIconColor",O("palette-grey-300")),Ue(k.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ue(k.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ue(k.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ue(k.LinearProgress,"primaryBg",tr(k.primary.main,.5)),Ue(k.LinearProgress,"secondaryBg",tr(k.secondary.main,.5)),Ue(k.LinearProgress,"errorBg",tr(k.error.main,.5)),Ue(k.LinearProgress,"infoBg",tr(k.info.main,.5)),Ue(k.LinearProgress,"successBg",tr(k.success.main,.5)),Ue(k.LinearProgress,"warningBg",tr(k.warning.main,.5)),Ue(k.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.13)`),Ue(k.Slider,"primaryTrack",tr(k.primary.main,.5)),Ue(k.Slider,"secondaryTrack",tr(k.secondary.main,.5)),Ue(k.Slider,"errorTrack",tr(k.error.main,.5)),Ue(k.Slider,"infoTrack",tr(k.info.main,.5)),Ue(k.Slider,"successTrack",tr(k.success.main,.5)),Ue(k.Slider,"warningTrack",tr(k.warning.main,.5));const P=Qy(k.background.default,.98);Ue(k.SnackbarContent,"bg",P),Ue(k.SnackbarContent,"color",_o(()=>k.getContrastText(P))),Ue(k.SpeedDialAction,"fabHoverBg",Qy(k.background.paper,.15)),Ue(k.StepConnector,"border",O("palette-grey-600")),Ue(k.StepContent,"border",O("palette-grey-600")),Ue(k.Switch,"defaultColor",O("palette-grey-300")),Ue(k.Switch,"defaultDisabledColor",O("palette-grey-600")),Ue(k.Switch,"primaryDisabledColor",tr(k.primary.main,.55)),Ue(k.Switch,"secondaryDisabledColor",tr(k.secondary.main,.55)),Ue(k.Switch,"errorDisabledColor",tr(k.error.main,.55)),Ue(k.Switch,"infoDisabledColor",tr(k.info.main,.55)),Ue(k.Switch,"successDisabledColor",tr(k.success.main,.55)),Ue(k.Switch,"warningDisabledColor",tr(k.warning.main,.55)),Ue(k.TableCell,"border",tr(Yy(k.divider,1),.68)),Ue(k.Tooltip,"bg",Yy(k.grey[700],.92))}Nl(k.background,"default"),Nl(k.background,"paper"),Nl(k.common,"background"),Nl(k.common,"onBackground"),Nl(k,"divider"),Object.keys(k).forEach(P=>{const W=k[P];P!=="tonalOffset"&&W&&typeof W=="object"&&(W.main&&Ue(k[P],"mainChannel",S0(T0(W.main))),W.light&&Ue(k[P],"lightChannel",S0(T0(W.light))),W.dark&&Ue(k[P],"darkChannel",S0(T0(W.dark))),W.contrastText&&Ue(k[P],"contrastTextChannel",S0(T0(W.contrastText))),P==="text"&&(Nl(k[P],"primary"),Nl(k[P],"secondary")),P==="action"&&(W.active&&Nl(k[P],"active"),W.selected&&Nl(k[P],"selected")))})}),C=e.reduce((_,k)=>ea(_,k),C);const I={prefix:a,disableCssColorScheme:s,shouldSkipGeneratingVar:i,getSelector:PQ(C)},{vars:F,generateThemeVars:D,generateStyleSheets:A}=uQ(C,I);return C.vars=F,Object.entries(C.colorSchemes[C.defaultColorScheme]).forEach(([_,k])=>{C[_]=k}),C.generateThemeVars=D,C.generateStyleSheets=A,C.generateSpacing=function(){return eB(c.spacing,a_(this))},C.getColorSchemeSelector=dQ(o),C.spacing=C.generateSpacing(),C.shouldSkipGeneratingVar=i,C.unstable_sxConfig={...Pg,...c==null?void 0:c.unstable_sxConfig},C.unstable_sx=function(k){return Td({sx:k,theme:this})},C.toRuntimeSource=cB,C}function D4(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:u_({...t===!0?{}:t.palette,mode:e})})}function fB(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:s=t?void 0:{light:!0},defaultColorScheme:a=t==null?void 0:t.mode,...i}=n,o=a||"light",l=s==null?void 0:s[o],c={...s,...t?{[o]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return CE(n,...e);let d=t;"palette"in n||c[o]&&(c[o]!==!0?d=c[o].palette:o==="dark"&&(d={mode:"dark"}));const h=CE({...n,palette:d},...e);return h.defaultColorScheme=o,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},D4(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},D4(h,"light",c.light)),h}return!t&&!("light"in c)&&o==="light"&&(c.light=!0),UQ({...i,colorSchemes:c,defaultColorScheme:o,...typeof r!="boolean"&&r},...e)}const Cw=fB();function Ew(){const n=ww(Cw);return n[Og]||n}function VQ({props:n,name:e}){return KY({props:n,name:e,defaultTheme:Cw,themeId:Og})}function hB(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Bi=n=>hB(n)&&n!=="classes",At=UY({themeId:Og,defaultTheme:Cw,rootShouldForwardProp:Bi}),WQ=["localeText"],F4=L.createContext(null),HQ=function(e){const{localeText:t}=e,r=Kk(e,WQ),{adapter:s,localeText:a}=L.useContext(F4)??{adapter:void 0,localeText:void 0},i=VQ({props:r,name:"MuiLocalizationProvider"}),{children:o,dateAdapter:l,dateFormats:c,dateLibInstance:d,adapterLocale:h,localeText:p}=i,g=L.useMemo(()=>Th({},p,a,t),[p,a,t]),x=L.useMemo(()=>{if(!l)return s||null;const S=new l({locale:h,formats:c,instance:d});if(!S.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return S},[l,h,c,d,s]),y=L.useMemo(()=>x?{minDate:x.date("1900-01-01T00:00:00.000"),maxDate:x.date("2099-12-31T00:00:00.000")}:null,[x]),b=L.useMemo(()=>({utils:x,adapter:x,defaultDates:y,localeText:g}),[y,x,g]);return w.jsx(F4.Provider,{value:b,children:o})};function GQ(n){return w.jsx(DY,{...n,defaultTheme:Cw,themeId:Og})}function qQ(n){return function(t){return w.jsx(GQ,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function KQ(){return tB}const Zn=iQ;function Jn(n){return rQ(n)}function XQ(n){return typeof n.main=="string"}function YQ(n,e=[]){if(!XQ(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Gh(n=[]){return([,e])=>e&&YQ(e,n)}function QQ(n){return $n("MuiTypography",n)}vn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const ZQ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},JQ=KQ(),eZ=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:s,variant:a,classes:i}=n,o={root:["root",a,n.align!=="inherit"&&`align${pn(e)}`,t&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return Rn(o,QQ,i)},tZ=At("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${pn(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(Zn(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Gh()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${pn(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),L4={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},kE=L.forwardRef(function(e,t){const{color:r,...s}=Jn({props:e,name:"MuiTypography"}),a=!ZQ[r],i=JQ({...s,...a&&{color:r}}),{align:o="inherit",className:l,component:c,gutterBottom:d=!1,noWrap:h=!1,paragraph:p=!1,variant:g="body1",variantMapping:x=L4,...y}=i,b={...i,align:o,color:r,className:l,component:c,gutterBottom:d,noWrap:h,paragraph:p,variant:g,variantMapping:x},S=c||(p?"p":x[g]||L4[g])||"span",T=eZ(b);return w.jsx(tZ,{as:S,ref:t,className:jt(T.root,l),...y,ownerState:b,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...y.style}})});function xa(...n){const e=L.useRef(void 0),t=L.useCallback(r=>{const s=n.map(a=>{if(a==null)return null;if(typeof a=="function"){const i=a,o=i(r);return typeof o=="function"?o:()=>{i(null)}}return a.current=r,()=>{a.current=null}});return()=>{s.forEach(a=>a==null?void 0:a())}},n);return L.useMemo(()=>n.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=t(r))},n)}function nZ(n){return typeof n=="string"}function pB(n,e,t){return n===void 0||nZ(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function mB(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function M4(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function gB(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:s,className:a}=n;if(!e){const g=jt(t==null?void 0:t.className,a,s==null?void 0:s.className,r==null?void 0:r.className),x={...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},y={...t,...s,...r};return g.length>0&&(y.className=g),Object.keys(x).length>0&&(y.style=x),{props:y,internalRef:void 0}}const i=mB({...s,...r}),o=M4(r),l=M4(s),c=e(i),d=jt(c==null?void 0:c.className,t==null?void 0:t.className,a,s==null?void 0:s.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},p={...c,...t,...l,...o};return d.length>0&&(p.className=d),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:c.ref}}function xB(n,e,t){return typeof n=="function"?n(e,t):n}function eg(n){var h;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:s=!1,...a}=n,i=s?{}:xB(t,r),{props:o,internalRef:l}=gB({...a,externalSlotProps:i}),c=xa(l,i==null?void 0:i.ref,(h=n.additionalProps)==null?void 0:h.ref);return pB(e,{...o,ref:c},r)}function P4(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function rZ(n){return $n("MuiSvgIcon",n)}vn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const sZ=n=>{const{color:e,fontSize:t,classes:r}=n,s={root:["root",e!=="inherit"&&`color${pn(e)}`,`fontSize${pn(t)}`]};return Rn(s,rZ,r)},aZ=At("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${pn(t.color)}`],e[`fontSize${pn(t.fontSize)}`]]}})(Zn(({theme:n})=>{var e,t,r,s,a,i,o,l,c,d,h,p,g,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=n.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:y=>!y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((i=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:i.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(o=n.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:d.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,y])=>y&&y.main).map(([y])=>{var b,S;return{props:{color:y},style:{color:(S=(b=(n.vars??n).palette)==null?void 0:b[y])==null?void 0:S.main}}}),{props:{color:"action"},style:{color:(p=(h=(n.vars??n).palette)==null?void 0:h.action)==null?void 0:p.active}},{props:{color:"disabled"},style:{color:(x=(g=(n.vars??n).palette)==null?void 0:g.action)==null?void 0:x.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),_E=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiSvgIcon"}),{children:s,className:a,color:i="inherit",component:o="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:d=!1,titleAccess:h,viewBox:p="0 0 24 24",...g}=r,x=L.isValidElement(s)&&s.type==="svg",y={...r,color:i,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:p,hasSvgAsChild:x},b={};d||(b.viewBox=p);const S=sZ(y);return w.jsxs(aZ,{as:o,className:jt(S.root,a),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...b,...g,...x&&s.props,ownerState:y,children:[x?s.props.children:s,h?w.jsx("title",{children:h}):null]})});_E.muiName="SvgIcon";function d_(n,e){function t(r,s){return w.jsx(_E,{"data-testid":void 0,ref:s,...r,children:n})}return t.muiName=_E.muiName,L.memo(L.forwardRef(t))}function kw(n,e=166){let t;function r(...s){const a=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(a,e)}return r.clear=()=>{clearTimeout(t)},r}function Li(n){return n&&n.ownerDocument||document}function ho(n){return Li(n).defaultView||window}function B4(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function IE(n){const{controlled:e,default:t,name:r,state:s="value"}=n,{current:a}=L.useRef(e!==void 0),[i,o]=L.useState(t),l=a?e:i,c=L.useCallback(d=>{a||o(d)},[]);return[l,c]}function Wo(n){const e=L.useRef(n);return zl(()=>{e.current=n}),L.useRef((...t)=>(0,e.current)(...t)).current}function iZ(n,e){const t=n.charCodeAt(2);return n[0]==="o"&&n[1]==="n"&&t>=65&&t<=90&&typeof e=="function"}function oZ(n,e){if(!n)return e;function t(i,o){const l={};return Object.keys(o).forEach(c=>{iZ(c,o[c])&&typeof i[c]=="function"&&(l[c]=(...d)=>{i[c](...d),o[c](...d)})}),l}if(typeof n=="function"||typeof e=="function")return i=>{const o=typeof e=="function"?e(i):e,l=typeof n=="function"?n({...i,...o}):n,c=jt(i==null?void 0:i.className,o==null?void 0:o.className,l==null?void 0:l.className),d=t(l,o);return{...o,...l,...d,...!!c&&{className:c},...(o==null?void 0:o.style)&&(l==null?void 0:l.style)&&{style:{...o.style,...l.style}},...(o==null?void 0:o.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(o.sx)?o.sx:[o.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const r=e,s=t(n,r),a=jt(r==null?void 0:r.className,n==null?void 0:n.className);return{...e,...n,...s,...!!a&&{className:a},...(r==null?void 0:r.style)&&(n==null?void 0:n.style)&&{style:{...r.style,...n.style}},...(r==null?void 0:r.sx)&&(n==null?void 0:n.sx)&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(n.sx)?n.sx:[n.sx]]}}}function j4(n){try{return n.matches(":focus-visible")}catch{}return!1}const z4={};function yB(n,e){const t=L.useRef(z4);return t.current===z4&&(t.current=n(e)),t}class sv{constructor(){xt(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new sv}static use(){const e=yB(sv.create).current,[t,r]=L.useState(!1);return e.shouldMount=t,e.setShouldMount=r,L.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=cZ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function lZ(){return sv.use()}function cZ(){let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t}function AE(n,e){return AE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},AE(n,e)}function bB(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,AE(n,e)}const U4={disabled:!1},av=ao.createContext(null);var uZ=function(e){return e.scrollTop},N0="unmounted",td="exited",nd="entering",ih="entered",$E="exiting",al=function(n){bB(e,n);function e(r,s){var a;a=n.call(this,r,s)||this;var i=s,o=i&&!i.isMounting?r.enter:r.appear,l;return a.appearStatus=null,r.in?o?(l=td,a.appearStatus=nd):l=ih:r.unmountOnExit||r.mountOnEnter?l=N0:l=td,a.state={status:l},a.nextCallback=null,a}e.getDerivedStateFromProps=function(s,a){var i=s.in;return i&&a.status===N0?{status:td}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var a=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==nd&&i!==ih&&(a=nd):(i===nd||i===ih)&&(a=$E)}this.updateStatus(!1,a)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,a,i,o;return a=i=o=s,s!=null&&typeof s!="number"&&(a=s.exit,i=s.enter,o=s.appear!==void 0?s.appear:i),{exit:a,enter:i,appear:o}},t.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===nd){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Ky.findDOMNode(this);i&&uZ(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===td&&this.setState({status:N0})},t.performEnter=function(s){var a=this,i=this.props.enter,o=this.context?this.context.isMounting:s,l=this.props.nodeRef?[o]:[Ky.findDOMNode(this),o],c=l[0],d=l[1],h=this.getTimeouts(),p=o?h.appear:h.enter;if(!s&&!i||U4.disabled){this.safeSetState({status:ih},function(){a.props.onEntered(c)});return}this.props.onEnter(c,d),this.safeSetState({status:nd},function(){a.props.onEntering(c,d),a.onTransitionEnd(p,function(){a.safeSetState({status:ih},function(){a.props.onEntered(c,d)})})})},t.performExit=function(){var s=this,a=this.props.exit,i=this.getTimeouts(),o=this.props.nodeRef?void 0:Ky.findDOMNode(this);if(!a||U4.disabled){this.safeSetState({status:td},function(){s.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:$E},function(){s.props.onExiting(o),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:td},function(){s.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},t.setNextCallback=function(s){var a=this,i=!0;return this.nextCallback=function(o){i&&(i=!1,a.nextCallback=null,s(o))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},t.onTransitionEnd=function(s,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:Ky.findDOMNode(this),o=s==null&&!this.props.addEndListener;if(!i||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],c=l[0],d=l[1];this.props.addEndListener(c,d)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===N0)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var o=Kk(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ao.createElement(av.Provider,{value:null},typeof i=="function"?i(s,o):ao.cloneElement(ao.Children.only(i),o))},e}(ao.Component);al.contextType=av;al.propTypes={};function Zf(){}al.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Zf,onEntering:Zf,onEntered:Zf,onExit:Zf,onExiting:Zf,onExited:Zf};al.UNMOUNTED=N0;al.EXITED=td;al.ENTERING=nd;al.ENTERED=ih;al.EXITING=$E;function dZ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function f_(n,e){var t=function(a){return e&&L.isValidElement(a)?e(a):a},r=Object.create(null);return n&&L.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function fZ(n,e){n=n||{},e=e||{};function t(d){return d in e?e[d]:n[d]}var r=Object.create(null),s=[];for(var a in n)a in e?s.length&&(r[a]=s,s=[]):s.push(a);var i,o={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];o[r[l][i]]=t(c)}o[l]=t(l)}for(i=0;i<s.length;i++)o[s[i]]=t(s[i]);return o}function hd(n,e,t){return t[e]!=null?t[e]:n.props[e]}function hZ(n,e){return f_(n.children,function(t){return L.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:hd(t,"appear",n),enter:hd(t,"enter",n),exit:hd(t,"exit",n)})})}function pZ(n,e,t){var r=f_(n.children),s=fZ(e,r);return Object.keys(s).forEach(function(a){var i=s[a];if(L.isValidElement(i)){var o=a in e,l=a in r,c=e[a],d=L.isValidElement(c)&&!c.props.in;l&&(!o||d)?s[a]=L.cloneElement(i,{onExited:t.bind(null,i),in:!0,exit:hd(i,"exit",n),enter:hd(i,"enter",n)}):!l&&o&&!d?s[a]=L.cloneElement(i,{in:!1}):l&&o&&L.isValidElement(c)&&(s[a]=L.cloneElement(i,{onExited:t.bind(null,i),in:c.props.in,exit:hd(i,"exit",n),enter:hd(i,"enter",n)}))}}),s}var mZ=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},gZ={component:"div",childFactory:function(e){return e}},h_=function(n){bB(e,n);function e(r,s){var a;a=n.call(this,r,s)||this;var i=a.handleExited.bind(dZ(a));return a.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},a}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,a){var i=a.children,o=a.handleExited,l=a.firstRender;return{children:l?hZ(s,o):pZ(s,i,o),firstRender:!1}},t.handleExited=function(s,a){var i=f_(this.props.children);s.key in i||(s.props.onExited&&s.props.onExited(a),this.mounted&&this.setState(function(o){var l=Th({},o.children);return delete l[s.key],{children:l}}))},t.render=function(){var s=this.props,a=s.component,i=s.childFactory,o=Kk(s,["component","childFactory"]),l=this.state.contextValue,c=mZ(this.state.children).map(i);return delete o.appear,delete o.enter,delete o.exit,a===null?ao.createElement(av.Provider,{value:l},c):ao.createElement(av.Provider,{value:l},ao.createElement(a,o,c))},e}(ao.Component);h_.propTypes={};h_.defaultProps=gZ;const xZ=[];function yZ(n){L.useEffect(n,xZ)}class p_{constructor(){xt(this,"currentId",null);xt(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});xt(this,"disposeEffect",()=>this.clear)}static create(){return new p_}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function vB(){const n=yB(p_.create).current;return yZ(n.disposeEffect),n}function bZ(n){const{className:e,classes:t,pulsate:r=!1,rippleX:s,rippleY:a,rippleSize:i,in:o,onExited:l,timeout:c}=n,[d,h]=L.useState(!1),p=jt(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),g={width:i,height:i,top:-(i/2)+a,left:-(i/2)+s},x=jt(t.child,d&&t.childLeaving,r&&t.childPulsate);return!o&&!d&&h(!0),L.useEffect(()=>{if(!o&&l!=null){const y=setTimeout(l,c);return()=>{clearTimeout(y)}}},[l,o,c]),w.jsx("span",{className:p,style:g,children:w.jsx("span",{className:x})})}const $i=vn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),RE=550,vZ=80,wZ=n_`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,SZ=n_`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,TZ=n_`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,NZ=At("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),CZ=At(bZ,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${$i.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${wZ};
    animation-duration: ${RE}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${$i.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${$i.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${$i.childLeaving} {
    opacity: 0;
    animation-name: ${SZ};
    animation-duration: ${RE}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${$i.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${TZ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,EZ=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:a={},className:i,...o}=r,[l,c]=L.useState([]),d=L.useRef(0),h=L.useRef(null);L.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const p=L.useRef(!1),g=vB(),x=L.useRef(null),y=L.useRef(null),b=L.useCallback(C=>{const{pulsate:I,rippleX:F,rippleY:D,rippleSize:A,cb:_}=C;c(k=>[...k,w.jsx(CZ,{classes:{ripple:jt(a.ripple,$i.ripple),rippleVisible:jt(a.rippleVisible,$i.rippleVisible),ripplePulsate:jt(a.ripplePulsate,$i.ripplePulsate),child:jt(a.child,$i.child),childLeaving:jt(a.childLeaving,$i.childLeaving),childPulsate:jt(a.childPulsate,$i.childPulsate)},timeout:RE,pulsate:I,rippleX:F,rippleY:D,rippleSize:A},d.current)]),d.current+=1,h.current=_},[a]),S=L.useCallback((C={},I={},F=()=>{})=>{const{pulsate:D=!1,center:A=s||I.pulsate,fakeElement:_=!1}=I;if((C==null?void 0:C.type)==="mousedown"&&p.current){p.current=!1;return}(C==null?void 0:C.type)==="touchstart"&&(p.current=!0);const k=_?null:y.current,O=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,W,K;if(A||C===void 0||C.clientX===0&&C.clientY===0||!C.clientX&&!C.touches)P=Math.round(O.width/2),W=Math.round(O.height/2);else{const{clientX:q,clientY:V}=C.touches&&C.touches.length>0?C.touches[0]:C;P=Math.round(q-O.left),W=Math.round(V-O.top)}if(A)K=Math.sqrt((2*O.width**2+O.height**2)/3),K%2===0&&(K+=1);else{const q=Math.max(Math.abs((k?k.clientWidth:0)-P),P)*2+2,V=Math.max(Math.abs((k?k.clientHeight:0)-W),W)*2+2;K=Math.sqrt(q**2+V**2)}C!=null&&C.touches?x.current===null&&(x.current=()=>{b({pulsate:D,rippleX:P,rippleY:W,rippleSize:K,cb:F})},g.start(vZ,()=>{x.current&&(x.current(),x.current=null)})):b({pulsate:D,rippleX:P,rippleY:W,rippleSize:K,cb:F})},[s,b,g]),T=L.useCallback(()=>{S({},{pulsate:!0})},[S]),N=L.useCallback((C,I)=>{if(g.clear(),(C==null?void 0:C.type)==="touchend"&&x.current){x.current(),x.current=null,g.start(0,()=>{N(C,I)});return}x.current=null,c(F=>F.length>0?F.slice(1):F),h.current=I},[g]);return L.useImperativeHandle(t,()=>({pulsate:T,start:S,stop:N}),[T,S,N]),w.jsx(NZ,{className:jt($i.root,a.root,i),ref:y,...o,children:w.jsx(h_,{component:null,exit:!0,children:l})})});function kZ(n){return $n("MuiButtonBase",n)}const _Z=vn("MuiButtonBase",["root","disabled","focusVisible"]),IZ=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:s}=n,i=Rn({root:["root",e&&"disabled",t&&"focusVisible"]},kZ,s);return t&&r&&(i.root+=` ${r}`),i},AZ=At("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_Z.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),_w=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:a=!1,children:i,className:o,component:l="button",disabled:c=!1,disableRipple:d=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:g,LinkComponent:x="a",onBlur:y,onClick:b,onContextMenu:S,onDragLeave:T,onFocus:N,onFocusVisible:C,onKeyDown:I,onKeyUp:F,onMouseDown:D,onMouseLeave:A,onMouseUp:_,onTouchEnd:k,onTouchMove:O,onTouchStart:P,tabIndex:W=0,TouchRippleProps:K,touchRippleRef:q,type:V,...X}=r,Q=L.useRef(null),Y=lZ(),j=xa(Y.ref,q),[J,M]=L.useState(!1);c&&J&&M(!1),L.useImperativeHandle(s,()=>({focusVisible:()=>{M(!0),Q.current.focus()}}),[]);const z=Y.shouldMount&&!d&&!c;L.useEffect(()=>{J&&p&&!d&&Y.pulsate()},[d,p,J,Y]);const G=Cl(Y,"start",D,h),U=Cl(Y,"stop",S,h),se=Cl(Y,"stop",T,h),pe=Cl(Y,"stop",_,h),me=Cl(Y,"stop",st=>{J&&st.preventDefault(),A&&A(st)},h),be=Cl(Y,"start",P,h),ge=Cl(Y,"stop",k,h),ke=Cl(Y,"stop",O,h),Le=Cl(Y,"stop",st=>{j4(st.target)||M(!1),y&&y(st)},!1),rt=Wo(st=>{Q.current||(Q.current=st.currentTarget),j4(st.target)&&(M(!0),C&&C(st)),N&&N(st)}),Be=()=>{const st=Q.current;return l&&l!=="button"&&!(st.tagName==="A"&&st.href)},Ze=Wo(st=>{p&&!st.repeat&&J&&st.key===" "&&Y.stop(st,()=>{Y.start(st)}),st.target===st.currentTarget&&Be()&&st.key===" "&&st.preventDefault(),I&&I(st),st.target===st.currentTarget&&Be()&&st.key==="Enter"&&!c&&(st.preventDefault(),b&&b(st))}),He=Wo(st=>{p&&st.key===" "&&J&&!st.defaultPrevented&&Y.stop(st,()=>{Y.pulsate(st)}),F&&F(st),b&&st.target===st.currentTarget&&Be()&&st.key===" "&&!st.defaultPrevented&&b(st)});let ne=l;ne==="button"&&(X.href||X.to)&&(ne=x);const Ae={};ne==="button"?(Ae.type=V===void 0?"button":V,Ae.disabled=c):(!X.href&&!X.to&&(Ae.role="button"),c&&(Ae["aria-disabled"]=c));const Me=xa(t,Q),Ve={...r,centerRipple:a,component:l,disabled:c,disableRipple:d,disableTouchRipple:h,focusRipple:p,tabIndex:W,focusVisible:J},ot=IZ(Ve);return w.jsxs(AZ,{as:ne,className:jt(ot.root,o),ownerState:Ve,onBlur:Le,onClick:b,onContextMenu:U,onFocus:rt,onKeyDown:Ze,onKeyUp:He,onMouseDown:G,onMouseLeave:me,onMouseUp:pe,onDragLeave:se,onTouchEnd:ge,onTouchMove:ke,onTouchStart:be,ref:Me,tabIndex:c?-1:W,type:V,...Ae,...X,children:[i,z?w.jsx(EZ,{ref:j,center:a,...K}):null]})});function Cl(n,e,t,r=!1){return Wo(s=>(t&&t(s),r||n[e](s),!0))}const OE=L.createContext({}),V4=vn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),W4=vn("MuiListItemIcon",["root","alignItemsFlexStart"]),H4=vn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Yn(n,e){const{className:t,elementType:r,ownerState:s,externalForwardedProps:a,internalForwardedProps:i,shouldForwardComponentProp:o=!1,...l}=e,{component:c,slots:d={[n]:void 0},slotProps:h={[n]:void 0},...p}=a,g=d[n]||r,x=xB(h[n],s),{props:{component:y,...b},internalRef:S}=gB({className:t,...l,externalForwardedProps:n==="root"?p:void 0,externalSlotProps:x}),T=xa(S,x==null?void 0:x.ref,e.ref),N=n==="root"?y||c:y,C=pB(g,{...n==="root"&&!c&&!d[n]&&i,...n!=="root"&&!d[n]&&i,...b,...N&&!o&&{as:N},...N&&o&&{component:N},ref:T},s);return[g,C]}function $Z(n){return $n("MuiMenuItem",n)}const o0=vn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),RZ=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},OZ=n=>{const{disabled:e,dense:t,divider:r,disableGutters:s,selected:a,classes:i}=n,l=Rn({root:["root",t&&"dense",e&&"disabled",!s&&"gutters",r&&"divider",a&&"selected"]},$Z,i);return{...i,...l}},DZ=At(_w,{shouldForwardProp:n=>Bi(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:RZ})(Zn(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${o0.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Rl(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${o0.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Rl(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${o0.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Rl(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Rl(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${o0.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${o0.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${V4.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${V4.inset}`]:{marginLeft:52},[`& .${H4.root}`]:{marginTop:0,marginBottom:0},[`& .${H4.inset}`]:{paddingLeft:36},[`& .${W4.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${W4.root} svg`]:{fontSize:"1.25rem"}}}]}))),qu=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:a="li",dense:i=!1,divider:o=!1,disableGutters:l=!1,focusVisibleClassName:c,role:d="menuitem",tabIndex:h,className:p,...g}=r,x=L.useContext(OE),y=L.useMemo(()=>({dense:i||x.dense||!1,disableGutters:l}),[x.dense,i,l]),b=L.useRef(null);zl(()=>{s&&b.current&&b.current.focus()},[s]);const S={...r,dense:y.dense,divider:o,disableGutters:l},T=OZ(r),N=xa(b,t);let C;return r.disabled||(C=h!==void 0?h:-1),w.jsx(OE.Provider,{value:y,children:w.jsx(DZ,{ref:N,role:d,tabIndex:C,component:a,focusVisibleClassName:jt(T.focusVisible,c),className:jt(T.root,p),...g,ownerState:S,classes:T})})});function FZ(n){return $n("MuiList",n)}vn("MuiList",["root","padding","dense","subheader"]);const LZ=n=>{const{classes:e,disablePadding:t,dense:r,subheader:s}=n;return Rn({root:["root",!t&&"padding",r&&"dense",s&&"subheader"]},FZ,e)},MZ=At("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),PZ=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiList"}),{children:s,className:a,component:i="ul",dense:o=!1,disablePadding:l=!1,subheader:c,...d}=r,h=L.useMemo(()=>({dense:o}),[o]),p={...r,component:i,dense:o,disablePadding:l},g=LZ(p);return w.jsx(OE.Provider,{value:h,children:w.jsxs(MZ,{as:i,className:jt(g.root,a),ref:t,ownerState:p,...d,children:[c,s]})})});function wB(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function IC(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function G4(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function SB(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function l0(n,e,t,r,s,a){let i=!1,o=s(n,e,e?t:!1);for(;o;){if(o===n.firstChild){if(i)return!1;i=!0}const l=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!SB(o,a)||l)o=s(n,o,t);else return o.focus(),!0}return!1}const BZ=L.forwardRef(function(e,t){const{actions:r,autoFocus:s=!1,autoFocusItem:a=!1,children:i,className:o,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:d,variant:h="selectedMenu",...p}=e,g=L.useRef(null),x=L.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});zl(()=>{s&&g.current.focus()},[s]),L.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(N,{direction:C})=>{const I=!g.current.style.width;if(N.clientHeight<g.current.clientHeight&&I){const F=`${wB(ho(N))}px`;g.current.style[C==="rtl"?"paddingLeft":"paddingRight"]=F,g.current.style.width=`calc(100% + ${F})`}return g.current}}),[]);const y=N=>{const C=g.current,I=N.key;if(N.ctrlKey||N.metaKey||N.altKey){d&&d(N);return}const D=Li(C).activeElement;if(I==="ArrowDown")N.preventDefault(),l0(C,D,c,l,IC);else if(I==="ArrowUp")N.preventDefault(),l0(C,D,c,l,G4);else if(I==="Home")N.preventDefault(),l0(C,null,c,l,IC);else if(I==="End")N.preventDefault(),l0(C,null,c,l,G4);else if(I.length===1){const A=x.current,_=I.toLowerCase(),k=performance.now();A.keys.length>0&&(k-A.lastTime>500?(A.keys=[],A.repeating=!0,A.previousKeyMatched=!0):A.repeating&&_!==A.keys[0]&&(A.repeating=!1)),A.lastTime=k,A.keys.push(_);const O=D&&!A.repeating&&SB(D,A);A.previousKeyMatched&&(O||l0(C,D,!1,l,IC,A))?N.preventDefault():A.previousKeyMatched=!1}d&&d(N)},b=xa(g,t);let S=-1;L.Children.forEach(i,(N,C)=>{if(!L.isValidElement(N)){S===C&&(S+=1,S>=i.length&&(S=-1));return}N.props.disabled||(h==="selectedMenu"&&N.props.selected||S===-1)&&(S=C),S===C&&(N.props.disabled||N.props.muiSkipListHighlight||N.type.muiSkipListHighlight)&&(S+=1,S>=i.length&&(S=-1))});const T=L.Children.map(i,(N,C)=>{if(C===S){const I={};return a&&(I.autoFocus=!0),N.props.tabIndex===void 0&&h==="selectedMenu"&&(I.tabIndex=0),L.cloneElement(N,I)}return N});return w.jsx(PZ,{role:"menu",ref:b,className:o,onKeyDown:y,tabIndex:s?0:-1,...p,children:T})});function Zy(n){return parseInt(n,10)||0}const jZ={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function zZ(n){for(const e in n)return!1;return!0}function q4(n){return zZ(n)||n.outerHeightStyle===0&&!n.overflowing}const UZ=L.forwardRef(function(e,t){const{onChange:r,maxRows:s,minRows:a=1,style:i,value:o,...l}=e,{current:c}=L.useRef(o!=null),d=L.useRef(null),h=xa(t,d),p=L.useRef(null),g=L.useRef(null),x=L.useCallback(()=>{const N=d.current,C=g.current;if(!N||!C)return;const F=ho(N).getComputedStyle(N);if(F.width==="0px")return{outerHeightStyle:0,overflowing:!1};C.style.width=F.width,C.value=N.value||e.placeholder||"x",C.value.slice(-1)===`
`&&(C.value+=" ");const D=F.boxSizing,A=Zy(F.paddingBottom)+Zy(F.paddingTop),_=Zy(F.borderBottomWidth)+Zy(F.borderTopWidth),k=C.scrollHeight;C.value="x";const O=C.scrollHeight;let P=k;a&&(P=Math.max(Number(a)*O,P)),s&&(P=Math.min(Number(s)*O,P)),P=Math.max(P,O);const W=P+(D==="border-box"?A+_:0),K=Math.abs(P-k)<=1;return{outerHeightStyle:W,overflowing:K}},[s,a,e.placeholder]),y=Wo(()=>{const N=d.current,C=x();if(!N||!C||q4(C))return!1;const I=C.outerHeightStyle;return p.current!=null&&p.current!==I}),b=L.useCallback(()=>{const N=d.current,C=x();if(!N||!C||q4(C))return;const I=C.outerHeightStyle;p.current!==I&&(p.current=I,N.style.height=`${I}px`),N.style.overflow=C.overflowing?"hidden":""},[x]),S=L.useRef(-1);zl(()=>{const N=kw(b),C=d==null?void 0:d.current;if(!C)return;const I=ho(C);I.addEventListener("resize",N);let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(()=>{y()&&(F.unobserve(C),cancelAnimationFrame(S.current),b(),S.current=requestAnimationFrame(()=>{F.observe(C)}))}),F.observe(C)),()=>{N.clear(),cancelAnimationFrame(S.current),I.removeEventListener("resize",N),F&&F.disconnect()}},[x,b,y]),zl(()=>{b()});const T=N=>{c||b();const C=N.target,I=C.value.length,F=C.value.endsWith(`
`),D=C.selectionStart===I;F&&D&&C.setSelectionRange(I,I),r&&r(N)};return w.jsxs(L.Fragment,{children:[w.jsx("textarea",{value:o,onChange:T,ref:h,rows:a,style:i,...l}),w.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:{...jZ.shadow,...i,paddingTop:0,paddingBottom:0}})]})});function DE(n){return typeof n=="string"}function mu({props:n,states:e,muiFormControl:t}){return e.reduce((r,s)=>(r[s]=n[s],t&&typeof n[s]>"u"&&(r[s]=t[s]),r),{})}const Iw=L.createContext(void 0);function il(){return L.useContext(Iw)}function K4(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function iv(n,e=!1){return n&&(K4(n.value)&&n.value!==""||e&&K4(n.defaultValue)&&n.defaultValue!=="")}function VZ(n){return n.startAdornment}function WZ(n){return $n("MuiInputBase",n)}const Ch=vn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var X4;const Aw=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${pn(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},$w=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},HZ=n=>{const{classes:e,color:t,disabled:r,error:s,endAdornment:a,focused:i,formControl:o,fullWidth:l,hiddenLabel:c,multiline:d,readOnly:h,size:p,startAdornment:g,type:x}=n,y={root:["root",`color${pn(t)}`,r&&"disabled",s&&"error",l&&"fullWidth",i&&"focused",o&&"formControl",p&&p!=="medium"&&`size${pn(p)}`,d&&"multiline",g&&"adornedStart",a&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",d&&"inputMultiline",p==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",g&&"inputAdornedStart",a&&"inputAdornedEnd",h&&"readOnly"]};return Rn(y,WZ,e)},Rw=At("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Aw})(Zn(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ch.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),Ow=At("input",{name:"MuiInputBase",slot:"Input",overridesResolver:$w})(Zn(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ch.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Ch.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:a})=>!a.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:a})=>a.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Y4=qQ({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),m_=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:a,autoFocus:i,className:o,color:l,components:c={},componentsProps:d={},defaultValue:h,disabled:p,disableInjectingGlobalStyles:g,endAdornment:x,error:y,fullWidth:b=!1,id:S,inputComponent:T="input",inputProps:N={},inputRef:C,margin:I,maxRows:F,minRows:D,multiline:A=!1,name:_,onBlur:k,onChange:O,onClick:P,onFocus:W,onKeyDown:K,onKeyUp:q,placeholder:V,readOnly:X,renderSuffix:Q,rows:Y,size:j,slotProps:J={},slots:M={},startAdornment:z,type:G="text",value:U,...se}=r,pe=N.value!=null?N.value:U,{current:me}=L.useRef(pe!=null),be=L.useRef(),ge=L.useCallback(lt=>{},[]),ke=xa(be,C,N.ref,ge),[Le,rt]=L.useState(!1),Be=il(),Ze=mu({props:r,muiFormControl:Be,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ze.focused=Be?Be.focused:Le,L.useEffect(()=>{!Be&&p&&Le&&(rt(!1),k&&k())},[Be,p,Le,k]);const He=Be&&Be.onFilled,ne=Be&&Be.onEmpty,Ae=L.useCallback(lt=>{iv(lt)?He&&He():ne&&ne()},[He,ne]);zl(()=>{me&&Ae({value:pe})},[pe,Ae,me]);const Me=lt=>{W&&W(lt),N.onFocus&&N.onFocus(lt),Be&&Be.onFocus?Be.onFocus(lt):rt(!0)},Ve=lt=>{k&&k(lt),N.onBlur&&N.onBlur(lt),Be&&Be.onBlur?Be.onBlur(lt):rt(!1)},ot=(lt,...Xe)=>{if(!me){const pt=lt.target||be.current;if(pt==null)throw new Error(Bl(1));Ae({value:pt.value})}N.onChange&&N.onChange(lt,...Xe),O&&O(lt,...Xe)};L.useEffect(()=>{Ae(be.current)},[]);const st=lt=>{be.current&&lt.currentTarget===lt.target&&be.current.focus(),P&&P(lt)};let Ge=T,at=N;A&&Ge==="input"&&(Y?at={type:void 0,minRows:Y,maxRows:Y,...at}:at={type:void 0,maxRows:F,minRows:D,...at},Ge=UZ);const Qt=lt=>{Ae(lt.animationName==="mui-auto-fill-cancel"?be.current:{value:"x"})};L.useEffect(()=>{Be&&Be.setAdornedStart(!!z)},[Be,z]);const Vt={...r,color:Ze.color||"primary",disabled:Ze.disabled,endAdornment:x,error:Ze.error,focused:Ze.focused,formControl:Be,fullWidth:b,hiddenLabel:Ze.hiddenLabel,multiline:A,size:Ze.size,startAdornment:z,type:G},Mt=HZ(Vt),Ut=M.root||c.Root||Rw,we=J.root||d.root||{},kt=M.input||c.Input||Ow;return at={...at,...J.input??d.input},w.jsxs(L.Fragment,{children:[!g&&typeof Y4=="function"&&(X4||(X4=w.jsx(Y4,{}))),w.jsxs(Ut,{...we,ref:t,onClick:st,...se,...!DE(Ut)&&{ownerState:{...Vt,...we.ownerState}},className:jt(Mt.root,we.className,o,X&&"MuiInputBase-readOnly"),children:[z,w.jsx(Iw.Provider,{value:null,children:w.jsx(kt,{"aria-invalid":Ze.error,"aria-describedby":s,autoComplete:a,autoFocus:i,defaultValue:h,disabled:Ze.disabled,id:S,onAnimationStart:Qt,name:_,placeholder:V,readOnly:X,required:Ze.required,rows:Y,value:pe,onKeyDown:K,onKeyUp:q,type:G,...at,...!DE(kt)&&{as:Ge,ownerState:{...Vt,...at.ownerState}},ref:ke,className:jt(Mt.input,at.className,X&&"MuiInputBase-readOnly"),onBlur:Ve,onChange:ot,onFocus:Me})}),x,Q?Q({...Ze,startAdornment:z}):null]})]})});function GZ(n){return $n("MuiInput",n)}const c0={...Ch,...vn("MuiInput",["root","underline","input"])},qZ=n=>{const{classes:e,disableUnderline:t}=n,s=Rn({root:["root",!t&&"underline"],input:["input"]},GZ,e);return{...e,...s}},KZ=At(Rw,{shouldForwardProp:n=>Bi(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Aw(n,e),!t.disableUnderline&&e.underline]}})(Zn(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${c0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${c0.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${c0.disabled}, .${c0.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${c0.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Gh()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),XZ=At(Ow,{name:"MuiInput",slot:"Input",overridesResolver:$w})({}),g_=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:a={},componentsProps:i,fullWidth:o=!1,inputComponent:l="input",multiline:c=!1,slotProps:d,slots:h={},type:p="text",...g}=r,x=qZ(r),b={root:{ownerState:{disableUnderline:s}}},S=d??i?ea(d??i,b):b,T=h.root??a.Root??KZ,N=h.input??a.Input??XZ;return w.jsx(m_,{slots:{root:T,input:N},slotProps:S,fullWidth:o,inputComponent:l,multiline:c,ref:t,type:p,...g,classes:x})});g_.muiName="Input";function YZ(n){return $n("MuiFilledInput",n)}const Ku={...Ch,...vn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},QZ=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:s,size:a,hiddenLabel:i,multiline:o}=n,l={root:["root",!t&&"underline",r&&"adornedStart",s&&"adornedEnd",a==="small"&&`size${pn(a)}`,i&&"hiddenLabel",o&&"multiline"],input:["input"]},c=Rn(l,YZ,e);return{...e,...c}},ZZ=At(Rw,{shouldForwardProp:n=>Bi(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Aw(n,e),!t.disableUnderline&&e.underline]}})(Zn(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Ku.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Ku.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:a},variants:[{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ku.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ku.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ku.disabled}, .${Ku.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Ku.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Gh()).map(([i])=>{var o;return{props:{disableUnderline:!1,color:i},style:{"&::after":{borderBottom:`2px solid ${(o=(n.vars||n).palette[i])==null?void 0:o.main}`}}}}),{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:12}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:12}},{props:({ownerState:i})=>i.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:i,size:o})=>i.multiline&&o==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel&&i.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),JZ=At(Ow,{name:"MuiFilledInput",slot:"Input",overridesResolver:$w})(Zn(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),x_=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:a={},componentsProps:i,fullWidth:o=!1,hiddenLabel:l,inputComponent:c="input",multiline:d=!1,slotProps:h,slots:p={},type:g="text",...x}=r,y={...r,disableUnderline:s,fullWidth:o,inputComponent:c,multiline:d,type:g},b=QZ(r),S={root:{ownerState:y},input:{ownerState:y}},T=h??i?ea(S,h??i):S,N=p.root??a.Root??ZZ,C=p.input??a.Input??JZ;return w.jsx(m_,{slots:{root:N,input:C},slotProps:T,fullWidth:o,inputComponent:c,multiline:d,ref:t,type:g,...x,classes:b})});x_.muiName="Input";var Q4;const eJ=At("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Bi})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),tJ=At("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Bi})(Zn(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function nJ(n){const{children:e,classes:t,className:r,label:s,notched:a,...i}=n,o=s!=null&&s!=="",l={...n,notched:a,withLabel:o};return w.jsx(eJ,{"aria-hidden":!0,className:r,ownerState:l,...i,children:w.jsx(tJ,{ownerState:l,children:o?w.jsx("span",{children:s}):Q4||(Q4=w.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}function rJ(n){return $n("MuiOutlinedInput",n)}const Io={...Ch,...vn("MuiOutlinedInput",["root","notchedOutline","input"])},sJ=n=>{const{classes:e}=n,r=Rn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},rJ,e);return{...e,...r}},aJ=At(Rw,{shouldForwardProp:n=>Bi(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Aw})(Zn(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Io.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Io.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Io.focused} .${Io.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Gh()).map(([t])=>({props:{color:t},style:{[`&.${Io.focused} .${Io.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Io.error} .${Io.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Io.disabled} .${Io.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),iJ=At(nJ,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Zn(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),oJ=At(Ow,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:$w})(Zn(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),y_=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:a=!1,inputComponent:i="input",label:o,multiline:l=!1,notched:c,slots:d={},slotProps:h={},type:p="text",...g}=r,x=sJ(r),y=il(),b=mu({props:r,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S={...r,color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:y,fullWidth:a,hiddenLabel:b.hiddenLabel,multiline:l,size:b.size,type:p},T=d.root??s.Root??aJ,N=d.input??s.Input??oJ,[C,I]=Yn("notchedOutline",{elementType:iJ,className:x.notchedOutline,shouldForwardComponentProp:!0,ownerState:S,externalForwardedProps:{slots:d,slotProps:h},additionalProps:{label:o!=null&&o!==""&&b.required?w.jsxs(L.Fragment,{children:[o,"","*"]}):o}});return w.jsx(m_,{slots:{root:T,input:N},slotProps:h,renderSuffix:F=>w.jsx(C,{...I,notched:typeof c<"u"?c:!!(F.startAdornment||F.filled||F.focused)}),fullWidth:a,inputComponent:i,multiline:l,ref:t,type:p,...g,classes:{...x,notchedOutline:null}})});y_.muiName="Input";function lJ(n){return $n("MuiFormLabel",n)}const L0=vn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),cJ=n=>{const{classes:e,color:t,focused:r,disabled:s,error:a,filled:i,required:o}=n,l={root:["root",`color${pn(t)}`,s&&"disabled",a&&"error",i&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",a&&"error"]};return Rn(l,lJ,e)},uJ=At("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(Zn(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Gh()).map(([e])=>({props:{color:e},style:{[`&.${L0.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${L0.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${L0.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),dJ=At("span",{name:"MuiFormLabel",slot:"Asterisk"})(Zn(({theme:n})=>({[`&.${L0.error}`]:{color:(n.vars||n).palette.error.main}}))),fJ=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiFormLabel"}),{children:s,className:a,color:i,component:o="label",disabled:l,error:c,filled:d,focused:h,required:p,...g}=r,x=il(),y=mu({props:r,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),b={...r,color:y.color||"primary",component:o,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required},S=cJ(b);return w.jsxs(uJ,{as:o,ownerState:b,className:jt(S.root,a),ref:t,...g,children:[s,y.required&&w.jsxs(dJ,{ownerState:b,"aria-hidden":!0,className:S.asterisk,children:["","*"]})]})});function hJ(n){return $n("MuiInputLabel",n)}vn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const pJ=n=>{const{classes:e,formControl:t,size:r,shrink:s,disableAnimation:a,variant:i,required:o}=n,l={root:["root",t&&"formControl",!a&&"animated",s&&"shrink",r&&r!=="medium"&&`size${pn(r)}`,i],asterisk:[o&&"asterisk"]},c=Rn(l,hJ,e);return{...e,...c}},mJ=At(fJ,{shouldForwardProp:n=>Bi(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${L0.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(Zn(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),gJ=L.forwardRef(function(e,t){const r=Jn({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:a,shrink:i,variant:o,className:l,...c}=r,d=il();let h=i;typeof h>"u"&&d&&(h=d.filled||d.focused||d.adornedStart);const p=mu({props:r,muiFormControl:d,states:["size","variant","required","focused"]}),g={...r,disableAnimation:s,formControl:d,shrink:h,size:p.size,variant:p.variant,required:p.required,focused:p.focused},x=pJ(g);return w.jsx(mJ,{"data-shrink":h,ref:t,className:jt(x.root,l),...c,ownerState:g,classes:x})});function xJ(n){return $n("MuiFormControl",n)}vn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const yJ=n=>{const{classes:e,margin:t,fullWidth:r}=n,s={root:["root",t!=="none"&&`margin${pn(t)}`,r&&"fullWidth"]};return Rn(s,xJ,e)},bJ=At("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${pn(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),vJ=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiFormControl"}),{children:s,className:a,color:i="primary",component:o="div",disabled:l=!1,error:c=!1,focused:d,fullWidth:h=!1,hiddenLabel:p=!1,margin:g="none",required:x=!1,size:y="medium",variant:b="outlined",...S}=r,T={...r,color:i,component:o,disabled:l,error:c,fullWidth:h,hiddenLabel:p,margin:g,required:x,size:y,variant:b},N=yJ(T),[C,I]=L.useState(()=>{let q=!1;return s&&L.Children.forEach(s,V=>{if(!kC(V,["Input","Select"]))return;const X=kC(V,["Select"])?V.props.input:V;X&&VZ(X.props)&&(q=!0)}),q}),[F,D]=L.useState(()=>{let q=!1;return s&&L.Children.forEach(s,V=>{kC(V,["Input","Select"])&&(iv(V.props,!0)||iv(V.props.inputProps,!0))&&(q=!0)}),q}),[A,_]=L.useState(!1);l&&A&&_(!1);const k=d!==void 0&&!l?d:A;let O;L.useRef(!1);const P=L.useCallback(()=>{D(!0)},[]),W=L.useCallback(()=>{D(!1)},[]),K=L.useMemo(()=>({adornedStart:C,setAdornedStart:I,color:i,disabled:l,error:c,filled:F,focused:k,fullWidth:h,hiddenLabel:p,size:y,onBlur:()=>{_(!1)},onFocus:()=>{_(!0)},onEmpty:W,onFilled:P,registerEffect:O,required:x,variant:b}),[C,i,l,c,F,k,h,p,O,W,P,x,y,b]);return w.jsx(Iw.Provider,{value:K,children:w.jsx(bJ,{as:o,ownerState:T,className:jt(N.root,a),ref:t,...S,children:s})})});function wJ(n){return $n("MuiFormHelperText",n)}const Z4=vn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var J4;const SJ=n=>{const{classes:e,contained:t,size:r,disabled:s,error:a,filled:i,focused:o,required:l}=n,c={root:["root",s&&"disabled",a&&"error",r&&`size${pn(r)}`,t&&"contained",o&&"focused",i&&"filled",l&&"required"]};return Rn(c,wJ,e)},TJ=At("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${pn(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(Zn(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Z4.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${Z4.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),NJ=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiFormHelperText"}),{children:s,className:a,component:i="p",disabled:o,error:l,filled:c,focused:d,margin:h,required:p,variant:g,...x}=r,y=il(),b=mu({props:r,muiFormControl:y,states:["variant","size","disabled","error","filled","focused","required"]}),S={...r,component:i,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete S.ownerState;const T=SJ(S);return w.jsx(TJ,{as:i,className:jt(T.root,a),ref:t,...x,ownerState:S,children:s===" "?J4||(J4=w.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function Bg(n){var e;return parseInt(L.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const TB=n=>n.scrollTop;function ov(n,e){const{timeout:t,easing:r,style:s={}}=n;return{duration:s.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function FE(n){return`scale(${n}, ${n**2})`}const CJ={entering:{opacity:1,transform:FE(1)},entered:{opacity:1,transform:"none"}},AC=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),LE=L.forwardRef(function(e,t){const{addEndListener:r,appear:s=!0,children:a,easing:i,in:o,onEnter:l,onEntered:c,onEntering:d,onExit:h,onExited:p,onExiting:g,style:x,timeout:y="auto",TransitionComponent:b=al,...S}=e,T=vB(),N=L.useRef(),C=Ew(),I=L.useRef(null),F=xa(I,Bg(a),t),D=q=>V=>{if(q){const X=I.current;V===void 0?q(X):q(X,V)}},A=D(d),_=D((q,V)=>{TB(q);const{duration:X,delay:Q,easing:Y}=ov({style:x,timeout:y,easing:i},{mode:"enter"});let j;y==="auto"?(j=C.transitions.getAutoHeightDuration(q.clientHeight),N.current=j):j=X,q.style.transition=[C.transitions.create("opacity",{duration:j,delay:Q}),C.transitions.create("transform",{duration:AC?j:j*.666,delay:Q,easing:Y})].join(","),l&&l(q,V)}),k=D(c),O=D(g),P=D(q=>{const{duration:V,delay:X,easing:Q}=ov({style:x,timeout:y,easing:i},{mode:"exit"});let Y;y==="auto"?(Y=C.transitions.getAutoHeightDuration(q.clientHeight),N.current=Y):Y=V,q.style.transition=[C.transitions.create("opacity",{duration:Y,delay:X}),C.transitions.create("transform",{duration:AC?Y:Y*.666,delay:AC?X:X||Y*.333,easing:Q})].join(","),q.style.opacity=0,q.style.transform=FE(.75),h&&h(q)}),W=D(p),K=q=>{y==="auto"&&T.start(N.current||0,q),r&&r(I.current,q)};return w.jsx(b,{appear:s,in:o,nodeRef:I,onEnter:_,onEntered:k,onEntering:A,onExit:P,onExited:W,onExiting:O,addEndListener:K,timeout:y==="auto"?null:y,...S,children:(q,{ownerState:V,...X})=>L.cloneElement(a,{style:{opacity:0,transform:FE(.75),visibility:q==="exited"&&!o?"hidden":void 0,...CJ[q],...x,...a.props.style},ref:F,...X})})});LE&&(LE.muiSupportAuto=!0);function EJ(n){const e=Li(n);return e.body===n?ho(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function M0(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function eF(n){return parseInt(ho(n).getComputedStyle(n).paddingRight,10)||0}function kJ(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function tF(n,e,t,r,s){const a=[e,t,...r];[].forEach.call(n.children,i=>{const o=!a.includes(i),l=!kJ(i);o&&l&&M0(i,s)})}function $C(n,e){let t=-1;return n.some((r,s)=>e(r)?(t=s,!0):!1),t}function _J(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(EJ(r)){const i=wB(ho(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${eF(r)+i}px`;const o=Li(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${eF(l)+i}px`})}let a;if(r.parentNode instanceof DocumentFragment)a=Li(r).body;else{const i=r.parentElement,o=ho(r);a=(i==null?void 0:i.nodeName)==="HTML"&&o.getComputedStyle(i).overflowY==="scroll"?i:r}t.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{t.forEach(({value:a,el:i,property:o})=>{a?i.style.setProperty(o,a):i.style.removeProperty(o)})}}function IJ(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class AJ{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&M0(e.modalRef,!1);const s=IJ(t);tF(t,e.mount,e.modalRef,s,!0);const a=$C(this.containers,i=>i.container===t);return a!==-1?(this.containers[a].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),r)}mount(e,t){const r=$C(this.containers,a=>a.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=_J(s,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=$C(this.containers,i=>i.modals.includes(e)),a=this.containers[s];if(a.modals.splice(a.modals.indexOf(e),1),this.modals.splice(r,1),a.modals.length===0)a.restore&&a.restore(),e.modalRef&&M0(e.modalRef,t),tF(a.container,e.mount,e.modalRef,a.hiddenSiblings,!1),this.containers.splice(s,1);else{const i=a.modals[a.modals.length-1];i.modalRef&&M0(i.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const $J=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function RJ(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function OJ(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function DJ(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||OJ(n))}function FJ(n){const e=[],t=[];return Array.from(n.querySelectorAll($J)).forEach((r,s)=>{const a=RJ(r);a===-1||!DJ(r)||(a===0?e.push(r):t.push({documentOrder:s,tabIndex:a,node:r}))}),t.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function LJ(){return!0}function MJ(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:a=FJ,isEnabled:i=LJ,open:o}=n,l=L.useRef(!1),c=L.useRef(null),d=L.useRef(null),h=L.useRef(null),p=L.useRef(null),g=L.useRef(!1),x=L.useRef(null),y=xa(Bg(e),x),b=L.useRef(null);L.useEffect(()=>{!o||!x.current||(g.current=!t)},[t,o]),L.useEffect(()=>{if(!o||!x.current)return;const N=Li(x.current);return x.current.contains(N.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),g.current&&x.current.focus()),()=>{s||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[o]),L.useEffect(()=>{if(!o||!x.current)return;const N=Li(x.current),C=D=>{b.current=D,!(r||!i()||D.key!=="Tab")&&N.activeElement===x.current&&D.shiftKey&&(l.current=!0,d.current&&d.current.focus())},I=()=>{var _,k;const D=x.current;if(D===null)return;if(!N.hasFocus()||!i()||l.current){l.current=!1;return}if(D.contains(N.activeElement)||r&&N.activeElement!==c.current&&N.activeElement!==d.current)return;if(N.activeElement!==p.current)p.current=null;else if(p.current!==null)return;if(!g.current)return;let A=[];if((N.activeElement===c.current||N.activeElement===d.current)&&(A=a(x.current)),A.length>0){const O=!!((_=b.current)!=null&&_.shiftKey&&((k=b.current)==null?void 0:k.key)==="Tab"),P=A[0],W=A[A.length-1];typeof P!="string"&&typeof W!="string"&&(O?W.focus():P.focus())}else D.focus()};N.addEventListener("focusin",I),N.addEventListener("keydown",C,!0);const F=setInterval(()=>{N.activeElement&&N.activeElement.tagName==="BODY"&&I()},50);return()=>{clearInterval(F),N.removeEventListener("focusin",I),N.removeEventListener("keydown",C,!0)}},[t,r,s,i,o,a]);const S=N=>{h.current===null&&(h.current=N.relatedTarget),g.current=!0,p.current=N.target;const C=e.props.onFocus;C&&C(N)},T=N=>{h.current===null&&(h.current=N.relatedTarget),g.current=!0};return w.jsxs(L.Fragment,{children:[w.jsx("div",{tabIndex:o?0:-1,onFocus:T,ref:c,"data-testid":"sentinelStart"}),L.cloneElement(e,{ref:y,onFocus:S}),w.jsx("div",{tabIndex:o?0:-1,onFocus:T,ref:d,"data-testid":"sentinelEnd"})]})}function PJ(n){return typeof n=="function"?n():n}const BJ=L.forwardRef(function(e,t){const{children:r,container:s,disablePortal:a=!1}=e,[i,o]=L.useState(null),l=xa(L.isValidElement(r)?Bg(r):null,t);if(zl(()=>{a||o(PJ(s)||document.body)},[s,a]),zl(()=>{if(i&&!a)return B4(t,i),()=>{B4(t,null)}},[t,i,a]),a){if(L.isValidElement(r)){const c={ref:l};return L.cloneElement(r,c)}return r}return i&&FP.createPortal(r,i)}),jJ={entering:{opacity:1},entered:{opacity:1}},zJ=L.forwardRef(function(e,t){const r=Ew(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:i=!0,children:o,easing:l,in:c,onEnter:d,onEntered:h,onEntering:p,onExit:g,onExited:x,onExiting:y,style:b,timeout:S=s,TransitionComponent:T=al,...N}=e,C=L.useRef(null),I=xa(C,Bg(o),t),F=K=>q=>{if(K){const V=C.current;q===void 0?K(V):K(V,q)}},D=F(p),A=F((K,q)=>{TB(K);const V=ov({style:b,timeout:S,easing:l},{mode:"enter"});K.style.webkitTransition=r.transitions.create("opacity",V),K.style.transition=r.transitions.create("opacity",V),d&&d(K,q)}),_=F(h),k=F(y),O=F(K=>{const q=ov({style:b,timeout:S,easing:l},{mode:"exit"});K.style.webkitTransition=r.transitions.create("opacity",q),K.style.transition=r.transitions.create("opacity",q),g&&g(K)}),P=F(x),W=K=>{a&&a(C.current,K)};return w.jsx(T,{appear:i,in:c,nodeRef:C,onEnter:A,onEntered:_,onEntering:D,onExit:O,onExited:P,onExiting:k,addEndListener:W,timeout:S,...N,children:(K,{ownerState:q,...V})=>L.cloneElement(o,{style:{opacity:0,visibility:K==="exited"&&!c?"hidden":void 0,...jJ[K],...b,...o.props.style},ref:I,...V})})});function UJ(n){return $n("MuiBackdrop",n)}vn("MuiBackdrop",["root","invisible"]);const VJ=n=>{const{classes:e,invisible:t}=n;return Rn({root:["root",t&&"invisible"]},UJ,e)},WJ=At("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),HJ=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:i="div",invisible:o=!1,open:l,components:c={},componentsProps:d={},slotProps:h={},slots:p={},TransitionComponent:g,transitionDuration:x,...y}=r,b={...r,component:i,invisible:o},S=VJ(b),T={transition:g,root:c.Root,...p},N={...d,...h},C={component:i,slots:T,slotProps:N},[I,F]=Yn("root",{elementType:WJ,externalForwardedProps:C,className:jt(S.root,a),ownerState:b}),[D,A]=Yn("transition",{elementType:zJ,externalForwardedProps:C,ownerState:b});return w.jsx(D,{in:l,timeout:x,...y,...A,children:w.jsx(I,{"aria-hidden":!0,...F,classes:S,ref:t,children:s})})});function GJ(n){return typeof n=="function"?n():n}function qJ(n){return n?n.props.hasOwnProperty("in"):!1}const nF=()=>{},Jy=new AJ;function KJ(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:i,children:o,onClose:l,open:c,rootRef:d}=n,h=L.useRef({}),p=L.useRef(null),g=L.useRef(null),x=xa(g,d),[y,b]=L.useState(!c),S=qJ(o);let T=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(T=!1);const N=()=>Li(p.current),C=()=>(h.current.modalRef=g.current,h.current.mount=p.current,h.current),I=()=>{Jy.mount(C(),{disableScrollLock:r}),g.current&&(g.current.scrollTop=0)},F=Wo(()=>{const q=GJ(e)||N().body;Jy.add(C(),q),g.current&&I()}),D=()=>Jy.isTopModal(C()),A=Wo(q=>{p.current=q,q&&(c&&D()?I():g.current&&M0(g.current,T))}),_=L.useCallback(()=>{Jy.remove(C(),T)},[T]);L.useEffect(()=>()=>{_()},[_]),L.useEffect(()=>{c?F():(!S||!s)&&_()},[c,_,S,s,F]);const k=q=>V=>{var X;(X=q.onKeyDown)==null||X.call(q,V),!(V.key!=="Escape"||V.which===229||!D())&&(t||(V.stopPropagation(),l&&l(V,"escapeKeyDown")))},O=q=>V=>{var X;(X=q.onClick)==null||X.call(q,V),V.target===V.currentTarget&&l&&l(V,"backdropClick")};return{getRootProps:(q={})=>{const V=mB(n);delete V.onTransitionEnter,delete V.onTransitionExited;const X={...V,...q};return{role:"presentation",...X,onKeyDown:k(X),ref:x}},getBackdropProps:(q={})=>{const V=q;return{"aria-hidden":!0,...V,onClick:O(V),open:c}},getTransitionProps:()=>{const q=()=>{b(!1),a&&a()},V=()=>{b(!0),i&&i(),s&&_()};return{onEnter:P4(q,(o==null?void 0:o.props.onEnter)??nF),onExited:P4(V,(o==null?void 0:o.props.onExited)??nF)}},rootRef:x,portalRef:A,isTopModal:D,exited:y,hasTransition:S}}function XJ(n){return $n("MuiModal",n)}vn("MuiModal",["root","hidden","backdrop"]);const YJ=n=>{const{open:e,exited:t,classes:r}=n;return Rn({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},XJ,r)},QJ=At("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(Zn(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),ZJ=At(HJ,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),JJ=L.forwardRef(function(e,t){const r=Jn({name:"MuiModal",props:e}),{BackdropComponent:s=ZJ,BackdropProps:a,classes:i,className:o,closeAfterTransition:l=!1,children:c,container:d,component:h,components:p={},componentsProps:g={},disableAutoFocus:x=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:b=!1,disablePortal:S=!1,disableRestoreFocus:T=!1,disableScrollLock:N=!1,hideBackdrop:C=!1,keepMounted:I=!1,onClose:F,onTransitionEnter:D,onTransitionExited:A,open:_,slotProps:k={},slots:O={},theme:P,...W}=r,K={...r,closeAfterTransition:l,disableAutoFocus:x,disableEnforceFocus:y,disableEscapeKeyDown:b,disablePortal:S,disableRestoreFocus:T,disableScrollLock:N,hideBackdrop:C,keepMounted:I},{getRootProps:q,getBackdropProps:V,getTransitionProps:X,portalRef:Q,isTopModal:Y,exited:j,hasTransition:J}=KJ({...K,rootRef:t}),M={...K,exited:j},z=YJ(M),G={};if(c.props.tabIndex===void 0&&(G.tabIndex="-1"),J){const{onEnter:ge,onExited:ke}=X();G.onEnter=ge,G.onExited=ke}const U={slots:{root:p.Root,backdrop:p.Backdrop,...O},slotProps:{...g,...k}},[se,pe]=Yn("root",{ref:t,elementType:QJ,externalForwardedProps:{...U,...W,component:h},getSlotProps:q,ownerState:M,className:jt(o,z==null?void 0:z.root,!M.open&&M.exited&&(z==null?void 0:z.hidden))}),[me,be]=Yn("backdrop",{ref:a==null?void 0:a.ref,elementType:s,externalForwardedProps:U,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:ge=>V({...ge,onClick:ke=>{ge!=null&&ge.onClick&&ge.onClick(ke)}}),className:jt(a==null?void 0:a.className,z==null?void 0:z.backdrop),ownerState:M});return!I&&!_&&(!J||j)?null:w.jsx(BJ,{ref:Q,container:d,disablePortal:S,children:w.jsxs(se,{...pe,children:[!C&&s?w.jsx(me,{...be}):null,w.jsx(MJ,{disableEnforceFocus:y,disableAutoFocus:x,disableRestoreFocus:T,isEnabled:Y,open:_,children:L.cloneElement(c,G)})]})})});function eee(n){return $n("MuiPaper",n)}vn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const tee=n=>{const{square:e,elevation:t,variant:r,classes:s}=n,a={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Rn(a,eee,s)},nee=At("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(Zn(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),NB=L.forwardRef(function(e,t){var g;const r=Jn({props:e,name:"MuiPaper"}),s=Ew(),{className:a,component:i="div",elevation:o=1,square:l=!1,variant:c="elevation",...d}=r,h={...r,component:i,elevation:o,square:l,variant:c},p=tee(h);return w.jsx(nee,{as:i,ownerState:h,className:jt(p.root,a),ref:t,...d,style:{...c==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[o],...s.vars&&{"--Paper-overlay":(g=s.vars.overlays)==null?void 0:g[o]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Rl("#fff",EE(o))}, ${Rl("#fff",EE(o))})`}},...d.style}})});function ree(n){return $n("MuiPopover",n)}vn("MuiPopover",["root","paper"]);function rF(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function sF(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function aF(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function eb(n){return typeof n=="function"?n():n}const see=n=>{const{classes:e}=n;return Rn({root:["root"],paper:["paper"]},ree,e)},aee=At(JJ,{name:"MuiPopover",slot:"Root"})({}),CB=At(NB,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),iee=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiPopover"}),{action:s,anchorEl:a,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:l="anchorEl",children:c,className:d,container:h,elevation:p=8,marginThreshold:g=16,open:x,PaperProps:y={},slots:b={},slotProps:S={},transformOrigin:T={vertical:"top",horizontal:"left"},TransitionComponent:N,transitionDuration:C="auto",TransitionProps:I={},disableScrollLock:F=!1,...D}=r,A=L.useRef(),_={...r,anchorOrigin:i,anchorReference:l,elevation:p,marginThreshold:g,transformOrigin:T,TransitionComponent:N,transitionDuration:C,TransitionProps:I},k=see(_),O=L.useCallback(()=>{if(l==="anchorPosition")return o;const ge=eb(a),Le=(ge&&ge.nodeType===1?ge:Li(A.current).body).getBoundingClientRect();return{top:Le.top+rF(Le,i.vertical),left:Le.left+sF(Le,i.horizontal)}},[a,i.horizontal,i.vertical,o,l]),P=L.useCallback(ge=>({vertical:rF(ge,T.vertical),horizontal:sF(ge,T.horizontal)}),[T.horizontal,T.vertical]),W=L.useCallback(ge=>{const ke={width:ge.offsetWidth,height:ge.offsetHeight},Le=P(ke);if(l==="none")return{top:null,left:null,transformOrigin:aF(Le)};const rt=O();let Be=rt.top-Le.vertical,Ze=rt.left-Le.horizontal;const He=Be+ke.height,ne=Ze+ke.width,Ae=ho(eb(a)),Me=Ae.innerHeight-g,Ve=Ae.innerWidth-g;if(g!==null&&Be<g){const ot=Be-g;Be-=ot,Le.vertical+=ot}else if(g!==null&&He>Me){const ot=He-Me;Be-=ot,Le.vertical+=ot}if(g!==null&&Ze<g){const ot=Ze-g;Ze-=ot,Le.horizontal+=ot}else if(ne>Ve){const ot=ne-Ve;Ze-=ot,Le.horizontal+=ot}return{top:`${Math.round(Be)}px`,left:`${Math.round(Ze)}px`,transformOrigin:aF(Le)}},[a,l,O,P,g]),[K,q]=L.useState(x),V=L.useCallback(()=>{const ge=A.current;if(!ge)return;const ke=W(ge);ke.top!==null&&ge.style.setProperty("top",ke.top),ke.left!==null&&(ge.style.left=ke.left),ge.style.transformOrigin=ke.transformOrigin,q(!0)},[W]);L.useEffect(()=>(F&&window.addEventListener("scroll",V),()=>window.removeEventListener("scroll",V)),[a,F,V]);const X=()=>{V()},Q=()=>{q(!1)};L.useEffect(()=>{x&&V()}),L.useImperativeHandle(s,()=>x?{updatePosition:()=>{V()}}:null,[x,V]),L.useEffect(()=>{if(!x)return;const ge=kw(()=>{V()}),ke=ho(eb(a));return ke.addEventListener("resize",ge),()=>{ge.clear(),ke.removeEventListener("resize",ge)}},[a,x,V]);let Y=C;const j={slots:{transition:N,...b},slotProps:{transition:I,paper:y,...S}},[J,M]=Yn("transition",{elementType:LE,externalForwardedProps:j,ownerState:_,getSlotProps:ge=>({...ge,onEntering:(ke,Le)=>{var rt;(rt=ge.onEntering)==null||rt.call(ge,ke,Le),X()},onExited:ke=>{var Le;(Le=ge.onExited)==null||Le.call(ge,ke),Q()}}),additionalProps:{appear:!0,in:x}});C==="auto"&&!J.muiSupportAuto&&(Y=void 0);const z=h||(a?Li(eb(a)).body:void 0),[G,{slots:U,slotProps:se,...pe}]=Yn("root",{ref:t,elementType:aee,externalForwardedProps:{...j,...D},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:oZ(typeof S.backdrop=="function"?S.backdrop(_):S.backdrop,{invisible:!0})},container:z,open:x},ownerState:_,className:jt(k.root,d)}),[me,be]=Yn("paper",{ref:A,className:k.paper,elementType:CB,externalForwardedProps:j,shouldForwardComponentProp:!0,additionalProps:{elevation:p,style:K?void 0:{opacity:0}},ownerState:_});return w.jsx(G,{...pe,...!DE(G)&&{slots:U,slotProps:se,disableScrollLock:F},children:w.jsx(J,{...M,timeout:Y,children:w.jsx(me,{...be,children:c})})})});function oee(n){return $n("MuiMenu",n)}vn("MuiMenu",["root","paper","list"]);const lee={vertical:"top",horizontal:"right"},cee={vertical:"top",horizontal:"left"},uee=n=>{const{classes:e}=n;return Rn({root:["root"],paper:["paper"],list:["list"]},oee,e)},dee=At(iee,{shouldForwardProp:n=>Bi(n)||n==="classes",name:"MuiMenu",slot:"Root"})({}),fee=At(CB,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),hee=At(BZ,{name:"MuiMenu",slot:"List"})({outline:0}),Lb=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:i,disableAutoFocusItem:o=!1,MenuListProps:l={},onClose:c,open:d,PaperProps:h={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:x,...y}={},variant:b="selectedMenu",slots:S={},slotProps:T={},...N}=r,C=c_(),I={...r,autoFocus:s,disableAutoFocusItem:o,MenuListProps:l,onEntering:x,PaperProps:h,transitionDuration:g,TransitionProps:y,variant:b},F=uee(I),D=s&&!o&&d,A=L.useRef(null),_=(Y,j)=>{A.current&&A.current.adjustStyleForScrollbar(Y,{direction:C?"rtl":"ltr"}),x&&x(Y,j)},k=Y=>{Y.key==="Tab"&&(Y.preventDefault(),c&&c(Y,"tabKeyDown"))};let O=-1;L.Children.map(a,(Y,j)=>{L.isValidElement(Y)&&(Y.props.disabled||(b==="selectedMenu"&&Y.props.selected||O===-1)&&(O=j))});const P={slots:S,slotProps:{list:l,transition:y,paper:h,...T}},W=eg({elementType:S.root,externalSlotProps:T.root,ownerState:I,className:[F.root,i]}),[K,q]=Yn("paper",{className:F.paper,elementType:fee,externalForwardedProps:P,shouldForwardComponentProp:!0,ownerState:I}),[V,X]=Yn("list",{className:jt(F.list,l.className),elementType:hee,shouldForwardComponentProp:!0,externalForwardedProps:P,getSlotProps:Y=>({...Y,onKeyDown:j=>{var J;k(j),(J=Y.onKeyDown)==null||J.call(Y,j)}}),ownerState:I}),Q=typeof P.slotProps.transition=="function"?P.slotProps.transition(I):P.slotProps.transition;return w.jsx(dee,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:C?"right":"left"},transformOrigin:C?lee:cee,slots:{root:S.root,paper:K,backdrop:S.backdrop,...S.transition&&{transition:S.transition}},slotProps:{root:W,paper:q,backdrop:typeof T.backdrop=="function"?T.backdrop(I):T.backdrop,transition:{...Q,onEntering:(...Y)=>{var j;_(...Y),(j=Q==null?void 0:Q.onEntering)==null||j.call(Q,...Y)}}},open:d,ref:t,transitionDuration:g,ownerState:I,...N,classes:p,children:w.jsx(V,{actions:A,autoFocus:s&&(O===-1||o),autoFocusItem:D,variant:b,...X,children:a})})});function pee(n){return $n("MuiNativeSelect",n)}const b_=vn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),mee=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:a,error:i}=n,o={select:["select",t,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${pn(t)}`,a&&"iconOpen",r&&"disabled"]};return Rn(o,pee,e)},EB=At("select",{name:"MuiNativeSelect"})(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${b_.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),gee=At(EB,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Bi,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${b_.multiple}`]:e.multiple}]}})({}),kB=At("svg",{name:"MuiNativeSelect"})(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${b_.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),xee=At(kB,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${pn(t.variant)}`],t.open&&e.iconOpen]}})({}),yee=L.forwardRef(function(e,t){const{className:r,disabled:s,error:a,IconComponent:i,inputRef:o,variant:l="standard",...c}=e,d={...e,disabled:s,variant:l,error:a},h=mee(d);return w.jsxs(L.Fragment,{children:[w.jsx(gee,{ownerState:d,className:jt(h.select,r),disabled:s,ref:o||t,...c}),e.multiple?null:w.jsx(xee,{as:i,ownerState:d,className:h.icon})]})});function _B(n){return $n("MuiSelect",n)}const u0=vn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var iF;const bee=At(EB,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${u0.select}`]:e.select},{[`&.${u0.select}`]:e[t.variant]},{[`&.${u0.error}`]:e.error},{[`&.${u0.multiple}`]:e.multiple}]}})({[`&.${u0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),vee=At(kB,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${pn(t.variant)}`],t.open&&e.iconOpen]}})({}),wee=At("input",{shouldForwardProp:n=>hB(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function oF(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function See(n){return n==null||typeof n=="string"&&!n.trim()}const Tee=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:a,error:i}=n,o={select:["select",t,r&&"disabled",s&&"multiple",i&&"error"],icon:["icon",`icon${pn(t)}`,a&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Rn(o,_B,e)},Nee=L.forwardRef(function(e,t){var _t,rs;const{"aria-describedby":r,"aria-label":s,autoFocus:a,autoWidth:i,children:o,className:l,defaultOpen:c,defaultValue:d,disabled:h,displayEmpty:p,error:g=!1,IconComponent:x,inputRef:y,labelId:b,MenuProps:S={},multiple:T,name:N,onBlur:C,onChange:I,onClose:F,onFocus:D,onOpen:A,open:_,readOnly:k,renderValue:O,required:P,SelectDisplayProps:W={},tabIndex:K,type:q,value:V,variant:X="standard",...Q}=e,[Y,j]=IE({controlled:V,default:d,name:"Select"}),[J,M]=IE({controlled:_,default:c,name:"Select"}),z=L.useRef(null),G=L.useRef(null),[U,se]=L.useState(null),{current:pe}=L.useRef(_!=null),[me,be]=L.useState(),ge=xa(t,y),ke=L.useCallback(yt=>{G.current=yt,yt&&se(yt)},[]),Le=U==null?void 0:U.parentNode;L.useImperativeHandle(ge,()=>({focus:()=>{G.current.focus()},node:z.current,value:Y}),[Y]),L.useEffect(()=>{c&&J&&U&&!pe&&(be(i?null:Le.clientWidth),G.current.focus())},[U,i]),L.useEffect(()=>{a&&G.current.focus()},[a]),L.useEffect(()=>{if(!b)return;const yt=Li(G.current).getElementById(b);if(yt){const qt=()=>{getSelection().isCollapsed&&G.current.focus()};return yt.addEventListener("click",qt),()=>{yt.removeEventListener("click",qt)}}},[b]);const rt=(yt,qt)=>{yt?A&&A(qt):F&&F(qt),pe||(be(i?null:Le.clientWidth),M(yt))},Be=yt=>{yt.button===0&&(yt.preventDefault(),G.current.focus(),rt(!0,yt))},Ze=yt=>{rt(!1,yt)},He=L.Children.toArray(o),ne=yt=>{const qt=He.find(gn=>gn.props.value===yt.target.value);qt!==void 0&&(j(qt.props.value),I&&I(yt,qt))},Ae=yt=>qt=>{let gn;if(qt.currentTarget.hasAttribute("tabindex")){if(T){gn=Array.isArray(Y)?Y.slice():[];const oa=Y.indexOf(yt.props.value);oa===-1?gn.push(yt.props.value):gn.splice(oa,1)}else gn=yt.props.value;if(yt.props.onClick&&yt.props.onClick(qt),Y!==gn&&(j(gn),I)){const oa=qt.nativeEvent||qt,fi=new oa.constructor(oa.type,oa);Object.defineProperty(fi,"target",{writable:!0,value:{value:gn,name:N}}),I(fi,yt)}T||rt(!1,qt)}},Me=yt=>{k||[" ","ArrowUp","ArrowDown","Enter"].includes(yt.key)&&(yt.preventDefault(),rt(!0,yt))},Ve=U!==null&&J,ot=yt=>{!Ve&&C&&(Object.defineProperty(yt,"target",{writable:!0,value:{value:Y,name:N}}),C(yt))};delete Q["aria-invalid"];let st,Ge;const at=[];let Qt=!1;(iv({value:Y})||p)&&(O?st=O(Y):Qt=!0);const Vt=He.map(yt=>{if(!L.isValidElement(yt))return null;let qt;if(T){if(!Array.isArray(Y))throw new Error(Bl(2));qt=Y.some(gn=>oF(gn,yt.props.value)),qt&&Qt&&at.push(yt.props.children)}else qt=oF(Y,yt.props.value),qt&&Qt&&(Ge=yt.props.children);return L.cloneElement(yt,{"aria-selected":qt?"true":"false",onClick:Ae(yt),onKeyUp:gn=>{gn.key===" "&&gn.preventDefault(),yt.props.onKeyUp&&yt.props.onKeyUp(gn)},role:"option",selected:qt,value:void 0,"data-value":yt.props.value})});Qt&&(T?at.length===0?st=null:st=at.reduce((yt,qt,gn)=>(yt.push(qt),gn<at.length-1&&yt.push(", "),yt),[]):st=Ge);let Mt=me;!i&&pe&&U&&(Mt=Le.clientWidth);let Ut;typeof K<"u"?Ut=K:Ut=h?null:0;const we=W.id||(N?`mui-component-select-${N}`:void 0),kt={...e,variant:X,value:Y,open:Ve,error:g},lt=Tee(kt),Xe={...S.PaperProps,...(_t=S.slotProps)==null?void 0:_t.paper},pt={...S.MenuListProps,...(rs=S.slotProps)==null?void 0:rs.list},Xt=iB();return w.jsxs(L.Fragment,{children:[w.jsx(bee,{as:"div",ref:ke,tabIndex:Ut,role:"combobox","aria-controls":Ve?Xt:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":Ve?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[b,we].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":P?"true":void 0,"aria-invalid":g?"true":void 0,onKeyDown:Me,onMouseDown:h||k?null:Be,onBlur:ot,onFocus:D,...W,ownerState:kt,className:jt(W.className,lt.select,l),id:we,children:See(st)?iF||(iF=w.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):st}),w.jsx(wee,{"aria-invalid":g,value:Array.isArray(Y)?Y.join(","):Y,name:N,ref:z,"aria-hidden":!0,onChange:ne,tabIndex:-1,disabled:h,className:lt.nativeInput,autoFocus:a,required:P,...Q,ownerState:kt}),w.jsx(vee,{as:x,className:lt.icon,ownerState:kt}),w.jsx(Lb,{id:`menu-${N||""}`,anchorEl:Le,open:Ve,onClose:Ze,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...S,slotProps:{...S.slotProps,list:{"aria-labelledby":b,role:"listbox","aria-multiselectable":T?"true":void 0,disableListWrap:!0,id:Xt,...pt},paper:{...Xe,style:{minWidth:Mt,...Xe!=null?Xe.style:null}}},children:Vt})]})}),Cee=d_(w.jsx("path",{d:"M7 10l5 5 5-5z"})),Eee=n=>{const{classes:e}=n,r=Rn({root:["root"]},_B,e);return{...e,...r}},v_={name:"MuiSelect",slot:"Root",shouldForwardProp:n=>Bi(n)&&n!=="variant"},kee=At(g_,v_)(""),_ee=At(y_,v_)(""),Iee=At(x_,v_)(""),IB=L.forwardRef(function(e,t){const r=Jn({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:a,classes:i={},className:o,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:d=Cee,id:h,input:p,inputProps:g,label:x,labelId:y,MenuProps:b,multiple:S=!1,native:T=!1,onClose:N,onOpen:C,open:I,renderValue:F,SelectDisplayProps:D,variant:A="outlined",..._}=r,k=T?yee:Nee,O=il(),P=mu({props:r,muiFormControl:O,states:["variant","error"]}),W=P.variant||A,K={...r,variant:W,classes:i},q=Eee(K),{root:V,...X}=q,Q=p||{standard:w.jsx(kee,{ownerState:K}),outlined:w.jsx(_ee,{label:x,ownerState:K}),filled:w.jsx(Iee,{ownerState:K})}[W],Y=xa(t,Bg(Q));return w.jsx(L.Fragment,{children:L.cloneElement(Q,{inputComponent:k,inputProps:{children:a,error:P.error,IconComponent:d,variant:W,type:void 0,multiple:S,...T?{id:h}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:y,MenuProps:b,onClose:N,onOpen:C,open:I,renderValue:F,SelectDisplayProps:{id:h,...D}},...g,classes:g?ea(X,g.classes):X,...p?p.props.inputProps:{}},...(S&&T||c)&&W==="outlined"?{notched:!0}:{},ref:Y,className:jt(Q.props.className,o,q.root),...!p&&{variant:W},..._})})});IB.muiName="Select";function Aee(n){return $n("MuiTextField",n)}vn("MuiTextField",["root"]);const $ee={standard:g_,filled:x_,outlined:y_},Ree=n=>{const{classes:e}=n;return Rn({root:["root"]},Aee,e)},Oee=At(vJ,{name:"MuiTextField",slot:"Root"})({}),tb=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:a=!1,children:i,className:o,color:l="primary",defaultValue:c,disabled:d=!1,error:h=!1,FormHelperTextProps:p,fullWidth:g=!1,helperText:x,id:y,InputLabelProps:b,inputProps:S,InputProps:T,inputRef:N,label:C,maxRows:I,minRows:F,multiline:D=!1,name:A,onBlur:_,onChange:k,onFocus:O,placeholder:P,required:W=!1,rows:K,select:q=!1,SelectProps:V,slots:X={},slotProps:Q={},type:Y,value:j,variant:J="outlined",...M}=r,z={...r,autoFocus:a,color:l,disabled:d,error:h,fullWidth:g,multiline:D,required:W,select:q,variant:J},G=Ree(z),U=iB(y),se=x&&U?`${U}-helper-text`:void 0,pe=C&&U?`${U}-label`:void 0,me=$ee[J],be={slots:X,slotProps:{input:T,inputLabel:b,htmlInput:S,formHelperText:p,select:V,...Q}},ge={},ke=be.slotProps.inputLabel;J==="outlined"&&(ke&&typeof ke.shrink<"u"&&(ge.notched=ke.shrink),ge.label=C),q&&((!V||!V.native)&&(ge.id=void 0),ge["aria-describedby"]=void 0);const[Le,rt]=Yn("root",{elementType:Oee,shouldForwardComponentProp:!0,externalForwardedProps:{...be,...M},ownerState:z,className:jt(G.root,o),ref:t,additionalProps:{disabled:d,error:h,fullWidth:g,required:W,color:l,variant:J}}),[Be,Ze]=Yn("input",{elementType:me,externalForwardedProps:be,additionalProps:ge,ownerState:z}),[He,ne]=Yn("inputLabel",{elementType:gJ,externalForwardedProps:be,ownerState:z}),[Ae,Me]=Yn("htmlInput",{elementType:"input",externalForwardedProps:be,ownerState:z}),[Ve,ot]=Yn("formHelperText",{elementType:NJ,externalForwardedProps:be,ownerState:z}),[st,Ge]=Yn("select",{elementType:IB,externalForwardedProps:be,ownerState:z}),at=w.jsx(Be,{"aria-describedby":se,autoComplete:s,autoFocus:a,defaultValue:c,fullWidth:g,multiline:D,name:A,rows:K,maxRows:I,minRows:F,type:Y,value:j,id:U,inputRef:N,onBlur:_,onChange:k,onFocus:O,placeholder:P,inputProps:Me,slots:{input:X.htmlInput?Ae:void 0},...Ze});return w.jsxs(Le,{...rt,children:[C!=null&&C!==""&&w.jsx(He,{htmlFor:U,id:pe,...ne,children:C}),q?w.jsx(st,{"aria-describedby":se,id:U,labelId:pe,value:j,input:at,...Ge,children:i}):at,x&&w.jsx(Ve,{id:se,...ot,children:x})]})});function Dee(n){return $n("MuiInputAdornment",n)}const lF=vn("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var cF;const Fee=(n,e)=>{const{ownerState:t}=n;return[e.root,e[`position${pn(t.position)}`],t.disablePointerEvents===!0&&e.disablePointerEvents,e[t.variant]]},Lee=n=>{const{classes:e,disablePointerEvents:t,hiddenLabel:r,position:s,size:a,variant:i}=n,o={root:["root",t&&"disablePointerEvents",s&&`position${pn(s)}`,i,r&&"hiddenLabel",a&&`size${pn(a)}`]};return Rn(o,Dee,e)},Mee=At("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Fee})(Zn(({theme:n})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(n.vars||n).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${lF.positionStart}&:not(.${lF.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),Pee=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiInputAdornment"}),{children:s,className:a,component:i="div",disablePointerEvents:o=!1,disableTypography:l=!1,position:c,variant:d,...h}=r,p=il()||{};let g=d;d&&p.variant,p&&!g&&(g=p.variant);const x={...r,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:o,position:c,variant:g},y=Lee(x);return w.jsx(Iw.Provider,{value:null,children:w.jsx(Mee,{as:i,ownerState:x,className:jt(y.root,a),ref:t,...h,children:typeof s=="string"&&!l?w.jsx(kE,{color:"textSecondary",children:s}):w.jsxs(L.Fragment,{children:[c==="start"?cF||(cF=w.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,s]})})})});function Bee(n){return $n("MuiTab",n)}const Ti=vn("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),jee=n=>{const{classes:e,textColor:t,fullWidth:r,wrapped:s,icon:a,label:i,selected:o,disabled:l}=n,c={root:["root",a&&i&&"labelIcon",`textColor${pn(t)}`,r&&"fullWidth",s&&"wrapped",o&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]};return Rn(c,Bee,e)},zee=At(_w,{name:"MuiTab",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.label&&t.icon&&e.labelIcon,e[`textColor${pn(t.textColor)}`],t.fullWidth&&e.fullWidth,t.wrapped&&e.wrapped,{[`& .${Ti.iconWrapper}`]:e.iconWrapper},{[`& .${Ti.icon}`]:e.icon}]}})(Zn(({theme:n})=>({...n.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="top",style:{[`& > .${Ti.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="bottom",style:{[`& > .${Ti.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="start",style:{[`& > .${Ti.icon}`]:{marginRight:n.spacing(1)}}},{props:({ownerState:e,iconPosition:t})=>e.icon&&e.label&&t==="end",style:{[`& > .${Ti.icon}`]:{marginLeft:n.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Ti.selected}`]:{opacity:1},[`&.${Ti.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(n.vars||n).palette.text.secondary,[`&.${Ti.selected}`]:{color:(n.vars||n).palette.primary.main},[`&.${Ti.disabled}`]:{color:(n.vars||n).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(n.vars||n).palette.text.secondary,[`&.${Ti.selected}`]:{color:(n.vars||n).palette.secondary.main},[`&.${Ti.disabled}`]:{color:(n.vars||n).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:n.typography.pxToRem(12)}}]}))),uF=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiTab"}),{className:s,disabled:a=!1,disableFocusRipple:i=!1,fullWidth:o,icon:l,iconPosition:c="top",indicator:d,label:h,onChange:p,onClick:g,onFocus:x,selected:y,selectionFollowsFocus:b,textColor:S="inherit",value:T,wrapped:N=!1,...C}=r,I={...r,disabled:a,disableFocusRipple:i,selected:y,icon:!!l,iconPosition:c,label:!!h,fullWidth:o,textColor:S,wrapped:N},F=jee(I),D=l&&h&&L.isValidElement(l)?L.cloneElement(l,{className:jt(F.icon,l.props.className)}):l,A=k=>{!y&&p&&p(k,T),g&&g(k)},_=k=>{b&&!y&&p&&p(k,T),x&&x(k)};return w.jsxs(zee,{focusRipple:!i,className:jt(F.root,s),ref:t,role:"tab","aria-selected":y,disabled:a,onClick:A,onFocus:_,ownerState:I,tabIndex:y?0:-1,...C,children:[c==="top"||c==="start"?w.jsxs(L.Fragment,{children:[D,h]}):w.jsxs(L.Fragment,{children:[h,D]}),d]})});function Uee(n){return(1+Math.sin(Math.PI*n-Math.PI/2))/2}function Vee(n,e,t,r={},s=()=>{}){const{ease:a=Uee,duration:i=300}=r;let o=null;const l=e[n];let c=!1;const d=()=>{c=!0},h=p=>{if(c){s(new Error("Animation cancelled"));return}o===null&&(o=p);const g=Math.min(1,(p-o)/i);if(e[n]=a(g)*(t-l)+l,g>=1){requestAnimationFrame(()=>{s(null)});return}requestAnimationFrame(h)};return l===t?(s(new Error("Element already at target position")),d):(requestAnimationFrame(h),d)}const Wee={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Hee(n){const{onChange:e,...t}=n,r=L.useRef(),s=L.useRef(null),a=()=>{r.current=s.current.offsetHeight-s.current.clientHeight};return zl(()=>{const i=kw(()=>{const l=r.current;a(),l!==r.current&&e(r.current)}),o=ho(s.current);return o.addEventListener("resize",i),()=>{i.clear(),o.removeEventListener("resize",i)}},[e]),L.useEffect(()=>{a(),e(r.current)},[e]),w.jsx("div",{style:Wee,...t,ref:s})}const Gee=d_(w.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),qee=d_(w.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function Kee(n){return $n("MuiTabScrollButton",n)}const Xee=vn("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Yee=n=>{const{classes:e,orientation:t,disabled:r}=n;return Rn({root:["root",t,r&&"disabled"]},Kee,e)},Qee=At(_w,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.orientation&&e[t.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Xee.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Zee=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiTabScrollButton"}),{className:s,slots:a={},slotProps:i={},direction:o,orientation:l,disabled:c,...d}=r,h=c_(),p={isRtl:h,...r},g=Yee(p),x=a.StartScrollButtonIcon??Gee,y=a.EndScrollButtonIcon??qee,b=eg({elementType:x,externalSlotProps:i.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p}),S=eg({elementType:y,externalSlotProps:i.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p});return w.jsx(Qee,{component:"div",className:jt(g.root,s),ref:t,role:null,ownerState:p,tabIndex:null,...d,style:{...d.style,...l==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${h?-90:90}deg)`}},children:o==="left"?w.jsx(x,{...b}):w.jsx(y,{...S})})});function Jee(n){return $n("MuiTabs",n)}const RC=vn("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),dF=(n,e)=>n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n.firstChild,fF=(n,e)=>n===e?n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n.lastChild,nb=(n,e,t)=>{let r=!1,s=t(n,e);for(;s;){if(s===n.firstChild){if(r)return;r=!0}const a=s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||a)s=t(n,s);else{s.focus();return}}},ete=n=>{const{vertical:e,fixed:t,hideScrollbar:r,scrollableX:s,scrollableY:a,centered:i,scrollButtonsHideMobile:o,classes:l}=n;return Rn({root:["root",e&&"vertical"],scroller:["scroller",t&&"fixed",r&&"hideScrollbar",s&&"scrollableX",a&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",i&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",o&&"scrollButtonsHideMobile"],scrollableX:[s&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},Jee,l)},tte=At("div",{name:"MuiTabs",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${RC.scrollButtons}`]:e.scrollButtons},{[`& .${RC.scrollButtons}`]:t.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,t.vertical&&e.vertical]}})(Zn(({theme:n})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${RC.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}}}]}))),nte=At("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.scroller,t.fixed&&e.fixed,t.hideScrollbar&&e.hideScrollbar,t.scrollableX&&e.scrollableX,t.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:n})=>n.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:n})=>n.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:n})=>n.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:n})=>n.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),rte=At("div",{name:"MuiTabs",slot:"List",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.list,e.flexContainer,t.vertical&&e.flexContainerVertical,t.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:n})=>n.vertical,style:{flexDirection:"column"}},{props:({ownerState:n})=>n.centered,style:{justifyContent:"center"}}]}),ste=At("span",{name:"MuiTabs",slot:"Indicator"})(Zn(({theme:n})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(n.vars||n).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(n.vars||n).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),ate=At(Hee)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),hF={},ite=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiTabs"}),s=Ew(),a=c_(),{"aria-label":i,"aria-labelledby":o,action:l,centered:c=!1,children:d,className:h,component:p="div",allowScrollButtonsMobile:g=!1,indicatorColor:x="primary",onChange:y,orientation:b="horizontal",ScrollButtonComponent:S,scrollButtons:T="auto",selectionFollowsFocus:N,slots:C={},slotProps:I={},TabIndicatorProps:F={},TabScrollButtonProps:D={},textColor:A="primary",value:_,variant:k="standard",visibleScrollbar:O=!1,...P}=r,W=k==="scrollable",K=b==="vertical",q=K?"scrollTop":"scrollLeft",V=K?"top":"left",X=K?"bottom":"right",Q=K?"clientHeight":"clientWidth",Y=K?"height":"width",j={...r,component:p,allowScrollButtonsMobile:g,indicatorColor:x,orientation:b,vertical:K,scrollButtons:T,textColor:A,variant:k,visibleScrollbar:O,fixed:!W,hideScrollbar:W&&!O,scrollableX:W&&!K,scrollableY:W&&K,centered:c&&!W,scrollButtonsHideMobile:!g},J=ete(j),M=eg({elementType:C.StartScrollButtonIcon,externalSlotProps:I.startScrollButtonIcon,ownerState:j}),z=eg({elementType:C.EndScrollButtonIcon,externalSlotProps:I.endScrollButtonIcon,ownerState:j}),[G,U]=L.useState(!1),[se,pe]=L.useState(hF),[me,be]=L.useState(!1),[ge,ke]=L.useState(!1),[Le,rt]=L.useState(!1),[Be,Ze]=L.useState({overflow:"hidden",scrollbarWidth:0}),He=new Map,ne=L.useRef(null),Ae=L.useRef(null),Me={slots:C,slotProps:{indicator:F,scrollButton:D,...I}},Ve=()=>{const tt=ne.current;let Qe;if(tt){const Nt=tt.getBoundingClientRect();Qe={clientWidth:tt.clientWidth,scrollLeft:tt.scrollLeft,scrollTop:tt.scrollTop,scrollWidth:tt.scrollWidth,top:Nt.top,bottom:Nt.bottom,left:Nt.left,right:Nt.right}}let wt;if(tt&&_!==!1){const Nt=Ae.current.children;if(Nt.length>0){const ln=Nt[He.get(_)];wt=ln?ln.getBoundingClientRect():null}}return{tabsMeta:Qe,tabMeta:wt}},ot=Wo(()=>{const{tabsMeta:tt,tabMeta:Qe}=Ve();let wt=0,Nt;K?(Nt="top",Qe&&tt&&(wt=Qe.top-tt.top+tt.scrollTop)):(Nt=a?"right":"left",Qe&&tt&&(wt=(a?-1:1)*(Qe[Nt]-tt[Nt]+tt.scrollLeft)));const ln={[Nt]:wt,[Y]:Qe?Qe[Y]:0};if(typeof se[Nt]!="number"||typeof se[Y]!="number")pe(ln);else{const ss=Math.abs(se[Nt]-ln[Nt]),Wi=Math.abs(se[Y]-ln[Y]);(ss>=1||Wi>=1)&&pe(ln)}}),st=(tt,{animation:Qe=!0}={})=>{Qe?Vee(q,ne.current,tt,{duration:s.transitions.duration.standard}):ne.current[q]=tt},Ge=tt=>{let Qe=ne.current[q];K?Qe+=tt:Qe+=tt*(a?-1:1),st(Qe)},at=()=>{const tt=ne.current[Q];let Qe=0;const wt=Array.from(Ae.current.children);for(let Nt=0;Nt<wt.length;Nt+=1){const ln=wt[Nt];if(Qe+ln[Q]>tt){Nt===0&&(Qe=tt);break}Qe+=ln[Q]}return Qe},Qt=()=>{Ge(-1*at())},Vt=()=>{Ge(at())},[Mt,{onChange:Ut,...we}]=Yn("scrollbar",{className:jt(J.scrollableX,J.hideScrollbar),elementType:ate,shouldForwardComponentProp:!0,externalForwardedProps:Me,ownerState:j}),kt=L.useCallback(tt=>{Ut==null||Ut(tt),Ze({overflow:null,scrollbarWidth:tt})},[Ut]),[lt,Xe]=Yn("scrollButtons",{className:jt(J.scrollButtons,D.className),elementType:Zee,externalForwardedProps:Me,ownerState:j,additionalProps:{orientation:b,slots:{StartScrollButtonIcon:C.startScrollButtonIcon||C.StartScrollButtonIcon,EndScrollButtonIcon:C.endScrollButtonIcon||C.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:M,endScrollButtonIcon:z}}}),pt=()=>{const tt={};tt.scrollbarSizeListener=W?w.jsx(Mt,{...we,onChange:kt}):null;const wt=W&&(T==="auto"&&(me||ge)||T===!0);return tt.scrollButtonStart=wt?w.jsx(lt,{direction:a?"right":"left",onClick:Qt,disabled:!me,...Xe}):null,tt.scrollButtonEnd=wt?w.jsx(lt,{direction:a?"left":"right",onClick:Vt,disabled:!ge,...Xe}):null,tt},Xt=Wo(tt=>{const{tabsMeta:Qe,tabMeta:wt}=Ve();if(!(!wt||!Qe)){if(wt[V]<Qe[V]){const Nt=Qe[q]+(wt[V]-Qe[V]);st(Nt,{animation:tt})}else if(wt[X]>Qe[X]){const Nt=Qe[q]+(wt[X]-Qe[X]);st(Nt,{animation:tt})}}}),_t=Wo(()=>{W&&T!==!1&&rt(!Le)});L.useEffect(()=>{const tt=kw(()=>{ne.current&&ot()});let Qe;const wt=ss=>{ss.forEach(Wi=>{Wi.removedNodes.forEach(ee=>{Qe==null||Qe.unobserve(ee)}),Wi.addedNodes.forEach(ee=>{Qe==null||Qe.observe(ee)})}),tt(),_t()},Nt=ho(ne.current);Nt.addEventListener("resize",tt);let ln;return typeof ResizeObserver<"u"&&(Qe=new ResizeObserver(tt),Array.from(Ae.current.children).forEach(ss=>{Qe.observe(ss)})),typeof MutationObserver<"u"&&(ln=new MutationObserver(wt),ln.observe(Ae.current,{childList:!0})),()=>{tt.clear(),Nt.removeEventListener("resize",tt),ln==null||ln.disconnect(),Qe==null||Qe.disconnect()}},[ot,_t]),L.useEffect(()=>{const tt=Array.from(Ae.current.children),Qe=tt.length;if(typeof IntersectionObserver<"u"&&Qe>0&&W&&T!==!1){const wt=tt[0],Nt=tt[Qe-1],ln={root:ne.current,threshold:.99},ss=ae=>{be(!ae[0].isIntersecting)},Wi=new IntersectionObserver(ss,ln);Wi.observe(wt);const ee=ae=>{ke(!ae[0].isIntersecting)},oe=new IntersectionObserver(ee,ln);return oe.observe(Nt),()=>{Wi.disconnect(),oe.disconnect()}}},[W,T,Le,d==null?void 0:d.length]),L.useEffect(()=>{U(!0)},[]),L.useEffect(()=>{ot()}),L.useEffect(()=>{Xt(hF!==se)},[Xt,se]),L.useImperativeHandle(l,()=>({updateIndicator:ot,updateScrollButtons:_t}),[ot,_t]);const[rs,yt]=Yn("indicator",{className:jt(J.indicator,F.className),elementType:ste,externalForwardedProps:Me,ownerState:j,additionalProps:{style:se}}),qt=w.jsx(rs,{...yt});let gn=0;const oa=L.Children.map(d,tt=>{if(!L.isValidElement(tt))return null;const Qe=tt.props.value===void 0?gn:tt.props.value;He.set(Qe,gn);const wt=Qe===_;return gn+=1,L.cloneElement(tt,{fullWidth:k==="fullWidth",indicator:wt&&!G&&qt,selected:wt,selectionFollowsFocus:N,onChange:y,textColor:A,value:Qe,...gn===1&&_===!1&&!tt.props.tabIndex?{tabIndex:0}:{}})}),fi=tt=>{if(tt.altKey||tt.shiftKey||tt.ctrlKey||tt.metaKey)return;const Qe=Ae.current,wt=Li(Qe).activeElement;if(wt.getAttribute("role")!=="tab")return;let ln=b==="horizontal"?"ArrowLeft":"ArrowUp",ss=b==="horizontal"?"ArrowRight":"ArrowDown";switch(b==="horizontal"&&a&&(ln="ArrowRight",ss="ArrowLeft"),tt.key){case ln:tt.preventDefault(),nb(Qe,wt,fF);break;case ss:tt.preventDefault(),nb(Qe,wt,dF);break;case"Home":tt.preventDefault(),nb(Qe,null,dF);break;case"End":tt.preventDefault(),nb(Qe,null,fF);break}},Wr=pt(),[wo,uc]=Yn("root",{ref:t,className:jt(J.root,h),elementType:tte,externalForwardedProps:{...Me,...P,component:p},ownerState:j}),[Ua,dc]=Yn("scroller",{ref:ne,className:J.scroller,elementType:nte,externalForwardedProps:Me,ownerState:j,additionalProps:{style:{overflow:Be.overflow,[K?`margin${a?"Left":"Right"}`:"marginBottom"]:O?void 0:-Be.scrollbarWidth}}}),[fc,So]=Yn("list",{ref:Ae,className:jt(J.list,J.flexContainer),elementType:rte,externalForwardedProps:Me,ownerState:j,getSlotProps:tt=>({...tt,onKeyDown:Qe=>{var wt;fi(Qe),(wt=tt.onKeyDown)==null||wt.call(tt,Qe)}})});return w.jsxs(wo,{...uc,children:[Wr.scrollButtonStart,Wr.scrollbarSizeListener,w.jsxs(Ua,{...dc,children:[w.jsx(fc,{"aria-label":i,"aria-labelledby":o,"aria-orientation":b==="vertical"?"vertical":null,role:"tablist",...So,children:oa}),G&&qt]}),Wr.scrollButtonEnd]})}),AB=6048e5,ote=864e5,$B=6e4,RB=36e5,lte=1e3,pF=Symbol.for("constructDateFrom");function gr(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&pF in n?n[pF](e):n instanceof Date?new n.constructor(e):new Date(e)}function Lt(n,e){return gr(e||n,n)}function Dw(n,e,t){const r=Lt(n,t==null?void 0:t.in);return isNaN(e)?gr((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function OB(n,e,t){return gr(n,+Lt(n)+e)}function cte(n,e,t){return OB(n,e*1e3)}function ute(n,e,t){const r=Lt(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*$B),r}function dte(n,e,t){return OB(n,e*RB)}function fte(n,e,t){return Dw(n,e*7,t)}function DB(n,e,t){const r=Lt(n,t==null?void 0:t.in);if(isNaN(e))return gr(n,NaN);if(!e)return r;const s=r.getDate(),a=gr(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}function hte(n,e,t){return DB(n,e*12,t)}function mF(n,e){const t=Lt(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}let pte={};function Vd(){return pte}function mte(n,e){var o,l,c,d;const t=Vd(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Lt(n,e==null?void 0:e.in),a=s.getDay(),i=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function gF(n,e){const t=Lt(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}const gte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xte=(n,e,t)=>{let r;const s=gte[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function OC(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const yte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wte={date:OC({formats:yte,defaultWidth:"full"}),time:OC({formats:bte,defaultWidth:"full"}),dateTime:OC({formats:vte,defaultWidth:"full"})},Ste={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tte=(n,e,t,r)=>Ste[n];function d0(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const i=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):i;s=n.formattingValues[o]||n.formattingValues[i]}else{const i=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[o]||n.values[i]}const a=n.argumentCallback?n.argumentCallback(e):e;return s[a]}}const Nte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Cte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ete={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_te={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ite={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ate=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},$te={ordinalNumber:Ate,era:d0({values:Nte,defaultWidth:"wide"}),quarter:d0({values:Cte,defaultWidth:"wide",argumentCallback:n=>n-1}),month:d0({values:Ete,defaultWidth:"wide"}),day:d0({values:kte,defaultWidth:"wide"}),dayPeriod:d0({values:_te,defaultWidth:"wide",formattingValues:Ite,defaultFormattingWidth:"wide"})};function f0(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Ote(o,h=>h.test(i)):Rte(o,h=>h.test(i));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const d=e.slice(i.length);return{value:c,rest:d}}}function Rte(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Ote(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Dte(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],a=e.match(n.parsePattern);if(!a)return null;let i=n.valueCallback?n.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const o=e.slice(s.length);return{value:i,rest:o}}}const Fte=/^(\d+)(th|st|nd|rd)?/i,Lte=/\d+/i,Mte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Pte={any:[/^b/i,/^(a|c)/i]},Bte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jte={any:[/1/i,/2/i,/3/i,/4/i]},zte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ute={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Wte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qte={ordinalNumber:Dte({matchPattern:Fte,parsePattern:Lte,valueCallback:n=>parseInt(n,10)}),era:f0({matchPatterns:Mte,defaultMatchWidth:"wide",parsePatterns:Pte,defaultParseWidth:"any"}),quarter:f0({matchPatterns:Bte,defaultMatchWidth:"wide",parsePatterns:jte,defaultParseWidth:"any",valueCallback:n=>n+1}),month:f0({matchPatterns:zte,defaultMatchWidth:"wide",parsePatterns:Ute,defaultParseWidth:"any"}),day:f0({matchPatterns:Vte,defaultMatchWidth:"wide",parsePatterns:Wte,defaultParseWidth:"any"}),dayPeriod:f0({matchPatterns:Hte,defaultMatchWidth:"any",parsePatterns:Gte,defaultParseWidth:"any"})},w_={code:"en-US",formatDistance:xte,formatLong:wte,formatRelative:Tte,localize:$te,match:qte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lv(n){const e=Lt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function jg(n,...e){const t=gr.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function tg(n,e){const t=Lt(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function Kte(n,e,t){const[r,s]=jg(t==null?void 0:t.in,n,e),a=tg(r),i=tg(s),o=+a-lv(a),l=+i-lv(i);return Math.round((o-l)/ote)}function FB(n,e){const t=Lt(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Xte(n,e){const t=Lt(n,e==null?void 0:e.in);return Kte(t,FB(t))+1}function Ul(n,e){var o,l,c,d;const t=Vd(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Lt(n,e==null?void 0:e.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Eh(n,e){return Ul(n,{...e,weekStartsOn:1})}function LB(n,e){const t=Lt(n,e==null?void 0:e.in),r=t.getFullYear(),s=gr(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Eh(s),i=gr(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Eh(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Yte(n,e){const t=LB(n,e),r=gr(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Eh(r)}function MB(n,e){const t=Lt(n,e==null?void 0:e.in),r=+Eh(t)-+Yte(t);return Math.round(r/AB)+1}function S_(n,e){var d,h,p,g;const t=Lt(n,e==null?void 0:e.in),r=t.getFullYear(),s=Vd(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(p=s.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,i=gr((e==null?void 0:e.in)||n,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const o=Ul(i,e),l=gr((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const c=Ul(l,e);return+t>=+o?r+1:+t>=+c?r:r-1}function Qte(n,e){var o,l,c,d;const t=Vd(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((d=(c=t.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=S_(n,e),a=gr((e==null?void 0:e.in)||n,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ul(a,e)}function T_(n,e){const t=Lt(n,e==null?void 0:e.in),r=+Ul(t,e)-+Qte(t,e);return Math.round(r/AB)+1}function Mn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Lc={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Mn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Mn(t+1,2)},d(n,e){return Mn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Mn(n.getHours()%12||12,e.length)},H(n,e){return Mn(n.getHours(),e.length)},m(n,e){return Mn(n.getMinutes(),e.length)},s(n,e){return Mn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return Mn(s,e.length)}},Jf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xF={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return Lc.y(n,e)},Y:function(n,e,t,r){const s=S_(n,r),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return Mn(i,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Mn(a,e.length)},R:function(n,e){const t=LB(n);return Mn(t,e.length)},u:function(n,e){const t=n.getFullYear();return Mn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Mn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Mn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Lc.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Mn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=T_(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Mn(s,e.length)},I:function(n,e,t){const r=MB(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Mn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Lc.d(n,e)},D:function(n,e,t){const r=Xte(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Mn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Mn(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Mn(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Mn(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=Jf.noon:r===0?s=Jf.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=Jf.evening:r>=12?s=Jf.afternoon:r>=4?s=Jf.morning:s=Jf.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Lc.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Lc.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Mn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Mn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Lc.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Lc.s(n,e)},S:function(n,e){return Lc.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bF(r);case"XXXX":case"XX":return rd(r);case"XXXXX":case"XXX":default:return rd(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return bF(r);case"xxxx":case"xx":return rd(r);case"xxxxx":case"xxx":default:return rd(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+yF(r,":");case"OOOO":default:return"GMT"+rd(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+yF(r,":");case"zzzz":default:return"GMT"+rd(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Mn(r,e.length)},T:function(n,e,t){return Mn(+n,e.length)}};function yF(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),a=r%60;return a===0?t+String(s):t+String(s)+e+Mn(a,2)}function bF(n,e){return n%60===0?(n>0?"-":"+")+Mn(Math.abs(n)/60,2):rd(n,e)}function rd(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Mn(Math.trunc(r/60),2),a=Mn(r%60,2);return t+s+e+a}const vF=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PB=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Zte=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return vF(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",vF(r,e)).replace("{{time}}",PB(s,e))},cv={p:PB,P:Zte},Jte=/^D+$/,ene=/^Y+$/,tne=["D","DD","YY","YYYY"];function BB(n){return Jte.test(n)}function jB(n){return ene.test(n)}function ME(n,e,t){const r=nne(n,e,t);if(console.warn(r),tne.includes(n))throw new RangeError(r)}function nne(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function rne(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function zB(n){return!(!rne(n)&&typeof n!="number"||isNaN(+Lt(n)))}const sne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ane=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ine=/^'([^]*?)'?$/,one=/''/g,lne=/[a-zA-Z]/;function cne(n,e,t){var d,h,p,g,x,y,b,S;const r=Vd(),s=(t==null?void 0:t.locale)??r.locale??w_,a=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,i=(t==null?void 0:t.weekStartsOn)??((y=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((S=(b=r.locale)==null?void 0:b.options)==null?void 0:S.weekStartsOn)??0,o=Lt(n,t==null?void 0:t.in);if(!zB(o))throw new RangeError("Invalid time value");let l=e.match(ane).map(T=>{const N=T[0];if(N==="p"||N==="P"){const C=cv[N];return C(T,s.formatLong)}return T}).join("").match(sne).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const N=T[0];if(N==="'")return{isToken:!1,value:une(T)};if(xF[N])return{isToken:!0,value:T};if(N.match(lne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:T}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return l.map(T=>{if(!T.isToken)return T.value;const N=T.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&jB(N)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&BB(N))&&ME(N,e,String(n));const C=xF[N[0]];return C(o,N,s.localize,c)}).join("")}function une(n){const e=n.match(ine);return e?e[1].replace(one,"'"):n}function dne(n,e){return Lt(n,e==null?void 0:e.in).getDate()}function UB(n,e){const t=Lt(n,e==null?void 0:e.in),r=t.getFullYear(),s=t.getMonth(),a=gr(t,0);return a.setFullYear(r,s+1,0),a.setHours(0,0,0,0),a.getDate()}function fne(n,e){return Lt(n,e==null?void 0:e.in).getHours()}function hne(n,e){return Lt(n,e==null?void 0:e.in).getMinutes()}function pne(n,e){return Lt(n,e==null?void 0:e.in).getMonth()}function mne(n){return Lt(n).getSeconds()}function gne(n){return Lt(n).getMilliseconds()}function xne(n,e){return Lt(n,e==null?void 0:e.in).getFullYear()}function DC(n,e){return+Lt(n)>+Lt(e)}function FC(n,e){return+Lt(n)<+Lt(e)}function yne(n,e){return+Lt(n)==+Lt(e)}function bne(n,e,t){const[r,s]=jg(t==null?void 0:t.in,n,e);return+tg(r)==+tg(s)}function vne(n,e,t){const[r,s]=jg(t==null?void 0:t.in,n,e);return r.getFullYear()===s.getFullYear()}function wne(n,e,t){const[r,s]=jg(t==null?void 0:t.in,n,e);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function wF(n,e){const t=Lt(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function Sne(n,e,t){const[r,s]=jg(t==null?void 0:t.in,n,e);return+wF(r)==+wF(s)}function Tne(){return Object.assign({},Vd())}function Nne(n,e){const t=Cne(e)?new e(0):gr(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function Cne(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const Ene=10;class VB{constructor(){xt(this,"subPriority",0)}validate(e,t){return!0}}class kne extends VB{constructor(e,t,r,s,a){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=s,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class _ne extends VB{constructor(t,r){super();xt(this,"priority",Ene);xt(this,"subPriority",-1);this.context=t||(s=>gr(r,s))}set(t,r){return r.timestampIsSet?t:gr(t,Nne(t,this.context))}}class _n{run(e,t,r,s){const a=this.parse(e,t,r,s);return a?{setter:new kne(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,r){return!0}}class Ine extends _n{constructor(){super(...arguments);xt(this,"priority",140);xt(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,r,s){return r.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const Br={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Po={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function jr(n,e){return n&&{value:e(n.value),rest:n.rest}}function vr(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Bo(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,i=t[5]?parseInt(t[5],10):0;return{value:r*(s*RB+a*$B+i*lte),rest:e.slice(t[0].length)}}function WB(n){return vr(Br.anyDigitsSigned,n)}function Ar(n,e){switch(n){case 1:return vr(Br.singleDigit,e);case 2:return vr(Br.twoDigits,e);case 3:return vr(Br.threeDigits,e);case 4:return vr(Br.fourDigits,e);default:return vr(new RegExp("^\\d{1,"+n+"}"),e)}}function uv(n,e){switch(n){case 1:return vr(Br.singleDigitSigned,e);case 2:return vr(Br.twoDigitsSigned,e);case 3:return vr(Br.threeDigitsSigned,e);case 4:return vr(Br.fourDigitsSigned,e);default:return vr(new RegExp("^-?\\d{1,"+n+"}"),e)}}function N_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function HB(n,e){const t=e>0,r=t?e:1-e;let s;if(r<=50)s=n||100;else{const a=r+50,i=Math.trunc(a/100)*100,o=n>=a%100;s=n+i-(o?100:0)}return t?s:1-s}function GB(n){return n%400===0||n%4===0&&n%100!==0}class Ane extends _n{constructor(){super(...arguments);xt(this,"priority",130);xt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,s){const a=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return jr(Ar(4,t),a);case"yo":return jr(s.ordinalNumber(t,{unit:"year"}),a);default:return jr(Ar(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,s){const a=t.getFullYear();if(s.isTwoDigitYear){const o=HB(s.year,a);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const i=!("era"in r)||r.era===1?s.year:1-s.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class $ne extends _n{constructor(){super(...arguments);xt(this,"priority",130);xt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,s){const a=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return jr(Ar(4,t),a);case"Yo":return jr(s.ordinalNumber(t,{unit:"year"}),a);default:return jr(Ar(r.length,t),a)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,s,a){const i=S_(t,a);if(s.isTwoDigitYear){const l=HB(s.year,i);return t.setFullYear(l,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Ul(t,a)}const o=!("era"in r)||r.era===1?s.year:1-s.year;return t.setFullYear(o,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Ul(t,a)}}class Rne extends _n{constructor(){super(...arguments);xt(this,"priority",130);xt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return uv(r==="R"?4:r.length,t)}set(t,r,s){const a=gr(t,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),Eh(a)}}class One extends _n{constructor(){super(...arguments);xt(this,"priority",130);xt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return uv(r==="u"?4:r.length,t)}set(t,r,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class Dne extends _n{constructor(){super(...arguments);xt(this,"priority",120);xt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"Q":case"QQ":return Ar(r.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class Fne extends _n{constructor(){super(...arguments);xt(this,"priority",120);xt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"q":case"qq":return Ar(r.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class Lne extends _n{constructor(){super(...arguments);xt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);xt(this,"priority",110)}parse(t,r,s){const a=i=>i-1;switch(r){case"M":return jr(vr(Br.month,t),a);case"MM":return jr(Ar(2,t),a);case"Mo":return jr(s.ordinalNumber(t,{unit:"month"}),a);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class Mne extends _n{constructor(){super(...arguments);xt(this,"priority",110);xt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,s){const a=i=>i-1;switch(r){case"L":return jr(vr(Br.month,t),a);case"LL":return jr(Ar(2,t),a);case"Lo":return jr(s.ordinalNumber(t,{unit:"month"}),a);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function Pne(n,e,t){const r=Lt(n,t==null?void 0:t.in),s=T_(r,t)-e;return r.setDate(r.getDate()-s*7),Lt(r,t==null?void 0:t.in)}class Bne extends _n{constructor(){super(...arguments);xt(this,"priority",100);xt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,s){switch(r){case"w":return vr(Br.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return Ar(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,s,a){return Ul(Pne(t,s,a),a)}}function jne(n,e,t){const r=Lt(n,t==null?void 0:t.in),s=MB(r,t)-e;return r.setDate(r.getDate()-s*7),r}class zne extends _n{constructor(){super(...arguments);xt(this,"priority",100);xt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,s){switch(r){case"I":return vr(Br.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return Ar(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,s){return Eh(jne(t,s))}}const Une=[31,28,31,30,31,30,31,31,30,31,30,31],Vne=[31,29,31,30,31,30,31,31,30,31,30,31];class Wne extends _n{constructor(){super(...arguments);xt(this,"priority",90);xt(this,"subPriority",1);xt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"d":return vr(Br.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return Ar(r.length,t)}}validate(t,r){const s=t.getFullYear(),a=GB(s),i=t.getMonth();return a?r>=1&&r<=Vne[i]:r>=1&&r<=Une[i]}set(t,r,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class Hne extends _n{constructor(){super(...arguments);xt(this,"priority",90);xt(this,"subpriority",1);xt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,s){switch(r){case"D":case"DD":return vr(Br.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return Ar(r.length,t)}}validate(t,r){const s=t.getFullYear();return GB(s)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function C_(n,e,t){var h,p,g,x;const r=Vd(),s=(t==null?void 0:t.weekStartsOn)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,a=Lt(n,t==null?void 0:t.in),i=a.getDay(),l=(e%7+7)%7,c=7-s,d=e<0||e>6?e-(i+c)%7:(l+c)%7-(i+c)%7;return Dw(a,d,t)}class Gne extends _n{constructor(){super(...arguments);xt(this,"priority",90);xt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,s,a){return t=C_(t,s,a),t.setHours(0,0,0,0),t}}class qne extends _n{constructor(){super(...arguments);xt(this,"priority",90);xt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,s,a){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return jr(Ar(r.length,t),i);case"eo":return jr(s.ordinalNumber(t,{unit:"day"}),i);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,s,a){return t=C_(t,s,a),t.setHours(0,0,0,0),t}}class Kne extends _n{constructor(){super(...arguments);xt(this,"priority",90);xt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,s,a){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return jr(Ar(r.length,t),i);case"co":return jr(s.ordinalNumber(t,{unit:"day"}),i);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,s,a){return t=C_(t,s,a),t.setHours(0,0,0,0),t}}function Xne(n,e){const t=Lt(n,e==null?void 0:e.in).getDay();return t===0?7:t}function Yne(n,e,t){const r=Lt(n,t==null?void 0:t.in),s=Xne(r,t),a=e-s;return Dw(r,a,t)}class Qne extends _n{constructor(){super(...arguments);xt(this,"priority",90);xt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,s){const a=i=>i===0?7:i;switch(r){case"i":case"ii":return Ar(r.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return jr(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return jr(s.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return jr(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return jr(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,r){return r>=1&&r<=7}set(t,r,s){return t=Yne(t,s),t.setHours(0,0,0,0),t}}class Zne extends _n{constructor(){super(...arguments);xt(this,"priority",80);xt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,s){return t.setHours(N_(s),0,0,0),t}}class Jne extends _n{constructor(){super(...arguments);xt(this,"priority",80);xt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,s){return t.setHours(N_(s),0,0,0),t}}class ere extends _n{constructor(){super(...arguments);xt(this,"priority",80);xt(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,s){return t.setHours(N_(s),0,0,0),t}}class tre extends _n{constructor(){super(...arguments);xt(this,"priority",70);xt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,s){switch(r){case"h":return vr(Br.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return Ar(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,s){const a=t.getHours()>=12;return a&&s<12?t.setHours(s+12,0,0,0):!a&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class nre extends _n{constructor(){super(...arguments);xt(this,"priority",70);xt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,s){switch(r){case"H":return vr(Br.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return Ar(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,s){return t.setHours(s,0,0,0),t}}class rre extends _n{constructor(){super(...arguments);xt(this,"priority",70);xt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,s){switch(r){case"K":return vr(Br.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return Ar(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class sre extends _n{constructor(){super(...arguments);xt(this,"priority",70);xt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,s){switch(r){case"k":return vr(Br.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return Ar(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,s){const a=s<=24?s%24:s;return t.setHours(a,0,0,0),t}}class are extends _n{constructor(){super(...arguments);xt(this,"priority",60);xt(this,"incompatibleTokens",["t","T"])}parse(t,r,s){switch(r){case"m":return vr(Br.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return Ar(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,s){return t.setMinutes(s,0,0),t}}class ire extends _n{constructor(){super(...arguments);xt(this,"priority",50);xt(this,"incompatibleTokens",["t","T"])}parse(t,r,s){switch(r){case"s":return vr(Br.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return Ar(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,s){return t.setSeconds(s,0),t}}class ore extends _n{constructor(){super(...arguments);xt(this,"priority",30);xt(this,"incompatibleTokens",["t","T"])}parse(t,r){const s=a=>Math.trunc(a*Math.pow(10,-r.length+3));return jr(Ar(r.length,t),s)}set(t,r,s){return t.setMilliseconds(s),t}}class lre extends _n{constructor(){super(...arguments);xt(this,"priority",10);xt(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Bo(Po.basicOptionalMinutes,t);case"XX":return Bo(Po.basic,t);case"XXXX":return Bo(Po.basicOptionalSeconds,t);case"XXXXX":return Bo(Po.extendedOptionalSeconds,t);case"XXX":default:return Bo(Po.extended,t)}}set(t,r,s){return r.timestampIsSet?t:gr(t,t.getTime()-lv(t)-s)}}class cre extends _n{constructor(){super(...arguments);xt(this,"priority",10);xt(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Bo(Po.basicOptionalMinutes,t);case"xx":return Bo(Po.basic,t);case"xxxx":return Bo(Po.basicOptionalSeconds,t);case"xxxxx":return Bo(Po.extendedOptionalSeconds,t);case"xxx":default:return Bo(Po.extended,t)}}set(t,r,s){return r.timestampIsSet?t:gr(t,t.getTime()-lv(t)-s)}}class ure extends _n{constructor(){super(...arguments);xt(this,"priority",40);xt(this,"incompatibleTokens","*")}parse(t){return WB(t)}set(t,r,s){return[gr(t,s*1e3),{timestampIsSet:!0}]}}class dre extends _n{constructor(){super(...arguments);xt(this,"priority",20);xt(this,"incompatibleTokens","*")}parse(t){return WB(t)}set(t,r,s){return[gr(t,s),{timestampIsSet:!0}]}}const fre={G:new Ine,y:new Ane,Y:new $ne,R:new Rne,u:new One,Q:new Dne,q:new Fne,M:new Lne,L:new Mne,w:new Bne,I:new zne,d:new Wne,D:new Hne,E:new Gne,e:new qne,c:new Kne,i:new Qne,a:new Zne,b:new Jne,B:new ere,h:new tre,H:new nre,K:new rre,k:new sre,m:new are,s:new ire,S:new ore,X:new lre,x:new cre,t:new ure,T:new dre},hre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mre=/^'([^]*?)'?$/,gre=/''/g,xre=/\S/,yre=/[a-zA-Z]/;function bre(n,e,t,r){var b,S,T,N,C,I,F,D;const s=()=>gr((r==null?void 0:r.in)||t,NaN),a=Tne(),i=(r==null?void 0:r.locale)??a.locale??w_,o=(r==null?void 0:r.firstWeekContainsDate)??((S=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:S.firstWeekContainsDate)??a.firstWeekContainsDate??((N=(T=a.locale)==null?void 0:T.options)==null?void 0:N.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((I=(C=r==null?void 0:r.locale)==null?void 0:C.options)==null?void 0:I.weekStartsOn)??a.weekStartsOn??((D=(F=a.locale)==null?void 0:F.options)==null?void 0:D.weekStartsOn)??0;if(!e)return n?s():Lt(t,r==null?void 0:r.in);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:i},d=[new _ne(r==null?void 0:r.in,t)],h=e.match(pre).map(A=>{const _=A[0];if(_ in cv){const k=cv[_];return k(A,i.formatLong)}return A}).join("").match(hre),p=[];for(let A of h){!(r!=null&&r.useAdditionalWeekYearTokens)&&jB(A)&&ME(A,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&BB(A)&&ME(A,e,n);const _=A[0],k=fre[_];if(k){const{incompatibleTokens:O}=k;if(Array.isArray(O)){const W=p.find(K=>O.includes(K.token)||K.token===_);if(W)throw new RangeError(`The format string mustn't contain \`${W.fullToken}\` and \`${A}\` at the same time`)}else if(k.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${A}\` and any other token at the same time`);p.push({token:_,fullToken:A});const P=k.run(n,A,i.match,c);if(!P)return s();d.push(P.setter),n=P.rest}else{if(_.match(yre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");if(A==="''"?A="'":_==="'"&&(A=vre(A)),n.indexOf(A)===0)n=n.slice(A.length);else return s()}}if(n.length>0&&xre.test(n))return s();const g=d.map(A=>A.priority).sort((A,_)=>_-A).filter((A,_,k)=>k.indexOf(A)===_).map(A=>d.filter(_=>_.priority===A).sort((_,k)=>k.subPriority-_.subPriority)).map(A=>A[0]);let x=Lt(t,r==null?void 0:r.in);if(isNaN(+x))return s();const y={};for(const A of g){if(!A.validate(x,c))return s();const _=A.set(x,y,c);Array.isArray(_)?(x=_[0],Object.assign(y,_[1])):x=_}return x}function vre(n){return n.match(mre)[1].replace(gre,"'")}function wre(n,e,t){const r=Lt(n,t==null?void 0:t.in);return r.setDate(e),r}function Sre(n,e,t){const r=Lt(n,t==null?void 0:t.in);return r.setHours(e),r}function Tre(n,e,t){const r=Lt(n,t==null?void 0:t.in);return r.setMinutes(e),r}function Nre(n,e,t){const r=Lt(n,t==null?void 0:t.in),s=r.getFullYear(),a=r.getDate(),i=gr(n,0);i.setFullYear(s,e,15),i.setHours(0,0,0,0);const o=UB(i);return r.setMonth(e,Math.min(a,o)),r}function Cre(n,e,t){const r=Lt(n,t==null?void 0:t.in);return r.setSeconds(e),r}function Ere(n,e,t){const r=Lt(n,t==null?void 0:t.in);return r.setMilliseconds(e),r}function kre(n,e,t){const r=Lt(n,t==null?void 0:t.in);return isNaN(+r)?gr(n,NaN):(r.setFullYear(e),r)}function _re(n,e){const t=Lt(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Ire(n,e){const t=Lt(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Are(n,e,t){const r=+Lt(n,t==null?void 0:t.in),[s,a]=[+Lt(e.start,t==null?void 0:t.in),+Lt(e.end,t==null?void 0:t.in)].sort((i,o)=>i-o);return r>=s&&r<=a}const $re={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},Rre={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class Ore{constructor(e){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=$re,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=i=>typeof i>"u"?new Date:i===null?null:new Date(i),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=i=>i,this.toJsDate=i=>i,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=i=>{const o=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return i.match(o).map(l=>{const c=l[0];if(c==="p"||c==="P"){const d=this.longFormatters[c];return d(l,this.locale.formatLong)}return l}).join("")},this.formatNumber=i=>i,this.getDayOfWeek=i=>i.getDay()+1;const{locale:t,formats:r,longFormatters:s,lib:a}=e;this.locale=t,this.formats=Th({},Rre,r),this.longFormatters=s,this.lib=a||"date-fns"}}class Dre extends Ore{constructor({locale:e,formats:t}={}){super({locale:e??w_,formats:t,longFormatters:cv}),this.parse=(r,s)=>r===""?null:bre(r,s,new Date,{locale:this.locale}),this.isValid=r=>r==null?!1:zB(r),this.format=(r,s)=>this.formatByString(r,this.formats[s]),this.formatByString=(r,s)=>cne(r,s,{locale:this.locale}),this.isEqual=(r,s)=>r===null&&s===null?!0:r===null||s===null?!1:yne(r,s),this.isSameYear=(r,s)=>vne(r,s),this.isSameMonth=(r,s)=>wne(r,s),this.isSameDay=(r,s)=>bne(r,s),this.isSameHour=(r,s)=>Sne(r,s),this.isAfter=(r,s)=>DC(r,s),this.isAfterYear=(r,s)=>DC(r,gF(s)),this.isAfterDay=(r,s)=>DC(r,mF(s)),this.isBefore=(r,s)=>FC(r,s),this.isBeforeYear=(r,s)=>FC(r,this.startOfYear(s)),this.isBeforeDay=(r,s)=>FC(r,this.startOfDay(s)),this.isWithinRange=(r,[s,a])=>Are(r,{start:s,end:a}),this.startOfYear=r=>FB(r),this.startOfMonth=r=>_re(r),this.startOfWeek=r=>Ul(r,{locale:this.locale}),this.startOfDay=r=>tg(r),this.endOfYear=r=>gF(r),this.endOfMonth=r=>Ire(r),this.endOfWeek=r=>mte(r,{locale:this.locale}),this.endOfDay=r=>mF(r),this.addYears=(r,s)=>hte(r,s),this.addMonths=(r,s)=>DB(r,s),this.addWeeks=(r,s)=>fte(r,s),this.addDays=(r,s)=>Dw(r,s),this.addHours=(r,s)=>dte(r,s),this.addMinutes=(r,s)=>ute(r,s),this.addSeconds=(r,s)=>cte(r,s),this.getYear=r=>xne(r),this.getMonth=r=>pne(r),this.getDate=r=>dne(r),this.getHours=r=>fne(r),this.getMinutes=r=>hne(r),this.getSeconds=r=>mne(r),this.getMilliseconds=r=>gne(r),this.setYear=(r,s)=>kre(r,s),this.setMonth=(r,s)=>Nre(r,s),this.setDate=(r,s)=>wre(r,s),this.setHours=(r,s)=>Sre(r,s),this.setMinutes=(r,s)=>Tre(r,s),this.setSeconds=(r,s)=>Cre(r,s),this.setMilliseconds=(r,s)=>Ere(r,s),this.getDaysInMonth=r=>UB(r),this.getWeekArray=r=>{const s=this.startOfWeek(this.startOfMonth(r)),a=this.endOfWeek(this.endOfMonth(r));let i=0,o=s;const l=[];for(;this.isBefore(o,a);){const c=Math.floor(i/7);l[c]=l[c]||[],l[c].push(o),o=this.addDays(o,1),i+=1}return l},this.getWeekNumber=r=>T_(r,{locale:this.locale}),this.getYearRange=([r,s])=>{const a=this.startOfYear(r),i=this.endOfYear(s),o=[];let l=a;for(;this.isBefore(l,i);)o.push(l),l=this.addYears(l,1);return o}}}/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lre=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),SF=n=>{const e=Lre(n);return e.charAt(0).toUpperCase()+e.slice(1)},qB=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Mre=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=L.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>L.createElement("svg",{ref:l,...Pre,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:qB("lucide",s),...!a&&!Mre(o)&&{"aria-hidden":"true"},...o},[...i.map(([c,d])=>L.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(n,e)=>{const t=L.forwardRef(({className:r,...s},a)=>L.createElement(Bre,{ref:a,iconNode:e,className:qB(`lucide-${Fre(SF(n))}`,`lucide-${n}`,r),...s}));return t.displayName=SF(n),t};/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],E_=Ft("arrow-down",jre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ure=Ft("arrow-right",zre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],k_=Ft("arrow-up",Vre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],dv=Ft("barcode",Wre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gre=Ft("calendar",Hre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],KB=Ft("camera",qre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],qh=Ft("car",Kre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Yre=Ft("chevron-down",Xre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Zre=Ft("chevron-right",Qre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],ese=Ft("chevrons-down",Jre);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],nse=Ft("chevrons-left",tse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],sse=Ft("chevrons-right",rse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],TF=Ft("chevrons-up-down",ase);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],ose=Ft("chevrons-up",ise);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cse=Ft("circle-alert",lse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],XB=Ft("circle-check-big",use);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Fw=Ft("circle-x",dse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fse=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],NF=Ft("cloud-download",fse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],PE=Ft("code",hse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],mse=Ft("database",pse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],LC=Ft("ellipsis-vertical",gse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],YB=Ft("file-down",xse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],zg=Ft("file-spreadsheet",yse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],vse=Ft("file-text",bse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],QB=Ft("file",wse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Tse=Ft("funnel",Sse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ZB=Ft("history",Nse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Ese=Ft("languages",Cse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["rect",{width:"18",height:"12",x:"3",y:"4",rx:"2",ry:"2",key:"1qhy41"}],["line",{x1:"2",x2:"22",y1:"20",y2:"20",key:"ni3hll"}]],JB=Ft("laptop-minimal",kse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ise=Ft("layout-dashboard",_se);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ase=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],P0=Ft("loader-circle",Ase);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],e6=Ft("loader",$se);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ose=Ft("lock",Rse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Fse=Ft("log-out",Dse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Mse=Ft("menu",Lse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=[["path",{d:"M5 12h14",key:"1ays0h"}]],t6=Ft("minus",Pse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],n6=Ft("package-open",Bse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nd=Ft("package",jse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],__=Ft("plus",zse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],r6=Ft("refresh-ccw",Use);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],s6=Ft("refresh-cw",Vse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wse=[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]],a6=Ft("replace",Wse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],i6=Ft("rotate-ccw",Hse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lw=Ft("save",Gse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],I_=Ft("search",qse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],o6=Ft("shield-check",Kse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],kh=Ft("square-pen",Xse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],fv=Ft("thermometer",Yse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],hv=Ft("trash-2",Qse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ug=Ft("triangle-alert",Zse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vl=Ft("user",Jse);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],l6=Ft("users",eae);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tae=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],BE=Ft("utensils",tae);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],rae=Ft("warehouse",nae);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],A_=Ft("wrench",sae);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zc=Ft("x",aae);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],oae=Ft("zap",iae),lae="https://172.20.0.49:3000";function cae({onClose:n}){const e=JSON.parse(localStorage.getItem("user")),t=e==null?void 0:e._id,[r,s]=L.useState(""),[a,i]=L.useState(""),[o,l]=L.useState(null),c=async()=>{if(!t){l("User not found. Please log in again.");return}const h=await(await fetch(`${lae}/api/auth/changePassword`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,oldPassword:r,newPassword:a})})).json();h.success?(l("Password updated successfully"),setTimeout(()=>{l(null),n()},1500)):l(h.error||"Failed to update password")};return w.jsx("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-white border border-gray-300 w-full max-w-sm",children:[w.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:w.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Change Password"})}),w.jsxs("div",{className:"p-6 space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Current Password"}),w.jsx("input",{type:"password",value:r,onChange:d=>s(d.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"New Password"}),w.jsx("input",{type:"password",value:a,onChange:d=>i(d.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500"})]}),o&&w.jsx("div",{className:`text-sm ${o.includes("successfully")?"text-green-600":"text-red-600"}`,children:o})]}),w.jsxs("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[w.jsx("button",{onClick:n,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:c,className:"px-4 py-2 text-sm bg-gray-900 text-white hover:bg-gray-800 transition-colors",children:"Update Password"})]})]})})}function Jl({user:n}){const[e,t]=L.useState(!1),[r,s]=L.useState(!1),{t:a,i18n:i}=pP(),o=L.useRef(null),l=c=>{i.changeLanguage(c),s(!1)};return L.useEffect(()=>{const c=d=>{o.current&&!o.current.contains(d.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[o]),w.jsxs(w.Fragment,{children:[w.jsxs("header",{className:"flex justify-between items-center px-4 md:px-6 py-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[w.jsx("div",{className:"text-lg font-light text-gray-900 ml-13 md:ml-11",children:a("dashboard")}),w.jsxs("div",{className:"flex items-center gap-3 md:gap-6",children:[w.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[w.jsx(Vl,{className:"w-4 h-4"}),w.jsx("span",{children:n==null?void 0:n.username})]}),w.jsxs("div",{className:"relative",ref:o,children:[w.jsx("button",{onClick:()=>s(!r),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:a("changeLanguage"),children:w.jsx(Ese,{className:"w-5 h-5"})}),r&&w.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:w.jsxs("div",{className:"py-1",children:[w.jsx("button",{onClick:()=>l("en"),className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"English"}),w.jsx("button",{onClick:()=>l("he"),className:"flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:""})]})})]}),w.jsx("button",{onClick:()=>t(!0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:a("changePassword"),children:w.jsx(Ose,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>{localStorage.removeItem("user"),window.location.href="/login"},className:"flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors",title:a("logout"),children:w.jsx(Fse,{className:"w-4 h-4"})})]})]}),e&&w.jsx(cae,{onClose:()=>t(!1)})]})}function uae(){const n=JSON.parse(localStorage.getItem("user")),t=[{title:"Meal Ordering",description:"Order your daily meals for the workweek",icon:w.jsx(BE,{className:"w-6 h-6"}),link:"/meal",accent:"border-l-orange-400"},{title:"Admin Meal Ordering",description:"Manage daily meals for the workweek",icon:w.jsx(BE,{className:"w-6 h-6"}),link:"/adminMeal",accent:"border-l-orange-400"},{title:"Box & Cooler Inventory",description:"Track boxes and coolers inventory",icon:w.jsx(Nd,{className:"w-6 h-6"}),link:"/boxes",accent:"border-l-blue-400"},{title:"Admin Panel Box Inventory",description:"Add and manage Box Inventory",icon:w.jsx(n6,{className:"w-6 h-6"}),link:"/adminBox",accent:"border-l-blue-400"},{title:"IT Support Tickets",description:"Submit and track IT support requests",icon:w.jsx(JB,{className:"w-6 h-6"}),link:"/it",accent:"border-l-green-400"},{title:"Statistics",description:"Submit and track service requests",icon:w.jsx(A_,{className:"w-6 h-6"}),link:"/statistics",accent:"border-l-purple-400"},{title:"Invoices",description:"Management data of invoices ",icon:w.jsx(QB,{className:"w-6 h-6"}),link:"/invoice",accent:"border-l-yellow-400"},{title:"Scanner",description:"Document Scanner imag to data and PDF",icon:w.jsx(KB,{className:"w-6 h-6"}),link:"/invoiceUploader",accent:"border-l-lime-400"},{title:"Data Sync WMS",description:"",icon:w.jsx(r6,{className:"w-6 h-6"}),link:"/AdminBoxInventoryNew",accent:"border-l-emerald-400"},{title:"Box & Cooler Inventory Test",description:"Test",icon:w.jsx(PE,{className:"w-6 h-6"}),link:"/BoxInventoryNew",accent:"border-l-emerald-400"},{title:"Developer",description:"Add and manage pages , logs",icon:w.jsx(PE,{className:"w-6 h-6"}),link:"/developer",accent:"border-l-emerald-400"},{title:"Admin Panel",description:"Add and manage user access",icon:w.jsx(o6,{className:"w-6 h-6"}),link:"/admin",accent:"border-l-red-400",adminOnly:!0}].filter(r=>{var s;return r.adminOnly&&(n==null?void 0:n.role)!=="admin"&&r.adminOnly&&(n==null?void 0:n.role)!=="developer"?!1:(n==null?void 0:n.role)==="admin"&&(n==null?void 0:n.role)==="developer"||((s=n==null?void 0:n.allowedApps)==null?void 0:s.includes(r.link))});return w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsx(Jl,{user:n}),w.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-16",children:[w.jsxs("div",{className:"text-center mb-16",children:[w.jsxs("h1",{className:"text-4xl font-light text-gray-900 mb-4",children:["Welcome back, ",w.jsx("span",{className:"font-medium",children:n==null?void 0:n.username})]}),w.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose from your available applications to get started with your daily tasks"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8",children:t.map((r,s)=>w.jsx("a",{href:r.link,className:"group block",children:w.jsx("div",{className:`
                bg-white border border-gray-200 ${r.accent} border-l-4
                transition-all duration-300 ease-out
                hover:shadow-lg hover:-translate-y-1 hover:border-gray-300
                cursor-pointer
              `,children:w.jsxs("div",{className:"p-8",children:[w.jsxs("div",{className:"flex items-start justify-between mb-6",children:[w.jsx("div",{className:"p-3 bg-gray-50 group-hover:bg-gray-100 transition-colors duration-200",children:r.icon}),w.jsx(Ure,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 group-hover:translate-x-1 transition-all duration-200"})]}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("h3",{className:"text-xl font-medium text-gray-900 group-hover:text-gray-700 transition-colors",children:r.title}),w.jsx("p",{className:"text-gray-600 leading-relaxed",children:r.description})]}),w.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:w.jsx("span",{className:"text-sm text-gray-500 group-hover:text-gray-700 transition-colors",children:"Click to open "})})]})})},s))}),t.length===0&&w.jsxs("div",{className:"text-center py-16",children:[w.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(Nd,{className:"w-8 h-8 text-gray-400"})}),w.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications available"}),w.jsx("p",{className:"text-gray-600",children:"Contact your administrator to request access to applications."})]}),w.jsx("div",{className:"mt-16 text-center",children:w.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-gray-500",children:[w.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),"System status: All services operational"]})})]})]})}let dae={data:""},fae=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||dae,hae=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pae=/\/\*[^]*?\*\/|  +/g,CF=/\n+/g,zc=(n,e)=>{let t="",r="",s="";for(let a in n){let i=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+i+";":r+=a[1]=="f"?zc(i,a):a+"{"+zc(i,a[1]=="k"?"":e)+"}":typeof i=="object"?r+=zc(i,e?e.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):i!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=zc.p?zc.p(a,i):a+":"+i+";")}return t+(e&&s?e+"{"+s+"}":s)+r},El={},c6=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+c6(n[t]);return e}return n},mae=(n,e,t,r,s)=>{let a=c6(n),i=El[a]||(El[a]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(a));if(!El[i]){let l=a!==n?n:(c=>{let d,h,p=[{}];for(;d=hae.exec(c.replace(pae,""));)d[4]?p.shift():d[3]?(h=d[3].replace(CF," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][d[1]]=d[2].replace(CF," ").trim();return p[0]})(n);El[i]=zc(s?{["@keyframes "+i]:l}:l,t?"":"."+i)}let o=t&&El.g?El.g:null;return t&&(El.g=El[i]),((l,c,d,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(El[i],e,r,o),i},gae=(n,e,t)=>n.reduce((r,s,a)=>{let i=e[a];if(i&&i.call){let o=i(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;i=l?"."+l:o&&typeof o=="object"?o.props?"":zc(o,""):o===!1?"":o}return r+s+(i??"")},"");function Mw(n){let e=this||{},t=n.call?n(e.p):n;return mae(t.unshift?t.raw?gae(t,[].slice.call(arguments,1),e.p):t.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):t,fae(e.target),e.g,e.o,e.k)}let u6,jE,zE;Mw.bind({g:1});let Wl=Mw.bind({k:1});function xae(n,e,t,r){zc.p=e,u6=n,jE=t,zE=r}function gu(n,e){let t=this||{};return function(){let r=arguments;function s(a,i){let o=Object.assign({},a),l=o.className||s.className;t.p=Object.assign({theme:jE&&jE()},o),t.o=/ *go\d+/.test(l),o.className=Mw.apply(t,r)+(l?" "+l:"");let c=n;return n[0]&&(c=o.as||n,delete o.as),zE&&c[0]&&zE(o),u6(c,o)}return s}}var yae=n=>typeof n=="function",pv=(n,e)=>yae(n)?n(e):n,bae=(()=>{let n=0;return()=>(++n).toString()})(),d6=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),vae=20,f6=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,vae)};case 1:return{...n,toasts:n.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:t}=e;return f6(n,{type:n.toasts.find(a=>a.id===t.id)?1:0,toast:t});case 3:let{toastId:r}=e;return{...n,toasts:n.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let s=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+s}))}}},Mb=[],pd={toasts:[],pausedAt:void 0},Wd=n=>{pd=f6(pd,n),Mb.forEach(e=>{e(pd)})},wae={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Sae=(n={})=>{let[e,t]=L.useState(pd),r=L.useRef(pd);L.useEffect(()=>(r.current!==pd&&t(pd),Mb.push(t),()=>{let a=Mb.indexOf(t);a>-1&&Mb.splice(a,1)}),[]);let s=e.toasts.map(a=>{var i,o,l;return{...n,...n[a.type],...a,removeDelay:a.removeDelay||((i=n[a.type])==null?void 0:i.removeDelay)||(n==null?void 0:n.removeDelay),duration:a.duration||((o=n[a.type])==null?void 0:o.duration)||(n==null?void 0:n.duration)||wae[a.type],style:{...n.style,...(l=n[a.type])==null?void 0:l.style,...a.style}}});return{...e,toasts:s}},Tae=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||bae()}),Vg=n=>(e,t)=>{let r=Tae(e,n,t);return Wd({type:2,toast:r}),r.id},fa=(n,e)=>Vg("blank")(n,e);fa.error=Vg("error");fa.success=Vg("success");fa.loading=Vg("loading");fa.custom=Vg("custom");fa.dismiss=n=>{Wd({type:3,toastId:n})};fa.remove=n=>Wd({type:4,toastId:n});fa.promise=(n,e,t)=>{let r=fa.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(s=>{let a=e.success?pv(e.success,s):void 0;return a?fa.success(a,{id:r,...t,...t==null?void 0:t.success}):fa.dismiss(r),s}).catch(s=>{let a=e.error?pv(e.error,s):void 0;a?fa.error(a,{id:r,...t,...t==null?void 0:t.error}):fa.dismiss(r)}),n};var Nae=(n,e)=>{Wd({type:1,toast:{id:n,height:e}})},Cae=()=>{Wd({type:5,time:Date.now()})},B0=new Map,Eae=1e3,kae=(n,e=Eae)=>{if(B0.has(n))return;let t=setTimeout(()=>{B0.delete(n),Wd({type:4,toastId:n})},e);B0.set(n,t)},_ae=n=>{let{toasts:e,pausedAt:t}=Sae(n);L.useEffect(()=>{if(t)return;let a=Date.now(),i=e.map(o=>{if(o.duration===1/0)return;let l=(o.duration||0)+o.pauseDuration-(a-o.createdAt);if(l<0){o.visible&&fa.dismiss(o.id);return}return setTimeout(()=>fa.dismiss(o.id),l)});return()=>{i.forEach(o=>o&&clearTimeout(o))}},[e,t]);let r=L.useCallback(()=>{t&&Wd({type:6,time:Date.now()})},[t]),s=L.useCallback((a,i)=>{let{reverseOrder:o=!1,gutter:l=8,defaultPosition:c}=i||{},d=e.filter(g=>(g.position||c)===(a.position||c)&&g.height),h=d.findIndex(g=>g.id===a.id),p=d.filter((g,x)=>x<h&&g.visible).length;return d.filter(g=>g.visible).slice(...o?[p+1]:[0,p]).reduce((g,x)=>g+(x.height||0)+l,0)},[e]);return L.useEffect(()=>{e.forEach(a=>{if(a.dismissed)kae(a.id,a.removeDelay);else{let i=B0.get(a.id);i&&(clearTimeout(i),B0.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:Nae,startPause:Cae,endPause:r,calculateOffset:s}}},Iae=Wl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Aae=Wl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$ae=Wl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Rae=gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Iae} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Aae} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${$ae} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Oae=Wl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Dae=gu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Oae} 1s linear infinite;
`,Fae=Wl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Lae=Wl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Mae=gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fae} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Lae} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Pae=gu("div")`
  position: absolute;
`,Bae=gu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jae=Wl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zae=gu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jae} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Uae=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?L.createElement(zae,null,e):e:t==="blank"?null:L.createElement(Bae,null,L.createElement(Dae,{...r}),t!=="loading"&&L.createElement(Pae,null,t==="error"?L.createElement(Rae,{...r}):L.createElement(Mae,{...r})))},Vae=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Wae=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Hae="0%{opacity:0;} 100%{opacity:1;}",Gae="0%{opacity:1;} 100%{opacity:0;}",qae=gu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Kae=gu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Xae=(n,e)=>{let t=n.includes("top")?1:-1,[r,s]=d6()?[Hae,Gae]:[Vae(t),Wae(t)];return{animation:e?`${Wl(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wl(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Yae=L.memo(({toast:n,position:e,style:t,children:r})=>{let s=n.height?Xae(n.position||e||"top-center",n.visible):{opacity:0},a=L.createElement(Uae,{toast:n}),i=L.createElement(Kae,{...n.ariaProps},pv(n.message,n));return L.createElement(qae,{className:n.className,style:{...s,...t,...n.style}},typeof r=="function"?r({icon:a,message:i}):L.createElement(L.Fragment,null,a,i))});xae(L.createElement);var Qae=({id:n,className:e,style:t,onHeightUpdate:r,children:s})=>{let a=L.useCallback(i=>{if(i){let o=()=>{let l=i.getBoundingClientRect().height;r(n,l)};o(),new MutationObserver(o).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return L.createElement("div",{ref:a,className:e,style:t},s)},Zae=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},s=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:d6()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...s}},Jae=Mw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,rb=16,Wg=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:s,containerStyle:a,containerClassName:i})=>{let{toasts:o,handlers:l}=_ae(t);return L.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:rb,left:rb,right:rb,bottom:rb,pointerEvents:"none",...a},className:i,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(c=>{let d=c.position||e,h=l.calculateOffset(c,{reverseOrder:n,gutter:r,defaultPosition:e}),p=Zae(d,h);return L.createElement(Qae,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?Jae:"",style:p},c.type==="custom"?pv(c.message,c):s?s(c):L.createElement(Yae,{toast:c,position:d}))}))},Dt=fa;const EF=[{label:"Main Board",path:"/",icon:w.jsx(Ise,{size:20})},{label:"Meal Ordering",path:"/meal",icon:w.jsx(BE,{size:20})},{label:"Box & Cooler Inventory",path:"/boxes",icon:w.jsx(Nd,{size:20})},{label:"Admin Box Inventory",path:"/adminBox",icon:w.jsx(n6,{size:20})},{label:"IT Support Tickets",path:"/it",icon:w.jsx(JB,{size:20})},{label:"Statistics",path:"/statistics",icon:w.jsx(A_,{size:20})},{label:"Invoices",path:"/invoice",icon:w.jsx(QB,{size:20})},{label:"Scanner",path:"/invoiceUploader",icon:w.jsx(KB,{size:20})},{label:"Data Sync WMS",path:"/AdminBoxInventoryNew",icon:w.jsx(r6,{size:20})},{label:"Developer",path:"/developer",icon:w.jsx(PE,{size:20})},{label:"Admin Panel",path:"/admin",icon:w.jsx(o6,{size:20}),adminOnly:!0}],kF=({item:n,collapsed:e,location:t,onLinkClick:r})=>w.jsxs(qk,{to:n.path,onClick:r,className:`group relative flex items-center py-2 px-3 text-sm transition-all rounded-md
      ${e?"justify-center":"gap-3"}
      ${t.pathname===n.path?"bg-gray-100 text-gray-900 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}
    `,children:[w.jsx("div",{className:"shrink-0",children:n.icon}),!e&&w.jsx("span",{className:"transition-opacity duration-300",children:n.label}),e&&w.jsx("span",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap z-50",children:n.label})]},n.path);function xu({user:n}){const e=pu(),[t,r]=L.useState(!1),[s,a]=L.useState(!0),i=EF.find(d=>d.adminOnly),l=EF.filter(d=>!d.adminOnly).filter(d=>{var h;return(n==null?void 0:n.role)==="admin"&&(n==null?void 0:n.role)==="developer"||((h=n==null?void 0:n.allowedApps)==null?void 0:h.includes(d.path))}),c=(n==null?void 0:n.role)==="admin"&&i||(n==null?void 0:n.role)==="developer"&&i;return w.jsxs(w.Fragment,{children:[w.jsx("button",{className:"md:hidden fixed top-4 left-5 z-50 bg-white border border-gray-300 p-2 rounded-md shadow-sm",onClick:()=>r(!t),children:t?w.jsx(Zc,{size:20}):w.jsx(Mse,{size:20})}),w.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-white border-r border-gray-200 z-40 transition-all duration-300  
          ${t?"translate-x-0":"-translate-x-full"}  
          md:translate-x-0  
          ${s?"md:w-16":"md:w-60"}  
          overflow-hidden px-4 pt-4 pb-4 mb:pt-6 flex flex-col justify-between`,children:[w.jsxs("div",{className:"flex flex-col gap-4 mt-12 md:mt-0",children:[w.jsx("div",{className:"hidden md:flex justify-end mb-2 h-5 items-center",children:w.jsx("button",{onClick:()=>a(!s),className:"text-gray-500 hover:text-gray-800 transition",children:s?w.jsx(sse,{size:20}):w.jsx(nse,{size:20})})}),w.jsx("nav",{className:`space-y-1 ${s?"text-center":""}`,children:l.map(d=>w.jsx(kF,{item:d,collapsed:s,location:e,onLinkClick:()=>r(!1)},d.path))})]}),c&&w.jsx("nav",{className:`pt-4 border-t ${s?"text-center":""}`,children:w.jsx(kF,{item:i,collapsed:s,location:e,onLinkClick:()=>r(!1)})})]}),t&&w.jsx("div",{className:"md:hidden fixed inset-0 bg-black/10 z-30",onClick:()=>r(!1)})]})}const h0="https://172.20.0.49:3000",eie=["None","200-39-201","879-04-501","595-54-901","534-76-202","97-733-31","217-03-901","685-24-602","764-56-601","33-846-33","33-578-66","41-825-62","80-878-37","38-208-62","64-755-58","24-663-59","47-908-61","55-244-65","68-855-16","   ..."],tie=[" "," "," "," "," "," "," ",""," "," "," "," ","   "," "," "," ","  "," "," "," "," ","",""," "],nie=[{id:"largeCoolers",name:" ",icon:w.jsx(fv,{className:"w-5 h-5 text-green-500"})},{id:"smallCoolers",name:"",icon:w.jsx(fv,{className:"w-5 h-5 text-purple-500"})}];function Mc(n,e){const[t,r]=L.useState(()=>{if(typeof window<"u"){const s=window.localStorage.getItem(e);return s!==null?JSON.parse(s):n}return n});return L.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(t))},[e,t]),[t,r]}function rie(){const n=typeof window<"u"?JSON.parse(localStorage.getItem("user")):null,[e,t]=Mc("","notesState_asset_v2"),[r,s]=L.useState(!1),[a,i]=Mc({largeCoolers:0,smallCoolers:0},"quantitiesState_asset_v2"),[o,l]=Mc("","vehicleNumberState_asset_v2"),[c,d]=Mc([],"scannedItemsState_asset_v3"),[h,p]=Mc([],"brokenItemsState_asset_v3"),[g,x]=Mc("incoming","transactionTypeState_asset_v2"),[y,b]=L.useState(!1),[S,T]=L.useState(""),[N,C]=L.useState(""),[I,F]=Mc("","driverName_asset_v1"),[D,A]=L.useState(""),[_,k]=L.useState(""),[O,P]=L.useState(!1),[W,K]=L.useState(!1),[q,V]=L.useState(null),[X,Q]=L.useState("move_to_broken"),[Y,j]=L.useState(""),[J,M]=Mc([],"correctionsLog_v1"),z=L.useRef(null),G=L.useRef(null);L.useEffect(()=>{var ne;O&&((ne=z.current)==null||ne.focus())},[O]),L.useEffect(()=>{W&&X==="replace"&&setTimeout(()=>{var ne;return(ne=G.current)==null?void 0:ne.focus()},100)},[W,X]);const U=(ne,Ae)=>{V({barcode:ne,currentStatus:Ae}),Q(Ae==="ok"?"move_to_broken":"move_to_ok"),K(!0)},se=()=>{if(!q)return;const{barcode:ne,currentStatus:Ae}=q;switch(X){case"replace":{const Me=Y.trim();if(!Me){Dt.error("   .");return}if(c.some(Ge=>Ge.barcode===Me)||h.some(Ge=>Ge.barcode===Me)){Dt.error("    .");return}if(Me===ne){Dt.error("   .");return}const ot={barcode:Me,scannedAt:new Date().toISOString()},st=(Ae==="ok"?c:h).find(Ge=>Ge.barcode===ne)||{barcode:ne,scannedAt:new Date().toISOString()};Ae==="ok"?d(Ge=>Ge.filter(at=>at.barcode!==ne)):p(Ge=>Ge.filter(at=>at.barcode!==ne)),p(Ge=>{const at=Ge.filter(Qt=>Qt.barcode!==ne);return[st,...at]}),Ae==="ok"?d(Ge=>[ot,...Ge]):p(Ge=>[ot,...Ge.filter(at=>at.barcode!==ne)]),M(Ge=>[...Ge,{oldBarcode:ne,newBarcode:Me,reason:"replacement",timestamp:new Date}]),Dt.success(` ${ne}    -${Me}.`);break}case"move_to_broken":{const Me=c.find(Ve=>Ve.barcode===ne);Me&&(d(Ve=>Ve.filter(ot=>ot.barcode!==ne)),p(Ve=>[Me,...Ve])),M(Ve=>[...Ve,{oldBarcode:ne,newBarcode:null,reason:"marked_as_broken",timestamp:new Date}]),Dt.success(` ${ne}  .`);break}case"move_to_ok":{const Me=h.find(Ve=>Ve.barcode===ne);Me&&(p(Ve=>Ve.filter(ot=>ot.barcode!==ne)),d(Ve=>[Me,...Ve])),M(Ve=>[...Ve,{oldBarcode:ne,newBarcode:null,reason:"marked_as_ok",timestamp:new Date}]),Dt.success(` ${ne}  .`);break}default:{Dt.error("  .");return}}K(!1),V(null),j("")},pe=()=>{const ne=S.trim();if(!ne)return;if(c.some(Me=>Me.barcode===ne)||h.some(Me=>Me.barcode===ne))Dt.error("   .");else{Dt.success("  !");const Me={barcode:ne,scannedAt:new Date().toISOString()};d(Ve=>[Me,...Ve]),navigator.vibrate&&navigator.vibrate(100)}T("")},me=()=>{const ne=N.trim();if(!ne)return;if(c.some(Me=>Me.barcode===ne)||h.some(Me=>Me.barcode===ne))Dt.error("   .");else{Dt.success("  !");const Me={barcode:ne,scannedAt:new Date().toISOString()};p(Ve=>[Me,...Ve]),navigator.vibrate&&navigator.vibrate(100)}C("")},be=(ne,Ae)=>i(Me=>({...Me,[ne]:Math.max(0,(Number(Me[ne])||0)+Ae)})),ge=ne=>{d(Ae=>Ae.filter(Me=>Me.barcode!==ne)),Dt.success("  ")},ke=ne=>{p(Ae=>Ae.filter(Me=>Me.barcode!==ne)),Dt.success("  ")},Le=(ne=!0)=>{var Ae;i({largeCoolers:0,smallCoolers:0}),l(""),d([]),p([]),t(""),F(""),T(""),C(""),M([]),A(""),k(""),ne?P(!1):(Ae=z.current)==null||Ae.focus()},rt=()=>{if(!r){s(!0),Dt("   ."),setTimeout(()=>s(!1),3e3);return}Le(!1),Dt(" !"),s(!1)},Be=async()=>{if(!n||!n.username){Dt.error(":      .");return}const ne=o==="   ..."?D.trim():o.trim(),Ae=I==="   ..."?_.trim():I.trim();if(!ne||ne==="None"){Dt.error("     .");return}if(!Ae){Dt.error("     .");return}const Me=c.length>0||h.length>0,Ve=Object.values(a).some(Ge=>Number(Ge)>0);if(!Me&&!Ve){Dt.error("     .");return}b(!0);const ot=[];c.length>0&&ot.push(fetch(`${h0}/api/assets/scan`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assets:c,transactionType:g,username:n.username,vehicleNumber:ne,actualDriverName:Ae,notes:e})}).then(Ge=>{if(!Ge.ok)throw new Error("   ");return Ge.json()})),h.length>0&&h.forEach(Ge=>ot.push(fetch(`${h0}/api/assets/${Ge.barcode}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Broken",notes:`  " ${n.username}  ${ne}`,scannedAt:Ge.scannedAt})}).then(at=>{if(!at.ok)throw new Error(`   : ${Ge.barcode}`);return at.json()})));const st=J.filter(Ge=>Ge.reason==="replacement");st.length>0&&st.forEach(Ge=>ot.push(fetch(`${h0}/api/assets/${Ge.oldBarcode}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Broken",notes:`  ${Ge.newBarcode} " ${n.username}  ${ne}`})}).then(at=>{if(!at.ok)throw new Error(`    : ${Ge.oldBarcode}`);return at.json()}))),Ve&&ot.push(fetch(`${h0}/api/quantitatives/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionType:g,driverName:Ae,scannedBy:n.username,vehicleNumber:ne,largeCoolers:Number(a.largeCoolers)||0,smallCoolers:Number(a.smallCoolers)||0,notes:e})}).then(Ge=>{if(!Ge.ok)throw new Error(" / ");return Ge.json()})),J.length>0&&ot.push(fetch(`${h0}/api/inventoryNew/log-corrections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({corrections:J,username:n.username,vehicleNumber:ne,driverName:Ae})}).then(Ge=>{if(!Ge.ok)throw new Error("   ");return Ge.json()}));try{await Dt.promise(Promise.all(ot),{loading:" ...",success:"  !",error:Ge=>`  : ${Ge.message}`}),Le(!0)}catch(Ge){console.error("Submit error:",Ge)}finally{b(!1)}},Ze=y||o!=="   ..."&&(!o.trim()||o==="None")||o==="   ..."&&!D.trim()||I!=="   ..."&&!I.trim()||I==="   ..."&&!_.trim(),He=ne=>{x(ne),P(!0)};return w.jsxs(w.Fragment,{children:[w.jsx(Jl,{user:n}),w.jsx(xu,{user:n}),w.jsx("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:w.jsx("main",{className:"flex-1 p-4 sm:p-6",children:w.jsxs("div",{className:"max-w-md mx-auto",children:[w.jsx(Wg,{position:"bottom-center"}),O?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"mb-6",children:w.jsxs("div",{className:`flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border-l-4 ${g==="incoming"?"border-green-500":"border-red-500"}`,children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-500",children:" :"}),w.jsx("p",{className:`font-bold ${g==="incoming"?"text-green-600":"text-red-600"}`,children:g==="incoming"?" ":" "})]}),w.jsxs("button",{onClick:()=>P(!1),className:"flex items-center gap-1.5 text-sm text-blue-600 hover:text-blue-800 font-semibold",children:[w.jsx(s6,{className:"w-4 h-4"}),"  "]})]})}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"vehicleNumber",className:"flex items-center text-sm font-medium text-gray-700 mb-1 gap-2",children:[w.jsx(qh,{className:"w-4 h-4 text-gray-400"}),"  "]}),w.jsxs("select",{id:"vehicleNumber",value:o,onChange:ne=>l(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[w.jsx("option",{value:"",disabled:!0,children:" ..."}),eie.map(ne=>w.jsx("option",{value:ne,children:ne},ne))]}),o==="   ..."&&w.jsx("input",{type:"text",value:D,onChange:ne=>A(ne.target.value),placeholder:"   ",className:"w-full px-3 py-2 mt-2 border border-gray-300 rounded-md shadow-sm",autoFocus:!0})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"driverName",className:"flex items-center text-sm font-medium text-gray-700 mb-1 gap-2",children:[w.jsx(Vl,{className:"w-4 h-4 text-gray-400"}),"  "]}),w.jsxs("select",{id:"driverName",value:I,onChange:ne=>F(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[w.jsx("option",{value:"",disabled:!0,children:" ..."}),tie.map(ne=>w.jsx("option",{value:ne,children:ne},ne))]}),I==="   ..."&&w.jsx("input",{type:"text",value:_,onChange:ne=>k(ne.target.value),placeholder:"   ",className:"w-full px-3 py-2 mt-2 border border-gray-300 rounded-md shadow-sm",autoFocus:!0})]})]}),w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-4",children:[w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"barcode-adder-good",className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[w.jsx(XB,{className:"w-5 h-5 text-green-500"}),"   "]}),w.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),pe()},className:"flex items-center gap-2",children:[w.jsx(dv,{className:"text-gray-400"}),w.jsx("input",{id:"barcode-adder-good",ref:z,type:"text",value:S,onChange:ne=>T(ne.target.value),placeholder:"   ...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-md",autoCorrect:"off",autoCapitalize:"none"})]})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"barcode-adder-broken",className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[w.jsx(Ug,{className:"w-5 h-5 text-red-500"}),"   "]}),w.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),me()},className:"flex items-center gap-2",children:[w.jsx(dv,{className:"text-gray-400"}),w.jsx("input",{id:"barcode-adder-broken",type:"text",value:N,onChange:ne=>C(ne.target.value),placeholder:"   ...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-md",autoCorrect:"off",autoCapitalize:"none"})]})]})]}),(c.length>0||h.length>0)&&w.jsxs("div",{className:"space-y-4",children:[c.length>0&&w.jsxs("div",{children:[w.jsxs("h4",{className:"text-xs font-semibold text-gray-500 my-2 uppercase",children:[" (",c.length,")"]}),w.jsx("ul",{className:"border rounded-md max-h-36 overflow-y-auto bg-white",children:c.map(ne=>w.jsxs("li",{className:"p-2 flex justify-between items-center text-sm border-b last:border-b-0",children:[w.jsx("span",{className:"font-mono text-gray-800",children:ne.barcode}),w.jsxs("div",{children:[w.jsx("button",{onClick:()=>U(ne.barcode,"ok"),className:"p-1 text-gray-400 hover:text-blue-500 rounded-full",children:w.jsx(kh,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>ge(ne.barcode),className:"p-1 text-gray-400 hover:text-red-500 rounded-full",children:w.jsx(Zc,{className:"w-4 h-4"})})]})]},ne.barcode))})]}),h.length>0&&w.jsxs("div",{children:[w.jsxs("h4",{className:"text-xs font-semibold text-gray-500 my-2 uppercase",children:[" (",h.length,")"]}),w.jsx("ul",{className:"border border-red-200 rounded-md max-h-36 overflow-y-auto bg-white",children:h.map(ne=>w.jsxs("li",{className:"p-2 flex justify-between items-center text-sm border-b last:border-b-0",children:[w.jsx("span",{className:"font-mono text-gray-800",children:ne.barcode}),w.jsxs("div",{children:[w.jsx("button",{onClick:()=>U(ne.barcode,"broken"),className:"p-1 text-gray-400 hover:text-blue-500 rounded-full",children:w.jsx(kh,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>ke(ne.barcode),className:"p-1 text-gray-400 hover:text-red-500 rounded-full",children:w.jsx(Zc,{className:"w-4 h-4"})})]})]},ne.barcode))})]})]}),w.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:nie.map(ne=>w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ne.icon," ",w.jsx("h3",{className:"font-semibold text-gray-800",children:ne.name})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("button",{onClick:()=>be(ne.id,1),className:"px-4 h-12 border border-r-0 rounded-r-md bg-gray-50 hover:bg-gray-100",children:w.jsx(__,{className:"w-4 h-4"})}),w.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",min:"0",value:a[ne.id],onChange:Ae=>i(Me=>({...Me,[ne.id]:Ae.target.value})),className:"w-full h-12 border-t border-b text-center text-xl font-bold focus:outline-none"}),w.jsx("button",{onClick:()=>be(ne.id,-1),disabled:a[ne.id]<=0,className:"px-4 h-12 border border-l-0 rounded-l-md bg-gray-50 hover:bg-gray-100 disabled:opacity-50",children:w.jsx(t6,{className:"w-4 h-4"})})]})]},ne.id))}),w.jsxs("div",{className:"pt-4 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[w.jsxs("button",{onClick:rt,disabled:y,className:`w-full flex items-center justify-center gap-2 py-3 text-sm font-semibold rounded-lg transition-all disabled:opacity-50 ${r?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[w.jsx(i6,{className:"w-4 h-4"})," ",r?"  ":" "]}),w.jsxs("button",{onClick:Be,disabled:Ze,className:`w-full flex items-center justify-center gap-2 py-3 text-sm font-semibold rounded-lg transition-all sm:col-span-2 ${Ze?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 shadow-sm"}`,children:[w.jsx(Lw,{className:"w-4 h-4"})," ",y?"...":""]})]})]})]}):w.jsx("div",{className:"fixed inset-0 bg-gray-100 flex items-center justify-center z-40 p-4",children:w.jsxs("div",{className:"w-full max-w-sm text-center",children:[w.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:[", ",(n==null?void 0:n.fullName)||(n==null?void 0:n.username)]}),w.jsx("p",{className:"text-gray-600 mb-8",children:"     ."}),w.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[w.jsxs("button",{onClick:()=>He("incoming"),className:"w-full flex items-center justify-center gap-3 py-4 px-6 text-lg font-semibold rounded-lg bg-green-600 text-white hover:bg-green-700 shadow-sm transition-transform transform hover:scale-105",children:[w.jsx(E_,{}),"   "]}),w.jsxs("button",{onClick:()=>He("outgoing"),className:"w-full flex items-center justify-center gap-3 py-4 px-6 text-lg font-semibold rounded-lg bg-red-600 text-white hover:bg-red-700 shadow-sm transition-transform transform hover:scale-105",children:[w.jsx(k_,{}),"   "]})]})]})}),W&&q&&w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",dir:"rtl",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm m-4",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h3",{className:"text-lg font-bold",children:" /  "}),w.jsx("button",{onClick:()=>{K(!1),j("")},children:w.jsx(Fw,{className:"text-gray-400 hover:text-gray-600"})})]}),w.jsxs("p",{className:"mb-4",children:[" :"," ",w.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:q.barcode})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:" :"}),w.jsxs("select",{value:X,onChange:ne=>Q(ne.target.value),className:"w-full p-2 border rounded-md mt-1",children:[q.currentStatus==="ok"&&w.jsx("option",{value:"move_to_broken",children:"  "}),q.currentStatus==="broken"&&w.jsx("option",{value:"move_to_ok",children:"  "}),w.jsx("option",{value:"replace",children:"  "})]})]}),X==="replace"&&w.jsxs("div",{children:[w.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[w.jsx(a6,{className:"w-4 h-4 text-blue-500"}),"   "]}),w.jsx("form",{onSubmit:ne=>{ne.preventDefault(),se()},children:w.jsx("input",{ref:G,type:"text",value:Y,onChange:ne=>j(ne.target.value),placeholder:"  ...",className:"w-full p-2 border rounded-md mt-1 font-mono",autoCorrect:"off",autoCapitalize:"none"})})]})]}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>{K(!1),j("")},className:"px-4 py-2 text-sm font-semibold bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:""}),w.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-semibold bg-blue-600 text-white rounded-md hover:bg-blue-700",children:""})]})]})})]})})})]})}function sie(){return w.jsxs("div",{className:"min-h-screen bg-white p-10",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:" IT Support Tickets"}),w.jsx("p",{className:"text-gray-600",children:"Submit or track IT support requests."})]})}const aie="https://172.20.0.49:3000";function iie(){const[n,e]=L.useState(""),[t,r]=L.useState(""),s=kP(),a=async()=>{try{const i=await fetch(`${aie}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:t}),credentials:"include"}),o=await i.json();if(!i.ok){alert(o.message||"Login failed");return}const l=o.user,c=typeof l._id=="object"?l._id.$oid:l._id,d={...l,_id:c};if(localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(d)),o.needsPasswordChange){s(`/change-password/${c}`);return}s("/")}catch(i){console.error("Login error:",i),alert("Server error")}};return w.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:w.jsxs("div",{className:"bg-white p-8 rounded shadow-md w-96",children:[w.jsx("h2",{className:"text-xl font-bold mb-4",children:"Login"}),w.jsx("input",{type:"text",placeholder:"Username",className:"w-full border p-2 mb-3 rounded",value:n,onChange:i=>e(i.target.value)}),w.jsx("input",{type:"password",placeholder:"Password",className:"w-full border p-2 mb-4 rounded",value:t,onChange:i=>r(i.target.value)}),w.jsx("button",{onClick:a,className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800",children:"Login"})]})})}function _F({children:n,className:e="",onClick:t}){return w.jsx("button",{onClick:t,className:`rounded-md px-4 py-2 font-semibold ${e}`,children:n})}var Pb={exports:{}},oie=Pb.exports,IF;function lie(){return IF||(IF=1,function(n,e){(function(t,r){r()})(oie,function(){function t(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,h){var p=new XMLHttpRequest;p.open("GET",c),p.responseType="blob",p.onload=function(){l(p.response,d,h)},p.onerror=function(){console.error("could not download file")},p.send()}function s(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function a(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hy=="object"&&Hy.global===Hy?Hy:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(c,d,h){var p=i.URL||i.webkitURL,g=document.createElement("a");d=d||c.name||"download",g.download=d,g.rel="noopener",typeof c=="string"?(g.href=c,g.origin===location.origin?a(g):s(g.href)?r(c,d,h):a(g,g.target="_blank")):(g.href=p.createObjectURL(c),setTimeout(function(){p.revokeObjectURL(g.href)},4e4),setTimeout(function(){a(g)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,h){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),d);else if(s(c))r(c,d,h);else{var p=document.createElement("a");p.href=c,p.target="_blank",setTimeout(function(){a(p)})}}:function(c,d,h,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,h);var g=c.type==="application/octet-stream",x=/constructor/i.test(i.HTMLElement)||i.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||g&&x||o)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var N=b.result;N=y?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=N:location=N,p=null},b.readAsDataURL(c)}else{var S=i.URL||i.webkitURL,T=S.createObjectURL(c);p?p.location=T:location.href=T,p=null,setTimeout(function(){S.revokeObjectURL(T)},4e4)}});i.saveAs=l.saveAs=l,n.exports=l})}(Pb)),Pb.exports}var h6=lie(),Bb={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var cie=Bb.exports,AF;function uie(){return AF||(AF=1,function(n,e){((t,r)=>{n.exports=r()})(cie,function t(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,a=!r.document&&!!r.postMessage,i=r.IS_PAPA_WORKER||!1,o={},l=0,c={};function d(A){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var k=I(_);k.chunkSize=parseInt(k.chunkSize),_.step||_.chunk||(k.chunkSize=null),this._handle=new y(k),(this._handle.streamer=this)._config=k}).call(this,A),this.parseChunk=function(_,k){var O=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<O){let W=this._config.newline;W||(P=this._config.quoteChar||'"',W=this._handle.guessLineEndings(_,P)),_=[..._.split(W).slice(O)].join(W)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(P=this._config.beforeFirstChunk(_))!==void 0&&(_=P),this.isFirstChunk=!1,this._halted=!1;var O=this._partialLine+_,P=(this._partialLine="",this._handle.parse(O,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=P.meta.cursor,O=(this._finished||(this._partialLine=O.substring(_-this._baseIndex),this._baseIndex=_),P&&P.data&&(this._rowCount+=P.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)r.postMessage({results:P,workerId:c.WORKER_ID,finished:O});else if(D(this._config.chunk)&&!k){if(this._config.chunk(P,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=P=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(P.data),this._completeResults.errors=this._completeResults.errors.concat(P.errors),this._completeResults.meta=P.meta),this._completed||!O||!D(this._config.complete)||P&&P.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),O||P&&P.meta.paused||this._nextChunk(),P}this._halted=!0},this._sendError=function(_){D(this._config.error)?this._config.error(_):i&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:_,finished:!1})}}function h(A){var _;(A=A||{}).chunkSize||(A.chunkSize=c.RemoteChunkSize),d.call(this,A),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),a||(_.onload=F(this._chunkLoaded,this),_.onerror=F(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var k,O=this._config.downloadRequestHeaders;for(k in O)_.setRequestHeader(k,O[k])}var P;this._config.chunkSize&&(P=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+P));try{_.send(this._config.downloadRequestBody)}catch(W){this._chunkError(W.message)}a&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(k=>(k=k.getResponseHeader("Content-Range"))!==null?parseInt(k.substring(k.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(k){k=_.statusText||k,this._sendError(new Error(k))}}function p(A){(A=A||{}).chunkSize||(A.chunkSize=c.LocalChunkSize),d.call(this,A);var _,k,O=typeof FileReader<"u";this.stream=function(P){this._input=P,k=P.slice||P.webkitSlice||P.mozSlice,O?((_=new FileReader).onload=F(this._chunkLoaded,this),_.onerror=F(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var P=this._input,W=(this._config.chunkSize&&(W=Math.min(this._start+this._config.chunkSize,this._input.size),P=k.call(P,this._start,W)),_.readAsText(P,this._config.encoding));O||this._chunkLoaded({target:{result:W}})},this._chunkLoaded=function(P){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(P.target.result)},this._chunkError=function(){this._sendError(_.error)}}function g(A){var _;d.call(this,A=A||{}),this.stream=function(k){return _=k,this._nextChunk()},this._nextChunk=function(){var k,O;if(!this._finished)return k=this._config.chunkSize,_=k?(O=_.substring(0,k),_.substring(k)):(O=_,""),this._finished=!_,this.parseChunk(O)}}function x(A){d.call(this,A=A||{});var _=[],k=!0,O=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(P){this._input=P,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):k=!0},this._streamData=F(function(P){try{_.push(typeof P=="string"?P:P.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(W){this._streamError(W)}},this),this._streamError=F(function(P){this._streamCleanUp(),this._sendError(P)},this),this._streamEnd=F(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(A){var _,k,O,P,W=Math.pow(2,53),K=-W,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,X=this,Q=0,Y=0,j=!1,J=!1,M=[],z={data:[],errors:[],meta:{}};function G(me){return A.skipEmptyLines==="greedy"?me.join("").trim()==="":me.length===1&&me[0].length===0}function U(){if(z&&O&&(pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),O=!1),A.skipEmptyLines&&(z.data=z.data.filter(function(Le){return!G(Le)})),se()){let Le=function(rt,Be){D(A.transformHeader)&&(rt=A.transformHeader(rt,Be)),M.push(rt)};var ke=Le;if(z)if(Array.isArray(z.data[0])){for(var me=0;se()&&me<z.data.length;me++)z.data[me].forEach(Le);z.data.splice(0,1)}else z.data.forEach(Le)}function be(Le,rt){for(var Be=A.header?{}:[],Ze=0;Ze<Le.length;Ze++){var He=Ze,ne=Le[Ze],ne=((Ae,Me)=>(Ve=>(A.dynamicTypingFunction&&A.dynamicTyping[Ve]===void 0&&(A.dynamicTyping[Ve]=A.dynamicTypingFunction(Ve)),(A.dynamicTyping[Ve]||A.dynamicTyping)===!0))(Ae)?Me==="true"||Me==="TRUE"||Me!=="false"&&Me!=="FALSE"&&((Ve=>{if(q.test(Ve)&&(Ve=parseFloat(Ve),K<Ve&&Ve<W))return 1})(Me)?parseFloat(Me):V.test(Me)?new Date(Me):Me===""?null:Me):Me)(He=A.header?Ze>=M.length?"__parsed_extra":M[Ze]:He,ne=A.transform?A.transform(ne,He):ne);He==="__parsed_extra"?(Be[He]=Be[He]||[],Be[He].push(ne)):Be[He]=ne}return A.header&&(Ze>M.length?pe("FieldMismatch","TooManyFields","Too many fields: expected "+M.length+" fields but parsed "+Ze,Y+rt):Ze<M.length&&pe("FieldMismatch","TooFewFields","Too few fields: expected "+M.length+" fields but parsed "+Ze,Y+rt)),Be}var ge;z&&(A.header||A.dynamicTyping||A.transform)&&(ge=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(be),ge=z.data.length):z.data=be(z.data,0),A.header&&z.meta&&(z.meta.fields=M),Y+=ge)}function se(){return A.header&&M.length===0}function pe(me,be,ge,ke){me={type:me,code:be,message:ge},ke!==void 0&&(me.row=ke),z.errors.push(me)}D(A.step)&&(P=A.step,A.step=function(me){z=me,se()?U():(U(),z.data.length!==0&&(Q+=me.data.length,A.preview&&Q>A.preview?k.abort():(z.data=z.data[0],P(z,X))))}),this.parse=function(me,be,ge){var ke=A.quoteChar||'"',ke=(A.newline||(A.newline=this.guessLineEndings(me,ke)),O=!1,A.delimiter?D(A.delimiter)&&(A.delimiter=A.delimiter(me),z.meta.delimiter=A.delimiter):((ke=((Le,rt,Be,Ze,He)=>{var ne,Ae,Me,Ve;He=He||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ot=0;ot<He.length;ot++){for(var st,Ge=He[ot],at=0,Qt=0,Vt=0,Mt=(Me=void 0,new S({comments:Ze,delimiter:Ge,newline:rt,preview:10}).parse(Le)),Ut=0;Ut<Mt.data.length;Ut++)Be&&G(Mt.data[Ut])?Vt++:(st=Mt.data[Ut].length,Qt+=st,Me===void 0?Me=st:0<st&&(at+=Math.abs(st-Me),Me=st));0<Mt.data.length&&(Qt/=Mt.data.length-Vt),(Ae===void 0||at<=Ae)&&(Ve===void 0||Ve<Qt)&&1.99<Qt&&(Ae=at,ne=Ge,Ve=Qt)}return{successful:!!(A.delimiter=ne),bestDelimiter:ne}})(me,A.newline,A.skipEmptyLines,A.comments,A.delimitersToGuess)).successful?A.delimiter=ke.bestDelimiter:(O=!0,A.delimiter=c.DefaultDelimiter),z.meta.delimiter=A.delimiter),I(A));return A.preview&&A.header&&ke.preview++,_=me,k=new S(ke),z=k.parse(_,be,ge),U(),j?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return j},this.pause=function(){j=!0,k.abort(),_=D(A.chunk)?"":_.substring(k.getCharIndex())},this.resume=function(){X.streamer._halted?(j=!1,X.streamer.parseChunk(_,!0)):setTimeout(X.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,k.abort(),z.meta.aborted=!0,D(A.complete)&&A.complete(z),_=""},this.guessLineEndings=function(Le,ke){Le=Le.substring(0,1048576);var ke=new RegExp(b(ke)+"([^]*?)"+b(ke),"gm"),ge=(Le=Le.replace(ke,"")).split("\r"),ke=Le.split(`
`),Le=1<ke.length&&ke[0].length<ge[0].length;if(ge.length===1||Le)return`
`;for(var rt=0,Be=0;Be<ge.length;Be++)ge[Be][0]===`
`&&rt++;return rt>=ge.length/2?`\r
`:"\r"}}function b(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(A){var _=(A=A||{}).delimiter,k=A.newline,O=A.comments,P=A.step,W=A.preview,K=A.fastMode,q=null,V=!1,X=A.quoteChar==null?'"':A.quoteChar,Q=X;if(A.escapeChar!==void 0&&(Q=A.escapeChar),(typeof _!="string"||-1<c.BAD_DELIMITERS.indexOf(_))&&(_=","),O===_)throw new Error("Comment character same as delimiter");O===!0?O="#":(typeof O!="string"||-1<c.BAD_DELIMITERS.indexOf(O))&&(O=!1),k!==`
`&&k!=="\r"&&k!==`\r
`&&(k=`
`);var Y=0,j=!1;this.parse=function(J,M,z){if(typeof J!="string")throw new Error("Input must be a string");var G=J.length,U=_.length,se=k.length,pe=O.length,me=D(P),be=[],ge=[],ke=[],Le=Y=0;if(!J)return at();if(K||K!==!1&&J.indexOf(X)===-1){for(var rt=J.split(k),Be=0;Be<rt.length;Be++){if(ke=rt[Be],Y+=ke.length,Be!==rt.length-1)Y+=k.length;else if(z)return at();if(!O||ke.substring(0,pe)!==O){if(me){if(be=[],Ve(ke.split(_)),Qt(),j)return at()}else Ve(ke.split(_));if(W&&W<=Be)return be=be.slice(0,W),at(!0)}}return at()}for(var Ze=J.indexOf(_,Y),He=J.indexOf(k,Y),ne=new RegExp(b(Q)+b(X),"g"),Ae=J.indexOf(X,Y);;)if(J[Y]===X)for(Ae=Y,Y++;;){if((Ae=J.indexOf(X,Ae+1))===-1)return z||ge.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:be.length,index:Y}),st();if(Ae===G-1)return st(J.substring(Y,Ae).replace(ne,X));if(X===Q&&J[Ae+1]===Q)Ae++;else if(X===Q||Ae===0||J[Ae-1]!==Q){Ze!==-1&&Ze<Ae+1&&(Ze=J.indexOf(_,Ae+1));var Me=ot((He=He!==-1&&He<Ae+1?J.indexOf(k,Ae+1):He)===-1?Ze:Math.min(Ze,He));if(J.substr(Ae+1+Me,U)===_){ke.push(J.substring(Y,Ae).replace(ne,X)),J[Y=Ae+1+Me+U]!==X&&(Ae=J.indexOf(X,Y)),Ze=J.indexOf(_,Y),He=J.indexOf(k,Y);break}if(Me=ot(He),J.substring(Ae+1+Me,Ae+1+Me+se)===k){if(ke.push(J.substring(Y,Ae).replace(ne,X)),Ge(Ae+1+Me+se),Ze=J.indexOf(_,Y),Ae=J.indexOf(X,Y),me&&(Qt(),j))return at();if(W&&be.length>=W)return at(!0);break}ge.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:be.length,index:Y}),Ae++}}else if(O&&ke.length===0&&J.substring(Y,Y+pe)===O){if(He===-1)return at();Y=He+se,He=J.indexOf(k,Y),Ze=J.indexOf(_,Y)}else if(Ze!==-1&&(Ze<He||He===-1))ke.push(J.substring(Y,Ze)),Y=Ze+U,Ze=J.indexOf(_,Y);else{if(He===-1)break;if(ke.push(J.substring(Y,He)),Ge(He+se),me&&(Qt(),j))return at();if(W&&be.length>=W)return at(!0)}return st();function Ve(Vt){be.push(Vt),Le=Y}function ot(Vt){var Mt=0;return Mt=Vt!==-1&&(Vt=J.substring(Ae+1,Vt))&&Vt.trim()===""?Vt.length:Mt}function st(Vt){return z||(Vt===void 0&&(Vt=J.substring(Y)),ke.push(Vt),Y=G,Ve(ke),me&&Qt()),at()}function Ge(Vt){Y=Vt,Ve(ke),ke=[],He=J.indexOf(k,Y)}function at(Vt){if(A.header&&!M&&be.length&&!V){var Mt=be[0],Ut=Object.create(null),we=new Set(Mt);let kt=!1;for(let lt=0;lt<Mt.length;lt++){let Xe=Mt[lt];if(Ut[Xe=D(A.transformHeader)?A.transformHeader(Xe,lt):Xe]){let pt,Xt=Ut[Xe];for(;pt=Xe+"_"+Xt,Xt++,we.has(pt););we.add(pt),Mt[lt]=pt,Ut[Xe]++,kt=!0,(q=q===null?{}:q)[pt]=Xe}else Ut[Xe]=1,Mt[lt]=Xe;we.add(Xe)}kt&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:be,errors:ge,meta:{delimiter:_,linebreak:k,aborted:j,truncated:!!Vt,cursor:Le+(M||0),renamedHeaders:q}}}function Qt(){P(at()),be=[],ge=[]}},this.abort=function(){j=!0},this.getCharIndex=function(){return Y}}function T(A){var _=A.data,k=o[_.workerId],O=!1;if(_.error)k.userError(_.error,_.file);else if(_.results&&_.results.data){var P={abort:function(){O=!0,N(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(D(k.userStep)){for(var W=0;W<_.results.data.length&&(k.userStep({data:_.results.data[W],errors:_.results.errors,meta:_.results.meta},P),!O);W++);delete _.results}else D(k.userChunk)&&(k.userChunk(_.results,P,_.file),delete _.results)}_.finished&&!O&&N(_.workerId,_.results)}function N(A,_){var k=o[A];D(k.userComplete)&&k.userComplete(_),k.terminate(),delete o[A]}function C(){throw new Error("Not implemented.")}function I(A){if(typeof A!="object"||A===null)return A;var _,k=Array.isArray(A)?[]:{};for(_ in A)k[_]=I(A[_]);return k}function F(A,_){return function(){A.apply(_,arguments)}}function D(A){return typeof A=="function"}return c.parse=function(A,_){var k=(_=_||{}).dynamicTyping||!1;if(D(k)&&(_.dynamicTypingFunction=k,k={}),_.dynamicTyping=k,_.transform=!!D(_.transform)&&_.transform,!_.worker||!c.WORKERS_SUPPORTED)return k=null,c.NODE_STREAM_INPUT,typeof A=="string"?(A=(O=>O.charCodeAt(0)!==65279?O:O.slice(1))(A),k=new(_.download?h:g)(_)):A.readable===!0&&D(A.read)&&D(A.on)?k=new x(_):(r.File&&A instanceof File||A instanceof Object)&&(k=new p(_)),k.stream(A);(k=(()=>{var O;return!!c.WORKERS_SUPPORTED&&(O=(()=>{var P=r.URL||r.webkitURL||null,W=t.toString();return c.BLOB_URL||(c.BLOB_URL=P.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))})(),(O=new r.Worker(O)).onmessage=T,O.id=l++,o[O.id]=O)})()).userStep=_.step,k.userChunk=_.chunk,k.userComplete=_.complete,k.userError=_.error,_.step=D(_.step),_.chunk=D(_.chunk),_.complete=D(_.complete),_.error=D(_.error),delete _.worker,k.postMessage({input:A,config:_,workerId:k.id})},c.unparse=function(A,_){var k=!1,O=!0,P=",",W=`\r
`,K='"',q=K+K,V=!1,X=null,Q=!1,Y=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||c.BAD_DELIMITERS.filter(function(M){return _.delimiter.indexOf(M)!==-1}).length||(P=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(k=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(V=_.skipEmptyLines),typeof _.newline=="string"&&(W=_.newline),typeof _.quoteChar=="string"&&(K=_.quoteChar),typeof _.header=="boolean"&&(O=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");X=_.columns}_.escapeChar!==void 0&&(q=_.escapeChar+K),_.escapeFormulae instanceof RegExp?Q=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(b(K),"g"));if(typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(A)){if(!A.length||Array.isArray(A[0]))return j(null,A,V);if(typeof A[0]=="object")return j(X||Object.keys(A[0]),A,V)}else if(typeof A=="object")return typeof A.data=="string"&&(A.data=JSON.parse(A.data)),Array.isArray(A.data)&&(A.fields||(A.fields=A.meta&&A.meta.fields||X),A.fields||(A.fields=Array.isArray(A.data[0])?A.fields:typeof A.data[0]=="object"?Object.keys(A.data[0]):[]),Array.isArray(A.data[0])||typeof A.data[0]=="object"||(A.data=[A.data])),j(A.fields||[],A.data||[],V);throw new Error("Unable to serialize unrecognized input");function j(M,z,G){var U="",se=(typeof M=="string"&&(M=JSON.parse(M)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(M)&&0<M.length),pe=!Array.isArray(z[0]);if(se&&O){for(var me=0;me<M.length;me++)0<me&&(U+=P),U+=J(M[me],me);0<z.length&&(U+=W)}for(var be=0;be<z.length;be++){var ge=(se?M:z[be]).length,ke=!1,Le=se?Object.keys(z[be]).length===0:z[be].length===0;if(G&&!se&&(ke=G==="greedy"?z[be].join("").trim()==="":z[be].length===1&&z[be][0].length===0),G==="greedy"&&se){for(var rt=[],Be=0;Be<ge;Be++){var Ze=pe?M[Be]:Be;rt.push(z[be][Ze])}ke=rt.join("").trim()===""}if(!ke){for(var He=0;He<ge;He++){0<He&&!Le&&(U+=P);var ne=se&&pe?M[He]:He;U+=J(z[be][ne],He)}be<z.length-1&&(!G||0<ge&&!Le)&&(U+=W)}}return U}function J(M,z){var G,U;return M==null?"":M.constructor===Date?JSON.stringify(M).slice(1,25):(U=!1,Q&&typeof M=="string"&&Q.test(M)&&(M="'"+M,U=!0),G=M.toString().replace(Y,q),(U=U||k===!0||typeof k=="function"&&k(M,z)||Array.isArray(k)&&k[z]||((se,pe)=>{for(var me=0;me<pe.length;me++)if(-1<se.indexOf(pe[me]))return!0;return!1})(G,c.BAD_DELIMITERS)||-1<G.indexOf(P)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?K+G+K:G)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!a&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=S,c.ParserHandle=y,c.NetworkStreamer=h,c.FileStreamer=p,c.StringStreamer=g,c.ReadableStreamStreamer=x,r.jQuery&&((s=r.jQuery).fn.parse=function(A){var _=A.config||{},k=[];return this.each(function(W){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)k.push({file:this.files[K],inputElem:this,instanceConfig:s.extend({},_)})}),O(),this;function O(){if(k.length===0)D(A.complete)&&A.complete();else{var W,K,q,V,X=k[0];if(D(A.before)){var Q=A.before(X.file,X.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return W="AbortError",K=X.file,q=X.inputElem,V=Q.reason,void(D(A.error)&&A.error({name:W},K,q,V));if(Q.action==="skip")return void P();typeof Q.config=="object"&&(X.instanceConfig=s.extend(X.instanceConfig,Q.config))}else if(Q==="skip")return void P()}var Y=X.instanceConfig.complete;X.instanceConfig.complete=function(j){D(Y)&&Y(j,X.file,X.inputElem),P()},c.parse(X.file,X.instanceConfig)}}function P(){k.splice(0,1),O()}}),i&&(r.onmessage=function(A){A=A.data,c.WORKER_ID===void 0&&A&&(c.WORKER_ID=A.workerId),typeof A.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(A.input,A.config),finished:!0}):(r.File&&A.input instanceof File||A.input instanceof Object)&&(A=c.parse(A.input,A.config))&&r.postMessage({workerId:c.WORKER_ID,results:A,finished:!0})}),(h.prototype=Object.create(d.prototype)).constructor=h,(p.prototype=Object.create(d.prototype)).constructor=p,(g.prototype=Object.create(g.prototype)).constructor=g,(x.prototype=Object.create(d.prototype)).constructor=x,c})}(Bb)),Bb.exports}var die=uie();const fie=Ig(die),hie=vn("MuiBox",["root"]),pie=fB(),p6=MY({themeId:Og,defaultTheme:pie,defaultClassName:hie.root,generateClassName:nB.generate});function mie(n){return $n("PrivateSwitchBase",n)}vn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const gie=n=>{const{classes:e,checked:t,disabled:r,edge:s}=n,a={root:["root",t&&"checked",r&&"disabled",s&&`edge${pn(s)}`],input:["input"]};return Rn(a,mie,e)},xie=At(_w,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),yie=At("input",{name:"MuiSwitchBase",shouldForwardProp:Bi})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),bie=L.forwardRef(function(e,t){const{autoFocus:r,checked:s,checkedIcon:a,defaultChecked:i,disabled:o,disableFocusRipple:l=!1,edge:c=!1,icon:d,id:h,inputProps:p,inputRef:g,name:x,onBlur:y,onChange:b,onFocus:S,readOnly:T,required:N=!1,tabIndex:C,type:I,value:F,slots:D={},slotProps:A={},..._}=e,[k,O]=IE({controlled:s,default:!!i,name:"SwitchBase",state:"checked"}),P=il(),W=U=>{S&&S(U),P&&P.onFocus&&P.onFocus(U)},K=U=>{y&&y(U),P&&P.onBlur&&P.onBlur(U)},q=U=>{if(U.nativeEvent.defaultPrevented)return;const se=U.target.checked;O(se),b&&b(U,se)};let V=o;P&&typeof V>"u"&&(V=P.disabled);const X=I==="checkbox"||I==="radio",Q={...e,checked:k,disabled:V,disableFocusRipple:l,edge:c},Y=gie(Q),j={slots:D,slotProps:{input:p,...A}},[J,M]=Yn("root",{ref:t,elementType:xie,className:Y.root,shouldForwardComponentProp:!0,externalForwardedProps:{...j,component:"span",..._},getSlotProps:U=>({...U,onFocus:se=>{var pe;(pe=U.onFocus)==null||pe.call(U,se),W(se)},onBlur:se=>{var pe;(pe=U.onBlur)==null||pe.call(U,se),K(se)}}),ownerState:Q,additionalProps:{centerRipple:!0,focusRipple:!l,disabled:V,role:void 0,tabIndex:null}}),[z,G]=Yn("input",{ref:g,elementType:yie,className:Y.input,externalForwardedProps:j,getSlotProps:U=>({...U,onChange:se=>{var pe;(pe=U.onChange)==null||pe.call(U,se),q(se)}}),ownerState:Q,additionalProps:{autoFocus:r,checked:s,defaultChecked:i,disabled:V,id:X?h:void 0,name:x,readOnly:T,required:N,tabIndex:C,type:I,...I==="checkbox"&&F===void 0?{}:{value:F}}});return w.jsxs(J,{...M,children:[w.jsx(z,{...G}),k?a:d]})});function vie(n){return $n("MuiFormControlLabel",n)}const C0=vn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),wie=n=>{const{classes:e,disabled:t,labelPlacement:r,error:s,required:a}=n,i={root:["root",t&&"disabled",`labelPlacement${pn(r)}`,s&&"error",a&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return Rn(i,vie,e)},Sie=At("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${C0.label}`]:e.label},e.root,e[`labelPlacement${pn(t.labelPlacement)}`]]}})(Zn(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${C0.disabled}`]:{cursor:"default"},[`& .${C0.label}`]:{[`&.${C0.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),Tie=At("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Zn(({theme:n})=>({[`&.${C0.error}`]:{color:(n.vars||n).palette.error.main}}))),m6=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiFormControlLabel"}),{checked:s,className:a,componentsProps:i={},control:o,disabled:l,disableTypography:c,inputRef:d,label:h,labelPlacement:p="end",name:g,onChange:x,required:y,slots:b={},slotProps:S={},value:T,...N}=r,C=il(),I=l??o.props.disabled??(C==null?void 0:C.disabled),F=y??o.props.required,D={disabled:I,required:F};["checked","name","onChange","value","inputRef"].forEach(q=>{typeof o.props[q]>"u"&&typeof r[q]<"u"&&(D[q]=r[q])});const A=mu({props:r,muiFormControl:C,states:["error"]}),_={...r,disabled:I,labelPlacement:p,required:F,error:A.error},k=wie(_),O={slots:b,slotProps:{...i,...S}},[P,W]=Yn("typography",{elementType:kE,externalForwardedProps:O,ownerState:_});let K=h;return K!=null&&K.type!==kE&&!c&&(K=w.jsx(P,{component:"span",...W,className:jt(k.label,W==null?void 0:W.className),children:K})),w.jsxs(Sie,{className:jt(k.root,a),ownerState:_,ref:t,...N,children:[L.cloneElement(o,D),F?w.jsxs("div",{children:[K,w.jsxs(Tie,{ownerState:_,"aria-hidden":!0,className:k.asterisk,children:["","*"]})]}):K]})});function Nie(n){return $n("MuiFormGroup",n)}vn("MuiFormGroup",["root","row","error"]);const Cie=n=>{const{classes:e,row:t,error:r}=n;return Rn({root:["root",t&&"row",r&&"error"]},Nie,e)},Eie=At("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),mv=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiFormGroup"}),{className:s,row:a=!1,...i}=r,o=il(),l=mu({props:r,muiFormControl:o,states:["error"]}),c={...r,row:a,error:l.error},d=Cie(c);return w.jsx(Eie,{className:jt(d.root,s),ownerState:c,ref:t,...i})});function kie(n){return $n("MuiSwitch",n)}const ca=vn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),_ie=n=>{const{classes:e,edge:t,size:r,color:s,checked:a,disabled:i}=n,o={root:["root",t&&`edge${pn(t)}`,`size${pn(r)}`],switchBase:["switchBase",`color${pn(s)}`,a&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Rn(o,kie,e);return{...e,...l}},Iie=At("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.edge&&e[`edge${pn(t.edge)}`],e[`size${pn(t.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${ca.thumb}`]:{width:16,height:16},[`& .${ca.switchBase}`]:{padding:4,[`&.${ca.checked}`]:{transform:"translateX(16px)"}}}}]}),Aie=At(bie,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.switchBase,{[`& .${ca.input}`]:e.input},t.color!=="default"&&e[`color${pn(t.color)}`]]}})(Zn(({theme:n})=>({position:"absolute",top:0,left:0,zIndex:1,color:n.vars?n.vars.palette.Switch.defaultColor:`${n.palette.mode==="light"?n.palette.common.white:n.palette.grey[300]}`,transition:n.transitions.create(["left","transform"],{duration:n.transitions.duration.shortest}),[`&.${ca.checked}`]:{transform:"translateX(20px)"},[`&.${ca.disabled}`]:{color:n.vars?n.vars.palette.Switch.defaultDisabledColor:`${n.palette.mode==="light"?n.palette.grey[100]:n.palette.grey[600]}`},[`&.${ca.checked} + .${ca.track}`]:{opacity:.5},[`&.${ca.disabled} + .${ca.track}`]:{opacity:n.vars?n.vars.opacity.switchTrackDisabled:`${n.palette.mode==="light"?.12:.2}`},[`& .${ca.input}`]:{left:"-100%",width:"300%"}})),Zn(({theme:n})=>({"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Rl(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(n.palette).filter(Gh(["light"])).map(([e])=>({props:{color:e},style:{[`&.${ca.checked}`]:{color:(n.vars||n).palette[e].main,"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Rl(n.palette[e].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ca.disabled}`]:{color:n.vars?n.vars.palette.Switch[`${e}DisabledColor`]:`${n.palette.mode==="light"?Nw(n.palette[e].main,.62):Tw(n.palette[e].main,.55)}`}},[`&.${ca.checked} + .${ca.track}`]:{backgroundColor:(n.vars||n).palette[e].main}}}))]}))),$ie=At("span",{name:"MuiSwitch",slot:"Track"})(Zn(({theme:n})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:n.transitions.create(["opacity","background-color"],{duration:n.transitions.duration.shortest}),backgroundColor:n.vars?n.vars.palette.common.onBackground:`${n.palette.mode==="light"?n.palette.common.black:n.palette.common.white}`,opacity:n.vars?n.vars.opacity.switchTrack:`${n.palette.mode==="light"?.38:.3}`}))),Rie=At("span",{name:"MuiSwitch",slot:"Thumb"})(Zn(({theme:n})=>({boxShadow:(n.vars||n).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),g6=L.forwardRef(function(e,t){const r=Jn({props:e,name:"MuiSwitch"}),{className:s,color:a="primary",edge:i=!1,size:o="medium",sx:l,slots:c={},slotProps:d={},...h}=r,p={...r,color:a,edge:i,size:o},g=_ie(p),x={slots:c,slotProps:d},[y,b]=Yn("root",{className:jt(g.root,s),elementType:Iie,externalForwardedProps:x,ownerState:p,additionalProps:{sx:l}}),[S,T]=Yn("thumb",{className:g.thumb,elementType:Rie,externalForwardedProps:x,ownerState:p}),N=w.jsx(S,{...T}),[C,I]=Yn("track",{className:g.track,elementType:$ie,externalForwardedProps:x,ownerState:p});return w.jsxs(y,{...b,children:[w.jsx(Aie,{type:"checkbox",icon:N,checkedIcon:N,ref:t,ownerState:p,...h,classes:{...g,root:g.switchBase},slots:{...c.switchBase&&{root:c.switchBase},...c.input&&{input:c.input}},slotProps:{...d.switchBase&&{root:typeof d.switchBase=="function"?d.switchBase(p):d.switchBase},...d.input&&{input:typeof d.input=="function"?d.input(p):d.input}}}),w.jsx(C,{...I})]})}),sb="https://172.20.0.49:3000";function eh({name:n,checked:e,onChange:t,label:r}){return w.jsx(m6,{control:w.jsx(g6,{name:n,checked:e,onChange:t,size:"small"}),label:r,labelPlacement:"start",className:"w-full flex items-center justify-between text-sm"})}function Oie({refreshTrigger:n,appOptions:e}){var J;const[t,r]=L.useState([]),[s,a]=L.useState(""),[i,o]=L.useState(""),[l,c]=L.useState(""),[d,h]=L.useState(null),[p,g]=L.useState({}),[x,y]=L.useState(null),[b,S]=L.useState(""),[T,N]=L.useState(!1),[C,I]=L.useState(null),[F,D]=L.useState(""),[A,_]=L.useState(!1),[k,O]=L.useState(""),P=p.permissions||{viewFinancials:!1,editInvoices:!1,undoInvoice:!1,deleteInvoices:!1,csvExport:!1},W=M=>{const{name:z,checked:G}=M.target;g(U=>({...U,permissions:{...U.permissions,[z]:G}}))};L.useEffect(()=>{fetch(`${sb}/api/getUsers`).then(M=>M.json()).then(M=>r(M))},[n]);const K=t.filter(M=>M.username.toLowerCase().includes(s.toLowerCase())&&(i?M.role===i:!0)&&(l?M.status===l:!0)),q={Active:"bg-emerald-100 text-emerald-800 border-emerald-200",Disable:"bg-red-100 text-red-800 border-red-200"},V=()=>{const M=fie.unparse(K),z=new Blob([M],{type:"text/csv;charset=utf-8;"});h6.saveAs(z,"users_export.csv")},X=async()=>{const M=await fetch(`${sb}/api/getUsers/${d._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(M.ok){const z=await M.json();r(G=>G.map(U=>U._id===z._id?z:U)),h(null)}},Q=async M=>{if(t.find(U=>U._id===M).role==="admin"&&t.filter(se=>se.role==="admin").length<=1){S("The last admin in the system cannot be deleted!");return}(await fetch(`${sb}/api/getUsers/${M}`,{method:"DELETE"})).ok&&(r(t.filter(U=>U._id!==M)),y(null))},Y=M=>{I(M),D(""),O(""),_(!1),N(!0)},j=async()=>{if(C){_(!0),O("");try{const M=await fetch(`${sb}/api/auth/resetPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:C._id})});if(!M.ok)throw new Error(`Status ${M.status}`);const z=await M.json();D(z.tempPassword||z.temp_password||"")}catch(M){console.error(M),O("  ")}finally{_(!1)}}};return w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),w.jsx("p",{className:"text-gray-600",children:"Manage and organize your team members"})]}),w.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:w.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[w.jsxs("div",{className:"relative flex-1 max-w-sm",children:[w.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:w.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),w.jsx("input",{type:"text",placeholder:"Search users...",value:s,onChange:M=>a(M.target.value),className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),w.jsxs("select",{value:i,onChange:M=>o(M.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors",children:[w.jsx("option",{value:"",children:"All Roles"}),w.jsx("option",{value:"admin",children:"Admin"}),w.jsx("option",{value:"user",children:"User"})]}),w.jsxs("select",{value:l,onChange:M=>c(M.target.value),className:"px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors",children:[w.jsx("option",{value:"",children:"All Statuses"}),w.jsx("option",{value:"Active",children:"Active"}),w.jsx("option",{value:"Disable",children:"Disabled"})]})]}),w.jsxs("button",{onClick:V,className:"inline-flex items-center px-4 py-2.5 bg-emerald-600 text-white text-sm font-medium rounded-lg hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-colors shadow-sm",children:[w.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})}),w.jsx("div",{className:"mb-4",children:w.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",w.jsx("span",{className:"font-medium text-gray-900",children:K.length})," of"," ",w.jsx("span",{className:"font-medium text-gray-900",children:t.length})," users"]})}),w.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-gray-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),w.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),w.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),w.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Role"}),w.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Updated"}),w.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Org Unit"}),w.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.map(M=>{var z;return w.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:w.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:w.jsx("span",{className:"text-sm font-medium text-white",children:M.username.charAt(0).toUpperCase()})})}),w.jsx("div",{className:"ml-4",children:w.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.username})})]})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:M.email}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${q[M.status]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:[w.jsx("div",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${M.status==="Active"?"bg-emerald-600":"bg-red-600"}`}),M.status]})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 capitalize",children:M.role})}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(z=M.updatedAt)==null?void 0:z.split("T")[0]}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:M.orgUnit||"-"}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:w.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[w.jsxs("button",{onClick:()=>Y(M),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-orange-700 bg-orange-100 rounded-md hover:bg-orange-200 focus:ring-2 focus:ring-orange-500 focus:ring-offset-1 transition-colors",children:[w.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Reset password"]}),w.jsxs("button",{onClick:()=>{h(M),g(M)},className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 transition-colors",children:[w.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),w.jsxs("button",{onClick:()=>y(M),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200 focus:ring-2 focus:ring-red-500 focus:ring-offset-1 transition-colors",children:[w.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})})]},M._id)})})]})})}),d&&w.jsx("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-50 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg transform transition-all flex flex-col max-h-[90vh]",children:[w.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[w.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit User: ",d.username]}),w.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Update user information and permissions"})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto",children:[w.jsxs("div",{className:"px-6 py-6 space-y-6",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Name"}),w.jsx("div",{children:w.jsx("input",{type:"text",value:p.username,onChange:M=>g({...p,username:M.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter user name"})}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),w.jsx("input",{type:"email",value:p.email??"",onChange:M=>g({...p,email:M.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter email address"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),w.jsxs("select",{value:p.status,onChange:M=>g({...p,status:M.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors",children:[w.jsx("option",{value:"Active",children:"Active"}),w.jsx("option",{value:"Disable",children:"Disabled"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization Unit"}),w.jsx("input",{type:"text",value:p.orgUnit??"",onChange:M=>g({...p,orgUnit:M.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter organization unit"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),w.jsxs("select",{value:p.role,onChange:M=>g({...p,role:M.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white transition-colors",children:[w.jsx("option",{value:"user",children:"User"}),w.jsx("option",{value:"admin",children:"Admin"})]})]})]}),w.jsxs("div",{className:"ml-6 mb-3",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed Applications"}),w.jsx("div",{className:"pr-8",children:e.map(M=>{var z;return w.jsx(mv,{children:w.jsx(eh,{type:"checkbox",checked:(z=p.allowedApps)==null?void 0:z.includes(M.value),onChange:()=>{var U;const G=(U=p.allowedApps)!=null&&U.includes(M.value)?p.allowedApps.filter(se=>se!==M.value):[...p.allowedApps||[],M.value];g({...p,allowedApps:G})},label:M.label})},M.value)})}),((J=p.allowedApps)==null?void 0:J.includes("/invoice"))&&w.jsxs("div",{className:"pl-4 pr-8 pt-6 border-t border-gray-200",children:[w.jsx("h3",{className:"text-medium font-medium text-gray-800 mb-3",children:"Invoice Panel Permissions"}),w.jsxs(mv,{className:"space-y-2",children:[w.jsx(eh,{name:"viewFinancials",checked:P.viewFinancials,onChange:W,label:"View financial summary"}),w.jsx(eh,{name:"editInvoices",checked:P.editInvoices,onChange:W,label:"Edit invoices"}),w.jsx(eh,{name:"undoInvoice",checked:P.undoInvoice,onChange:W,label:"Undo"}),w.jsx(eh,{name:"csvExport",checked:P.csvExport,onChange:W,label:"Export CSV"}),w.jsx(eh,{name:"deleteInvoices",checked:P.deleteInvoices,onChange:W,label:"Delete invoices (Only Developers)"})]})]})]})]}),w.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex justify-end space-x-3",children:[w.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:X,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors shadow-sm",children:"Save Changes"})]})]})}),T&&w.jsx("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-40 flex items-center justify-center z-50 p-4",children:w.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm",children:F?w.jsxs(w.Fragment,{children:[w.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Temporary password for ",C.username]}),w.jsx("p",{className:"font-mono bg-slate-100 p-2 rounded text-center mb-4",children:F}),w.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pass this password to the user. It is valid until changed by them."}),w.jsx("div",{className:"flex justify-end",children:w.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Cancel"})})]}):w.jsxs(w.Fragment,{children:[w.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Reset Password: ",C.username," (",C.role,")"]}),k&&w.jsx("p",{className:"mb-2 text-sm text-red-600",children:k}),w.jsx("p",{className:"mb-4 text-sm text-gray-700",children:"Click Reset Password to create a new temporary password."}),w.jsxs("div",{className:"flex justify-end gap-2",children:[w.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),w.jsx("button",{onClick:j,disabled:A,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50",children:A?"Create":"Reset Password"})]})]})})}),x&&w.jsx("div",{className:"fixed inset-0 backdrop-blur-xs  bg-opacity-50 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md transform transition-all",children:[w.jsxs("div",{className:"px-6 py-4",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"flex-shrink-0",children:w.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:w.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),w.jsxs("div",{className:"ml-4",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"}),w.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Are you sure you want to delete"," ",w.jsx("span",{className:"font-medium",children:x.username}),"? This action cannot be undone."]})]})]}),b&&w.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:w.jsxs("div",{className:"flex",children:[w.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),w.jsx("div",{className:"ml-2",children:w.jsx("p",{className:"text-sm text-red-800",children:b})})]})})]}),w.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl flex justify-end space-x-3",children:[w.jsx("button",{onClick:()=>{S(""),y(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Cancel"}),w.jsx("button",{onClick:()=>Q(x._id),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors shadow-sm",children:"Delete User"})]})]})})]})}const Die="https://172.20.0.49:3000";function p0({name:n,checked:e,onChange:t,label:r}){return w.jsx(m6,{control:w.jsx(g6,{name:n,checked:e,onChange:t,size:"small"}),label:r,labelPlacement:"start",className:"w-full flex items-center justify-between text-sm"})}function Fie(){const[n,e]=L.useState(""),[t,r]=L.useState(""),[s,a]=L.useState(""),[i,o]=L.useState("user"),[l,c]=L.useState("Active"),[d,h]=L.useState(""),[p,g]=L.useState([]),[x,y]=L.useState(!1),[b,S]=L.useState(0),[T,N]=L.useState({viewFinancials:!1,editInvoices:!1,undoInvoice:!1}),C=JSON.parse(localStorage.getItem("user"));if((C==null?void 0:C.role)!=="admin"&&(C==null?void 0:C.role)!=="developer")return window.location.href="/",null;const I=[{label:"Main Board (sidebar)",value:"/"},{label:"Meal Ordering",value:"/meal"},{label:"Box & Cooler Inventory",value:"/boxes"},{label:"IT Support Tickets",value:"/it"},{label:"Service Tickets",value:"/service"},{label:"Admin Box Inventory",value:"/adminBox"},{label:"Invoice Panel",value:"/invoice"},{label:"Admin Panel",value:"/admin"}],F=_=>{g(k=>k.includes(_)?k.filter(O=>O!==_):[...k,_])},D=_=>{const{name:k,checked:O}=_.target;N(P=>({...P,[k]:O}))},A=async()=>{if(!n||!s||!t){Dt.error("Please fill all required fields.");return}const _={username:n,password:s,email:t,role:i,status:l,orgUnit:d,allowedApps:p,permissions:T};Dt.promise(fetch(`${Die}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}).then(async k=>{const O=await k.json();if(!k.ok)throw new Error(O.message||"Unknown error");return e(""),a(""),r(""),h(""),o("user"),c("Active"),g([]),y(!1),S(P=>P+1),N({}),"User created successfully!"}),{loading:"Creating user...",success:k=>k,error:k=>`Error: ${k.message}`})};return w.jsxs("div",{className:"min-h-screen bg-white",children:[w.jsx(Wg,{position:"top-center"}),w.jsx(Jl,{user:C}),w.jsx(xu,{user:C}),w.jsxs("div",{className:"max-w-10/12 mx-auto px-6 p-6",children:[w.jsx("div",{className:"mb-12",children:w.jsx("h1",{className:"text-3xl font-light text-gray-900 mb-2",children:"Admin Panel"})}),w.jsx("div",{className:"mb-8",children:w.jsxs(_F,{onClick:()=>y(!x),className:`flex items-center gap-2 px-4 py-2 text-sm border transition-colors ${x?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-900 border-gray-300 hover:border-gray-400"}`,children:[x?w.jsx(ose,{size:16}):w.jsx(ese,{size:16}),x?"Hide Form":"Add User"]})}),x&&w.jsxs("div",{className:"mb-12 border border-gray-200 bg-gray-50",children:[w.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:w.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Add New User"})}),w.jsxs("div",{className:"p-6 space-y-6",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Username *"}),w.jsx("input",{type:"text",value:n,onChange:_=>e(_.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Email *"}),w.jsx("input",{type:"email",value:t,onChange:_=>r(_.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Password *"}),w.jsx("input",{type:"password",value:s,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500"})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Role"}),w.jsxs("select",{value:i,onChange:_=>o(_.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500",children:[w.jsx("option",{value:"user",children:"User"}),w.jsx("option",{value:"admin",children:"Admin"}),w.jsx("option",{value:"developer",children:"Developer"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Status"}),w.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500",children:[w.jsx("option",{value:"Active",children:"Active"}),w.jsx("option",{value:"Disable",children:"Disable"})]})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Organization Unit"}),w.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),className:"w-full px-3 py-2 border border-gray-300 text-sm focus:outline-none focus:border-gray-500",placeholder:"/IT/Support"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-700 mb-3",children:"Allowed Applications"}),w.jsx("div",{className:"space-y-2",children:I.map(_=>w.jsx(mv,{children:w.jsx(p0,{type:"checkbox",checked:p.includes(_.value),onChange:()=>F(_.value),className:"w-4 h-4",label:_.label})},_.value))})]}),p.includes("/invoice")&&w.jsxs("div",{className:"p-4 pt-6 border-t border-gray-200",children:[w.jsx("h3",{className:"text-sm font-medium text-gray-800 mb-3",children:"Invoice Panel Permissions"}),w.jsx("div",{className:"space-y-2",children:w.jsxs(mv,{className:"space-y-2",children:[w.jsx(p0,{name:"viewFinancials",checked:T.viewFinancials,onChange:D,label:"View financial summary"}),w.jsx(p0,{name:"editInvoices",checked:T.editInvoices,onChange:D,label:"edit invoices"}),w.jsx(p0,{name:"undoInvoice",checked:T.undoInvoice,onChange:D,label:"Undo"}),w.jsx(p0,{name:"deleteInvoices",checked:T.deleteInvoices,onChange:D,label:"Delete invoices (Only Developers)"})]})})]}),w.jsx("div",{className:"pt-4 border-t border-gray-200",children:w.jsx(_F,{onClick:A,className:"bg-gray-900 text-white px-6 py-2 text-sm hover:bg-gray-800 transition-colors",children:"Add User"})})]})]}),w.jsxs("div",{className:"border border-gray-200",children:[w.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:w.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"User Management"})}),w.jsx("div",{children:w.jsx(Oie,{loggedInUser:C,refreshTrigger:b,appOptions:I,permissions:T,handlePermissionChange:D,allowedApps:p})})]})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var gv={};gv.version="0.18.5";var x6=1252,Lie=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],y6=function(n){Lie.indexOf(n)!=-1&&(x6=n)};function Mie(){y6(1252)}var ng=function(n){y6(n)};function Pie(){ng(1200),Mie()}var ab=function(e){return String.fromCharCode(e)},$F=function(e){return String.fromCharCode(e)},xv,Uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function rg(n){for(var e="",t=0,r=0,s=0,a=0,i=0,o=0,l=0,c=0;c<n.length;)t=n.charCodeAt(c++),a=t>>2,r=n.charCodeAt(c++),i=(t&3)<<4|r>>4,s=n.charCodeAt(c++),o=(r&15)<<2|s>>6,l=s&63,isNaN(r)?o=l=64:isNaN(s)&&(l=64),e+=Uc.charAt(a)+Uc.charAt(i)+Uc.charAt(o)+Uc.charAt(l);return e}function Hl(n){var e="",t=0,r=0,s=0,a=0,i=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<n.length;)a=Uc.indexOf(n.charAt(c++)),i=Uc.indexOf(n.charAt(c++)),t=a<<2|i>>4,e+=String.fromCharCode(t),o=Uc.indexOf(n.charAt(c++)),r=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Uc.indexOf(n.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var En=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ec=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Cd(n){return En?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function RF(n){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var so=function(e){return En?ec(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function Pw(n){if(typeof ArrayBuffer>"u")return so(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function Hg(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function Bie(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var Bs=En?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:ec(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),s=0;for(e=0,t=0;e<n.length;t+=s,++e)if(s=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function jie(n){for(var e=[],t=0,r=n.length+250,s=Cd(n.length+255),a=0;a<n.length;++a){var i=n.charCodeAt(a);if(i<128)s[t++]=i;else if(i<2048)s[t++]=192|i>>6&31,s[t++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=n.charCodeAt(++a)&1023;s[t++]=240|i>>8&7,s[t++]=128|i>>2&63,s[t++]=128|o>>6&15|(i&3)<<4,s[t++]=128|o&63}else s[t++]=224|i>>12&15,s[t++]=128|i>>6&63,s[t++]=128|i&63;t>r&&(e.push(s.slice(0,t)),t=0,s=Cd(65535),r=65530)}return e.push(s.slice(0,t)),Bs(e)}var j0=/\u0000/g,ib=/[\u0001-\u0006]/g;function hh(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function io(n,e){var t=""+n;return t.length>=e?t:kr("0",e-t.length)+t}function $_(n,e){var t=""+n;return t.length>=e?t:kr(" ",e-t.length)+t}function yv(n,e){var t=""+n;return t.length>=e?t:t+kr(" ",e-t.length)}function zie(n,e){var t=""+Math.round(n);return t.length>=e?t:kr("0",e-t.length)+t}function Uie(n,e){var t=""+n;return t.length>=e?t:kr("0",e-t.length)+t}var OF=Math.pow(2,32);function th(n,e){if(n>OF||n<-OF)return zie(n,e);var t=Math.round(n);return Uie(t,e)}function bv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var DF=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],MC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Vie(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var _r={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},FF={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Wie={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function vv(n,e,t){for(var r=n<0?-1:1,s=n*r,a=0,i=1,o=0,l=1,c=0,d=0,h=Math.floor(s);c<e&&(h=Math.floor(s),o=h*i+a,d=h*c+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=c,c=d;if(d>e&&(c>e?(d=l,o=a):(d=c,o=i)),!t)return[0,r*o,d];var p=Math.floor(r*o/d);return[p,r*o-p*d,d]}function ob(n,e,t){if(n>2958465||n<0)return null;var r=n|0,s=Math.floor(86400*(n-r)),a=0,i=[],o={D:r,T:s,u:86400*(n-r)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++r,++o.D)),r===60)i=t?[1317,10,29]:[1900,2,29],a=3;else if(r===0)i=t?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),r<60&&(a=(a+6)%7),t&&(a=Qie(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var b6=new Date(1899,11,31,0,0,0),Hie=b6.getTime(),Gie=new Date(1900,2,1,0,0,0);function v6(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=Gie&&(t+=1440*60*1e3),(t-(Hie+(n.getTimezoneOffset()-b6.getTimezoneOffset())*6e4))/(1440*60*1e3)}function R_(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function qie(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Kie(n){var e=n<0?12:11,t=R_(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function Xie(n){var e=R_(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function Yie(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=Kie(n):e===10?t=n.toFixed(10).substr(0,12):t=Xie(n),R_(qie(t.toUpperCase()))}function UE(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):Yie(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return Jc(14,v6(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function Qie(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function Zie(n,e,t,r){var s="",a=0,i=0,o=t.y,l,c=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,c=e.length;break;case 3:return MC[t.m-1][1];case 5:return MC[t.m-1][0];default:return MC[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,c=e.length;break;case 3:return DF[t.q][0];default:return DF[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?io(t.S,e.length):(r>=2?i=r===3?1e3:100:i=r===1?10:1,a=Math.round(i*(t.S+t.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=io(a,2+r),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var d=c>0?io(l,c):"";return d}function Vc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var w6=/%/g;function Jie(n,e,t){var r=e.replace(w6,""),s=e.length-r.length;return Dl(n,r,t*Math.pow(10,2*s))+kr("%",s)}function eoe(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Dl(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function S6(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+S6(n,-e);var s=n.indexOf(".");s===-1&&(s=n.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),t=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),t.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(i-t.length+a):t+="E+"+(i-a);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,s)+"."+t.substr(2+s),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var T6=/# (\?+)( ?)\/( ?)(\d+)/;function toe(n,e,t){var r=parseInt(n[4],10),s=Math.round(e*r),a=Math.floor(s/r),i=s-a*r,o=r;return t+(a===0?"":""+a)+" "+(i===0?kr(" ",n[1].length+1+n[4].length):$_(i,n[1].length)+n[2]+"/"+n[3]+io(o,n[4].length))}function noe(n,e,t){return t+(e===0?"":""+e)+kr(" ",n[1].length+2+n[4].length)}var N6=/^#*0*\.([0#]+)/,C6=/\).*[0#]/,E6=/\(###\) ###\\?-####/;function ua(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function LF(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function MF(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function roe(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function soe(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function ki(n,e,t){if(n.charCodeAt(0)===40&&!e.match(C6)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ki("n",r,t):"("+ki("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return eoe(n,e,t);if(e.indexOf("%")!==-1)return Jie(n,e,t);if(e.indexOf("E")!==-1)return S6(e,t);if(e.charCodeAt(0)===36)return"$"+ki(n,e.substr(e.charAt(1)==" "?2:1),t);var s,a,i,o,l=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+th(l,e.length);if(e.match(/^[#?]+$/))return s=th(t,0),s==="0"&&(s=""),s.length>e.length?s:ua(e.substr(0,e.length-s.length))+s;if(a=e.match(T6))return toe(a,l,c);if(e.match(/^#+0+$/))return c+th(l,e.length-e.indexOf("0"));if(a=e.match(N6))return s=LF(t,a[1].length).replace(/^([^\.]+)$/,"$1."+ua(a[1])).replace(/\.$/,"."+ua(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+kr("0",ua(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return c+LF(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return c+Vc(th(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ki(n,e,-t):Vc(""+(Math.floor(t)+roe(t,a[1].length)))+"."+io(MF(t,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return ki(n,e.replace(/^#,#*,/,""),t);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=hh(ki(n,e.replace(/[\\-]/g,""),t)),i=0,hh(hh(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(e.match(E6))return s=ki(n,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=vv(l,Math.pow(10,i)-1,!1),s=""+c,d=Dl("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=yv(o[2],i),d.length<a[4].length&&(d=ua(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=vv(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?$_(o[1],i)+a[2]+"/"+a[3]+yv(o[2],i):kr(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=th(t,0),e.length<=s.length?s:ua(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return ua(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=MF(t,a[1].length),t<0?"-"+ki(n,e,-t):Vc(soe(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?io(0,3-x.length):"")+x})+"."+io(i,a[1].length);switch(e){case"###,##0.00":return ki(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var g=Vc(th(l,0));return g!=="0"?c+g:"";case"###,###.00":return ki(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return ki(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function aoe(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Dl(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function ioe(n,e,t){var r=e.replace(w6,""),s=e.length-r.length;return Dl(n,r,t*Math.pow(10,2*s))+kr("%",s)}function k6(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+k6(n,-e);var s=n.indexOf(".");s===-1&&(s=n.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),t=(e/Math.pow(10,a)).toPrecision(r+1+(s+a)%s),!t.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(i-t.length+a):t+="E+"+(i-a),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,d){return l+c+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Ao(n,e,t){if(n.charCodeAt(0)===40&&!e.match(C6)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ao("n",r,t):"("+Ao("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return aoe(n,e,t);if(e.indexOf("%")!==-1)return ioe(n,e,t);if(e.indexOf("E")!==-1)return k6(e,t);if(e.charCodeAt(0)===36)return"$"+Ao(n,e.substr(e.charAt(1)==" "?2:1),t);var s,a,i,o,l=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+io(l,e.length);if(e.match(/^[#?]+$/))return s=""+t,t===0&&(s=""),s.length>e.length?s:ua(e.substr(0,e.length-s.length))+s;if(a=e.match(T6))return noe(a,l,c);if(e.match(/^#+0+$/))return c+io(l,e.length-e.indexOf("0"));if(a=e.match(N6))return s=(""+t).replace(/^([^\.]+)$/,"$1."+ua(a[1])).replace(/\.$/,"."+ua(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+kr("0",ua(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return c+Vc(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ao(n,e,-t):Vc(""+t)+"."+kr("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Ao(n,e.replace(/^#,#*,/,""),t);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=hh(Ao(n,e.replace(/[\\-]/g,""),t)),i=0,hh(hh(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(e.match(E6))return s=Ao(n,"##########",t),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=vv(l,Math.pow(10,i)-1,!1),s=""+c,d=Dl("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=yv(o[2],i),d.length<a[4].length&&(d=ua(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=vv(l,Math.pow(10,i)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?$_(o[1],i)+a[2]+"/"+a[3]+yv(o[2],i):kr(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+t,e.length<=s.length?s:ua(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+t.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,p=e.length-s.length-h;return ua(e.substr(0,h)+s+e.substr(e.length-p))}if(a=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Ao(n,e,-t):Vc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?io(0,3-x.length):"")+x})+"."+io(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Vc(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return Ao(n,e.slice(0,e.lastIndexOf(".")),t)+ua(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Dl(n,e,t){return(t|0)===t?Ao(n,e,t):ki(n,e,t)}function ooe(n){for(var e=[],t=!1,r=0,s=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(s,r-s),s=r+1}if(e[e.length]=n.substr(s),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var _6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function I6(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":bv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(_6))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function loe(n,e,t,r){for(var s=[],a="",i=0,o="",l="t",c,d,h,p="H";i<n.length;)switch(o=n.charAt(i)){case"G":if(!bv(n,i))throw new Error("unrecognized character "+o+" in "+n);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=n.charCodeAt(++i))!==34&&i<n.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=n.charAt(++i),x=g==="("||g===")"?g:"t";s[s.length]={t:x,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(n.charAt(i+1)==="1"||n.charAt(i+1)==="2"){if(c==null&&(c=ob(e,t,n.charAt(i+1)==="2"),c==null))return"";s[s.length]={t:"X",v:n.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=ob(e,t),c==null))return"";for(a=o;++i<n.length&&n.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=p),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(c==null&&(c=ob(e,t)),n.substr(i,3).toUpperCase()==="A/P"?(c!=null&&(y.v=c.H>=12?"P":"A"),y.t="T",p="h",i+=3):n.substr(i,5).toUpperCase()==="AM/PM"?(c!=null&&(y.v=c.H>=12?"PM":"AM"),y.t="T",i+=5,p="h"):n.substr(i,5).toUpperCase()==="/"?(c!=null&&(y.v=c.H>=12?"":""),y.t="T",i+=5,p="h"):(y.t="t",++i),c==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;n.charAt(i++)!=="]"&&i<n.length;)a+=n.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(_6)){if(c==null&&(c=ob(e,t),c==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",I6(n)||(s[s.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++i<n.length&&(o=n.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;n.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(n.charAt(i)==" "||n.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:r===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<n.length&&"0123456789".indexOf(n.charAt(++i))>-1;)a+=n.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);s[s.length]={t:"t",v:o},++i;break}var b=0,S=0,T;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=p,l="h",b<1&&(b=1);break;case"s":(T=s[i].v.match(/\.0+$/))&&(S=Math.max(S,T[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[i].v.match(/[Hh]/)&&(b=1),b<2&&s[i].v.match(/[Mm]/)&&(b=2),b<3&&s[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var N="",C;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Zie(s[i].t.charCodeAt(0),s[i].v,c,S),s[i].t="t";break;case"n":case"?":for(C=i+1;s[C]!=null&&((o=s[C].t)==="?"||o==="D"||(o===" "||o==="t")&&s[C+1]!=null&&(s[C+1].t==="?"||s[C+1].t==="t"&&s[C+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[C].v==="/"||s[C].v===" "&&s[C+1]!=null&&s[C+1].t=="?"));)s[i].v+=s[C].v,s[C]={v:"",t:";"},++C;N+=s[i].v,i=C-1;break;case"G":s[i].t="t",s[i].v=UE(e,t);break}var I="",F,D;if(N.length>0){N.charCodeAt(0)==40?(F=e<0&&N.charCodeAt(0)===45?-e:e,D=Dl("n",N,F)):(F=e<0&&r>1?-e:e,D=Dl("n",N,F),F<0&&s[0]&&s[0].t=="t"&&(D=D.substr(1),s[0].v="-"+s[0].v)),C=D.length-1;var A=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){A=i;break}var _=s.length;if(A===s.length&&D.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(C>=s[i].v.length-1?(C-=s[i].v.length,s[i].v=D.substr(C+1,s[i].v.length)):C<0?s[i].v="":(s[i].v=D.substr(0,C+1),C=-1),s[i].t="t",_=i);C>=0&&_<s.length&&(s[_].v=D.substr(0,C+1)+s[_].v)}else if(A!==s.length&&D.indexOf("E")===-1){for(C=D.indexOf(".")-1,i=A;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===A?s[i].v.indexOf(".")-1:s[i].v.length-1,I=s[i].v.substr(d+1);d>=0;--d)C>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(I=D.charAt(C--)+I);s[i].v=I,s[i].t="t",_=i}for(C>=0&&_<s.length&&(s[_].v=D.substr(0,C+1)+s[_].v),C=D.indexOf(".")+1,i=A;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==A)){for(d=s[i].v.indexOf(".")>-1&&i===A?s[i].v.indexOf(".")+1:0,I=s[i].v.substr(0,d);d<s[i].v.length;++d)C<D.length&&(I+=D.charAt(C++));s[i].v=I,s[i].t="t",_=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(F=r>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=Dl(s[i].t,s[i].v,F),s[i].t="t");var k="";for(i=0;i!==s.length;++i)s[i]!=null&&(k+=s[i].v);return k}var PF=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function BF(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function coe(n,e){var t=ooe(n),r=t.length,s=t[r-1].indexOf("@");if(r<4&&s>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||s>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=s>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=s>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=s>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var a=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,a];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var i=t[0].match(PF),o=t[1].match(PF);return BF(e,i)?[r,t[0]]:BF(e,o)?[r,t[1]]:[r,t[i!=null&&o!=null?2:1]]}return[r,a]}function Jc(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:_r)[n],r==null&&(r=t.table&&t.table[FF[n]]||_r[FF[n]]),r==null&&(r=Wie[n]||"General");break}if(bv(r,0))return UE(e,t);e instanceof Date&&(e=v6(e,t.date1904));var s=coe(r,e);if(bv(s[1]))return UE(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return loe(s[1],e,t,s[0])}function A6(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(_r[t]==null){e<0&&(e=t);continue}if(_r[t]==n){e=t;break}}e<0&&(e=391)}return _r[e]=n,e}function Bw(n){for(var e=0;e!=392;++e)n[e]!==void 0&&A6(n[e],e)}function jw(){_r=Vie()}var $6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function uoe(n){var e=typeof n=="number"?_r[n]:n;return e=e.replace($6,"(\\d+)"),new RegExp("^"+e+"$")}function doe(n,e,t){var r=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match($6)||[]).forEach(function(h,p){var g=parseInt(t[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?c:r==-1&&s==-1&&a==-1?d:c+"T"+d}var foe=function(){var n={};n.version="1.2.0";function e(){for(var D=0,A=new Array(256),_=0;_!=256;++_)D=_,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,A[_]=D;return typeof Int32Array<"u"?new Int32Array(A):A}var t=e();function r(D){var A=0,_=0,k=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)O[k]=D[k];for(k=0;k!=256;++k)for(_=D[k],A=256+k;A<4096;A+=256)_=O[A]=_>>>8^D[_&255];var P=[];for(k=1;k!=16;++k)P[k-1]=typeof Int32Array<"u"?O.subarray(k*256,k*256+256):O.slice(k*256,k*256+256);return P}var s=r(t),a=s[0],i=s[1],o=s[2],l=s[3],c=s[4],d=s[5],h=s[6],p=s[7],g=s[8],x=s[9],y=s[10],b=s[11],S=s[12],T=s[13],N=s[14];function C(D,A){for(var _=A^-1,k=0,O=D.length;k<O;)_=_>>>8^t[(_^D.charCodeAt(k++))&255];return~_}function I(D,A){for(var _=A^-1,k=D.length-15,O=0;O<k;)_=N[D[O++]^_&255]^T[D[O++]^_>>8&255]^S[D[O++]^_>>16&255]^b[D[O++]^_>>>24]^y[D[O++]]^x[D[O++]]^g[D[O++]]^p[D[O++]]^h[D[O++]]^d[D[O++]]^c[D[O++]]^l[D[O++]]^o[D[O++]]^i[D[O++]]^a[D[O++]]^t[D[O++]];for(k+=15;O<k;)_=_>>>8^t[(_^D[O++])&255];return~_}function F(D,A){for(var _=A^-1,k=0,O=D.length,P=0,W=0;k<O;)P=D.charCodeAt(k++),P<128?_=_>>>8^t[(_^P)&255]:P<2048?(_=_>>>8^t[(_^(192|P>>6&31))&255],_=_>>>8^t[(_^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,W=D.charCodeAt(k++)&1023,_=_>>>8^t[(_^(240|P>>8&7))&255],_=_>>>8^t[(_^(128|P>>2&63))&255],_=_>>>8^t[(_^(128|W>>6&15|(P&3)<<4))&255],_=_>>>8^t[(_^(128|W&63))&255]):(_=_>>>8^t[(_^(224|P>>12&15))&255],_=_>>>8^t[(_^(128|P>>6&63))&255],_=_>>>8^t[(_^(128|P&63))&255]);return~_}return n.table=t,n.bstr=C,n.buf=I,n.str=F,n}(),Xn=function(){var e={};e.version="1.2.1";function t(ee,oe){for(var ae=ee.split("/"),ie=oe.split("/"),le=0,ce=0,Ie=Math.min(ae.length,ie.length);le<Ie;++le){if(ce=ae[le].length-ie[le].length)return ce;if(ae[le]!=ie[le])return ae[le]<ie[le]?-1:1}return ae.length-ie.length}function r(ee){if(ee.charAt(ee.length-1)=="/")return ee.slice(0,-1).indexOf("/")===-1?ee:r(ee.slice(0,-1));var oe=ee.lastIndexOf("/");return oe===-1?ee:ee.slice(0,oe+1)}function s(ee){if(ee.charAt(ee.length-1)=="/")return s(ee.slice(0,-1));var oe=ee.lastIndexOf("/");return oe===-1?ee:ee.slice(oe+1)}function a(ee,oe){typeof oe=="string"&&(oe=new Date(oe));var ae=oe.getHours();ae=ae<<6|oe.getMinutes(),ae=ae<<5|oe.getSeconds()>>>1,ee.write_shift(2,ae);var ie=oe.getFullYear()-1980;ie=ie<<4|oe.getMonth()+1,ie=ie<<5|oe.getDate(),ee.write_shift(2,ie)}function i(ee){var oe=ee.read_shift(2)&65535,ae=ee.read_shift(2)&65535,ie=new Date,le=ae&31;ae>>>=5;var ce=ae&15;ae>>>=4,ie.setMilliseconds(0),ie.setFullYear(ae+1980),ie.setMonth(ce-1),ie.setDate(le);var Ie=oe&31;oe>>>=5;var je=oe&63;return oe>>>=6,ie.setHours(oe),ie.setMinutes(je),ie.setSeconds(Ie<<1),ie}function o(ee){Qa(ee,0);for(var oe={},ae=0;ee.l<=ee.length-4;){var ie=ee.read_shift(2),le=ee.read_shift(2),ce=ee.l+le,Ie={};switch(ie){case 21589:ae=ee.read_shift(1),ae&1&&(Ie.mtime=ee.read_shift(4)),le>5&&(ae&2&&(Ie.atime=ee.read_shift(4)),ae&4&&(Ie.ctime=ee.read_shift(4))),Ie.mtime&&(Ie.mt=new Date(Ie.mtime*1e3));break}ee.l=ce,oe[ie]=Ie}return oe}var l;function c(){return l||(l={})}function d(ee,oe){if(ee[0]==80&&ee[1]==75)return oa(ee,oe);if((ee[0]|32)==109&&(ee[1]|32)==105)return tt(ee,oe);if(ee.length<512)throw new Error("CFB file size "+ee.length+" < 512");var ae=3,ie=512,le=0,ce=0,Ie=0,je=0,Ne=0,$e=[],Oe=ee.slice(0,512);Qa(Oe,0);var nt=h(Oe);switch(ae=nt[0],ae){case 3:ie=512;break;case 4:ie=4096;break;case 0:if(nt[1]==0)return oa(ee,oe);default:throw new Error("Major Version: Expected 3 or 4 saw "+ae)}ie!==512&&(Oe=ee.slice(0,ie),Qa(Oe,28));var ct=ee.slice(0,ie);p(Oe,ae);var vt=Oe.read_shift(4,"i");if(ae===3&&vt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+vt);Oe.l+=4,Ie=Oe.read_shift(4,"i"),Oe.l+=4,Oe.chk("00100000","Mini Stream Cutoff Size: "),je=Oe.read_shift(4,"i"),le=Oe.read_shift(4,"i"),Ne=Oe.read_shift(4,"i"),ce=Oe.read_shift(4,"i");for(var it=-1,mt=0;mt<109&&(it=Oe.read_shift(4,"i"),!(it<0));++mt)$e[mt]=it;var Kt=g(ee,ie);b(Ne,ce,Kt,ie,$e);var Vn=T(Kt,Ie,$e,ie);Vn[Ie].name="!Directory",le>0&&je!==W&&(Vn[je].name="!MiniFAT"),Vn[$e[0]].name="!FAT",Vn.fat_addrs=$e,Vn.ssz=ie;var Wn={},ir=[],cl=[],hc=[];N(Ie,Vn,Kt,ir,le,Wn,cl,je),x(cl,hc,ir),ir.shift();var hi={FileIndex:cl,FullPaths:hc};return oe&&oe.raw&&(hi.raw={header:ct,sectors:Kt}),hi}function h(ee){if(ee[ee.l]==80&&ee[ee.l+1]==75)return[0,0];ee.chk(K,"Header Signature: "),ee.l+=16;var oe=ee.read_shift(2,"u");return[ee.read_shift(2,"u"),oe]}function p(ee,oe){var ae=9;switch(ee.l+=2,ae=ee.read_shift(2)){case 9:if(oe!=3)throw new Error("Sector Shift: Expected 9 saw "+ae);break;case 12:if(oe!=4)throw new Error("Sector Shift: Expected 12 saw "+ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ae)}ee.chk("0600","Mini Sector Shift: "),ee.chk("000000000000","Reserved: ")}function g(ee,oe){for(var ae=Math.ceil(ee.length/oe)-1,ie=[],le=1;le<ae;++le)ie[le-1]=ee.slice(le*oe,(le+1)*oe);return ie[ae-1]=ee.slice(ae*oe),ie}function x(ee,oe,ae){for(var ie=0,le=0,ce=0,Ie=0,je=0,Ne=ae.length,$e=[],Oe=[];ie<Ne;++ie)$e[ie]=Oe[ie]=ie,oe[ie]=ae[ie];for(;je<Oe.length;++je)ie=Oe[je],le=ee[ie].L,ce=ee[ie].R,Ie=ee[ie].C,$e[ie]===ie&&(le!==-1&&$e[le]!==le&&($e[ie]=$e[le]),ce!==-1&&$e[ce]!==ce&&($e[ie]=$e[ce])),Ie!==-1&&($e[Ie]=ie),le!==-1&&ie!=$e[ie]&&($e[le]=$e[ie],Oe.lastIndexOf(le)<je&&Oe.push(le)),ce!==-1&&ie!=$e[ie]&&($e[ce]=$e[ie],Oe.lastIndexOf(ce)<je&&Oe.push(ce));for(ie=1;ie<Ne;++ie)$e[ie]===ie&&(ce!==-1&&$e[ce]!==ce?$e[ie]=$e[ce]:le!==-1&&$e[le]!==le&&($e[ie]=$e[le]));for(ie=1;ie<Ne;++ie)if(ee[ie].type!==0){if(je=ie,je!=$e[je])do je=$e[je],oe[ie]=oe[je]+"/"+oe[ie];while(je!==0&&$e[je]!==-1&&je!=$e[je]);$e[ie]=-1}for(oe[0]+="/",ie=1;ie<Ne;++ie)ee[ie].type!==2&&(oe[ie]+="/")}function y(ee,oe,ae){for(var ie=ee.start,le=ee.size,ce=[],Ie=ie;ae&&le>0&&Ie>=0;)ce.push(oe.slice(Ie*P,Ie*P+P)),le-=P,Ie=id(ae,Ie*4);return ce.length===0?ze(0):Bs(ce).slice(0,ee.size)}function b(ee,oe,ae,ie,le){var ce=W;if(ee===W){if(oe!==0)throw new Error("DIFAT chain shorter than expected")}else if(ee!==-1){var Ie=ae[ee],je=(ie>>>2)-1;if(!Ie)return;for(var Ne=0;Ne<je&&(ce=id(Ie,Ne*4))!==W;++Ne)le.push(ce);b(id(Ie,ie-4),oe-1,ae,ie,le)}}function S(ee,oe,ae,ie,le){var ce=[],Ie=[];le||(le=[]);var je=ie-1,Ne=0,$e=0;for(Ne=oe;Ne>=0;){le[Ne]=!0,ce[ce.length]=Ne,Ie.push(ee[Ne]);var Oe=ae[Math.floor(Ne*4/ie)];if($e=Ne*4&je,ie<4+$e)throw new Error("FAT boundary crossed: "+Ne+" 4 "+ie);if(!ee[Oe])break;Ne=id(ee[Oe],$e)}return{nodes:ce,data:qF([Ie])}}function T(ee,oe,ae,ie){var le=ee.length,ce=[],Ie=[],je=[],Ne=[],$e=ie-1,Oe=0,nt=0,ct=0,vt=0;for(Oe=0;Oe<le;++Oe)if(je=[],ct=Oe+oe,ct>=le&&(ct-=le),!Ie[ct]){Ne=[];var it=[];for(nt=ct;nt>=0;){it[nt]=!0,Ie[nt]=!0,je[je.length]=nt,Ne.push(ee[nt]);var mt=ae[Math.floor(nt*4/ie)];if(vt=nt*4&$e,ie<4+vt)throw new Error("FAT boundary crossed: "+nt+" 4 "+ie);if(!ee[mt]||(nt=id(ee[mt],vt),it[nt]))break}ce[ct]={nodes:je,data:qF([Ne])}}return ce}function N(ee,oe,ae,ie,le,ce,Ie,je){for(var Ne=0,$e=ie.length?2:0,Oe=oe[ee].data,nt=0,ct=0,vt;nt<Oe.length;nt+=128){var it=Oe.slice(nt,nt+128);Qa(it,64),ct=it.read_shift(2),vt=M_(it,0,ct-$e),ie.push(vt);var mt={name:vt,type:it.read_shift(1),color:it.read_shift(1),L:it.read_shift(4,"i"),R:it.read_shift(4,"i"),C:it.read_shift(4,"i"),clsid:it.read_shift(16),state:it.read_shift(4,"i"),start:0,size:0},Kt=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);Kt!==0&&(mt.ct=C(it,it.l-8));var Vn=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);Vn!==0&&(mt.mt=C(it,it.l-8)),mt.start=it.read_shift(4,"i"),mt.size=it.read_shift(4,"i"),mt.size<0&&mt.start<0&&(mt.size=mt.type=0,mt.start=W,mt.name=""),mt.type===5?(Ne=mt.start,le>0&&Ne!==W&&(oe[Ne].name="!StreamData")):mt.size>=4096?(mt.storage="fat",oe[mt.start]===void 0&&(oe[mt.start]=S(ae,mt.start,oe.fat_addrs,oe.ssz)),oe[mt.start].name=mt.name,mt.content=oe[mt.start].data.slice(0,mt.size)):(mt.storage="minifat",mt.size<0?mt.size=0:Ne!==W&&mt.start!==W&&oe[Ne]&&(mt.content=y(mt,oe[Ne].data,(oe[je]||{}).data))),mt.content&&Qa(mt.content,0),ce[vt]=mt,Ie.push(mt)}}function C(ee,oe){return new Date((Ja(ee,oe+4)/1e7*Math.pow(2,32)+Ja(ee,oe)/1e7-11644473600)*1e3)}function I(ee,oe){return c(),d(l.readFileSync(ee),oe)}function F(ee,oe){var ae=oe&&oe.type;switch(ae||En&&Buffer.isBuffer(ee)&&(ae="buffer"),ae||"base64"){case"file":return I(ee,oe);case"base64":return d(so(Hl(ee)),oe);case"binary":return d(so(ee),oe)}return d(ee,oe)}function D(ee,oe){var ae=oe||{},ie=ae.root||"Root Entry";if(ee.FullPaths||(ee.FullPaths=[]),ee.FileIndex||(ee.FileIndex=[]),ee.FullPaths.length!==ee.FileIndex.length)throw new Error("inconsistent CFB structure");ee.FullPaths.length===0&&(ee.FullPaths[0]=ie+"/",ee.FileIndex[0]={name:ie,type:5}),ae.CLSID&&(ee.FileIndex[0].clsid=ae.CLSID),A(ee)}function A(ee){var oe="Sh33tJ5";if(!Xn.find(ee,"/"+oe)){var ae=ze(4);ae[0]=55,ae[1]=ae[3]=50,ae[2]=54,ee.FileIndex.push({name:oe,type:2,content:ae,size:4,L:69,R:69,C:69}),ee.FullPaths.push(ee.FullPaths[0]+oe),_(ee)}}function _(ee,oe){D(ee);for(var ae=!1,ie=!1,le=ee.FullPaths.length-1;le>=0;--le){var ce=ee.FileIndex[le];switch(ce.type){case 0:ie?ae=!0:(ee.FileIndex.pop(),ee.FullPaths.pop());break;case 1:case 2:case 5:ie=!0,isNaN(ce.R*ce.L*ce.C)&&(ae=!0),ce.R>-1&&ce.L>-1&&ce.R==ce.L&&(ae=!0);break;default:ae=!0;break}}if(!(!ae&&!oe)){var Ie=new Date(1987,1,19),je=0,Ne=Object.create?Object.create(null):{},$e=[];for(le=0;le<ee.FullPaths.length;++le)Ne[ee.FullPaths[le]]=!0,ee.FileIndex[le].type!==0&&$e.push([ee.FullPaths[le],ee.FileIndex[le]]);for(le=0;le<$e.length;++le){var Oe=r($e[le][0]);ie=Ne[Oe],ie||($e.push([Oe,{name:s(Oe).replace("/",""),type:1,clsid:V,ct:Ie,mt:Ie,content:null}]),Ne[Oe]=!0)}for($e.sort(function(vt,it){return t(vt[0],it[0])}),ee.FullPaths=[],ee.FileIndex=[],le=0;le<$e.length;++le)ee.FullPaths[le]=$e[le][0],ee.FileIndex[le]=$e[le][1];for(le=0;le<$e.length;++le){var nt=ee.FileIndex[le],ct=ee.FullPaths[le];if(nt.name=s(ct).replace("/",""),nt.L=nt.R=nt.C=-(nt.color=1),nt.size=nt.content?nt.content.length:0,nt.start=0,nt.clsid=nt.clsid||V,le===0)nt.C=$e.length>1?1:-1,nt.size=0,nt.type=5;else if(ct.slice(-1)=="/"){for(je=le+1;je<$e.length&&r(ee.FullPaths[je])!=ct;++je);for(nt.C=je>=$e.length?-1:je,je=le+1;je<$e.length&&r(ee.FullPaths[je])!=r(ct);++je);nt.R=je>=$e.length?-1:je,nt.type=1}else r(ee.FullPaths[le+1]||"")==r(ct)&&(nt.R=le+1),nt.type=2}}}function k(ee,oe){var ae=oe||{};if(ae.fileType=="mad")return Qe(ee,ae);switch(_(ee),ae.fileType){case"zip":return Wr(ee,ae)}var ie=function(vt){for(var it=0,mt=0,Kt=0;Kt<vt.FileIndex.length;++Kt){var Vn=vt.FileIndex[Kt];if(Vn.content){var Wn=Vn.content.length;Wn>0&&(Wn<4096?it+=Wn+63>>6:mt+=Wn+511>>9)}}for(var ir=vt.FullPaths.length+3>>2,cl=it+7>>3,hc=it+127>>7,hi=cl+mt+ir+hc,Hi=hi+127>>7,Au=Hi<=109?0:Math.ceil((Hi-109)/127);hi+Hi+Au+127>>7>Hi;)Au=++Hi<=109?0:Math.ceil((Hi-109)/127);var Gi=[1,Au,Hi,hc,ir,mt,it,0];return vt.FileIndex[0].size=it<<6,Gi[7]=(vt.FileIndex[0].start=Gi[0]+Gi[1]+Gi[2]+Gi[3]+Gi[4]+Gi[5])+(Gi[6]+7>>3),Gi}(ee),le=ze(ie[7]<<9),ce=0,Ie=0;{for(ce=0;ce<8;++ce)le.write_shift(1,q[ce]);for(ce=0;ce<8;++ce)le.write_shift(2,0);for(le.write_shift(2,62),le.write_shift(2,3),le.write_shift(2,65534),le.write_shift(2,9),le.write_shift(2,6),ce=0;ce<3;++ce)le.write_shift(2,0);for(le.write_shift(4,0),le.write_shift(4,ie[2]),le.write_shift(4,ie[0]+ie[1]+ie[2]+ie[3]-1),le.write_shift(4,0),le.write_shift(4,4096),le.write_shift(4,ie[3]?ie[0]+ie[1]+ie[2]-1:W),le.write_shift(4,ie[3]),le.write_shift(-4,ie[1]?ie[0]-1:W),le.write_shift(4,ie[1]),ce=0;ce<109;++ce)le.write_shift(-4,ce<ie[2]?ie[1]+ce:-1)}if(ie[1])for(Ie=0;Ie<ie[1];++Ie){for(;ce<236+Ie*127;++ce)le.write_shift(-4,ce<ie[2]?ie[1]+ce:-1);le.write_shift(-4,Ie===ie[1]-1?W:Ie+1)}var je=function(vt){for(Ie+=vt;ce<Ie-1;++ce)le.write_shift(-4,ce+1);vt&&(++ce,le.write_shift(-4,W))};for(Ie=ce=0,Ie+=ie[1];ce<Ie;++ce)le.write_shift(-4,X.DIFSECT);for(Ie+=ie[2];ce<Ie;++ce)le.write_shift(-4,X.FATSECT);je(ie[3]),je(ie[4]);for(var Ne=0,$e=0,Oe=ee.FileIndex[0];Ne<ee.FileIndex.length;++Ne)Oe=ee.FileIndex[Ne],Oe.content&&($e=Oe.content.length,!($e<4096)&&(Oe.start=Ie,je($e+511>>9)));for(je(ie[6]+7>>3);le.l&511;)le.write_shift(-4,X.ENDOFCHAIN);for(Ie=ce=0,Ne=0;Ne<ee.FileIndex.length;++Ne)Oe=ee.FileIndex[Ne],Oe.content&&($e=Oe.content.length,!(!$e||$e>=4096)&&(Oe.start=Ie,je($e+63>>6)));for(;le.l&511;)le.write_shift(-4,X.ENDOFCHAIN);for(ce=0;ce<ie[4]<<2;++ce){var nt=ee.FullPaths[ce];if(!nt||nt.length===0){for(Ne=0;Ne<17;++Ne)le.write_shift(4,0);for(Ne=0;Ne<3;++Ne)le.write_shift(4,-1);for(Ne=0;Ne<12;++Ne)le.write_shift(4,0);continue}Oe=ee.FileIndex[ce],ce===0&&(Oe.start=Oe.size?Oe.start-1:W);var ct=ce===0&&ae.root||Oe.name;if($e=2*(ct.length+1),le.write_shift(64,ct,"utf16le"),le.write_shift(2,$e),le.write_shift(1,Oe.type),le.write_shift(1,Oe.color),le.write_shift(-4,Oe.L),le.write_shift(-4,Oe.R),le.write_shift(-4,Oe.C),Oe.clsid)le.write_shift(16,Oe.clsid,"hex");else for(Ne=0;Ne<4;++Ne)le.write_shift(4,0);le.write_shift(4,Oe.state||0),le.write_shift(4,0),le.write_shift(4,0),le.write_shift(4,0),le.write_shift(4,0),le.write_shift(4,Oe.start),le.write_shift(4,Oe.size),le.write_shift(4,0)}for(ce=1;ce<ee.FileIndex.length;++ce)if(Oe=ee.FileIndex[ce],Oe.size>=4096)if(le.l=Oe.start+1<<9,En&&Buffer.isBuffer(Oe.content))Oe.content.copy(le,le.l,0,Oe.size),le.l+=Oe.size+511&-512;else{for(Ne=0;Ne<Oe.size;++Ne)le.write_shift(1,Oe.content[Ne]);for(;Ne&511;++Ne)le.write_shift(1,0)}for(ce=1;ce<ee.FileIndex.length;++ce)if(Oe=ee.FileIndex[ce],Oe.size>0&&Oe.size<4096)if(En&&Buffer.isBuffer(Oe.content))Oe.content.copy(le,le.l,0,Oe.size),le.l+=Oe.size+63&-64;else{for(Ne=0;Ne<Oe.size;++Ne)le.write_shift(1,Oe.content[Ne]);for(;Ne&63;++Ne)le.write_shift(1,0)}if(En)le.l=le.length;else for(;le.l<le.length;)le.write_shift(1,0);return le}function O(ee,oe){var ae=ee.FullPaths.map(function(Ne){return Ne.toUpperCase()}),ie=ae.map(function(Ne){var $e=Ne.split("/");return $e[$e.length-(Ne.slice(-1)=="/"?2:1)]}),le=!1;oe.charCodeAt(0)===47?(le=!0,oe=ae[0].slice(0,-1)+oe):le=oe.indexOf("/")!==-1;var ce=oe.toUpperCase(),Ie=le===!0?ae.indexOf(ce):ie.indexOf(ce);if(Ie!==-1)return ee.FileIndex[Ie];var je=!ce.match(ib);for(ce=ce.replace(j0,""),je&&(ce=ce.replace(ib,"!")),Ie=0;Ie<ae.length;++Ie)if((je?ae[Ie].replace(ib,"!"):ae[Ie]).replace(j0,"")==ce||(je?ie[Ie].replace(ib,"!"):ie[Ie]).replace(j0,"")==ce)return ee.FileIndex[Ie];return null}var P=64,W=-2,K="d0cf11e0a1b11ae1",q=[208,207,17,224,161,177,26,225],V="00000000000000000000000000000000",X={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:W,FREESECT:-1,HEADER_SIGNATURE:K,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:V,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(ee,oe,ae){c();var ie=k(ee,ae);l.writeFileSync(oe,ie)}function Y(ee){for(var oe=new Array(ee.length),ae=0;ae<ee.length;++ae)oe[ae]=String.fromCharCode(ee[ae]);return oe.join("")}function j(ee,oe){var ae=k(ee,oe);switch(oe&&oe.type||"buffer"){case"file":return c(),l.writeFileSync(oe.filename,ae),ae;case"binary":return typeof ae=="string"?ae:Y(ae);case"base64":return rg(typeof ae=="string"?ae:Y(ae));case"buffer":if(En)return Buffer.isBuffer(ae)?ae:ec(ae);case"array":return typeof ae=="string"?so(ae):ae}return ae}var J;function M(ee){try{var oe=ee.InflateRaw,ae=new oe;if(ae._processChunk(new Uint8Array([3,0]),ae._finishFlushFlag),ae.bytesRead)J=ee;else throw new Error("zlib does not expose bytesRead")}catch(ie){console.error("cannot use native zlib: "+(ie.message||ie))}}function z(ee,oe){if(!J)return qt(ee,oe);var ae=J.InflateRaw,ie=new ae,le=ie._processChunk(ee.slice(ee.l),ie._finishFlushFlag);return ee.l+=ie.bytesRead,le}function G(ee){return J?J.deflateRawSync(ee):kt(ee)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],pe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(ee){var oe=(ee<<1|ee<<11)&139536|(ee<<5|ee<<15)&558144;return(oe>>16|oe>>8|oe)&255}for(var be=typeof Uint8Array<"u",ge=be?new Uint8Array(256):[],ke=0;ke<256;++ke)ge[ke]=me(ke);function Le(ee,oe){var ae=ge[ee&255];return oe<=8?ae>>>8-oe:(ae=ae<<8|ge[ee>>8&255],oe<=16?ae>>>16-oe:(ae=ae<<8|ge[ee>>16&255],ae>>>24-oe))}function rt(ee,oe){var ae=oe&7,ie=oe>>>3;return(ee[ie]|(ae<=6?0:ee[ie+1]<<8))>>>ae&3}function Be(ee,oe){var ae=oe&7,ie=oe>>>3;return(ee[ie]|(ae<=5?0:ee[ie+1]<<8))>>>ae&7}function Ze(ee,oe){var ae=oe&7,ie=oe>>>3;return(ee[ie]|(ae<=4?0:ee[ie+1]<<8))>>>ae&15}function He(ee,oe){var ae=oe&7,ie=oe>>>3;return(ee[ie]|(ae<=3?0:ee[ie+1]<<8))>>>ae&31}function ne(ee,oe){var ae=oe&7,ie=oe>>>3;return(ee[ie]|(ae<=1?0:ee[ie+1]<<8))>>>ae&127}function Ae(ee,oe,ae){var ie=oe&7,le=oe>>>3,ce=(1<<ae)-1,Ie=ee[le]>>>ie;return ae<8-ie||(Ie|=ee[le+1]<<8-ie,ae<16-ie)||(Ie|=ee[le+2]<<16-ie,ae<24-ie)||(Ie|=ee[le+3]<<24-ie),Ie&ce}function Me(ee,oe,ae){var ie=oe&7,le=oe>>>3;return ie<=5?ee[le]|=(ae&7)<<ie:(ee[le]|=ae<<ie&255,ee[le+1]=(ae&7)>>8-ie),oe+3}function Ve(ee,oe,ae){var ie=oe&7,le=oe>>>3;return ae=(ae&1)<<ie,ee[le]|=ae,oe+1}function ot(ee,oe,ae){var ie=oe&7,le=oe>>>3;return ae<<=ie,ee[le]|=ae&255,ae>>>=8,ee[le+1]=ae,oe+8}function st(ee,oe,ae){var ie=oe&7,le=oe>>>3;return ae<<=ie,ee[le]|=ae&255,ae>>>=8,ee[le+1]=ae&255,ee[le+2]=ae>>>8,oe+16}function Ge(ee,oe){var ae=ee.length,ie=2*ae>oe?2*ae:oe+5,le=0;if(ae>=oe)return ee;if(En){var ce=RF(ie);if(ee.copy)ee.copy(ce);else for(;le<ee.length;++le)ce[le]=ee[le];return ce}else if(be){var Ie=new Uint8Array(ie);if(Ie.set)Ie.set(ee);else for(;le<ae;++le)Ie[le]=ee[le];return Ie}return ee.length=ie,ee}function at(ee){for(var oe=new Array(ee),ae=0;ae<ee;++ae)oe[ae]=0;return oe}function Qt(ee,oe,ae){var ie=1,le=0,ce=0,Ie=0,je=0,Ne=ee.length,$e=be?new Uint16Array(32):at(32);for(ce=0;ce<32;++ce)$e[ce]=0;for(ce=Ne;ce<ae;++ce)ee[ce]=0;Ne=ee.length;var Oe=be?new Uint16Array(Ne):at(Ne);for(ce=0;ce<Ne;++ce)$e[le=ee[ce]]++,ie<le&&(ie=le),Oe[ce]=0;for($e[0]=0,ce=1;ce<=ie;++ce)$e[ce+16]=je=je+$e[ce-1]<<1;for(ce=0;ce<Ne;++ce)je=ee[ce],je!=0&&(Oe[ce]=$e[je+16]++);var nt=0;for(ce=0;ce<Ne;++ce)if(nt=ee[ce],nt!=0)for(je=Le(Oe[ce],ie)>>ie-nt,Ie=(1<<ie+4-nt)-1;Ie>=0;--Ie)oe[je|Ie<<nt]=nt&15|ce<<4;return ie}var Vt=be?new Uint16Array(512):at(512),Mt=be?new Uint16Array(32):at(32);if(!be){for(var Ut=0;Ut<512;++Ut)Vt[Ut]=0;for(Ut=0;Ut<32;++Ut)Mt[Ut]=0}(function(){for(var ee=[],oe=0;oe<32;oe++)ee.push(5);Qt(ee,Mt,32);var ae=[];for(oe=0;oe<=143;oe++)ae.push(8);for(;oe<=255;oe++)ae.push(9);for(;oe<=279;oe++)ae.push(7);for(;oe<=287;oe++)ae.push(8);Qt(ae,Vt,288)})();var we=function(){for(var oe=be?new Uint8Array(32768):[],ae=0,ie=0;ae<pe.length-1;++ae)for(;ie<pe[ae+1];++ie)oe[ie]=ae;for(;ie<32768;++ie)oe[ie]=29;var le=be?new Uint8Array(259):[];for(ae=0,ie=0;ae<se.length-1;++ae)for(;ie<se[ae+1];++ie)le[ie]=ae;function ce(je,Ne){for(var $e=0;$e<je.length;){var Oe=Math.min(65535,je.length-$e),nt=$e+Oe==je.length;for(Ne.write_shift(1,+nt),Ne.write_shift(2,Oe),Ne.write_shift(2,~Oe&65535);Oe-- >0;)Ne[Ne.l++]=je[$e++]}return Ne.l}function Ie(je,Ne){for(var $e=0,Oe=0,nt=be?new Uint16Array(32768):[];Oe<je.length;){var ct=Math.min(65535,je.length-Oe);if(ct<10){for($e=Me(Ne,$e,+(Oe+ct==je.length)),$e&7&&($e+=8-($e&7)),Ne.l=$e/8|0,Ne.write_shift(2,ct),Ne.write_shift(2,~ct&65535);ct-- >0;)Ne[Ne.l++]=je[Oe++];$e=Ne.l*8;continue}$e=Me(Ne,$e,+(Oe+ct==je.length)+2);for(var vt=0;ct-- >0;){var it=je[Oe];vt=(vt<<5^it)&32767;var mt=-1,Kt=0;if((mt=nt[vt])&&(mt|=Oe&-32768,mt>Oe&&(mt-=32768),mt<Oe))for(;je[mt+Kt]==je[Oe+Kt]&&Kt<250;)++Kt;if(Kt>2){it=le[Kt],it<=22?$e=ot(Ne,$e,ge[it+1]>>1)-1:(ot(Ne,$e,3),$e+=5,ot(Ne,$e,ge[it-23]>>5),$e+=3);var Vn=it<8?0:it-4>>2;Vn>0&&(st(Ne,$e,Kt-se[it]),$e+=Vn),it=oe[Oe-mt],$e=ot(Ne,$e,ge[it]>>3),$e-=3;var Wn=it<4?0:it-2>>1;Wn>0&&(st(Ne,$e,Oe-mt-pe[it]),$e+=Wn);for(var ir=0;ir<Kt;++ir)nt[vt]=Oe&32767,vt=(vt<<5^je[Oe])&32767,++Oe;ct-=Kt-1}else it<=143?it=it+48:$e=Ve(Ne,$e,1),$e=ot(Ne,$e,ge[it]),nt[vt]=Oe&32767,++Oe}$e=ot(Ne,$e,0)-1}return Ne.l=($e+7)/8|0,Ne.l}return function(Ne,$e){return Ne.length<8?ce(Ne,$e):Ie(Ne,$e)}}();function kt(ee){var oe=ze(50+Math.floor(ee.length*1.1)),ae=we(ee,oe);return oe.slice(0,ae)}var lt=be?new Uint16Array(32768):at(32768),Xe=be?new Uint16Array(32768):at(32768),pt=be?new Uint16Array(128):at(128),Xt=1,_t=1;function rs(ee,oe){var ae=He(ee,oe)+257;oe+=5;var ie=He(ee,oe)+1;oe+=5;var le=Ze(ee,oe)+4;oe+=4;for(var ce=0,Ie=be?new Uint8Array(19):at(19),je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ne=1,$e=be?new Uint8Array(8):at(8),Oe=be?new Uint8Array(8):at(8),nt=Ie.length,ct=0;ct<le;++ct)Ie[U[ct]]=ce=Be(ee,oe),Ne<ce&&(Ne=ce),$e[ce]++,oe+=3;var vt=0;for($e[0]=0,ct=1;ct<=Ne;++ct)Oe[ct]=vt=vt+$e[ct-1]<<1;for(ct=0;ct<nt;++ct)(vt=Ie[ct])!=0&&(je[ct]=Oe[vt]++);var it=0;for(ct=0;ct<nt;++ct)if(it=Ie[ct],it!=0){vt=ge[je[ct]]>>8-it;for(var mt=(1<<7-it)-1;mt>=0;--mt)pt[vt|mt<<it]=it&7|ct<<3}var Kt=[];for(Ne=1;Kt.length<ae+ie;)switch(vt=pt[ne(ee,oe)],oe+=vt&7,vt>>>=3){case 16:for(ce=3+rt(ee,oe),oe+=2,vt=Kt[Kt.length-1];ce-- >0;)Kt.push(vt);break;case 17:for(ce=3+Be(ee,oe),oe+=3;ce-- >0;)Kt.push(0);break;case 18:for(ce=11+ne(ee,oe),oe+=7;ce-- >0;)Kt.push(0);break;default:Kt.push(vt),Ne<vt&&(Ne=vt);break}var Vn=Kt.slice(0,ae),Wn=Kt.slice(ae);for(ct=ae;ct<286;++ct)Vn[ct]=0;for(ct=ie;ct<30;++ct)Wn[ct]=0;return Xt=Qt(Vn,lt,286),_t=Qt(Wn,Xe,30),oe}function yt(ee,oe){if(ee[0]==3&&!(ee[1]&3))return[Cd(oe),2];for(var ae=0,ie=0,le=RF(oe||1<<18),ce=0,Ie=le.length>>>0,je=0,Ne=0;(ie&1)==0;){if(ie=Be(ee,ae),ae+=3,ie>>>1)ie>>1==1?(je=9,Ne=5):(ae=rs(ee,ae),je=Xt,Ne=_t);else{ae&7&&(ae+=8-(ae&7));var $e=ee[ae>>>3]|ee[(ae>>>3)+1]<<8;if(ae+=32,$e>0)for(!oe&&Ie<ce+$e&&(le=Ge(le,ce+$e),Ie=le.length);$e-- >0;)le[ce++]=ee[ae>>>3],ae+=8;continue}for(;;){!oe&&Ie<ce+32767&&(le=Ge(le,ce+32767),Ie=le.length);var Oe=Ae(ee,ae,je),nt=ie>>>1==1?Vt[Oe]:lt[Oe];if(ae+=nt&15,nt>>>=4,(nt>>>8&255)===0)le[ce++]=nt;else{if(nt==256)break;nt-=257;var ct=nt<8?0:nt-4>>2;ct>5&&(ct=0);var vt=ce+se[nt];ct>0&&(vt+=Ae(ee,ae,ct),ae+=ct),Oe=Ae(ee,ae,Ne),nt=ie>>>1==1?Mt[Oe]:Xe[Oe],ae+=nt&15,nt>>>=4;var it=nt<4?0:nt-2>>1,mt=pe[nt];for(it>0&&(mt+=Ae(ee,ae,it),ae+=it),!oe&&Ie<vt&&(le=Ge(le,vt+100),Ie=le.length);ce<vt;)le[ce]=le[ce-mt],++ce}}}return oe?[le,ae+7>>>3]:[le.slice(0,ce),ae+7>>>3]}function qt(ee,oe){var ae=ee.slice(ee.l||0),ie=yt(ae,oe);return ee.l+=ie[1],ie[0]}function gn(ee,oe){if(ee)typeof console<"u"&&console.error(oe);else throw new Error(oe)}function oa(ee,oe){var ae=ee;Qa(ae,0);var ie=[],le=[],ce={FileIndex:ie,FullPaths:le};D(ce,{root:oe.root});for(var Ie=ae.length-4;(ae[Ie]!=80||ae[Ie+1]!=75||ae[Ie+2]!=5||ae[Ie+3]!=6)&&Ie>=0;)--Ie;ae.l=Ie+4,ae.l+=4;var je=ae.read_shift(2);ae.l+=6;var Ne=ae.read_shift(4);for(ae.l=Ne,Ie=0;Ie<je;++Ie){ae.l+=20;var $e=ae.read_shift(4),Oe=ae.read_shift(4),nt=ae.read_shift(2),ct=ae.read_shift(2),vt=ae.read_shift(2);ae.l+=8;var it=ae.read_shift(4),mt=o(ae.slice(ae.l+nt,ae.l+nt+ct));ae.l+=nt+ct+vt;var Kt=ae.l;ae.l=it+4,fi(ae,$e,Oe,ce,mt),ae.l=Kt}return ce}function fi(ee,oe,ae,ie,le){ee.l+=2;var ce=ee.read_shift(2),Ie=ee.read_shift(2),je=i(ee);if(ce&8257)throw new Error("Unsupported ZIP encryption");for(var Ne=ee.read_shift(4),$e=ee.read_shift(4),Oe=ee.read_shift(4),nt=ee.read_shift(2),ct=ee.read_shift(2),vt="",it=0;it<nt;++it)vt+=String.fromCharCode(ee[ee.l++]);if(ct){var mt=o(ee.slice(ee.l,ee.l+ct));(mt[21589]||{}).mt&&(je=mt[21589].mt),((le||{})[21589]||{}).mt&&(je=le[21589].mt)}ee.l+=ct;var Kt=ee.slice(ee.l,ee.l+$e);switch(Ie){case 8:Kt=z(ee,Oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ie)}var Vn=!1;ce&8&&(Ne=ee.read_shift(4),Ne==134695760&&(Ne=ee.read_shift(4),Vn=!0),$e=ee.read_shift(4),Oe=ee.read_shift(4)),$e!=oe&&gn(Vn,"Bad compressed size: "+oe+" != "+$e),Oe!=ae&&gn(Vn,"Bad uncompressed size: "+ae+" != "+Oe),Nt(ie,vt,Kt,{unsafe:!0,mt:je})}function Wr(ee,oe){var ae=oe||{},ie=[],le=[],ce=ze(1),Ie=ae.compression?8:0,je=0,Ne=0,$e=0,Oe=0,nt=0,ct=ee.FullPaths[0],vt=ct,it=ee.FileIndex[0],mt=[],Kt=0;for(Ne=1;Ne<ee.FullPaths.length;++Ne)if(vt=ee.FullPaths[Ne].slice(ct.length),it=ee.FileIndex[Ne],!(!it.size||!it.content||vt=="Sh33tJ5")){var Vn=Oe,Wn=ze(vt.length);for($e=0;$e<vt.length;++$e)Wn.write_shift(1,vt.charCodeAt($e)&127);Wn=Wn.slice(0,Wn.l),mt[nt]=foe.buf(it.content,0);var ir=it.content;Ie==8&&(ir=G(ir)),ce=ze(30),ce.write_shift(4,67324752),ce.write_shift(2,20),ce.write_shift(2,je),ce.write_shift(2,Ie),it.mt?a(ce,it.mt):ce.write_shift(4,0),ce.write_shift(-4,mt[nt]),ce.write_shift(4,ir.length),ce.write_shift(4,it.content.length),ce.write_shift(2,Wn.length),ce.write_shift(2,0),Oe+=ce.length,ie.push(ce),Oe+=Wn.length,ie.push(Wn),Oe+=ir.length,ie.push(ir),ce=ze(46),ce.write_shift(4,33639248),ce.write_shift(2,0),ce.write_shift(2,20),ce.write_shift(2,je),ce.write_shift(2,Ie),ce.write_shift(4,0),ce.write_shift(-4,mt[nt]),ce.write_shift(4,ir.length),ce.write_shift(4,it.content.length),ce.write_shift(2,Wn.length),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(4,0),ce.write_shift(4,Vn),Kt+=ce.l,le.push(ce),Kt+=Wn.length,le.push(Wn),++nt}return ce=ze(22),ce.write_shift(4,101010256),ce.write_shift(2,0),ce.write_shift(2,0),ce.write_shift(2,nt),ce.write_shift(2,nt),ce.write_shift(4,Kt),ce.write_shift(4,Oe),ce.write_shift(2,0),Bs([Bs(ie),Bs(le),ce])}var wo={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function uc(ee,oe){if(ee.ctype)return ee.ctype;var ae=ee.name||"",ie=ae.match(/\.([^\.]+)$/);return ie&&wo[ie[1]]||oe&&(ie=(ae=oe).match(/[\.\\]([^\.\\])+$/),ie&&wo[ie[1]])?wo[ie[1]]:"application/octet-stream"}function Ua(ee){for(var oe=rg(ee),ae=[],ie=0;ie<oe.length;ie+=76)ae.push(oe.slice(ie,ie+76));return ae.join(`\r
`)+`\r
`}function dc(ee){var oe=ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function($e){var Oe=$e.charCodeAt(0).toString(16).toUpperCase();return"="+(Oe.length==1?"0"+Oe:Oe)});oe=oe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),oe.charAt(0)==`
`&&(oe="=0D"+oe.slice(1)),oe=oe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ae=[],ie=oe.split(`\r
`),le=0;le<ie.length;++le){var ce=ie[le];if(ce.length==0){ae.push("");continue}for(var Ie=0;Ie<ce.length;){var je=76,Ne=ce.slice(Ie,Ie+je);Ne.charAt(je-1)=="="?je--:Ne.charAt(je-2)=="="?je-=2:Ne.charAt(je-3)=="="&&(je-=3),Ne=ce.slice(Ie,Ie+je),Ie+=je,Ie<ce.length&&(Ne+="="),ae.push(Ne)}}return ae.join(`\r
`)}function fc(ee){for(var oe=[],ae=0;ae<ee.length;++ae){for(var ie=ee[ae];ae<=ee.length&&ie.charAt(ie.length-1)=="=";)ie=ie.slice(0,ie.length-1)+ee[++ae];oe.push(ie)}for(var le=0;le<oe.length;++le)oe[le]=oe[le].replace(/[=][0-9A-Fa-f]{2}/g,function(ce){return String.fromCharCode(parseInt(ce.slice(1),16))});return so(oe.join(`\r
`))}function So(ee,oe,ae){for(var ie="",le="",ce="",Ie,je=0;je<10;++je){var Ne=oe[je];if(!Ne||Ne.match(/^\s*$/))break;var $e=Ne.match(/^(.*?):\s*([^\s].*)$/);if($e)switch($e[1].toLowerCase()){case"content-location":ie=$e[2].trim();break;case"content-type":ce=$e[2].trim();break;case"content-transfer-encoding":le=$e[2].trim();break}}switch(++je,le.toLowerCase()){case"base64":Ie=so(Hl(oe.slice(je).join("")));break;case"quoted-printable":Ie=fc(oe.slice(je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+le)}var Oe=Nt(ee,ie.slice(ae.length),Ie,{unsafe:!0});ce&&(Oe.ctype=ce)}function tt(ee,oe){if(Y(ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ae=oe&&oe.root||"",ie=(En&&Buffer.isBuffer(ee)?ee.toString("binary"):Y(ee)).split(`\r
`),le=0,ce="";for(le=0;le<ie.length;++le)if(ce=ie[le],!!/^Content-Location:/i.test(ce)&&(ce=ce.slice(ce.indexOf("file")),ae||(ae=ce.slice(0,ce.lastIndexOf("/")+1)),ce.slice(0,ae.length)!=ae))for(;ae.length>0&&(ae=ae.slice(0,ae.length-1),ae=ae.slice(0,ae.lastIndexOf("/")+1),ce.slice(0,ae.length)!=ae););var Ie=(ie[1]||"").match(/boundary="(.*?)"/);if(!Ie)throw new Error("MAD cannot find boundary");var je="--"+(Ie[1]||""),Ne=[],$e=[],Oe={FileIndex:Ne,FullPaths:$e};D(Oe);var nt,ct=0;for(le=0;le<ie.length;++le){var vt=ie[le];vt!==je&&vt!==je+"--"||(ct++&&So(Oe,ie.slice(nt,le),ae),nt=le)}return Oe}function Qe(ee,oe){var ae=oe||{},ie=ae.boundary||"SheetJS";ie="------="+ie;for(var le=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ie.slice(2)+'"',"","",""],ce=ee.FullPaths[0],Ie=ce,je=ee.FileIndex[0],Ne=1;Ne<ee.FullPaths.length;++Ne)if(Ie=ee.FullPaths[Ne].slice(ce.length),je=ee.FileIndex[Ne],!(!je.size||!je.content||Ie=="Sh33tJ5")){Ie=Ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Kt){return"_x"+Kt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Kt){return"_u"+Kt.charCodeAt(0).toString(16)+"_"});for(var $e=je.content,Oe=En&&Buffer.isBuffer($e)?$e.toString("binary"):Y($e),nt=0,ct=Math.min(1024,Oe.length),vt=0,it=0;it<=ct;++it)(vt=Oe.charCodeAt(it))>=32&&vt<128&&++nt;var mt=nt>=ct*4/5;le.push(ie),le.push("Content-Location: "+(ae.root||"file:///C:/SheetJS/")+Ie),le.push("Content-Transfer-Encoding: "+(mt?"quoted-printable":"base64")),le.push("Content-Type: "+uc(je,Ie)),le.push(""),le.push(mt?dc(Oe):Ua(Oe))}return le.push(ie+`--\r
`),le.join(`\r
`)}function wt(ee){var oe={};return D(oe,ee),oe}function Nt(ee,oe,ae,ie){var le=ie&&ie.unsafe;le||D(ee);var ce=!le&&Xn.find(ee,oe);if(!ce){var Ie=ee.FullPaths[0];oe.slice(0,Ie.length)==Ie?Ie=oe:(Ie.slice(-1)!="/"&&(Ie+="/"),Ie=(Ie+oe).replace("//","/")),ce={name:s(oe),type:2},ee.FileIndex.push(ce),ee.FullPaths.push(Ie),le||Xn.utils.cfb_gc(ee)}return ce.content=ae,ce.size=ae?ae.length:0,ie&&(ie.CLSID&&(ce.clsid=ie.CLSID),ie.mt&&(ce.mt=ie.mt),ie.ct&&(ce.ct=ie.ct)),ce}function ln(ee,oe){D(ee);var ae=Xn.find(ee,oe);if(ae){for(var ie=0;ie<ee.FileIndex.length;++ie)if(ee.FileIndex[ie]==ae)return ee.FileIndex.splice(ie,1),ee.FullPaths.splice(ie,1),!0}return!1}function ss(ee,oe,ae){D(ee);var ie=Xn.find(ee,oe);if(ie){for(var le=0;le<ee.FileIndex.length;++le)if(ee.FileIndex[le]==ie)return ee.FileIndex[le].name=s(ae),ee.FullPaths[le]=ae,!0}return!1}function Wi(ee){_(ee,!0)}return e.find=O,e.read=F,e.parse=d,e.write=j,e.writeFile=Q,e.utils={cfb_new:wt,cfb_add:Nt,cfb_del:ln,cfb_mov:ss,cfb_gc:Wi,ReadShift:U0,CheckField:X6,prep_blob:Qa,bconcat:Bs,use_zlib:M,_deflateRaw:kt,_inflateRaw:qt,consts:X},e}();function hoe(n){return typeof n=="string"?Pw(n):Array.isArray(n)?Bie(n):n}function Gg(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=Pw(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?ag(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var s=new Blob([hoe(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,n);if(typeof saveAs<"u")return saveAs(s,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:n,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=n,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Hg(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function Vs(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function jF(n,e){for(var t=[],r=Vs(n),s=0;s!==r.length;++s)t[n[r[s]][e]]==null&&(t[n[r[s]][e]]=r[s]);return t}function O_(n){for(var e=[],t=Vs(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function zw(n){for(var e=[],t=Vs(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function poe(n){for(var e=[],t=Vs(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var wv=new Date(1899,11,30,0,0,0);function Fa(n,e){var t=n.getTime(),r=wv.getTime()+(n.getTimezoneOffset()-wv.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var R6=new Date,moe=wv.getTime()+(R6.getTimezoneOffset()-wv.getTimezoneOffset())*6e4,zF=R6.getTimezoneOffset();function O6(n){var e=new Date;return e.setTime(n*24*60*60*1e3+moe),e.getTimezoneOffset()!==zF&&e.setTime(e.getTime()+(e.getTimezoneOffset()-zF)*6e4),e}var UF=new Date("2017-02-19T19:06:09.000Z"),D6=isNaN(UF.getFullYear())?new Date("2/19/17"):UF,goe=D6.getFullYear()==2017;function ma(n,e){var t=new Date(n);if(goe)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(D6.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var s=n.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return n.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Uw(n,e){if(En&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(a){return t[a]||a})}catch{}for(var r=[],s=0;s!=n.length;++s)r.push(String.fromCharCode(n[s]));return r.join("")}function La(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=La(n[t]));return e}function kr(n,e){for(var t="";t.length<e;)t+=n;return t}function Fl(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(s,a){return t=-t,a}),!isNaN(e=Number(r)))?e/t:e}var xoe=["january","february","march","april","may","june","july","august","september","october","november","december"];function sg(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return t;var i=n.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&xoe.indexOf(i)==-1)return t}else if(i.match(/[a-z]/))return t;return r<0||r>8099?t:(s>0||a>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function rn(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return En?r=ec(t):r=jie(t),Xn.utils.cfb_add(n,e,r)}Xn.utils.cfb_add(n,e,t)}else n.file(e,t)}function D_(){return Xn.utils.cfb_new()}var ts=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,yoe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},F_=O_(yoe),L_=/[&<>'"]/g,boe=/[\u0000-\u0008\u000b-\u001f]/g;function Bn(n){var e=n+"";return e.replace(L_,function(t){return F_[t]}).replace(boe,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function VF(n){return Bn(n).replace(/ /g,"_x0020_")}var F6=/[\u0000-\u001f]/g;function voe(n){var e=n+"";return e.replace(L_,function(t){return F_[t]}).replace(/\n/g,"<br/>").replace(F6,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function woe(n){var e=n+"";return e.replace(L_,function(t){return F_[t]}).replace(F6,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Soe(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Toe(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function PC(n){for(var e="",t=0,r=0,s=0,a=0,i=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(s=n.charCodeAt(t++),r>191&&r<224){i=(r&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63);continue}i=n.charCodeAt(t++),o=((r&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function WF(n){var e=Cd(2*n.length),t,r,s=1,a=0,i=0,o;for(r=0;r<n.length;r+=s)s=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),s=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),s=3):(s=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,i=55296+(t>>>10&1023),t=56320+(t&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=t%256,e[a++]=t>>>8;return e.slice(0,a).toString("ucs2")}function HF(n){return ec(n,"binary").toString("utf8")}var lb="foo bar baz",z0=En&&(HF(lb)==PC(lb)&&HF||WF(lb)==PC(lb)&&WF)||PC,ag=En?function(n){return ec(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,s=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,s=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Noe=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<n.length;++s)r=r.replace(n[s][0],n[s][1]);return r}}(),L6=/(^\s|\s$|\n)/;function js(n,e){return"<"+n+(e.match(L6)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function ig(n){return Vs(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function ut(n,e,t){return"<"+n+(t!=null?ig(t):"")+(e!=null?(e.match(L6)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function VE(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Coe(n,e){switch(typeof n){case"string":var t=ut("vt:lpwstr",Bn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return ut((n|0)==n?"vt:i4":"vt:r8",Bn(String(n)));case"boolean":return ut("vt:bool",n?"true":"false")}if(n instanceof Date)return ut("vt:filetime",VE(n));throw new Error("Unable to serialize "+n)}var vs={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Kh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Za={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Eoe(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),s=n[e+6]&15,a=5;a>=0;--a)s=s*256+n[e+a];return r==2047?s==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,s+=Math.pow(2,52)),t*Math.pow(2,r-52)*s)}function koe(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=r?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)n[t+o]=a&255;n[t+6]=(s&15)<<4|a&15,n[t+7]=s>>4|r}var GF=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var s=0,a=n[0][r].length;s<a;s+=t)e.push.apply(e,n[0][r].slice(s,s+t));return e},qF=En?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:ec(e)})):GF(n)}:GF,KF=function(n,e,t){for(var r=[],s=e;s<t;s+=2)r.push(String.fromCharCode(E0(n,s)));return r.join("").replace(j0,"")},M_=En?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(j0,""):KF(n,e,t)}:KF,XF=function(n,e,t){for(var r=[],s=e;s<e+t;++s)r.push(("0"+n[s].toString(16)).slice(-2));return r.join("")},M6=En?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):XF(n,e,t)}:XF,YF=function(n,e,t){for(var r=[],s=e;s<t;s++)r.push(String.fromCharCode(oh(n,s)));return r.join("")},qg=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):YF(e,t,r)}:YF,P6=function(n,e){var t=Ja(n,e);return t>0?qg(n,e+4,e+4+t-1):""},B6=P6,j6=function(n,e){var t=Ja(n,e);return t>0?qg(n,e+4,e+4+t-1):""},z6=j6,U6=function(n,e){var t=2*Ja(n,e);return t>0?qg(n,e+4,e+4+t-1):""},V6=U6,W6=function(e,t){var r=Ja(e,t);return r>0?M_(e,t+4,t+4+r):""},H6=W6,G6=function(n,e){var t=Ja(n,e);return t>0?qg(n,e+4,e+4+t):""},q6=G6,K6=function(n,e){return Eoe(n,e)},Sv=K6,P_=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};En&&(B6=function(e,t){if(!Buffer.isBuffer(e))return P6(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},z6=function(e,t){if(!Buffer.isBuffer(e))return j6(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},V6=function(e,t){if(!Buffer.isBuffer(e))return U6(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},H6=function(e,t){if(!Buffer.isBuffer(e))return W6(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},q6=function(e,t){if(!Buffer.isBuffer(e))return G6(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},Sv=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):K6(e,t)},P_=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var oh=function(n,e){return n[e]},E0=function(n,e){return n[e+1]*256+n[e]},_oe=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Ja=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},id=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},Ioe=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function U0(n,e){var t="",r,s,a=[],i,o,l,c;switch(e){case"dbcs":if(c=this.l,En&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(E0(this,c)),c+=2;n*=2;break;case"utf8":t=qg(this,this.l,this.l+n);break;case"utf16le":n*=2,t=M_(this,this.l,this.l+n);break;case"wstr":return U0.call(this,n,"dbcs");case"lpstr-ansi":t=B6(this,this.l),n=4+Ja(this,this.l);break;case"lpstr-cp":t=z6(this,this.l),n=4+Ja(this,this.l);break;case"lpwstr":t=V6(this,this.l),n=4+2*Ja(this,this.l);break;case"lpp4":n=4+Ja(this,this.l),t=H6(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Ja(this,this.l),t=q6(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(i=oh(this,this.l+n++))!==0;)a.push(ab(i));t=a.join("");break;case"_wstr":for(n=0,t="";(i=E0(this,this.l+n))!==0;)a.push(ab(i)),n+=2;n+=2,t=a.join("");break;case"dbcs-cont":for(t="",c=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=oh(this,c),this.l=c+1,o=U0.call(this,n-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(ab(E0(this,c))),c+=2}t=a.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",c=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return i=oh(this,c),this.l=c+1,o=U0.call(this,n-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(ab(oh(this,c))),c+=1}t=a.join("");break;default:switch(n){case 1:return r=oh(this,this.l),this.l++,r;case 2:return r=(e==="i"?_oe:E0)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?id:Ioe)(this,this.l),this.l+=4,r):(s=Ja(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return n==8?s=Sv(this,this.l):s=Sv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;n=8;case 16:t=M6(this,this.l,n);break}}return this.l+=n,t}var Aoe=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},$oe=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},Roe=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Ooe(n,e,t){var r=0,s=0;if(t==="dbcs"){for(s=0;s!=e.length;++s)Roe(this,e.charCodeAt(s),this.l+2*s);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;r=e.length}else if(t==="hex"){for(;s<n;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(t==="utf16le"){var a=Math.min(this.l+n,this.length);for(s=0;s<Math.min(e.length,n);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Aoe(this,e,this.l);break;case 8:if(r=8,t==="f"){koe(this,e,this.l);break}case 16:break;case-4:r=4,$oe(this,e,this.l);break}return this.l+=r,this}function X6(n,e){var t=M6(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Qa(n,e){n.l=e,n.read_shift=U0,n.chk=X6,n.write_shift=Ooe}function Qo(n,e){n.l+=e}function ze(n){var e=Cd(n);return Qa(e,0),e}function Oa(){var n=[],e=En?256:2048,t=function(c){var d=ze(c);return Qa(d,0),d},r=t(e),s=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},a=function(c){return r&&c<r.length-r.l?r:(s(),r=t(Math.max(c+1,e)))},i=function(){return s(),Bs(n)},o=function(c){s(),r=c,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:o,end:i,_bufs:n}}function Je(n,e,t,r){var s=+e,a;if(!isNaN(s)){r||(r=Ehe[s].p||(t||[]).length||0),a=1+(s>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var i=n.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(r>=128)i.write_shift(1,(r&127)+128),r>>=7;else{i.write_shift(1,r);break}r>0&&P_(t)&&n.push(t)}}function V0(n,e,t){var r=La(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function QF(n,e,t){var r=La(n);return r.s=V0(r.s,e.s,t),r.e=V0(r.e,e.s,t),r}function W0(n,e){if(n.cRel&&n.c<0)for(n=La(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=La(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=zn(n);return!n.cRel&&n.cRel!=null&&(t=Loe(t)),!n.rRel&&n.rRel!=null&&(t=Doe(t)),t}function BC(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+ta(n.s.c)+":"+(n.e.cRel?"":"$")+ta(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Us(n.s.r)+":"+(n.e.rRel?"":"$")+Us(n.e.r):W0(n.s,e.biff)+":"+W0(n.e,e.biff)}function B_(n){return parseInt(Foe(n),10)-1}function Us(n){return""+(n+1)}function Doe(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Foe(n){return n.replace(/\$(\d+)$/,"$1")}function j_(n){for(var e=Moe(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function ta(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function Loe(n){return n.replace(/^([A-Z])/,"$$$1")}function Moe(n){return n.replace(/^\$([A-Z])/,"$1")}function Poe(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ts(n){for(var e=0,t=0,r=0;r<n.length;++r){var s=n.charCodeAt(r);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(t=26*t+(s-64))}return{c:t-1,r:e-1}}function zn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function li(n){var e=n.indexOf(":");return e==-1?{s:Ts(n),e:Ts(n)}:{s:Ts(n.slice(0,e)),e:Ts(n.slice(e+1))}}function Zr(n,e){return typeof e>"u"||typeof e=="number"?Zr(n.s,n.e):(typeof n!="string"&&(n=zn(n)),typeof e!="string"&&(e=zn(e)),n==e?n:n+":"+e)}function ur(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,s=0,a=n.length;for(t=0;r<a&&!((s=n.charCodeAt(r)-64)<1||s>26);++r)t=26*t+s;for(e.s.c=--t,t=0;r<a&&!((s=n.charCodeAt(r)-48)<0||s>9);++r)t=10*t+s;if(e.s.r=--t,r===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=a&&!((s=n.charCodeAt(r)-64)<1||s>26);++r)t=26*t+s;for(e.e.c=--t,t=0;r!=a&&!((s=n.charCodeAt(r)-48)<0||s>9);++r)t=10*t+s;return e.e.r=--t,e}function ZF(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=Jc(n.z,t?Fa(e):e)}catch{}try{return n.w=Jc((n.XF||{}).numFmtId||(t?14:0),t?Fa(e):e)}catch{return""+e}}function Gl(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?Kg[n.v]||n.v:e==null?ZF(n,n.v):ZF(n,e))}function Hd(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function Y6(n,e,t){var r=t||{},s=n?Array.isArray(n):r.dense,a=n||(s?[]:{}),i=0,o=0;if(a&&r.origin!=null){if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?Ts(r.origin):r.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=ur(a["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),i==-1&&(c.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var g={v:e[h][p]},x=i+h,y=o+p;if(c.s.r>x&&(c.s.r=x),c.s.c>y&&(c.s.c=y),c.e.r<x&&(c.e.r=x),c.e.c<y&&(c.e.c=y),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))g=e[h][p];else if(Array.isArray(g.v)&&(g.f=e[h][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||_r[14],r.cellDates?(g.t="d",g.w=Jc(g.z,Fa(g.v))):(g.t="n",g.v=Fa(g.v),g.w=Jc(g.z,g.v))):g.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(g.z=a[x][y].z),a[x][y]=g;else{var b=zn({c:y,r:x});a[b]&&a[b].z&&(g.z=a[b].z),a[b]=g}}}return c.s.c<1e7&&(a["!ref"]=Zr(c)),a}function Xh(n,e){return Y6(null,n,e)}function Boe(n){return n.read_shift(4,"i")}function lo(n,e){return e||(e=ze(4)),e.write_shift(4,n),e}function na(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Ns(n,e){var t=!1;return e==null&&(t=!0,e=ze(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function joe(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function zoe(n,e){return e||(e=ze(4)),e.write_shift(2,0),e.write_shift(2,0),e}function z_(n,e){var t=n.l,r=n.read_shift(1),s=na(n),a=[],i={t:s,h:s};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)a.push(joe(n));i.r=a}else i.r=[{ich:0,ifnt:0}];return n.l=t+e,i}function Uoe(n,e){var t=!1;return e==null&&(t=!0,e=ze(15+4*n.t.length)),e.write_shift(1,0),Ns(n.t,e),t?e.slice(0,e.l):e}var Voe=z_;function Woe(n,e){var t=!1;return e==null&&(t=!0,e=ze(23+4*n.t.length)),e.write_shift(1,1),Ns(n.t,e),e.write_shift(4,1),zoe({},e),t?e.slice(0,e.l):e}function ji(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function Gd(n,e){return e==null&&(e=ze(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function qd(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function Kd(n,e){return e==null&&(e=ze(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Hoe=na,Q6=Ns;function U_(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function Tv(n,e){var t=!1;return e==null&&(t=!0,e=ze(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var Goe=na,WE=U_,V_=Tv;function Z6(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var s=r===0?Sv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):id(e,0)>>2;return t?s/100:s}function J6(n,e){e==null&&(e=ze(4));var t=0,r=0,s=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?s:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function e5(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function qoe(n,e){return e||(e=ze(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Xd=e5,Yh=qoe;function Qh(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Ed(n,e){return(e||ze(8)).write_shift(8,n,"f")}function Koe(n){var e={},t=n.read_shift(1),r=t>>>1,s=n.read_shift(1),a=n.read_shift(2,"i"),i=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=s;var c=rle[s];c&&(e.rgb=cL(c));break;case 2:e.rgb=cL([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Nv(n,e){if(e||(e=ze(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Xoe(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function Yoe(n,e){e||(e=ze(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var t5=2,Ya=3,cb=11,Cv=19,ub=64,Qoe=65,Zoe=71,Joe=4108,ele=4126,Ls=80,JF={1:{n:"CodePage",t:t5},2:{n:"Category",t:Ls},3:{n:"PresentationFormat",t:Ls},4:{n:"ByteCount",t:Ya},5:{n:"LineCount",t:Ya},6:{n:"ParagraphCount",t:Ya},7:{n:"SlideCount",t:Ya},8:{n:"NoteCount",t:Ya},9:{n:"HiddenCount",t:Ya},10:{n:"MultimediaClipCount",t:Ya},11:{n:"ScaleCrop",t:cb},12:{n:"HeadingPairs",t:Joe},13:{n:"TitlesOfParts",t:ele},14:{n:"Manager",t:Ls},15:{n:"Company",t:Ls},16:{n:"LinksUpToDate",t:cb},17:{n:"CharacterCount",t:Ya},19:{n:"SharedDoc",t:cb},22:{n:"HyperlinksChanged",t:cb},23:{n:"AppVersion",t:Ya,p:"version"},24:{n:"DigSig",t:Qoe},26:{n:"ContentType",t:Ls},27:{n:"ContentStatus",t:Ls},28:{n:"Language",t:Ls},29:{n:"Version",t:Ls},255:{},2147483648:{n:"Locale",t:Cv},2147483651:{n:"Behavior",t:Cv},1919054434:{}},eL={1:{n:"CodePage",t:t5},2:{n:"Title",t:Ls},3:{n:"Subject",t:Ls},4:{n:"Author",t:Ls},5:{n:"Keywords",t:Ls},6:{n:"Comments",t:Ls},7:{n:"Template",t:Ls},8:{n:"LastAuthor",t:Ls},9:{n:"RevNumber",t:Ls},10:{n:"EditTime",t:ub},11:{n:"LastPrinted",t:ub},12:{n:"CreatedDate",t:ub},13:{n:"ModifiedDate",t:ub},14:{n:"PageCount",t:Ya},15:{n:"WordCount",t:Ya},16:{n:"CharCount",t:Ya},17:{n:"Thumbnail",t:Zoe},18:{n:"Application",t:Ls},19:{n:"DocSecurity",t:Ya},255:{},2147483648:{n:"Locale",t:Cv},2147483651:{n:"Behavior",t:Cv},1919054434:{}};function tle(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var nle=tle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rle=La(nle),Kg={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sle={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},db={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function n5(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function r5(n,e){var t=poe(sle),r=[],s;r[r.length]=ts,r[r.length]=ut("Types",null,{xmlns:vs.CT,"xmlns:xsd":vs.xsd,"xmlns:xsi":vs.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return ut("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){n[l]&&n[l].length>0&&(s=n[l][0],r[r.length]=ut("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:db[l][e.bookType]||db[l].xlsx}))},i=function(l){(n[l]||[]).forEach(function(c){r[r.length]=ut("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:db[l][e.bookType]||db[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(c){r[r.length]=ut("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:t[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Sn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function s5(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function ph(n){var e=[ts,ut("Relationships",null,{xmlns:vs.RELS})];return Vs(n["!id"]).forEach(function(t){e[e.length]=ut("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Pn(n,e,t,r,s,a){if(s||(s={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,s.Id="rId"+e,s.Type=r,s.Target=t,[Sn.HLINK,Sn.XPATH,Sn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),n["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][s.Id]=s,n[("/"+s.Target).replace("//","/")]=s,e}function ale(n){var e=[ts];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function tL(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function ile(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function ole(n){var e=[ts];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(tL(n[t][0],n[t][1])),e.push(ile("",n[t][0]));return e.push(tL("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function a5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+gv.version+"</meta:generator></office:meta></office:document-meta>"}var xd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function jC(n,e,t,r,s){s[n]!=null||e==null||e===""||(s[n]=e,e=Bn(e),r[r.length]=t?ut(n,e,t):js(n,e))}function i5(n,e){var t=e||{},r=[ts,ut("cp:coreProperties",null,{"xmlns:cp":vs.CORE_PROPS,"xmlns:dc":vs.dc,"xmlns:dcterms":vs.dcterms,"xmlns:dcmitype":vs.dcmitype,"xmlns:xsi":vs.xsi})],s={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&jC("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:VE(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s),n.ModifiedDate!=null&&jC("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:VE(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,s));for(var a=0;a!=xd.length;++a){var i=xd[a],o=t.Props&&t.Props[i[1]]!=null?t.Props[i[1]]:n?n[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&jC(i[0],o,null,r,s)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var mh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],o5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function l5(n){var e=[],t=ut;return n||(n={}),n.Application="SheetJS",e[e.length]=ts,e[e.length]=ut("Properties",null,{xmlns:vs.EXT_PROPS,"xmlns:vt":vs.vt}),mh.forEach(function(r){if(n[r[1]]!==void 0){var s;switch(r[2]){case"string":s=Bn(String(n[r[1]]));break;case"bool":s=n[r[1]]?"true":"false";break}s!==void 0&&(e[e.length]=t(r[0],s))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Bn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function c5(n){var e=[ts,ut("Properties",null,{xmlns:vs.CUST_PROPS,"xmlns:vt":vs.vt})];if(!n)return e.join("");var t=1;return Vs(n).forEach(function(s){++t,e[e.length]=ut("property",Coe(n[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Bn(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var nL={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function lle(n,e){var t=[];return Vs(nL).map(function(r){for(var s=0;s<xd.length;++s)if(xd[s][1]==r)return xd[s];for(s=0;s<mh.length;++s)if(mh[s][1]==r)return mh[s];throw r}).forEach(function(r){if(n[r[1]]!=null){var s=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),t.push(js(nL[r[1]]||r[1],s))}}),ut("DocumentProperties",t.join(""),{xmlns:Za.o})}function cle(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",s=[];return n&&Vs(n).forEach(function(a){if(Object.prototype.hasOwnProperty.call(n,a)){for(var i=0;i<xd.length;++i)if(a==xd[i][1])return;for(i=0;i<mh.length;++i)if(a==mh[i][1])return;for(i=0;i<t.length;++i)if(a==t[i])return;var o=n[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(ut(VF(a),o,{"dt:dt":l}))}}),e&&Vs(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(n&&Object.prototype.hasOwnProperty.call(n,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(ut(VF(a),i,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Za.o+'">'+s.join("")+"</"+r+">"}function ule(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),s=(t-r)/Math.pow(2,32);r*=1e7,s*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),s+=a);var i=ze(8);return i.write_shift(4,r),i.write_shift(4,s),i}function rL(n,e){var t=ze(4),r=ze(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=ze(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=ule(e);break;case 31:case 80:for(r=ze(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return Bs([t,r])}var u5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function dle(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function sL(n,e,t){var r=ze(8),s=[],a=[],i=8,o=0,l=ze(8),c=ze(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),a.push(l),s.push(c),i+=8+l.length,!e){c=ze(8),c.write_shift(4,0),s.unshift(c);var d=[ze(4)];for(d[0].write_shift(4,n.length),o=0;o<n.length;++o){var h=n[o][0];for(l=ze(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Bs(d),a.unshift(l),i+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(u5.indexOf(n[o][0])>-1||o5.indexOf(n[o][0])>-1)&&n[o][1]!=null){var p=n[o][1],g=0;if(e){g=+e[n[o][0]];var x=t[g];if(x.p=="version"&&typeof p=="string"){var y=p.split(".");p=(+y[0]<<16)+(+y[1]||0)}l=rL(x.t,p)}else{var b=dle(p);b==-1&&(b=31,p=String(p)),l=rL(b,p)}a.push(l),c=ze(8),c.write_shift(4,e?g:2+o),s.push(c),i+=8+l.length}var S=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,S),S+=a[o].length;return r.write_shift(4,i),r.write_shift(4,a.length),Bs([r].concat(s).concat(a))}function aL(n,e,t,r,s,a){var i=ze(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Xn.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=sL(n,t,r);if(o.push(l),s){var c=sL(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(c)}return Bs(o)}function fle(n,e){e||(e=ze(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function hle(n,e){return n.read_shift(e)===1}function da(n,e){return e||(e=ze(2)),e.write_shift(2,+!!n),e}function d5(n){return n.read_shift(2,"u")}function Ii(n,e){return e||(e=ze(2)),e.write_shift(2,n),e}function f5(n,e,t){return t||(t=ze(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function h5(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),s="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var a=n.read_shift(1);a&&(s="dbcs-cont")}else t.biff==12&&(s="wstr");t.biff>=2&&t.biff<=5&&(s="cpstr");var i=r?n.read_shift(r,s):"";return i}function ple(n){var e=n.t||"",t=ze(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=ze(2*e.length);r.write_shift(2*e.length,e,"utf16le");var s=[t,r];return Bs(s)}function mle(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var s=n.read_shift(1);return s===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function gle(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):mle(n,r,t)}function xle(n,e,t){if(t.biff>5)return gle(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function p5(n,e,t){return t||(t=ze(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function iL(n,e){e||(e=ze(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function yle(n){var e=ze(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var s=r.indexOf("#"),a=s>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(t=0;t<i.length;++t)e.write_shift(4,i[t]);if(a==28)r=r.slice(1),iL(r,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<i.length;++t)e.write_shift(1,parseInt(i[t],16));var o=s>-1?r.slice(0,s):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),a&8&&iL(s>-1?r.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<i.length;++t)e.write_shift(1,parseInt(i[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function kd(n,e,t,r){return r||(r=ze(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function ble(n,e,t){var r=t.biff>8?4:2,s=n.read_shift(r),a=n.read_shift(r,"i"),i=n.read_shift(r,"i");return[s,a,i]}function vle(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),s=n.read_shift(2);return{s:{c:r,r:e},e:{c:s,r:t}}}function m5(n,e){return e||(e=ze(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function W_(n,e,t){var r=1536,s=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,s=8;break;case"biff4":r=4,s=6;break;case"biff3":r=3,s=6;break;case"biff2":r=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ze(s);return a.write_shift(2,r),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function wle(n,e){var t=!e||e.biff==8,r=ze(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function Sle(n,e){var t=!e||e.biff>=8?2:1,r=ze(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var s=r.slice(0,r.l);return s.l=r.l,s}function Tle(n,e){var t=ze(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],s=0;s<n.length;++s)r[s]=ple(n[s]);var a=Bs([t].concat(r));return a.parts=[t.length].concat(r.map(function(i){return i.length})),a}function Nle(){var n=ze(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Cle(n){var e=ze(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Ele(n,e){var t=n.name||"Arial",r=e&&e.biff==5,s=r?15+t.length:16+2*t.length,a=ze(s);return a.write_shift(2,n.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,t.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),a}function kle(n,e,t,r){var s=ze(10);return kd(n,e,r,s),s.write_shift(4,t),s}function _le(n,e,t,r,s){var a=!s||s.biff==8,i=ze(8+ +a+(1+a)*t.length);return kd(n,e,r,i),i.write_shift(2,t.length),a&&i.write_shift(1,1),i.write_shift((1+a)*t.length,t,a?"utf16le":"sbcs"),i}function Ile(n,e,t,r){var s=t&&t.biff==5;r||(r=ze(s?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(s?1:2,e.length),s||r.write_shift(1,1),r.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}function Ale(n,e){var t=e.biff==8||!e.biff?4:2,r=ze(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function oL(n,e,t,r){var s=t&&t.biff==5;r||(r=ze(s?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var a=0;return n.numFmtId>0&&s&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),s||r.write_shift(4,0),r.write_shift(2,0),r}function $le(n){var e=ze(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Rle(n,e,t,r,s,a){var i=ze(8);return kd(n,e,r,i),f5(t,a,i),i}function Ole(n,e,t,r){var s=ze(14);return kd(n,e,r,s),Ed(t,s),s}function Dle(n,e,t){if(t.biff<8)return Fle(n,e,t);for(var r=[],s=n.l+e,a=n.read_shift(t.biff>8?4:2);a--!==0;)r.push(ble(n,t.biff>8?12:6,t));if(n.l!=s)throw new Error("Bad ExternSheet: "+n.l+" != "+s);return r}function Fle(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=h5(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function Lle(n){var e=ze(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)m5(n[t],e);return e}function Mle(n){var e=ze(24),t=Ts(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(r[s],16));return Bs([e,yle(n[1])])}function Ple(n){var e=n[1].Tooltip,t=ze(10+2*(e.length+1));t.write_shift(2,2048);var r=Ts(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var s=0;s<e.length;++s)t.write_shift(2,e.charCodeAt(s));return t.write_shift(2,0),t}function Ble(n){return n||(n=ze(4)),n.write_shift(2,1),n.write_shift(2,1),n}function jle(n,e,t){if(!t.cellStyles)return Qo(n,e);var r=t&&t.biff>=12?4:2,s=n.read_shift(r),a=n.read_shift(r),i=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var c={s,e:a,w:i,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(c.level=l>>8&7),c}function zle(n,e){var t=ze(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function Ule(n){for(var e=ze(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function Vle(n,e,t){var r=ze(15);return Yg(r,n,e),r.write_shift(8,t,"f"),r}function Wle(n,e,t){var r=ze(9);return Yg(r,n,e),r.write_shift(2,t),r}var Hle=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=O_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var c=[],d=Cd(1);switch(l.type){case"base64":d=so(Hl(o));break;case"binary":d=so(o);break;case"buffer":case"array":d=o;break}Qa(d,0);var h=d.read_shift(1),p=!!(h&136),g=!1,x=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var y=0,b=521;h==2&&(y=d.read_shift(2)),d.l+=3,h!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),h!=2&&(b=d.read_shift(2));var S=d.read_shift(2),T=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(T=n[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var N=[],C={},I=Math.min(d.length,h==2?521:b-10-(g?264:0)),F=x?32:11;d.l<I&&d[d.l]!=13;)switch(C={},C.name=xv.utils.decode(T,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,C.type=String.fromCharCode(d.read_shift(1)),h!=2&&!x&&(C.offset=d.read_shift(4)),C.len=d.read_shift(1),h==2&&(C.offset=d.read_shift(2)),C.dec=d.read_shift(1),C.name.length&&N.push(C),h!=2&&(d.l+=x?13:14),C.type){case"B":(!g||C.len!=8)&&l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+C.name+":"+C.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+C.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var D=0,A=0;for(c[0]=[],A=0;A!=N.length;++A)c[0][A]=N[A].name;for(;y-- >0;){if(d[d.l]===42){d.l+=S;continue}for(++d.l,c[++D]=[],A=0,A=0;A!=N.length;++A){var _=d.slice(d.l,d.l+N[A].len);d.l+=N[A].len,Qa(_,0);var k=xv.utils.decode(T,_);switch(N[A].type){case"C":k.trim().length&&(c[D][A]=k.replace(/\s+$/,""));break;case"D":k.length===8?c[D][A]=new Date(+k.slice(0,4),+k.slice(4,6)-1,+k.slice(6,8)):c[D][A]=k;break;case"F":c[D][A]=parseFloat(k.trim());break;case"+":case"I":c[D][A]=x?_.read_shift(-4,"i")^2147483648:_.read_shift(4,"i");break;case"L":switch(k.trim().toUpperCase()){case"Y":case"T":c[D][A]=!0;break;case"N":case"F":c[D][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+k+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[D][A]="##MEMO##"+(x?parseInt(k.trim(),10):_.read_shift(4));break;case"N":k=k.replace(/\u0000/g,"").trim(),k&&k!="."&&(c[D][A]=+k||0);break;case"@":c[D][A]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":c[D][A]=new Date((_.read_shift(4)-2440588)*864e5+_.read_shift(4));break;case"Y":c[D][A]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[D][A]=-_.read_shift(-8,"f");break;case"B":if(g&&N[A].len==8){c[D][A]=_.read_shift(8,"f");break}case"G":case"P":_.l+=N[A].len;break;case"0":if(N[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[A].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=N,c}function r(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var d=Xh(t(o,c),c);return d["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,d}function s(o,l){try{return Hd(r(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var c=l||{};if(+c.codepage>=0&&ng(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=Oa(),h=Av(o,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),x=o["!cols"]||[],y=0,b=0,S=0,T=1;for(y=0;y<p.length;++y){if(((x[y]||{}).DBF||{}).name){p[y]=x[y].DBF.name,++S;continue}if(p[y]!=null){if(++S,typeof p[y]=="number"&&(p[y]=p[y].toString(10)),typeof p[y]!="string")throw new Error("DBF Invalid column name "+p[y]+" |"+typeof p[y]+"|");if(p.indexOf(p[y])!==y){for(b=0;b<1024;++b)if(p.indexOf(p[y]+"_"+b)==-1){p[y]+="_"+b;break}}}}var N=ur(o["!ref"]),C=[],I=[],F=[];for(y=0;y<=N.e.c-N.s.c;++y){var D="",A="",_=0,k=[];for(b=0;b<g.length;++b)g[b][y]!=null&&k.push(g[b][y]);if(k.length==0||p[y]==null){C[y]="?";continue}for(b=0;b<k.length;++b){switch(typeof k[b]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=k[b]instanceof Date?"D":"C";break;default:A="C"}_=Math.max(_,String(k[b]).length),D=D&&D!=A?"C":A}_>250&&(_=250),A=((x[y]||{}).DBF||{}).type,A=="C"&&x[y].DBF.len>_&&(_=x[y].DBF.len),D=="B"&&A=="N"&&(D="N",F[y]=x[y].DBF.dec,_=x[y].DBF.len),I[y]=D=="C"||A=="N"?_:a[D]||0,T+=I[y],C[y]=D}var O=d.next(32);for(O.write_shift(4,318902576),O.write_shift(4,g.length),O.write_shift(2,296+32*S),O.write_shift(2,T),y=0;y<4;++y)O.write_shift(4,0);for(O.write_shift(4,0|(+e[x6]||3)<<8),y=0,b=0;y<p.length;++y)if(p[y]!=null){var P=d.next(32),W=(p[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,W,"sbcs"),P.write_shift(1,C[y]=="?"?"C":C[y],"sbcs"),P.write_shift(4,b),P.write_shift(1,I[y]||a[C[y]]||0),P.write_shift(1,F[y]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),b+=I[y]||a[C[y]]||0}var K=d.next(264);for(K.write_shift(4,13),y=0;y<65;++y)K.write_shift(4,0);for(y=0;y<g.length;++y){var q=d.next(T);for(q.write_shift(1,0),b=0;b<p.length;++b)if(p[b]!=null)switch(C[b]){case"L":q.write_shift(1,g[y][b]==null?63:g[y][b]?84:70);break;case"B":q.write_shift(8,g[y][b]||0,"f");break;case"N":var V="0";for(typeof g[y][b]=="number"&&(V=g[y][b].toFixed(F[b]||0)),S=0;S<I[b]-V.length;++S)q.write_shift(1,32);q.write_shift(1,V,"sbcs");break;case"D":g[y][b]?(q.write_shift(4,("0000"+g[y][b].getFullYear()).slice(-4),"sbcs"),q.write_shift(2,("00"+(g[y][b].getMonth()+1)).slice(-2),"sbcs"),q.write_shift(2,("00"+g[y][b].getDate()).slice(-2),"sbcs")):q.write_shift(8,"00000000","sbcs");break;case"C":var X=String(g[y][b]!=null?g[y][b]:"").slice(0,I[b]);for(q.write_shift(1,X,"sbcs"),S=0;S<I[b]-X.length;++S)q.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:r,from_sheet:i}}(),Gle=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Vs(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(p,g){var x=n[g];return typeof x=="number"?$F(x):x},r=function(p,g,x){var y=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?p:$F(y)};n["|"]=254;function s(p,g){switch(g.type){case"base64":return a(Hl(p),g);case"binary":return a(p,g);case"buffer":return a(En&&Buffer.isBuffer(p)?p.toString("binary"):Hg(p),g);case"array":return a(Uw(p),g)}throw new Error("Unrecognized type "+g.type)}function a(p,g){var x=p.split(/[\n\r]+/),y=-1,b=-1,S=0,T=0,N=[],C=[],I=null,F={},D=[],A=[],_=[],k=0,O;for(+g.codepage>=0&&ng(+g.codepage);S!==x.length;++S){k=0;var P=x[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),W=P.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),K=W[0],q;if(P.length>0)switch(K){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":W[1].charAt(0)=="P"&&C.push(P.slice(3).replace(/;;/g,";"));break;case"C":var V=!1,X=!1,Q=!1,Y=!1,j=-1,J=-1;for(T=1;T<W.length;++T)switch(W[T].charAt(0)){case"A":break;case"X":b=parseInt(W[T].slice(1))-1,X=!0;break;case"Y":for(y=parseInt(W[T].slice(1))-1,X||(b=0),O=N.length;O<=y;++O)N[O]=[];break;case"K":q=W[T].slice(1),q.charAt(0)==='"'?q=q.slice(1,q.length-1):q==="TRUE"?q=!0:q==="FALSE"?q=!1:isNaN(Fl(q))?isNaN(sg(q).getDate())||(q=ma(q)):(q=Fl(q),I!==null&&I6(I)&&(q=O6(q))),V=!0;break;case"E":Y=!0;var M=Wce(W[T].slice(1),{r:y,c:b});N[y][b]=[N[y][b],M];break;case"S":Q=!0,N[y][b]=[N[y][b],"S5S"];break;case"G":break;case"R":j=parseInt(W[T].slice(1))-1;break;case"C":J=parseInt(W[T].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}if(V&&(N[y][b]&&N[y][b].length==2?N[y][b][0]=q:N[y][b]=q,I=null),Q){if(Y)throw new Error("SYLK shared formula cannot have own formula");var z=j>-1&&N[j][J];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");N[y][b][1]=Hce(z[1],{r:y-j,c:b-J})}break;case"F":var G=0;for(T=1;T<W.length;++T)switch(W[T].charAt(0)){case"X":b=parseInt(W[T].slice(1))-1,++G;break;case"Y":for(y=parseInt(W[T].slice(1))-1,O=N.length;O<=y;++O)N[O]=[];break;case"M":k=parseInt(W[T].slice(1))/20;break;case"F":break;case"G":break;case"P":I=C[parseInt(W[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(_=W[T].slice(1).split(" "),O=parseInt(_[0],10);O<=parseInt(_[1],10);++O)k=parseInt(_[2],10),A[O-1]=k===0?{hidden:!0}:{wch:k},H_(A[O-1]);break;case"C":b=parseInt(W[T].slice(1))-1,A[b]||(A[b]={});break;case"R":y=parseInt(W[T].slice(1))-1,D[y]||(D[y]={}),k>0?(D[y].hpt=k,D[y].hpx=v5(k)):k===0&&(D[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}G<1&&(I=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+P)}}return D.length>0&&(F["!rows"]=D),A.length>0&&(F["!cols"]=A),g&&g.sheetRows&&(N=N.slice(0,g.sheetRows)),[N,F]}function i(p,g){var x=s(p,g),y=x[0],b=x[1],S=Xh(y,g);return Vs(b).forEach(function(T){S[T]=b[T]}),S}function o(p,g){return Hd(i(p,g),g)}function l(p,g,x,y){var b="C;Y"+(x+1)+";X"+(y+1)+";K";switch(p.t){case"n":b+=p.v||0,p.f&&!p.F&&(b+=";E"+q_(p.f,{r:x,c:y}));break;case"b":b+=p.v?"TRUE":"FALSE";break;case"e":b+=p.w||p.v;break;case"d":b+='"'+(p.w||p.v)+'"';break;case"s":b+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(p,g){g.forEach(function(x,y){var b="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?b+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Ev(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=kv(x.wpx)),typeof x.wch=="number"&&(b+=Math.round(x.wch))),b.charAt(b.length-1)!=" "&&p.push(b)})}function d(p,g){g.forEach(function(x,y){var b="F;";x.hidden?b+="M0;":x.hpt?b+="M"+20*x.hpt+";":x.hpx&&(b+="M"+20*_v(x.hpx)+";"),b.length>2&&p.push(b+"R"+(y+1))})}function h(p,g){var x=["ID;PWXL;N;E"],y=[],b=ur(p["!ref"]),S,T=Array.isArray(p),N=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),p["!cols"]&&c(x,p["!cols"]),p["!rows"]&&d(x,p["!rows"]),x.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var C=b.s.r;C<=b.e.r;++C)for(var I=b.s.c;I<=b.e.c;++I){var F=zn({r:C,c:I});S=T?(p[C]||[])[I]:p[F],!(!S||S.v==null&&(!S.f||S.F))&&y.push(l(S,p,C,I))}return x.join(N)+N+y.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),qle=function(){function n(a,i){switch(i.type){case"base64":return e(Hl(a),i);case"binary":return e(a,i);case"buffer":return e(En&&Buffer.isBuffer(a)?a.toString("binary"):Hg(a),i);case"array":return e(Uw(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,c=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var p=o[d].trim().split(","),g=p[0],x=p[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){h[++l]=[],c=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?h[l][c]=!0:y==="FALSE"?h[l][c]=!1:isNaN(Fl(x))?isNaN(sg(x).getDate())?h[l][c]=x:h[l][c]=ma(x):h[l][c]=Fl(x),++c;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),h[l][c++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function t(a,i){return Xh(n(a,i),i)}function r(a,i){return Hd(t(a,i),i)}var s=function(){var a=function(l,c,d,h,p){l.push(c),l.push(d+","+h),l.push('"'+p.replace(/"/g,'""')+'"')},i=function(l,c,d,h){l.push(c+","+d),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],d=ur(l["!ref"]),h,p=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,d.e.r-d.s.r+1,""),a(c,"TUPLES",0,d.e.c-d.s.c+1,""),a(c,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(c,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=zn({r:g,c:x});if(h=p?(l[g]||[])[x]:l[y],!h){i(c,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?i(c,1,0,"="+h.f):i(c,1,0,""):i(c,0,b,"V");break;case"b":i(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Jc(h.z||_r[14],Fa(ma(h.v)))),i(c,0,h.w,"V");break;default:i(c,1,0,"")}}}i(c,-1,0,"EOD");var S=`\r
`,T=c.join(S);return T}}();return{to_workbook:r,to_sheet:t,from_sheet:s}}(),g5=function(){function n(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(h,p){for(var g=h.split(`
`),x=-1,y=-1,b=0,S=[];b!==g.length;++b){var T=g[b].trim().split(":");if(T[0]==="cell"){var N=Ts(T[1]);if(S.length<=N.r)for(x=S.length;x<=N.r;++x)S[x]||(S[x]=[]);switch(x=N.r,y=N.c,T[2]){case"t":S[x][y]=n(T[3]);break;case"v":S[x][y]=+T[3];break;case"vtf":var C=T[T.length-1];case"vtc":switch(T[3]){case"nl":S[x][y]=!!+T[4];break;default:S[x][y]=+T[4];break}T[2]=="vtf"&&(S[x][y]=[S[x][y],C])}}}return p&&p.sheetRows&&(S=S.slice(0,p.sheetRows)),S}function r(h,p){return Xh(t(h,p),p)}function s(h,p){return Hd(r(h,p),p)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var p=[],g=[],x,y="",b=li(h["!ref"]),S=Array.isArray(h),T=b.s.r;T<=b.e.r;++T)for(var N=b.s.c;N<=b.e.c;++N)if(y=zn({r:T,c:N}),x=S?(h[T]||[])[N]:h[y],!(!x||x.v==null||x.t==="z")){switch(g=["cell",y,"t"],x.t){case"s":case"str":g.push(e(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=e(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var C=Fa(ma(x.v));g[2]="vtc",g[3]="nd",g[4]=""+C,g[5]=x.w||Jc(x.z||_r[14],C);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(h){return[a,i,o,i,c(h),l].join(`
`)}return{to_workbook:s,to_sheet:r,from_sheet:d}}(),Kle=function(){function n(d,h,p,g,x){x.raw?h[p][g]=d:d===""||(d==="TRUE"?h[p][g]=!0:d==="FALSE"?h[p][g]=!1:isNaN(Fl(d))?isNaN(sg(d).getDate())?h[p][g]=d:h[p][g]=ma(d):h[p][g]=Fl(d))}function e(d,h){var p=h||{},g=[];if(!d||d.length===0)return g;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var b=10,S=0,T=0;T<=y;++T)S=x[T].indexOf(" "),S==-1?S=x[T].length:S++,b=Math.max(b,S);for(T=0;T<=y;++T){g[T]=[];var N=0;for(n(x[T].slice(0,b).trim(),g,T,N,p),N=1;N<=(x[T].length-b)/10+1;++N)n(x[T].slice(b+(N-1)*10,b+N*10).trim(),g,T,N,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function s(d){for(var h={},p=!1,g=0,x=0;g<d.length;++g)(x=d.charCodeAt(g))==34?p=!p:!p&&x in t&&(h[x]=(h[x]||0)+1);x=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&x.push([h[g],g]);if(!x.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&x.push([h[g],g])}return x.sort(function(y,b){return y[0]-b[0]||r[y[1]]-r[b[1]]}),t[x.pop()[1]]||44}function a(d,h){var p=h||{},g="",x=p.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):p&&p.FS?g=p.FS:g=s(d.slice(0,1024));var b=0,S=0,T=0,N=0,C=0,I=g.charCodeAt(0),F=!1,D=0,A=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var _=p.dateNF!=null?uoe(p.dateNF):null;function k(){var O=d.slice(N,C),P={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)P.t="z";else if(p.raw)P.t="s",P.v=O;else if(O.trim().length===0)P.t="s",P.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(P.t="s",P.v=O.slice(2,-1).replace(/""/g,'"')):Gce(O)?(P.t="n",P.f=O.slice(1)):(P.t="s",P.v=O);else if(O=="TRUE")P.t="b",P.v=!0;else if(O=="FALSE")P.t="b",P.v=!1;else if(!isNaN(T=Fl(O)))P.t="n",p.cellText!==!1&&(P.w=O),P.v=T;else if(!isNaN(sg(O).getDate())||_&&O.match(_)){P.z=p.dateNF||_r[14];var W=0;_&&O.match(_)&&(O=doe(O,p.dateNF,O.match(_)||[]),W=1),p.cellDates?(P.t="d",P.v=ma(O,W)):(P.t="n",P.v=Fa(ma(O,W))),p.cellText!==!1&&(P.w=Jc(P.z,P.v instanceof Date?Fa(P.v):P.v)),p.cellNF||delete P.z}else P.t="s",P.v=O;if(P.t=="z"||(p.dense?(x[b]||(x[b]=[]),x[b][S]=P):x[zn({c:S,r:b})]=P),N=C+1,A=d.charCodeAt(N),y.e.c<S&&(y.e.c=S),y.e.r<b&&(y.e.r=b),D==I)++S;else if(S=0,++b,p.sheetRows&&p.sheetRows<=b)return!0}e:for(;C<d.length;++C)switch(D=d.charCodeAt(C)){case 34:A===34&&(F=!F);break;case I:case 10:case 13:if(!F&&k())break e;break}return C-N>0&&k(),x["!ref"]=Zr(y),x}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):Xh(e(d,h),h)}function o(d,h){var p="",g=h.type=="string"?[0,0,0,0]:ipe(d,h);switch(h.type){case"base64":p=Hl(d);break;case"binary":p=d;break;case"buffer":h.codepage==65001?p=d.toString("utf8"):h.codepage&&typeof xv<"u"||(p=En&&Buffer.isBuffer(d)?d.toString("binary"):Hg(d));break;case"array":p=Uw(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=z0(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=z0(p):h.type=="binary"&&typeof xv<"u",p.slice(0,19)=="socialcalc:version:"?g5.to_sheet(h.type=="string"?p:z0(p),h):i(p,h)}function l(d,h){return Hd(o(d,h),h)}function c(d){for(var h=[],p=ur(d["!ref"]),g,x=Array.isArray(d),y=p.s.r;y<=p.e.r;++y){for(var b=[],S=p.s.c;S<=p.e.c;++S){var T=zn({r:y,c:S});if(g=x?(d[y]||[])[S]:d[T],!g||g.v==null){b.push("          ");continue}for(var N=(g.w||(Gl(g),g.w)||"").slice(0,10);N.length<10;)N+=" ";b.push(N+(S===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}(),lL=function(){function n(M,z,G){if(M){Qa(M,M.l||0);for(var U=G.Enum||j;M.l<M.length;){var se=M.read_shift(2),pe=U[se]||U[65535],me=M.read_shift(2),be=M.l+me,ge=pe.f&&pe.f(M,me,G);if(M.l=be,z(ge,pe,se))return}}}function e(M,z){switch(z.type){case"base64":return t(so(Hl(M)),z);case"binary":return t(so(M),z);case"buffer":case"array":return t(M,z)}throw"Unsupported type "+z.type}function t(M,z){if(!M)return M;var G=z||{},U=G.dense?[]:{},se="Sheet1",pe="",me=0,be={},ge=[],ke=[],Le={s:{r:0,c:0},e:{r:0,c:0}},rt=G.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)G.Enum=j,n(M,function(ne,Ae,Me){switch(Me){case 0:G.vers=ne,ne>=4096&&(G.qpro=!0);break;case 6:Le=ne;break;case 204:ne&&(pe=ne);break;case 222:pe=ne;break;case 15:case 51:G.qpro||(ne[1].v=ne[1].v.slice(1));case 13:case 14:case 16:Me==14&&(ne[2]&112)==112&&(ne[2]&15)>1&&(ne[2]&15)<15&&(ne[1].z=G.dateNF||_r[14],G.cellDates&&(ne[1].t="d",ne[1].v=O6(ne[1].v))),G.qpro&&ne[3]>me&&(U["!ref"]=Zr(Le),be[se]=U,ge.push(se),U=G.dense?[]:{},Le={s:{r:0,c:0},e:{r:0,c:0}},me=ne[3],se=pe||"Sheet"+(me+1),pe="");var Ve=G.dense?(U[ne[0].r]||[])[ne[0].c]:U[zn(ne[0])];if(Ve){Ve.t=ne[1].t,Ve.v=ne[1].v,ne[1].z!=null&&(Ve.z=ne[1].z),ne[1].f!=null&&(Ve.f=ne[1].f);break}G.dense?(U[ne[0].r]||(U[ne[0].r]=[]),U[ne[0].r][ne[0].c]=ne[1]):U[zn(ne[0])]=ne[1];break}},G);else if(M[2]==26||M[2]==14)G.Enum=J,M[2]==14&&(G.qpro=!0,M.l=0),n(M,function(ne,Ae,Me){switch(Me){case 204:se=ne;break;case 22:ne[1].v=ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ne[3]>me&&(U["!ref"]=Zr(Le),be[se]=U,ge.push(se),U=G.dense?[]:{},Le={s:{r:0,c:0},e:{r:0,c:0}},me=ne[3],se="Sheet"+(me+1)),rt>0&&ne[0].r>=rt)break;G.dense?(U[ne[0].r]||(U[ne[0].r]=[]),U[ne[0].r][ne[0].c]=ne[1]):U[zn(ne[0])]=ne[1],Le.e.c<ne[0].c&&(Le.e.c=ne[0].c),Le.e.r<ne[0].r&&(Le.e.r=ne[0].r);break;case 27:ne[14e3]&&(ke[ne[14e3][0]]=ne[14e3][1]);break;case 1537:ke[ne[0]]=ne[1],ne[0]==me&&(se=ne[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(U["!ref"]=Zr(Le),be[pe||se]=U,ge.push(pe||se),!ke.length)return{SheetNames:ge,Sheets:be};for(var Be={},Ze=[],He=0;He<ke.length;++He)be[ge[He]]?(Ze.push(ke[He]||ge[He]),Be[ke[He]]=be[ke[He]]||be[ge[He]]):(Ze.push(ke[He]),Be[ke[He]]={"!ref":"A1"});return{SheetNames:Ze,Sheets:Be}}function r(M,z){var G=z||{};if(+G.codepage>=0&&ng(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Oa(),se=ur(M["!ref"]),pe=Array.isArray(M),me=[];ft(U,0,a(1030)),ft(U,6,l(se));for(var be=Math.min(se.e.r,8191),ge=se.s.r;ge<=be;++ge)for(var ke=Us(ge),Le=se.s.c;Le<=se.e.c;++Le){ge===se.s.r&&(me[Le]=ta(Le));var rt=me[Le]+ke,Be=pe?(M[ge]||[])[Le]:M[rt];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?ft(U,13,g(ge,Le,Be.v)):ft(U,14,y(ge,Le,Be.v));else{var Ze=Gl(Be);ft(U,15,h(ge,Le,Ze.slice(0,239)))}}return ft(U,1),U.end()}function s(M,z){var G=z||{};if(+G.codepage>=0&&ng(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Oa();ft(U,0,i(M));for(var se=0,pe=0;se<M.SheetNames.length;++se)(M.Sheets[M.SheetNames[se]]||{})["!ref"]&&ft(U,27,Y(M.SheetNames[se],pe++));var me=0;for(se=0;se<M.SheetNames.length;++se){var be=M.Sheets[M.SheetNames[se]];if(!(!be||!be["!ref"])){for(var ge=ur(be["!ref"]),ke=Array.isArray(be),Le=[],rt=Math.min(ge.e.r,8191),Be=ge.s.r;Be<=rt;++Be)for(var Ze=Us(Be),He=ge.s.c;He<=ge.e.c;++He){Be===ge.s.r&&(Le[He]=ta(He));var ne=Le[He]+Ze,Ae=ke?(be[Be]||[])[He]:be[ne];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")ft(U,23,k(Be,He,me,Ae.v));else{var Me=Gl(Ae);ft(U,22,D(Be,He,me,Me.slice(0,239)))}}++me}}return ft(U,1),U.end()}function a(M){var z=ze(2);return z.write_shift(2,M),z}function i(M){var z=ze(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var G=0,U=0,se=0,pe=0;pe<M.SheetNames.length;++pe){var me=M.SheetNames[pe],be=M.Sheets[me];if(!(!be||!be["!ref"])){++se;var ge=li(be["!ref"]);G<ge.e.r&&(G=ge.e.r),U<ge.e.c&&(U=ge.e.c)}}return G>8191&&(G=8191),z.write_shift(2,G),z.write_shift(1,se),z.write_shift(1,U),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(M,z,G){var U={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&G.qpro?(U.s.c=M.read_shift(1),M.l++,U.s.r=M.read_shift(2),U.e.c=M.read_shift(1),M.l++,U.e.r=M.read_shift(2),U):(U.s.c=M.read_shift(2),U.s.r=M.read_shift(2),z==12&&G.qpro&&(M.l+=2),U.e.c=M.read_shift(2),U.e.r=M.read_shift(2),z==12&&G.qpro&&(M.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function l(M){var z=ze(8);return z.write_shift(2,M.s.c),z.write_shift(2,M.s.r),z.write_shift(2,M.e.c),z.write_shift(2,M.e.r),z}function c(M,z,G){var U=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(U[0].c=M.read_shift(1),U[3]=M.read_shift(1),U[0].r=M.read_shift(2),M.l+=2):(U[2]=M.read_shift(1),U[0].c=M.read_shift(2),U[0].r=M.read_shift(2)),U}function d(M,z,G){var U=M.l+z,se=c(M,z,G);if(se[1].t="s",G.vers==20768){M.l++;var pe=M.read_shift(1);return se[1].v=M.read_shift(pe,"utf8"),se}return G.qpro&&M.l++,se[1].v=M.read_shift(U-M.l,"cstr"),se}function h(M,z,G){var U=ze(7+G.length);U.write_shift(1,255),U.write_shift(2,z),U.write_shift(2,M),U.write_shift(1,39);for(var se=0;se<U.length;++se){var pe=G.charCodeAt(se);U.write_shift(1,pe>=128?95:pe)}return U.write_shift(1,0),U}function p(M,z,G){var U=c(M,z,G);return U[1].v=M.read_shift(2,"i"),U}function g(M,z,G){var U=ze(7);return U.write_shift(1,255),U.write_shift(2,z),U.write_shift(2,M),U.write_shift(2,G,"i"),U}function x(M,z,G){var U=c(M,z,G);return U[1].v=M.read_shift(8,"f"),U}function y(M,z,G){var U=ze(13);return U.write_shift(1,255),U.write_shift(2,z),U.write_shift(2,M),U.write_shift(8,G,"f"),U}function b(M,z,G){var U=M.l+z,se=c(M,z,G);if(se[1].v=M.read_shift(8,"f"),G.qpro)M.l=U;else{var pe=M.read_shift(2);C(M.slice(M.l,M.l+pe),se),M.l+=pe}return se}function S(M,z,G){var U=z&32768;return z&=-32769,z=(U?M:0)+(z>=8192?z-16384:z),(U?"":"$")+(G?ta(z):Us(z))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function C(M,z){Qa(M,0);for(var G=[],U=0,se="",pe="",me="",be="";M.l<M.length;){var ge=M[M.l++];switch(ge){case 0:G.push(M.read_shift(8,"f"));break;case 1:pe=S(z[0].c,M.read_shift(2),!0),se=S(z[0].r,M.read_shift(2),!1),G.push(pe+se);break;case 2:{var ke=S(z[0].c,M.read_shift(2),!0),Le=S(z[0].r,M.read_shift(2),!1);pe=S(z[0].c,M.read_shift(2),!0),se=S(z[0].r,M.read_shift(2),!1),G.push(ke+Le+":"+pe+se)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(M.read_shift(2));break;case 6:{for(var rt="";ge=M[M.l++];)rt+=String.fromCharCode(ge);G.push('"'+rt.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:be=G.pop(),me=G.pop(),G.push(["AND","OR"][ge-20]+"("+me+","+be+")");break;default:if(ge<32&&N[ge])be=G.pop(),me=G.pop(),G.push(me+N[ge]+be);else if(T[ge]){if(U=T[ge][1],U==69&&(U=M[M.l++]),U>G.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+G.join("|")+"|");return}var Be=G.slice(-U);G.length-=U,G.push(T[ge][0]+"("+Be.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}G.length==1?z[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function I(M){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=M.read_shift(2),z[3]=M[M.l++],z[0].c=M[M.l++],z}function F(M,z){var G=I(M);return G[1].t="s",G[1].v=M.read_shift(z-4,"cstr"),G}function D(M,z,G,U){var se=ze(6+U.length);se.write_shift(2,M),se.write_shift(1,G),se.write_shift(1,z),se.write_shift(1,39);for(var pe=0;pe<U.length;++pe){var me=U.charCodeAt(pe);se.write_shift(1,me>=128?95:me)}return se.write_shift(1,0),se}function A(M,z){var G=I(M);G[1].v=M.read_shift(2);var U=G[1].v>>1;if(G[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return G[1].v=U,G}function _(M,z){var G=I(M),U=M.read_shift(4),se=M.read_shift(4),pe=M.read_shift(2);if(pe==65535)return U===0&&se===3221225472?(G[1].t="e",G[1].v=15):U===0&&se===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var me=pe&32768;return pe=(pe&32767)-16446,G[1].v=(1-me*2)*(se*Math.pow(2,pe+32)+U*Math.pow(2,pe)),G}function k(M,z,G,U){var se=ze(14);if(se.write_shift(2,M),se.write_shift(1,G),se.write_shift(1,z),U==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var pe=0,me=0,be=0,ge=0;return U<0&&(pe=1,U=-U),me=Math.log2(U)|0,U/=Math.pow(2,me-31),ge=U>>>0,(ge&2147483648)==0&&(U/=2,++me,ge=U>>>0),U-=ge,ge|=2147483648,ge>>>=0,U*=Math.pow(2,32),be=U>>>0,se.write_shift(4,be),se.write_shift(4,ge),me+=16383+(pe?32768:0),se.write_shift(2,me),se}function O(M,z){var G=_(M);return M.l+=z-14,G}function P(M,z){var G=I(M),U=M.read_shift(4);return G[1].v=U>>6,G}function W(M,z){var G=I(M),U=M.read_shift(8,"f");return G[1].v=U,G}function K(M,z){var G=W(M);return M.l+=z-10,G}function q(M,z){return M[M.l+z-1]==0?M.read_shift(z,"cstr"):""}function V(M,z){var G=M[M.l++];G>z-1&&(G=z-1);for(var U="";U.length<G;)U+=String.fromCharCode(M[M.l++]);return U}function X(M,z,G){if(!(!G.qpro||z<21)){var U=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var se=M.read_shift(z-21,"cstr");return[U,se]}}function Q(M,z){for(var G={},U=M.l+z;M.l<U;){var se=M.read_shift(2);if(se==14e3){for(G[se]=[0,""],G[se][0]=M.read_shift(2);M[M.l];)G[se][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return G}function Y(M,z){var G=ze(5+M.length);G.write_shift(2,14e3),G.write_shift(2,z);for(var U=0;U<M.length;++U){var se=M.charCodeAt(U);G[G.l++]=se>127?95:se}return G[G.l++]=0,G}var j={0:{n:"BOF",f:d5},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:q},222:{n:"SHEETNAMELP",f:V},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:_},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:W},40:{n:"FORMULA28",f:K},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:q},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:s,to_workbook:e}}(),Xle=/^\s|\s$|[\t\n\r]/;function x5(n,e){if(!e.bookSST)return"";var t=[ts];t[t.length]=ut("sst",null,{xmlns:Kh[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var s=n[r],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Xle)&&(a+=' xml:space="preserve"'),a+=">"+Bn(s.t)+"</t>"),a+="</si>",t[t.length]=a}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function Yle(n){return[n.read_shift(4),n.read_shift(4)]}function Qle(n,e){return e||(e=ze(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var Zle=Uoe;function Jle(n){var e=Oa();Je(e,159,Qle(n));for(var t=0;t<n.length;++t)Je(e,19,Zle(n[t]));return Je(e,160),e.end()}function ece(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function y5(n){var e=0,t,r=ece(n),s=r.length+1,a,i,o,l,c;for(t=Cd(s),t[0]=r.length,a=1;a!=s;++a)t[a]=r[a-1];for(a=s-1;a>=0;--a)i=t[a],o=(e&16384)===0?0:1,l=e<<1&32767,c=o|l,e=c^i;return e^52811}var tce=function(){function n(s,a){switch(a.type){case"base64":return e(Hl(s),a);case"binary":return e(s,a);case"buffer":return e(En&&Buffer.isBuffer(s)?s.toString("binary"):Hg(s),a);case"array":return e(Uw(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var p=/\\\w+\b/g,g=0,x,y=-1;x=p.exec(d);){switch(x[0]){case"\\cell":var b=d.slice(g,p.lastIndex-x[0].length);if(b[0]==" "&&(b=b.slice(1)),++y,b.length){var S={v:b,t:"s"};Array.isArray(o)?o[h][y]=S:o[zn({r:h,c:y})]=S}break}g=p.lastIndex}y>c.e.c&&(c.e.c=y)}),o["!ref"]=Zr(c),o}function t(s,a){return Hd(n(s,a),a)}function r(s){for(var a=["{\\rtf1\\ansi"],i=ur(s["!ref"]),o,l=Array.isArray(s),c=i.s.r;c<=i.e.r;++c){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=zn({r:c,c:d});o=l?(s[c]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(Gl(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}}();function cL(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var nce=6,Ll=nce;function Ev(n){return Math.floor((n+Math.round(128/Ll)/256)*Ll)}function kv(n){return Math.floor((n-5)/Ll*100+.5)/100}function HE(n){return Math.round((n*Ll+5)/Ll*256)/256}function H_(n){n.width?(n.wpx=Ev(n.width),n.wch=kv(n.wpx),n.MDW=Ll):n.wpx?(n.wch=kv(n.wpx),n.width=HE(n.wch),n.MDW=Ll):typeof n.wch=="number"&&(n.width=HE(n.wch),n.wpx=Ev(n.width),n.MDW=Ll),n.customWidth&&delete n.customWidth}var rce=96,b5=rce;function _v(n){return n*96/b5}function v5(n){return n*b5/96}function sce(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=ut("numFmt",null,{numFmtId:r,formatCode:Bn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=ut("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function ace(n){var e=[];return e[e.length]=ut("cellXfs",null),n.forEach(function(t){e[e.length]=ut("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=ut("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function w5(n,e){var t=[ts,ut("styleSheet",null,{xmlns:Kh[0],"xmlns:vt":vs.vt})],r;return n.SSF&&(r=sce(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=ace(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function ice(n,e){var t=n.read_shift(2),r=na(n);return[t,r]}function oce(n,e,t){t||(t=ze(6+4*e.length)),t.write_shift(2,n),Ns(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function lce(n,e,t){var r={};r.sz=n.read_shift(2)/20;var s=Xoe(n);s.fItalic&&(r.italic=1),s.fCondense&&(r.condense=1),s.fExtend&&(r.extend=1),s.fShadow&&(r.shadow=1),s.fOutline&&(r.outline=1),s.fStrikeout&&(r.strike=1);var a=n.read_shift(2);switch(a===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var i=n.read_shift(1);i!=0&&(r.underline=i);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=Koe(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=na(n),r}function cce(n,e){e||(e=ze(153)),e.write_shift(2,n.sz*20),Yoe(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),Nv(n.color,e);var r=0;return r=2,e.write_shift(1,r),Ns(n.name,e),e.length>e.l?e.slice(0,e.l):e}var uce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],zC,dce=Qo;function uL(n,e){e||(e=ze(84)),zC||(zC=O_(uce));var t=zC[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(Nv({auto:1},e),Nv({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function fce(n,e){var t=n.l+e,r=n.read_shift(2),s=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:s}}function S5(n,e,t){t||(t=ze(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function m0(n,e){return e||(e=ze(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var hce=Qo;function pce(n,e){return e||(e=ze(51)),e.write_shift(1,0),m0(null,e),m0(null,e),m0(null,e),m0(null,e),m0(null,e),e.length>e.l?e.slice(0,e.l):e}function mce(n,e){return e||(e=ze(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Tv(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function gce(n,e,t){var r=ze(2052);return r.write_shift(4,n),Tv(e,r),Tv(t,r),r.length>r.l?r.slice(0,r.l):r}function xce(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&++t}),t!=0&&(Je(n,615,lo(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&Je(n,44,oce(s,e[s]))}),Je(n,616))}}function yce(n){var e=1;Je(n,611,lo(e)),Je(n,43,cce({sz:12,color:{theme:1},name:"Calibri",family:2})),Je(n,612)}function bce(n){var e=2;Je(n,603,lo(e)),Je(n,45,uL({patternType:"none"})),Je(n,45,uL({patternType:"gray125"})),Je(n,604)}function vce(n){var e=1;Je(n,613,lo(e)),Je(n,46,pce()),Je(n,614)}function wce(n){var e=1;Je(n,626,lo(e)),Je(n,47,S5({numFmtId:0},65535)),Je(n,627)}function Sce(n,e){Je(n,617,lo(e.length)),e.forEach(function(t){Je(n,47,S5(t,0))}),Je(n,618)}function Tce(n){var e=1;Je(n,619,lo(e)),Je(n,48,mce({xfId:0,name:"Normal"})),Je(n,620)}function Nce(n){var e=0;Je(n,505,lo(e)),Je(n,506)}function Cce(n){var e=0;Je(n,508,gce(e,"TableStyleMedium9","PivotStyleMedium4")),Je(n,509)}function Ece(n,e){var t=Oa();return Je(t,278),xce(t,n.SSF),yce(t),bce(t),vce(t),wce(t),Sce(t,e.cellXfs),Tce(t),Nce(t),Cce(t),Je(t,279),t.end()}function T5(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[ts];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function kce(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:na(n)}}function _ce(n){var e=ze(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Ns(n.name,e),e.slice(0,e.l)}function Ice(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function Ace(n){var e=ze(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function $ce(n,e){var t=ze(8+2*e.length);return t.write_shift(4,n),Ns(e,t),t.slice(0,t.l)}function Rce(n){return n.l+=4,n.read_shift(4)!=0}function Oce(n,e){var t=ze(8);return t.write_shift(4,n),t.write_shift(4,1),t}function Dce(){var n=Oa();return Je(n,332),Je(n,334,lo(1)),Je(n,335,_ce({name:"XLDAPR",version:12e4,flags:3496657072})),Je(n,336),Je(n,339,$ce(1,"XLDAPR")),Je(n,52),Je(n,35,lo(514)),Je(n,4096,lo(0)),Je(n,4097,Ii(1)),Je(n,36),Je(n,53),Je(n,340),Je(n,337,Oce(1)),Je(n,51,Ace([[1,0]])),Je(n,338),Je(n,333),n.end()}function N5(){var n=[ts];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function Fce(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=zn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var uh=1024;function C5(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),s=[ut("xml",null,{"xmlns:v":Za.v,"xmlns:o":Za.o,"xmlns:x":Za.x,"xmlns:mv":Za.mv}).replace(/\/>/,">"),ut("o:shapelayout",ut("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),ut("v:shapetype",[ut("v:stroke",null,{joinstyle:"miter"}),ut("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];uh<n*1e3;)uh+=1e3;return e.forEach(function(a){var i=Ts(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?ut("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=ut("v:fill",l,o),d={on:"t",obscured:"t"};++uh,s=s.concat(["<v:shape"+ig({id:"_x0000_s"+uh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,ut("v:shadow",null,d),ut("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",js("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),js("x:AutoFill","False"),js("x:Row",String(i.r)),js("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function E5(n){var e=[ts,ut("comments",null,{xmlns:Kh[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(s){var a=Bn(s.a);t.indexOf(a)==-1&&(t.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&t.indexOf("tc="+s.ID)==-1&&(t.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var s=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?s=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(s=t.indexOf(Bn(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(js("t",Bn(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(js("t",Bn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Lce(n,e,t){var r=[ts,ut("ThreadedComments",null,{xmlns:vs.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),r.push(ut("threadedComment",js("text",i.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Mce(n){var e=[ts,ut("personList",null,{xmlns:vs.TCMNT,"xmlns:x":Kh[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(ut("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Pce(n){var e={};e.iauthor=n.read_shift(4);var t=Xd(n);return e.rfx=t.s,e.ref=zn(t.s),n.l+=16,e}function Bce(n,e){return e==null&&(e=ze(36)),e.write_shift(4,n[1].iauthor),Yh(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var jce=na;function zce(n){return Ns(n.slice(0,54))}function Uce(n){var e=Oa(),t=[];return Je(e,628),Je(e,630),n.forEach(function(r){r[1].forEach(function(s){t.indexOf(s.a)>-1||(t.push(s.a.slice(0,54)),Je(e,632,zce(s.a)))})}),Je(e,631),Je(e,633),n.forEach(function(r){r[1].forEach(function(s){s.iauthor=t.indexOf(s.a);var a={s:Ts(r[0]),e:Ts(r[0])};Je(e,635,Bce([a,s])),s.t&&s.t.length>0&&Je(e,637,Woe(s)),Je(e,636),delete s.iauthor})}),Je(e,634),Je(e,629),e.end()}function Vce(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var s=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Xn.utils.cfb_add(n,s,e.FileIndex[r].content)}})}var k5=["xlsb","xlsm","xlam","biff8","xla"],Wce=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?c+=e.r:--c,s+(o?"":"$")+ta(d)+(l?"":"$")+Us(c)}return function(s,a){return e=a,s.replace(n,t)}}(),G_=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,q_=function(){return function(e,t){return e.replace(G_,function(r,s,a,i,o,l){var c=j_(i)-(a?0:t.c),d=B_(l)-(o?0:t.r),h=d==0?"":o?d+1:"["+d+"]",p=c==0?"":a?c+1:"["+c+"]";return s+"R"+h+"C"+p})}}();function Hce(n,e){return n.replace(G_,function(t,r,s,a,i,o){return r+(s=="$"?s+a:ta(j_(a)+e.c))+(i=="$"?i+o:Us(B_(o)+e.r))})}function Gce(n){return n.length!=1}function qr(n){n.l+=1}function eu(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function _5(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return I5(n);t.biff==12&&(r=4)}var s=n.read_shift(r),a=n.read_shift(r),i=eu(n),o=eu(n);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function I5(n){var e=eu(n),t=eu(n),r=n.read_shift(1),s=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:s,cRel:t[1],rRel:t[2]}}}function qce(n,e,t){if(t.biff<8)return I5(n);var r=n.read_shift(t.biff==12?4:2),s=n.read_shift(t.biff==12?4:2),a=eu(n),i=eu(n);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function A5(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return Kce(n);var r=n.read_shift(t&&t.biff==12?4:2),s=eu(n);return{r,c:s[0],cRel:s[1],rRel:s[2]}}function Kce(n){var e=eu(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function Xce(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function Yce(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return Qce(n);var s=n.read_shift(r>=12?4:2),a=n.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Qce(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),s==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:s,rRel:r}}function Zce(n,e,t){var r=(n[n.l++]&96)>>5,s=_5(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,s]}function Jce(n,e,t){var r=(n[n.l++]&96)>>5,s=n.read_shift(2,"i"),a=8;if(t)switch(t.biff){case 5:n.l+=12,a=6;break;case 12:a=12;break}var i=_5(n,a,t);return[r,s,i]}function eue(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function tue(n,e,t){var r=(n[n.l++]&96)>>5,s=n.read_shift(2),a=8;if(t)switch(t.biff){case 5:n.l+=12,a=6;break;case 12:a=12;break}return n.l+=a,[r,s]}function nue(n,e,t){var r=(n[n.l++]&96)>>5,s=qce(n,e-1,t);return[r,s]}function rue(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function dL(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function sue(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),s=[],a=0;a<=r;++a)s.push(n.read_shift(t&&t.biff==2?1:2));return s}function aue(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function iue(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function oue(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function lue(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function $5(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function cue(n){return n.read_shift(2),$5(n)}function uue(n){return n.read_shift(2),$5(n)}function due(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var s=A5(n,0,t);return[r,s]}function fue(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var s=Yce(n,0,t);return[r,s]}function hue(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var s=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var a=A5(n,0,t);return[r,s,a]}function pue(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var s=n.read_shift(t&&t.biff<=3?1:2);return[pde[s],D5[s],r]}function mue(n,e,t){var r=n[n.l++],s=n.read_shift(1),a=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:gue(n);return[s,(a[0]===0?D5:hde)[a[1]]]}function gue(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function xue(n,e,t){n.l+=t&&t.biff==2?3:4}function yue(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),s=n.read_shift(t&&t.biff==2?1:2);return[r,s]}function bue(n){return n.l++,Kg[n.read_shift(1)]}function vue(n){return n.l++,n.read_shift(2)}function wue(n){return n.l++,n.read_shift(1)!==0}function Sue(n){return n.l++,Qh(n)}function Tue(n,e,t){return n.l++,h5(n,e-1,t)}function Nue(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=hle(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=Kg[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=Qh(n);break;case 2:t[1]=xle(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Cue(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),s=[],a=0;a!=r;++a)s.push((t.biff==12?Xd:vle)(n));return s}function Eue(n,e,t){var r=0,s=0;t.biff==12?(r=n.read_shift(4),s=n.read_shift(4)):(s=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--s==0&&(s=256));for(var a=0,i=[];a!=r&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Nue(n,t.biff);return i}function kue(n,e,t){var r=n.read_shift(1)>>>5&3,s=!t||t.biff>=8?4:2,a=n.read_shift(s);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,a]}function _ue(n,e,t){if(t.biff==5)return Iue(n);var r=n.read_shift(1)>>>5&3,s=n.read_shift(2),a=n.read_shift(4);return[r,s,a]}function Iue(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function Aue(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var s=n.read_shift(t&&t.biff==2?1:2);return[r,s]}function $ue(n,e,t){var r=n.read_shift(1)>>>5&3,s=n.read_shift(t&&t.biff==2?1:2);return[r,s]}function Rue(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function Oue(n,e,t){var r=(n[n.l++]&96)>>5,s=n.read_shift(2),a=4;if(t)switch(t.biff){case 5:a=15;break;case 12:a=6;break}return n.l+=a,[r,s]}var Due=Qo,Fue=Qo,Lue=Qo;function Xg(n,e,t){return n.l+=2,[Xce(n)]}function K_(n){return n.l+=6,[]}var Mue=Xg,Pue=K_,Bue=K_,jue=Xg;function R5(n){return n.l+=2,[d5(n),n.read_shift(2)&1]}var zue=Xg,Uue=R5,Vue=K_,Wue=Xg,Hue=Xg,Gue=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function que(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),s=n.read_shift(2),a=n.read_shift(2),i=Gue[t>>2&31];return{ixti:e,coltype:t&3,rt:i,idx:r,c:s,C:a}}function Kue(n){return n.l+=2,[n.read_shift(4)]}function Xue(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function Yue(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function Que(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Zue(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Jue(n){return n.l+=4,[0,0]}var fL={1:{n:"PtgExp",f:yue},2:{n:"PtgTbl",f:Lue},3:{n:"PtgAdd",f:qr},4:{n:"PtgSub",f:qr},5:{n:"PtgMul",f:qr},6:{n:"PtgDiv",f:qr},7:{n:"PtgPower",f:qr},8:{n:"PtgConcat",f:qr},9:{n:"PtgLt",f:qr},10:{n:"PtgLe",f:qr},11:{n:"PtgEq",f:qr},12:{n:"PtgGe",f:qr},13:{n:"PtgGt",f:qr},14:{n:"PtgNe",f:qr},15:{n:"PtgIsect",f:qr},16:{n:"PtgUnion",f:qr},17:{n:"PtgRange",f:qr},18:{n:"PtgUplus",f:qr},19:{n:"PtgUminus",f:qr},20:{n:"PtgPercent",f:qr},21:{n:"PtgParen",f:qr},22:{n:"PtgMissArg",f:qr},23:{n:"PtgStr",f:Tue},26:{n:"PtgSheet",f:Xue},27:{n:"PtgEndSheet",f:Yue},28:{n:"PtgErr",f:bue},29:{n:"PtgBool",f:wue},30:{n:"PtgInt",f:vue},31:{n:"PtgNum",f:Sue},32:{n:"PtgArray",f:rue},33:{n:"PtgFunc",f:pue},34:{n:"PtgFuncVar",f:mue},35:{n:"PtgName",f:kue},36:{n:"PtgRef",f:due},37:{n:"PtgArea",f:Zce},38:{n:"PtgMemArea",f:Aue},39:{n:"PtgMemErr",f:Due},40:{n:"PtgMemNoMem",f:Fue},41:{n:"PtgMemFunc",f:$ue},42:{n:"PtgRefErr",f:Rue},43:{n:"PtgAreaErr",f:eue},44:{n:"PtgRefN",f:fue},45:{n:"PtgAreaN",f:nue},46:{n:"PtgMemAreaN",f:Que},47:{n:"PtgMemNoMemN",f:Zue},57:{n:"PtgNameX",f:_ue},58:{n:"PtgRef3d",f:hue},59:{n:"PtgArea3d",f:Jce},60:{n:"PtgRefErr3d",f:Oue},61:{n:"PtgAreaErr3d",f:tue},255:{}},ede={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},tde={1:{n:"PtgElfLel",f:R5},2:{n:"PtgElfRw",f:Wue},3:{n:"PtgElfCol",f:Mue},6:{n:"PtgElfRwV",f:Hue},7:{n:"PtgElfColV",f:jue},10:{n:"PtgElfRadical",f:zue},11:{n:"PtgElfRadicalS",f:Vue},13:{n:"PtgElfColS",f:Pue},15:{n:"PtgElfColSV",f:Bue},16:{n:"PtgElfRadicalLel",f:Uue},25:{n:"PtgList",f:que},29:{n:"PtgSxName",f:Kue},255:{}},nde={0:{n:"PtgAttrNoop",f:Jue},1:{n:"PtgAttrSemi",f:lue},2:{n:"PtgAttrIf",f:iue},4:{n:"PtgAttrChoose",f:sue},8:{n:"PtgAttrGoto",f:aue},16:{n:"PtgAttrSum",f:xue},32:{n:"PtgAttrBaxcel",f:dL},33:{n:"PtgAttrBaxcel",f:dL},64:{n:"PtgAttrSpace",f:cue},65:{n:"PtgAttrSpaceSemi",f:uue},128:{n:"PtgAttrIfError",f:oue},255:{}};function rde(n,e,t,r){if(r.biff<8)return Qo(n,e);for(var s=n.l+e,a=[],i=0;i!==t.length;++i)switch(t[i][0]){case"PtgArray":t[i][1]=Eue(n,0,r),a.push(t[i][1]);break;case"PtgMemArea":t[i][2]=Cue(n,t[i][1],r),a.push(t[i][2]);break;case"PtgExp":r&&r.biff==12&&(t[i][1][1]=n.read_shift(4),a.push(t[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[i][0]}return e=s-n.l,e!==0&&a.push(Qo(n,e)),a}function sde(n,e,t){for(var r=n.l+e,s,a,i=[];r!=n.l;)e=r-n.l,a=n[n.l],s=fL[a]||fL[ede[a]],(a===24||a===25)&&(s=(a===24?tde:nde)[n[n.l+1]]),!s||!s.f?Qo(n,e):i.push([s.n,s.f(n,e,t)]);return i}function ade(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],s=[],a=0;a<r.length;++a){var i=r[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var ide={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ode(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function O5(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var s="";if(t.biff>8)switch(n[r[0]][0]){case 357:return s=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?s:s+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return s=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?s:s+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return n[r[0]][0][3]?(s=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?s:s+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function hL(n,e,t){var r=O5(n,e,t);return r=="#REF"?r:ode(r,t)}function _h(n,e,t,r,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,c,d,h=0,p=0,g,x="";if(!n[0]||!n[0][0])return"";for(var y=-1,b="",S=0,T=n[0].length;S<T;++S){var N=n[0][S];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),y>=0){switch(n[0][y][1][0]){case 0:b=kr(" ",n[0][y][1][1]);break;case 1:b=kr("\r",n[0][y][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}c=c+b,y=-1}o.push(c+ide[N[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=V0(N[1][1],i,s),o.push(W0(d,a));break;case"PtgRefN":d=t?V0(N[1][1],t,s):N[1][1],o.push(W0(d,a));break;case"PtgRef3d":h=N[1][1],d=V0(N[1][2],i,s),x=hL(r,h,s),o.push(x+"!"+W0(d,a));break;case"PtgFunc":case"PtgFuncVar":var C=N[1][0],I=N[1][1];C||(C=0),C&=127;var F=C==0?[]:o.slice(-C);o.length-=C,I==="User"&&(I=F.shift()),o.push(I+"("+F.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":g=QF(N[1][1],t?{s:t}:i,s),o.push(BC(g,s));break;case"PtgArea":g=QF(N[1][1],i,s),o.push(BC(g,s));break;case"PtgArea3d":h=N[1][1],g=N[1][2],x=hL(r,h,s),o.push(x+"!"+BC(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=N[1][2];var D=(r.names||[])[p-1]||(r[0]||[])[p],A=D?D.Name:"SH33TJSNAME"+String(p);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var _=N[1][1];p=N[1][2];var k;if(s.biff<=5)_<0&&(_=-_),r[_]&&(k=r[_][p]);else{var O="";if(((r[_]||[])[0]||[])[0]==14849||(((r[_]||[])[0]||[])[0]==1025?r[_][p]&&r[_][p].itab>0&&(O=r.SheetNames[r[_][p].itab-1]+"!"):O=r.SheetNames[p-1]+"!"),r[_]&&r[_][p])O+=r[_][p].Name;else if(r[0]&&r[0][p])O+=r[0][p].Name;else{var P=(O5(r,_,s)||"").split(";;");P[p-1]?O=P[p-1]:O+="SH33TJSERRX"}o.push(O);break}k||(k={Name:"SH33TJSERRY"}),o.push(k.Name);break;case"PtgParen":var W="(",K=")";if(y>=0){switch(b="",n[0][y][1][0]){case 2:W=kr(" ",n[0][y][1][1])+W;break;case 3:W=kr("\r",n[0][y][1][1])+W;break;case 4:K=kr(" ",n[0][y][1][1])+K;break;case 5:K=kr("\r",n[0][y][1][1])+K;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}y=-1}o.push(W+o.pop()+K);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:N[1][1],r:N[1][0]};var q={c:t.c,r:t.r};if(r.sharedf[zn(d)]){var V=r.sharedf[zn(d)];o.push(_h(V,i,q,r,s))}else{var X=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){o.push(_h(c[1],i,q,r,s)),X=!0;break}X||o.push(N[1])}break;case"PtgArray":o.push("{"+ade(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&Q.indexOf(n[0][S][0])==-1){N=n[0][y];var Y=!0;switch(N[1][0]){case 4:Y=!1;case 0:b=kr(" ",N[1][1]);break;case 5:Y=!1;case 1:b=kr("\r",N[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((Y?b:"")+o.pop()+(Y?"":b)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function lde(n){if(n==null){var e=ze(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Ed(n);return Ed(0)}function cde(n,e,t,r,s){var a=kd(e,t,s),i=lde(n.v),o=ze(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=ze(n.bf.length),d=0;d<n.bf.length;++d)c[d]=n.bf[d];var h=Bs([a,i,o,c]);return h}function Vw(n,e,t){var r=n.read_shift(4),s=sde(n,r,t),a=n.read_shift(4),i=a>0?rde(n,a,s,t):null;return[s,i]}var ude=Vw,Ww=Vw,dde=Vw,fde=Vw,hde={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},D5={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},pde={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function mde(n){var e="of:="+n.replace(G_,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function gde(n){return n.replace(/\./,"!")}var H0=typeof Map<"u";function X_(n,e,t){var r=0,s=n.length;if(t){if(H0?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var a=H0?t.get(e):t[e];r<a.length;++r)if(n[a[r]].t===e)return n.Count++,a[r]}}else for(;r<s;++r)if(n[r].t===e)return n.Count++,r;return n[s]={t:e},n.Count++,n.Unique++,t&&(H0?(t.has(e)||t.set(e,[]),t.get(e).push(s)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(s))),s}function Hw(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Ll=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=kv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=HE(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function F5(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function yu(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],s=60,a=n.length;if(r==null&&t.ssf){for(;s<392;++s)if(t.ssf[s]==null){A6(e.z,s),t.ssf[s]=e.z,t.revssf[e.z]=r=s;break}}for(s=0;s!=a;++s)if(n[s].numFmtId===r)return s;return n[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function xde(n,e,t){if(n&&n["!ref"]){var r=ur(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function yde(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Zr(n[t])+'"/>';return e+"</mergeCells>"}function bde(n,e,t,r,s){var a=!1,i={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}a=!0,i.codeName=ag(Bn(l))}if(n&&n["!outline"]){var c={summaryBelow:1,summaryRight:1};n["!outline"].above&&(c.summaryBelow=0),n["!outline"].left&&(c.summaryRight=0),o=(o||"")+ut("outlinePr",null,c)}!a&&!o||(s[s.length]=ut("sheetPr",o,i))}var vde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],wde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Sde(n){var e={sheet:1};return vde.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),wde.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=y5(n.password).toString(16).toUpperCase()),ut("sheetProtection",null,e)}function Tde(n){return F5(n),ut("pageMargins",null,n)}function Nde(n,e){for(var t=["<cols>"],r,s=0;s!=e.length;++s)(r=e[s])&&(t[t.length]=ut("col",null,Hw(s,r)));return t[t.length]="</cols>",t.join("")}function Cde(n,e,t,r){var s=typeof n.ref=="string"?n.ref:Zr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,i=li(s);i.s.r==i.e.r&&(i.e.r=li(e["!ref"]).e.r,s=Zr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),ut("autoFilter",null,{ref:s})}function Ede(n,e,t,r){var s={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ut("sheetViews",ut("sheetView",null,s),{})}function kde(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var s="",a=n.t,i=n.v;if(n.t!=="z")switch(n.t){case"b":s=n.v?"1":"0";break;case"n":s=""+n.v;break;case"e":s=Kg[n.v];break;case"d":r&&r.cellDates?s=ma(n.v,-1).toISOString():(n=La(n),n.t="n",s=""+(n.v=Fa(ma(n.v)))),typeof n.z>"u"&&(n.z=_r[14]);break;default:s=n.v;break}var o=js("v",Bn(s)),l={r:e},c=yu(r.cellXfs,n,r);switch(c!==0&&(l.s=c),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=js("v",""+X_(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=a&&(n.t=a,n.v=i),typeof n.f=="string"&&n.f){var d=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=ut("f",Bn(n.f),d)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),ut("c",o,l)}function _de(n,e,t,r){var s=[],a=[],i=ur(n["!ref"]),o="",l,c="",d=[],h=0,p=0,g=n["!rows"],x=Array.isArray(n),y={r:c},b,S=-1;for(p=i.s.c;p<=i.e.c;++p)d[p]=ta(p);for(h=i.s.r;h<=i.e.r;++h){for(a=[],c=Us(h),p=i.s.c;p<=i.e.c;++p){l=d[p]+c;var T=x?(n[h]||[])[p]:n[l];T!==void 0&&(o=kde(T,l,n,e))!=null&&a.push(o)}(a.length>0||g&&g[h])&&(y={r:c},g&&g[h]&&(b=g[h],b.hidden&&(y.hidden=1),S=-1,b.hpx?S=_v(b.hpx):b.hpt&&(S=b.hpt),S>-1&&(y.ht=S,y.customHeight=1),b.level&&(y.outlineLevel=b.level)),s[s.length]=ut("row",a.join(""),y))}if(g)for(;h<g.length;++h)g&&g[h]&&(y={r:h+1},b=g[h],b.hidden&&(y.hidden=1),S=-1,b.hpx?S=_v(b.hpx):b.hpt&&(S=b.hpt),S>-1&&(y.ht=S,y.customHeight=1),b.level&&(y.outlineLevel=b.level),s[s.length]=ut("row","",y));return s.join("")}function L5(n,e,t,r){var s=[ts,ut("worksheet",null,{xmlns:Kh[0],"xmlns:r":vs.r})],a=t.SheetNames[n],i=0,o="",l=t.Sheets[a];l==null&&(l={});var c=l["!ref"]||"A1",d=ur(c);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Zr(d)}r||(r={}),l["!comments"]=[];var h=[];bde(l,t,n,e,s),s[s.length]=ut("dimension",null,{ref:c}),s[s.length]=Ede(l,e,n,t),e.sheetFormat&&(s[s.length]=ut("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Nde(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=_de(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=Sde(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Cde(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=yde(l["!merges"]));var p=-1,g,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=Pn(r,-1,Bn(y[1].Target).replace(/#.*$/,""),Sn.HLINK),g["r:id"]="rId"+x),(p=y[1].Target.indexOf("#"))>-1&&(g.location=Bn(y[1].Target.slice(p+1))),y[1].Tooltip&&(g.tooltip=Bn(y[1].Tooltip)),s[s.length]=ut("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Tde(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=js("ignoredErrors",ut("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(x=Pn(r,-1,"../drawings/drawing"+(n+1)+".xml",Sn.DRAW),s[s.length]=ut("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=h),l["!comments"].length>0&&(x=Pn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Sn.VML),s[s.length]=ut("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Ide(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var s=n.read_shift(2);n.l+=1;var a=n.read_shift(1);return n.l=r,a&7&&(t.level=a&7),a&16&&(t.hidden=!0),a&32&&(t.hpt=s/20),t}function Ade(n,e,t){var r=ze(145),s=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var a=320;s.hpx?a=_v(s.hpx)*20:s.hpt&&(a=s.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),r.write_shift(1,i),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var c={r:n,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,p=-1,g=d<<10;g<d+1<<10;++g){c.c=g;var x=Array.isArray(t)?(t[c.r]||[])[c.c]:t[zn(c)];x&&(h<0&&(h=g),p=g)}h<0||(++o,r.write_shift(4,h),r.write_shift(4,p))}var y=r.l;return r.l=l,r.write_shift(4,o),r.l=y,r.length>r.l?r.slice(0,r.l):r}function $de(n,e,t,r){var s=Ade(r,t,e);(s.length>17||(e["!rows"]||[])[r])&&Je(n,0,s)}var Rde=Xd,Ode=Yh;function Dde(){}function Fde(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=Hoe(n),t}function Lde(n,e,t){t==null&&(t=ze(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var s=1;s<3;++s)t.write_shift(1,0);return Nv({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),Q6(n,t),t.slice(0,t.l)}function Mde(n){var e=ji(n);return[e]}function Pde(n,e,t){return t==null&&(t=ze(8)),Gd(e,t)}function Bde(n){var e=qd(n);return[e]}function jde(n,e,t){return t==null&&(t=ze(4)),Kd(e,t)}function zde(n){var e=ji(n),t=n.read_shift(1);return[e,t,"b"]}function Ude(n,e,t){return t==null&&(t=ze(9)),Gd(e,t),t.write_shift(1,n.v?1:0),t}function Vde(n){var e=qd(n),t=n.read_shift(1);return[e,t,"b"]}function Wde(n,e,t){return t==null&&(t=ze(5)),Kd(e,t),t.write_shift(1,n.v?1:0),t}function Hde(n){var e=ji(n),t=n.read_shift(1);return[e,t,"e"]}function Gde(n,e,t){return t==null&&(t=ze(9)),Gd(e,t),t.write_shift(1,n.v),t}function qde(n){var e=qd(n),t=n.read_shift(1);return[e,t,"e"]}function Kde(n,e,t){return t==null&&(t=ze(8)),Kd(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function Xde(n){var e=ji(n),t=n.read_shift(4);return[e,t,"s"]}function Yde(n,e,t){return t==null&&(t=ze(12)),Gd(e,t),t.write_shift(4,e.v),t}function Qde(n){var e=qd(n),t=n.read_shift(4);return[e,t,"s"]}function Zde(n,e,t){return t==null&&(t=ze(8)),Kd(e,t),t.write_shift(4,e.v),t}function Jde(n){var e=ji(n),t=Qh(n);return[e,t,"n"]}function efe(n,e,t){return t==null&&(t=ze(16)),Gd(e,t),Ed(n.v,t),t}function tfe(n){var e=qd(n),t=Qh(n);return[e,t,"n"]}function nfe(n,e,t){return t==null&&(t=ze(12)),Kd(e,t),Ed(n.v,t),t}function rfe(n){var e=ji(n),t=Z6(n);return[e,t,"n"]}function sfe(n,e,t){return t==null&&(t=ze(12)),Gd(e,t),J6(n.v,t),t}function afe(n){var e=qd(n),t=Z6(n);return[e,t,"n"]}function ife(n,e,t){return t==null&&(t=ze(8)),Kd(e,t),J6(n.v,t),t}function ofe(n){var e=ji(n),t=z_(n);return[e,t,"is"]}function lfe(n){var e=ji(n),t=na(n);return[e,t,"str"]}function cfe(n,e,t){return t==null&&(t=ze(12+4*n.v.length)),Gd(e,t),Ns(n.v,t),t.length>t.l?t.slice(0,t.l):t}function ufe(n){var e=qd(n),t=na(n);return[e,t,"str"]}function dfe(n,e,t){return t==null&&(t=ze(8+4*n.v.length)),Kd(e,t),Ns(n.v,t),t.length>t.l?t.slice(0,t.l):t}function ffe(n,e,t){var r=n.l+e,s=ji(n);s.r=t["!row"];var a=n.read_shift(1),i=[s,a,"b"];if(t.cellFormula){n.l+=2;var o=Ww(n,r-n.l,t);i[3]=_h(o,null,s,t.supbooks,t)}else n.l=r;return i}function hfe(n,e,t){var r=n.l+e,s=ji(n);s.r=t["!row"];var a=n.read_shift(1),i=[s,a,"e"];if(t.cellFormula){n.l+=2;var o=Ww(n,r-n.l,t);i[3]=_h(o,null,s,t.supbooks,t)}else n.l=r;return i}function pfe(n,e,t){var r=n.l+e,s=ji(n);s.r=t["!row"];var a=Qh(n),i=[s,a,"n"];if(t.cellFormula){n.l+=2;var o=Ww(n,r-n.l,t);i[3]=_h(o,null,s,t.supbooks,t)}else n.l=r;return i}function mfe(n,e,t){var r=n.l+e,s=ji(n);s.r=t["!row"];var a=na(n),i=[s,a,"str"];if(t.cellFormula){n.l+=2;var o=Ww(n,r-n.l,t);i[3]=_h(o,null,s,t.supbooks,t)}else n.l=r;return i}var gfe=Xd,xfe=Yh;function yfe(n,e){return e==null&&(e=ze(4)),e.write_shift(4,n),e}function bfe(n,e){var t=n.l+e,r=Xd(n),s=U_(n),a=na(n),i=na(n),o=na(n);n.l=t;var l={rfx:r,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function vfe(n,e){var t=ze(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Yh({s:Ts(n[0]),e:Ts(n[0])},t),V_("rId"+e,t);var r=n[1].Target.indexOf("#"),s=r==-1?"":n[1].Target.slice(r+1);return Ns(s||"",t),Ns(n[1].Tooltip||"",t),Ns("",t),t.slice(0,t.l)}function wfe(){}function Sfe(n,e,t){var r=n.l+e,s=e5(n),a=n.read_shift(1),i=[s];if(i[2]=a,t.cellFormula){var o=ude(n,r-n.l,t);i[1]=o}else n.l=r;return i}function Tfe(n,e,t){var r=n.l+e,s=Xd(n),a=[s];if(t.cellFormula){var i=fde(n,r-n.l,t);a[1]=i,n.l=r}else n.l=r;return a}function Nfe(n,e,t){t==null&&(t=ze(18));var r=Hw(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof r.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),t.write_shift(2,s),t}var M5=["left","right","top","bottom","header","footer"];function Cfe(n){var e={};return M5.forEach(function(t){e[t]=Qh(n)}),e}function Efe(n,e){return e==null&&(e=ze(48)),F5(n),M5.forEach(function(t){Ed(n[t],e)}),e}function kfe(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function _fe(n,e,t){t==null&&(t=ze(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Ife(n){var e=ze(24);return e.write_shift(4,4),e.write_shift(4,1),Yh(n,e),e}function Afe(n,e){return e==null&&(e=ze(66)),e.write_shift(2,n.password?y5(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function $fe(){}function Rfe(){}function Ofe(n,e,t,r,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=La(e),e.z=e.z||_r[14],e.v=Fa(ma(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=yu(s.cellXfs,e,s),e.l&&a["!links"].push([zn(l),e.l]),e.c&&a["!comments"].push([zn(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=X_(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?Je(n,18,Zde(e,l)):Je(n,7,Yde(e,l))):(l.t="str",i?Je(n,17,dfe(e,l)):Je(n,6,cfe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Je(n,13,ife(e,l)):Je(n,2,sfe(e,l)):i?Je(n,16,nfe(e,l)):Je(n,5,efe(e,l)),!0;case"b":return l.t="b",i?Je(n,15,Wde(e,l)):Je(n,4,Ude(e,l)),!0;case"e":return l.t="e",i?Je(n,14,Kde(e,l)):Je(n,3,Gde(e,l)),!0}return i?Je(n,12,jde(e,l)):Je(n,1,Pde(e,l)),!0}function Dfe(n,e,t,r){var s=ur(e["!ref"]||"A1"),a,i="",o=[];Je(n,145);var l=Array.isArray(e),c=s.e.r;e["!rows"]&&(c=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=c;++d){i=Us(d),$de(n,e,s,d);var h=!1;if(d<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){d===s.s.r&&(o[p]=ta(p)),a=o[p]+i;var g=l?(e[d]||[])[p]:e[a];if(!g){h=!1;continue}h=Ofe(n,g,d,p,r,e,h)}}Je(n,146)}function Ffe(n,e){!e||!e["!merges"]||(Je(n,177,yfe(e["!merges"].length)),e["!merges"].forEach(function(t){Je(n,176,xfe(t))}),Je(n,178))}function Lfe(n,e){!e||!e["!cols"]||(Je(n,390),e["!cols"].forEach(function(t,r){t&&Je(n,60,Nfe(r,t))}),Je(n,391))}function Mfe(n,e){!e||!e["!ref"]||(Je(n,648),Je(n,649,Ife(ur(e["!ref"]))),Je(n,650))}function Pfe(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var s=Pn(t,-1,r[1].Target.replace(/#.*$/,""),Sn.HLINK);Je(n,494,vfe(r,s))}}),delete e["!links"]}function Bfe(n,e,t,r){if(e["!comments"].length>0){var s=Pn(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Sn.VML);Je(n,551,V_("rId"+s)),e["!legacy"]=s}}function jfe(n,e,t,r){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Zr(s.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var i=t.Workbook.Names,o=li(a);o.s.r==o.e.r&&(o.e.r=li(e["!ref"]).e.r,a=Zr(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+t.SheetNames[r]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+a}),Je(n,161,Yh(ur(a))),Je(n,162)}}function zfe(n,e,t){Je(n,133),Je(n,137,_fe(e,t)),Je(n,138),Je(n,134)}function Ufe(n,e){e["!protect"]&&Je(n,535,Afe(e["!protect"]))}function Vfe(n,e,t,r){var s=Oa(),a=t.SheetNames[n],i=t.Sheets[a]||{},o=a;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=ur(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Je(s,129),(t.vbaraw||i["!outline"])&&Je(s,147,Lde(o,i["!outline"])),Je(s,148,Ode(l)),zfe(s,i,t.Workbook),Lfe(s,i),Dfe(s,i,n,e),Ufe(s,i),jfe(s,i,t,n),Ffe(s,i),Pfe(s,i,r),i["!margins"]&&Je(s,476,Efe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Mfe(s,i),Bfe(s,i,n,r),Je(s,130),s.end()}function Wfe(n,e){n.l+=10;var t=na(n);return{name:t}}var Hfe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Gfe(n){return!n.Workbook||!n.Workbook.WBProps?"false":Toe(n.Workbook.WBProps.date1904)?"true":"false"}var qfe="][*?/\\".split("");function P5(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return qfe.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Kfe(n,e,t){n.forEach(function(r,s){P5(r);for(var a=0;a<s;++a)if(r==n[a])throw new Error("Duplicate Sheet Name: "+r);if(t){var i=e&&e[s]&&e[s].CodeName||r;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Xfe(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Kfe(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)xde(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function B5(n){var e=[ts];e[e.length]=ut("workbook",null,{xmlns:Kh[0],"xmlns:r":vs.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(Hfe.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=ut("workbookPr",null,r);var s=n.Workbook&&n.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=n.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==n.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=n.SheetNames.length;++a){var i={name:Bn(n.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=ut("sheet",null,i)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=ut("definedName",Bn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Yfe(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=WE(n),t.name=na(n),t}function Qfe(n,e){return e||(e=ze(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),V_(n.strRelID,e),Ns(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Zfe(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var s=e>8?na(n):"";return s.length>0&&(t.CodeName=s),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Jfe(n,e){e||(e=ze(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),Q6(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function ehe(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var s=n.read_shift(4),a=Goe(n),i=dde(n,0,t),o=U_(n);n.l=r;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function the(n,e){Je(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,s={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Je(n,156,Qfe(s))}Je(n,144)}function nhe(n,e){e||(e=ze(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Ns("SheetJS",e),Ns(gv.version,e),Ns(gv.version,e),Ns("7262",e),e.length>e.l?e.slice(0,e.l):e}function rhe(n,e){e||(e=ze(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function she(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,s=-1,a=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&s==-1?s=r:t[r].Hidden==1&&a==-1&&(a=r);a>s||(Je(n,135),Je(n,158,rhe(s)),Je(n,136))}}function ahe(n,e){var t=Oa();return Je(t,131),Je(t,128,nhe()),Je(t,153,Jfe(n.Workbook&&n.Workbook.WBProps||null)),she(t,n),the(t,n),Je(t,132),t.end()}function ihe(n,e,t){return(e.slice(-4)===".bin"?ahe:B5)(n)}function ohe(n,e,t,r,s){return(e.slice(-4)===".bin"?Vfe:L5)(n,t,r,s)}function lhe(n,e,t){return(e.slice(-4)===".bin"?Ece:w5)(n,t)}function che(n,e,t){return(e.slice(-4)===".bin"?Jle:x5)(n,t)}function uhe(n,e,t){return(e.slice(-4)===".bin"?Uce:E5)(n)}function dhe(n){return(n.slice(-4)===".bin"?Dce:N5)()}function fhe(n,e){var t=[];return n.Props&&t.push(lle(n.Props,e)),n.Custprops&&t.push(cle(n.Props,n.Custprops)),t.join("")}function hhe(){return""}function phe(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,s){var a=[];a.push(ut("NumberFormat",null,{"ss:Format":Bn(_r[r.numFmtId])}));var i={"ss:ID":"s"+(21+s)};t.push(ut("Style",a.join(""),i))}),ut("Styles",t.join(""))}function j5(n){return ut("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+q_(n.Ref,{r:0,c:0})})}function mhe(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var s=e[r];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||t.push(j5(s)))}return ut("Names",t.join(""))}function ghe(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var s=r.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||a.push(j5(o)))}return a.join("")}function xhe(n,e,t,r){if(!n)return"";var s=[];if(n["!margins"]&&(s.push("<PageSetup>"),n["!margins"].header&&s.push(ut("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&s.push(ut("Footer",null,{"x:Margin":n["!margins"].footer})),s.push(ut("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),s.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)s.push(ut("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<t&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==t&&s.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),n["!protect"]&&(s.push(js("ProtectContents","True")),n["!protect"].objects&&s.push(js("ProtectObjects","True")),n["!protect"].scenarios&&s.push(js("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?s.push(js("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&s.push(js("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){n["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":ut("WorksheetOptions",s.join(""),{xmlns:Za.x})}function yhe(n){return n.map(function(e){var t=Soe(e.t||""),r=ut("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return ut("Comment",r,{"ss:Author":e.a})}).join("")}function bhe(n,e,t,r,s,a,i){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Bn(q_(n.f,i))),n.F&&n.F.slice(0,e.length)==e){var l=Ts(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Bn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Bn(n.l.Tooltip))),t["!merges"])for(var c=t["!merges"],d=0;d!=c.length;++d)c[d].s.c!=i.c||c[d].s.r!=i.r||(c[d].e.c>c[d].s.c&&(o["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(o["ss:MergeDown"]=c[d].e.r-c[d].s.r));var h="",p="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",p=String(n.v);break;case"b":h="Boolean",p=n.v?"1":"0";break;case"e":h="Error",p=Kg[n.v];break;case"d":h="DateTime",p=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||_r[14]);break;case"s":h="String",p=woe(n.v||"");break}var g=yu(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var x=n.v!=null?p:"",y=n.t=="z"?"":'<Data ss:Type="'+h+'">'+x+"</Data>";return(n.c||[]).length>0&&(y+=yhe(n.c)),ut("Cell",y,o)}function vhe(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=v5(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function whe(n,e,t,r){if(!n["!ref"])return"";var s=ur(n["!ref"]),a=n["!merges"]||[],i=0,o=[];n["!cols"]&&n["!cols"].forEach(function(b,S){H_(b);var T=!!b.width,N=Hw(S,b),C={"ss:Index":S+1};T&&(C["ss:Width"]=Ev(N.width)),b.hidden&&(C["ss:Hidden"]="1"),o.push(ut("Column",null,C))});for(var l=Array.isArray(n),c=s.s.r;c<=s.e.r;++c){for(var d=[vhe(c,(n["!rows"]||[])[c])],h=s.s.c;h<=s.e.c;++h){var p=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>c)&&!(a[i].e.c<h)&&!(a[i].e.r<c)){(a[i].s.c!=h||a[i].s.r!=c)&&(p=!0);break}if(!p){var g={r:c,c:h},x=zn(g),y=l?(n[c]||[])[h]:n[x];d.push(bhe(y,x,n,e,t,r,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function She(n,e,t){var r=[],s=t.SheetNames[n],a=t.Sheets[s],i=a?ghe(a,e,n,t):"";return i.length>0&&r.push("<Names>"+i+"</Names>"),i=a?whe(a,e,n,t):"",i.length>0&&r.push("<Table>"+i+"</Table>"),r.push(xhe(a,e,n,t)),r.join("")}function The(n,e){e||(e={}),n.SSF||(n.SSF=La(_r)),n.SSF&&(jw(),Bw(n.SSF),e.revssf=zw(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],yu(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(fhe(n,e)),t.push(hhe()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(ut("Worksheet",She(r,e,n),{"ss:Name":Bn(n.SheetNames[r])}));return t[2]=phe(n,e),t[3]=mhe(n),ts+ut("Workbook",t.join(""),{xmlns:Za.ss,"xmlns:o":Za.o,"xmlns:x":Za.x,"xmlns:ss":Za.ss,"xmlns:dt":Za.dt,"xmlns:html":Za.html})}var UC={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Nhe(n,e){var t=[],r=[],s=[],a=0,i,o=jF(JF,"n"),l=jF(eL,"n");if(n.Props)for(i=Vs(n.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?t:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],n.Props[i[a]]]);if(n.Custprops)for(i=Vs(n.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(n.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?t:Object.prototype.hasOwnProperty.call(l,i[a])?r:s).push([i[a],n.Custprops[i[a]]]);var c=[];for(a=0;a<s.length;++a)u5.indexOf(s[a][0])>-1||o5.indexOf(s[a][0])>-1||s[a][1]!=null&&c.push(s[a]);r.length&&Xn.utils.cfb_add(e,"/SummaryInformation",aL(r,UC.SI,l,eL)),(t.length||c.length)&&Xn.utils.cfb_add(e,"/DocumentSummaryInformation",aL(t,UC.DSI,o,JF,c.length?c:null,UC.UDI))}function Che(n,e){var t=e||{},r=Xn.utils.cfb_new({root:"R"}),s="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":s="/Workbook",t.biff=8;break;case"biff5":s="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Xn.utils.cfb_add(r,s,z5(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Nhe(n,r),t.biff==8&&n.vbaraw&&Vce(r,Xn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Ehe={0:{f:Ide},1:{f:Mde},2:{f:rfe},3:{f:Hde},4:{f:zde},5:{f:Jde},6:{f:lfe},7:{f:Xde},8:{f:mfe},9:{f:pfe},10:{f:ffe},11:{f:hfe},12:{f:Bde},13:{f:afe},14:{f:qde},15:{f:Vde},16:{f:tfe},17:{f:ufe},18:{f:Qde},19:{f:z_},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ehe},40:{},42:{},43:{f:lce},44:{f:ice},45:{f:dce},46:{f:hce},47:{f:fce},48:{},49:{f:Boe},50:{},51:{f:Ice},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:jle},62:{f:ofe},63:{f:Fce},64:{f:$fe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Qo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:kfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Fde},148:{f:Rde,p:16},151:{f:wfe},152:{},153:{f:Zfe},154:{},155:{},156:{f:Yfe},157:{},158:{},159:{T:1,f:Yle},160:{T:-1},161:{T:1,f:Xd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:gfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:kce},336:{T:-1},337:{f:Rce,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:WE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Dle},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Sfe},427:{f:Tfe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Cfe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Dde},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:bfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:WE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:jce},633:{T:1},634:{T:-1},635:{T:1,f:Pce},636:{T:-1},637:{f:Voe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Wfe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Rfe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ft(n,e,t,r){var s=e;if(!isNaN(s)){var a=r||(t||[]).length||0,i=n.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&P_(t)&&n.push(t)}}function khe(n,e,t,r){var s=(t||[]).length||0;if(s<=8224)return ft(n,e,t,s);var a=e;if(!isNaN(a)){for(var i=t.parts||[],o=0,l=0,c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;var d=n.next(4);for(d.write_shift(2,a),d.write_shift(2,c),n.push(t.slice(l,l+c)),l+=c;l<s;){for(d=n.next(4),d.write_shift(2,60),c=0;c+(i[o]||8224)<=8224;)c+=i[o]||8224,o++;d.write_shift(2,c),n.push(t.slice(l,l+c)),l+=c}}}function Yg(n,e,t){return n||(n=ze(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function _he(n,e,t,r){var s=ze(9);return Yg(s,n,e),f5(t,r||"b",s),s}function Ihe(n,e,t){var r=ze(8+2*t.length);return Yg(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Ahe(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Fa(ma(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?ft(n,2,Wle(t,r,s)):ft(n,3,Vle(t,r,s));return;case"b":case"e":ft(n,5,_he(t,r,e.v,e.t));return;case"s":case"str":ft(n,4,Ihe(t,r,(e.v||"").slice(0,255)));return}ft(n,1,Yg(null,t,r))}function $he(n,e,t,r){var s=Array.isArray(e),a=ur(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Zr(a)}for(var c=a.s.r;c<=a.e.r;++c){o=Us(c);for(var d=a.s.c;d<=a.e.c;++d){c===a.s.r&&(l[d]=ta(d)),i=l[d]+o;var h=s?(e[c]||[])[d]:e[i];h&&Ahe(n,h,c,d)}}}function Rhe(n,e){for(var t=e||{},r=Oa(),s=0,a=0;a<n.SheetNames.length;++a)n.SheetNames[a]==t.sheet&&(s=a);if(s==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return ft(r,t.biff==4?1033:t.biff==3?521:9,W_(n,16,t)),$he(r,n.Sheets[n.SheetNames[s]],s,t),ft(r,10),r.end()}function Ohe(n,e,t){ft(n,49,Ele({sz:12,name:"Arial"},t))}function Dhe(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var s=r[0];s<=r[1];++s)e[s]!=null&&ft(n,1054,Ile(s,e[s],t))})}function Fhe(n,e){var t=ze(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),ft(n,2151,t),t=ze(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),m5(ur(e["!ref"]||"A1"),t),t.write_shift(4,4),ft(n,2152,t)}function Lhe(n,e){for(var t=0;t<16;++t)ft(n,224,oL({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){ft(n,224,oL(r,0,e))})}function Mhe(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];ft(n,440,Mle(r)),r[1].Tooltip&&ft(n,2048,Ple(r))}delete e["!links"]}function Phe(n,e){if(e){var t=0;e.forEach(function(r,s){++t<=256&&r&&ft(n,125,zle(Hw(s,r),s))})}}function Bhe(n,e,t,r,s){var a=16+yu(s.cellXfs,e,s);if(e.v==null&&!e.bf){ft(n,513,kd(t,r,a));return}if(e.bf)ft(n,6,cde(e,t,r,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?Fa(ma(e.v)):e.v;ft(n,515,Ole(t,r,i,a));break;case"b":case"e":ft(n,517,Rle(t,r,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=X_(s.Strings,e.v,s.revStrings);ft(n,253,kle(t,r,o,a))}else ft(n,516,_le(t,r,(e.v||"").slice(0,255),a,s));break;default:ft(n,513,kd(t,r,a))}}function jhe(n,e,t){var r=Oa(),s=t.SheetNames[n],a=t.Sheets[s]||{},i=(t||{}).Workbook||{},o=(i.Sheets||[])[n]||{},l=Array.isArray(a),c=e.biff==8,d,h="",p=[],g=ur(a["!ref"]||"A1"),x=c?65536:16384;if(g.e.c>255||g.e.r>=x){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,x-1)}ft(r,2057,W_(t,16,e)),ft(r,13,Ii(1)),ft(r,12,Ii(100)),ft(r,15,da(!0)),ft(r,17,da(!1)),ft(r,16,Ed(.001)),ft(r,95,da(!0)),ft(r,42,da(!1)),ft(r,43,da(!1)),ft(r,130,Ii(1)),ft(r,128,$le()),ft(r,131,da(!1)),ft(r,132,da(!1)),c&&Phe(r,a["!cols"]),ft(r,512,Ale(g,e)),c&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){h=Us(y);for(var b=g.s.c;b<=g.e.c;++b){y===g.s.r&&(p[b]=ta(b)),d=p[b]+h;var S=l?(a[y]||[])[b]:a[d];S&&(Bhe(r,S,y,b,e),c&&S.l&&a["!links"].push([d,S.l]))}}var T=o.CodeName||o.name||s;return c&&ft(r,574,Cle((i.Views||[])[0])),c&&(a["!merges"]||[]).length&&ft(r,229,Lle(a["!merges"])),c&&Mhe(r,a),ft(r,442,p5(T)),c&&Fhe(r,a),ft(r,10),r.end()}function zhe(n,e,t){var r=Oa(),s=(n||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=t.biff==8,l=t.biff==5;if(ft(r,2057,W_(n,5,t)),t.bookType=="xla"&&ft(r,135),ft(r,225,o?Ii(1200):null),ft(r,193,fle(2)),l&&ft(r,191),l&&ft(r,192),ft(r,226),ft(r,92,wle("SheetJS",t)),ft(r,66,Ii(o?1200:1252)),o&&ft(r,353,Ii(0)),o&&ft(r,448),ft(r,317,Ule(n.SheetNames.length)),o&&n.vbaraw&&ft(r,211),o&&n.vbaraw){var c=i.CodeName||"ThisWorkbook";ft(r,442,p5(c))}ft(r,156,Ii(17)),ft(r,25,da(!1)),ft(r,18,da(!1)),ft(r,19,Ii(0)),o&&ft(r,431,da(!1)),o&&ft(r,444,Ii(0)),ft(r,61,Nle()),ft(r,64,da(!1)),ft(r,141,Ii(0)),ft(r,34,da(Gfe(n)=="true")),ft(r,14,da(!0)),o&&ft(r,439,da(!1)),ft(r,218,Ii(0)),Ohe(r,n,t),Dhe(r,n.SSF,t),Lhe(r,t),o&&ft(r,352,da(!1));var d=r.end(),h=Oa();o&&ft(h,140,Ble()),o&&t.Strings&&khe(h,252,Tle(t.Strings)),ft(h,10);var p=h.end(),g=Oa(),x=0,y=0;for(y=0;y<n.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*n.SheetNames[y].length;var b=d.length+x+p.length;for(y=0;y<n.SheetNames.length;++y){var S=a[y]||{};ft(g,133,Sle({pos:b,hs:S.Hidden||0,dt:0,name:n.SheetNames[y]},t)),b+=e[y].length}var T=g.end();if(x!=T.length)throw new Error("BS8 "+x+" != "+T.length);var N=[];return d.length&&N.push(d),T.length&&N.push(T),p.length&&N.push(p),Bs(N)}function Uhe(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=La(_r)),n&&n.SSF&&(jw(),Bw(n.SSF),t.revssf=zw(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Y_(t),t.cellXfs=[],yu(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var s=0;s<n.SheetNames.length;++s)r[r.length]=jhe(s,t,n);return r.unshift(zhe(n,r,t)),Bs(r)}function z5(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var s=li(r["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return Uhe(n,e);case 4:case 3:case 2:return Rhe(n,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function Vhe(n,e,t,r){for(var s=n["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>t||s[c].s.c>i)&&!(s[c].e.r<t||s[c].e.c<i)){if(s[c].s.r<t||s[c].s.c<i){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var d=zn({r:t,c:i}),h=r.dense?(n[t]||[])[i]:n[d],p=h&&h.v!=null&&(h.h||voe(h.w||(Gl(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),r.editable?p='<span contenteditable="true">'+p+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),g.id=(r.id||"sjs")+"-"+d,a.push(ut("td",p,g))}}var x="<tr>";return x+a.join("")+"</tr>"}var Whe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Hhe="</body></html>";function Ghe(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function U5(n,e){var t=e||{},r=t.header!=null?t.header:Whe,s=t.footer!=null?t.footer:Hhe,a=[r],i=li(n["!ref"]);t.dense=Array.isArray(n),a.push(Ghe(n,i,t));for(var o=i.s.r;o<=i.e.r;++o)a.push(Vhe(n,i,o,t));return a.push("</table>"+s),a.join("")}function V5(n,e,t){var r=t||{},s=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")s=r.origin;else{var i=typeof r.origin=="string"?Ts(r.origin):r.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:a}};if(n["!ref"]){var d=li(n["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),s==-1&&(c.e.r=s=d.e.r+1)}var h=[],p=0,g=n["!rows"]||(n["!rows"]=[]),x=0,y=0,b=0,S=0,T=0,N=0;for(n["!cols"]||(n["!cols"]=[]);x<o.length&&y<l;++x){var C=o[x];if(pL(C)){if(r.display)continue;g[y]={hidden:!0}}var I=C.children;for(b=S=0;b<I.length;++b){var F=I[b];if(!(r.display&&pL(F))){var D=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):Noe(F.innerHTML),A=F.getAttribute("data-z")||F.getAttribute("z");for(p=0;p<h.length;++p){var _=h[p];_.s.c==S+a&&_.s.r<y+s&&y+s<=_.e.r&&(S=_.e.c+1-a,p=-1)}N=+F.getAttribute("colspan")||1,((T=+F.getAttribute("rowspan")||1)>1||N>1)&&h.push({s:{r:y+s,c:S+a},e:{r:y+s+(T||1)-1,c:S+a+(N||1)-1}});var k={t:"s",v:D},O=F.getAttribute("data-t")||F.getAttribute("t")||"";D!=null&&(D.length==0?k.t=O||"z":r.raw||D.trim().length==0||O=="s"||(D==="TRUE"?k={t:"b",v:!0}:D==="FALSE"?k={t:"b",v:!1}:isNaN(Fl(D))?isNaN(sg(D).getDate())||(k={t:"d",v:ma(D)},r.cellDates||(k={t:"n",v:Fa(k.v)}),k.z=r.dateNF||_r[14]):k={t:"n",v:Fl(D)})),k.z===void 0&&A!=null&&(k.z=A);var P="",W=F.getElementsByTagName("A");if(W&&W.length)for(var K=0;K<W.length&&!(W[K].hasAttribute("href")&&(P=W[K].getAttribute("href"),P.charAt(0)!="#"));++K);P&&P.charAt(0)!="#"&&(k.l={Target:P}),r.dense?(n[y+s]||(n[y+s]=[]),n[y+s][S+a]=k):n[zn({c:S+a,r:y+s})]=k,c.e.c<S+a&&(c.e.c=S+a),S+=N}}++y}return h.length&&(n["!merges"]=(n["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,y-1+s),n["!ref"]=Zr(c),y>=l&&(n["!fullref"]=Zr((c.e.r=o.length-x+y-1+s,c))),n}function W5(n,e){var t=e||{},r=t.dense?[]:{};return V5(r,n,e)}function qhe(n,e){return Hd(W5(n,e),e)}function pL(n){var e="",t=Khe(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Khe(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Xhe=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+ig({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return ts+e}}(),mL=function(){var n=function(a){return Bn(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Bn(i.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,d=0,h=li(a["!ref"]||"A1"),p=a["!merges"]||[],g=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",b=a["!rows"]||[];for(c=0;c<h.s.r;++c)y=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;c<=h.e.r;++c){for(y=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var S=!1,T={},N="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>d)&&!(p[g].s.r>c)&&!(p[g].e.c<d)&&!(p[g].e.r<c)){(p[g].s.c!=d||p[g].s.r!=c)&&(S=!0),T["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,T["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(S){l.push(t);continue}var C=zn({r:c,c:d}),I=x?(a[c]||[])[d]:a[C];if(I&&I.f&&(T["table:formula"]=Bn(mde(I.f)),I.F&&I.F.slice(0,C.length)==C)){var F=li(I.F);T["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,T["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!I){l.push(e);continue}switch(I.t){case"b":N=I.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=I.v?"true":"false";break;case"n":N=I.w||String(I.v||0),T["office:value-type"]="float",T["office:value"]=I.v||0;break;case"s":case"str":N=I.v==null?"":I.v,T["office:value-type"]="string";break;case"d":N=I.w||ma(I.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=ma(I.v).toISOString(),T["table:style-name"]="ce1";break;default:l.push(e);continue}var D=n(N);if(I.l&&I.l.Target){var A=I.l.Target;A=A.charAt(0)=="#"?"#"+gde(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),D=ut("text:a",D,{"xlink:href":A.replace(/&/g,"&amp;")})}l.push("          "+ut("table:table-cell",ut("text:p",D,{}),T)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(c){return i.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var h=c["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;H_(h),h.ods=o;var p=c["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(c){return i.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=l;var h=c["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ts],c=ig({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=ig({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+d+`>
`),l.push(a5().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(r(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function H5(n,e){if(e.bookType=="fods")return mL(n,e);var t=D_(),r="",s=[],a=[];return r="mimetype",rn(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",rn(t,r,mL(n,e)),s.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",rn(t,r,Xhe(n,e)),s.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",rn(t,r,ts+a5()),s.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",rn(t,r,ole(a)),s.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",rn(t,r,ale(s)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Iv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Yhe(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):so(ag(n))}function Qhe(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function tu(n){var e=n.reduce(function(s,a){return s+a.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(s){t.set(s,r),r+=s.length}),t}function Zhe(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,s=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var a=0;s>=1;++a,s/=256)n[e+a]=s&255;n[e+15]|=t>=0?0:128}function og(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Ln(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function gh(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function os(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],s=og(n,t),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:i=4,o=n.slice(t[0],t[0]+i),t[0]+=i;break;case 1:i=8,o=n.slice(t[0],t[0]+i),t[0]+=i;break;case 2:i=og(n,t),o=n.slice(t[0],t[0]+i),t[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(r))}var c={data:o,type:a};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function Fs(n){var e=[];return n.forEach(function(t,r){t.forEach(function(s){s.data&&(e.push(Ln(r*8+s.type)),s.type==2&&e.push(Ln(s.data.length)),e.push(s.data))})}),tu(e)}function Yi(n){for(var e,t=[],r=[0];r[0]<n.length;){var s=og(n,r),a=os(n.slice(r[0],r[0]+s));r[0]+=s;var i={id:gh(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=os(o.data),c=gh(l[3][0].data);i.messages.push({meta:l,data:n.slice(r[0],r[0]+c)}),r[0]+=c}),(e=a[3])!=null&&e[0]&&(i.merge=gh(a[3][0].data)>>>0>0),t.push(i)}return t}function nh(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Ln(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:Ln(+!!t.merge),type:0}]);var s=[];t.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:Ln(i.data.length)}],r[2].push({data:Fs(i.meta),type:2})});var a=Fs(r);e.push(Ln(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),tu(e)}function Jhe(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=og(e,t),s=[];t[0]<e.length;){var a=e[t[0]]&3;if(a==0){var i=e[t[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[t[0]],o>1&&(i|=e[t[0]+1]<<8),o>2&&(i|=e[t[0]+2]<<16),o>3&&(i|=e[t[0]+3]<<24),i>>>=0,i++,t[0]+=o}s.push(e.slice(t[0],t[0]+i)),t[0]+=i;continue}else{var l=0,c=0;if(a==1?(c=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(c=(e[t[0]++]>>2)+1,a==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),s=[tu(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var d=tu(s);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function Qi(n){for(var e=[],t=0;t<n.length;){var r=n[t++],s=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Jhe(r,n.slice(t,t+s))),t+=s}if(t!==n.length)throw new Error("data is not a valid framed stream!");return tu(e)}function rh(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),s=new Uint8Array(4);e.push(s);var a=Ln(r),i=a.length;e.push(a),r<=60?(i++,e.push(new Uint8Array([r-1<<2]))):r<=256?(i+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(i+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(i+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(i+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),i+=r,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,t+=r}return tu(e)}function VC(n,e){var t=new Uint8Array(32),r=Iv(t),s=12,a=0;switch(t[0]=5,n.t){case"n":t[1]=2,Zhe(t,s,n.v),a|=1,s+=16;break;case"b":t[1]=6,r.setFloat64(s,n.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(s,e.indexOf(n.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,a,!0),t.slice(0,s)}function WC(n,e){var t=new Uint8Array(32),r=Iv(t),s=12,a=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(s,n.v,!0),a|=32,s+=8;break;case"b":t[2]=6,r.setFloat64(s,n.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(s,e.indexOf(n.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,a,!0),t.slice(0,s)}function Pc(n){var e=os(n);return og(e[1][0].data)}function epe(n,e,t){var r,s,a,i;if(!((r=n[6])!=null&&r[0])||!((s=n[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=n[8])==null?void 0:a[0])==null?void 0:i.data)&&gh(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=Iv(n[7][0].data),d=0,h=[],p=Iv(n[4][0].data),g=0,x=[],y=0;y<e.length;++y){if(e[y]==null){c.setUint16(y*2,65535,!0),p.setUint16(y*2,65535);continue}c.setUint16(y*2,d,!0),p.setUint16(y*2,g,!0);var b,S;switch(typeof e[y]){case"string":b=VC({t:"s",v:e[y]},t),S=WC({t:"s",v:e[y]},t);break;case"number":b=VC({t:"n",v:e[y]},t),S=WC({t:"n",v:e[y]},t);break;case"boolean":b=VC({t:"b",v:e[y]},t),S=WC({t:"b",v:e[y]},t);break;default:throw new Error("Unsupported value "+e[y])}h.push(b),d+=b.length,x.push(S),g+=S.length,++l}for(n[2][0].data=Ln(l);y<n[7][0].data.length/2;++y)c.setUint16(y*2,65535,!0),p.setUint16(y*2,65535,!0);return n[6][0].data=tu(h),n[3][0].data=tu(x),l}function tpe(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=li(t["!ref"]);r.s.r=r.s.c=0;var s=!1;r.e.c>9&&(s=!0,r.e.c=9),r.e.r>49&&(s=!0,r.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Zr(r)));var a=Av(t,{range:r,header:1}),i=["~Sh33tJ5~"];a.forEach(function(z){return z.forEach(function(G){typeof G=="string"&&i.push(G)})});var o={},l=[],c=Xn.read(e.numbers,{type:"base64"});c.FileIndex.map(function(z,G){return[z,c.FullPaths[G]]}).forEach(function(z){var G=z[0],U=z[1];if(G.type==2&&G.name.match(/\.iwa/)){var se=G.content,pe=Qi(se),me=Yi(pe);me.forEach(function(be){l.push(be.id),o[be.id]={deps:[],location:U,type:gh(be.messages[0].meta[1][0].data)}})}}),l.sort(function(z,G){return z-G});var d=l.filter(function(z){return z>1}).map(function(z){return[z,Ln(z)]});c.FileIndex.map(function(z,G){return[z,c.FullPaths[G]]}).forEach(function(z){var G=z[0];if(z[1],!!G.name.match(/\.iwa/)){var U=Yi(Qi(G.content));U.forEach(function(se){se.messages.forEach(function(pe){d.forEach(function(me){se.messages.some(function(be){return gh(be.meta[1][0].data)!=11006&&Qhe(be.data,me[1])})&&o[me[0]].deps.push(se.id)})})})}});for(var h=Xn.find(c,o[1].location),p=Yi(Qi(h.content)),g,x=0;x<p.length;++x){var y=p[x];y.id==1&&(g=y)}var b=Pc(os(g.messages[0].data)[1][0].data);for(h=Xn.find(c,o[b].location),p=Yi(Qi(h.content)),x=0;x<p.length;++x)y=p[x],y.id==b&&(g=y);for(b=Pc(os(g.messages[0].data)[2][0].data),h=Xn.find(c,o[b].location),p=Yi(Qi(h.content)),x=0;x<p.length;++x)y=p[x],y.id==b&&(g=y);for(b=Pc(os(g.messages[0].data)[2][0].data),h=Xn.find(c,o[b].location),p=Yi(Qi(h.content)),x=0;x<p.length;++x)y=p[x],y.id==b&&(g=y);var S=os(g.messages[0].data);{S[6][0].data=Ln(r.e.r+1),S[7][0].data=Ln(r.e.c+1);var T=Pc(S[46][0].data),N=Xn.find(c,o[T].location),C=Yi(Qi(N.content));{for(var I=0;I<C.length&&C[I].id!=T;++I);if(C[I].id!=T)throw"Bad ColumnRowUIDMapArchive";var F=os(C[I].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var D=0;D<=r.e.c;++D){var A=[];A[1]=A[2]=[{type:0,data:Ln(D+420690)}],F[1].push({type:2,data:Fs(A)}),F[2].push({type:0,data:Ln(D)}),F[3].push({type:0,data:Ln(D)})}F[4]=[],F[5]=[],F[6]=[];for(var _=0;_<=r.e.r;++_)A=[],A[1]=A[2]=[{type:0,data:Ln(_+726270)}],F[4].push({type:2,data:Fs(A)}),F[5].push({type:0,data:Ln(_)}),F[6].push({type:0,data:Ln(_)});C[I].messages[0].data=Fs(F)}N.content=rh(nh(C)),N.size=N.content.length,delete S[46];var k=os(S[4][0].data);{k[7][0].data=Ln(r.e.r+1);var O=os(k[1][0].data),P=Pc(O[2][0].data);N=Xn.find(c,o[P].location),C=Yi(Qi(N.content));{if(C[0].id!=P)throw"Bad HeaderStorageBucket";var W=os(C[0].messages[0].data);for(_=0;_<a.length;++_){var K=os(W[2][0].data);K[1][0].data=Ln(_),K[4][0].data=Ln(a[_].length),W[2][_]={type:W[2][0].type,data:Fs(K)}}C[0].messages[0].data=Fs(W)}N.content=rh(nh(C)),N.size=N.content.length;var q=Pc(k[2][0].data);N=Xn.find(c,o[q].location),C=Yi(Qi(N.content));{if(C[0].id!=q)throw"Bad HeaderStorageBucket";for(W=os(C[0].messages[0].data),D=0;D<=r.e.c;++D)K=os(W[2][0].data),K[1][0].data=Ln(D),K[4][0].data=Ln(r.e.r+1),W[2][D]={type:W[2][0].type,data:Fs(K)};C[0].messages[0].data=Fs(W)}N.content=rh(nh(C)),N.size=N.content.length;var V=Pc(k[4][0].data);(function(){for(var z=Xn.find(c,o[V].location),G=Yi(Qi(z.content)),U,se=0;se<G.length;++se){var pe=G[se];pe.id==V&&(U=pe)}var me=os(U.messages[0].data);{me[3]=[];var be=[];i.forEach(function(Le,rt){be[1]=[{type:0,data:Ln(rt)}],be[2]=[{type:0,data:Ln(1)}],be[3]=[{type:2,data:Yhe(Le)}],me[3].push({type:2,data:Fs(be)})})}U.messages[0].data=Fs(me);var ge=nh(G),ke=rh(ge);z.content=ke,z.size=z.content.length})();var X=os(k[3][0].data);{var Q=X[1][0];delete X[2];var Y=os(Q.data);{var j=Pc(Y[2][0].data);(function(){for(var z=Xn.find(c,o[j].location),G=Yi(Qi(z.content)),U,se=0;se<G.length;++se){var pe=G[se];pe.id==j&&(U=pe)}var me=os(U.messages[0].data);{delete me[6],delete X[7];var be=new Uint8Array(me[5][0].data);me[5]=[];for(var ge=0,ke=0;ke<=r.e.r;++ke){var Le=os(be);ge+=epe(Le,a[ke],i),Le[1][0].data=Ln(ke),me[5].push({data:Fs(Le),type:2})}me[1]=[{type:0,data:Ln(r.e.c+1)}],me[2]=[{type:0,data:Ln(r.e.r+1)}],me[3]=[{type:0,data:Ln(ge)}],me[4]=[{type:0,data:Ln(r.e.r+1)}]}U.messages[0].data=Fs(me);var rt=nh(G),Be=rh(rt);z.content=Be,z.size=z.content.length})()}Q.data=Fs(Y)}k[3][0].data=Fs(X)}S[4][0].data=Fs(k)}g.messages[0].data=Fs(S);var J=nh(p),M=rh(J);return h.content=M,h.size=h.content.length,c}function npe(n){return function(t){for(var r=0;r!=n.length;++r){var s=n[r];t[s[0]]===void 0&&(t[s[0]]=s[1]),s[2]==="n"&&(t[s[0]]=Number(t[s[0]]))}}}function Y_(n){npe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function rpe(n,e){return e.bookType=="ods"?H5(n,e):e.bookType=="numbers"?tpe(n,e):e.bookType=="xlsb"?spe(n,e):ape(n,e)}function spe(n,e){uh=1024,n&&!n.SSF&&(n.SSF=La(_r)),n&&n.SSF&&(jw(),Bw(n.SSF),e.revssf=zw(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,H0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=k5.indexOf(e.bookType)>-1,s=n5();Y_(e=e||{});var a=D_(),i="",o=0;if(e.cellXfs=[],yu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),i="docProps/core.xml",rn(a,i,i5(n.Props,e)),s.coreprops.push(i),Pn(e.rels,2,i,Sn.CORE_PROPS),i="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],c=0;c<n.SheetNames.length;++c)(n.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(n.SheetNames[c]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,rn(a,i,l5(n.Props)),s.extprops.push(i),Pn(e.rels,3,i,Sn.EXT_PROPS),n.Custprops!==n.Props&&Vs(n.Custprops||{}).length>0&&(i="docProps/custom.xml",rn(a,i,c5(n.Custprops)),s.custprops.push(i),Pn(e.rels,4,i,Sn.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},h=n.Sheets[n.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+t,rn(a,i,ohe(o-1,i,e,n,d)),s.sheets.push(i),Pn(e.wbrels,-1,"worksheets/sheet"+o+"."+t,Sn.WS[0])}if(h){var g=h["!comments"],x=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+t,rn(a,y,uhe(g,y)),s.comments.push(y),Pn(d,-1,"../comments"+o+"."+t,Sn.CMNT),x=!0),h["!legacy"]&&x&&rn(a,"xl/drawings/vmlDrawing"+o+".vml",C5(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&rn(a,s5(i),ph(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+t,rn(a,i,che(e.Strings,i,e)),s.strs.push(i),Pn(e.wbrels,-1,"sharedStrings."+t,Sn.SST)),i="xl/workbook."+t,rn(a,i,ihe(n,i)),s.workbooks.push(i),Pn(e.rels,1,i,Sn.WB),i="xl/theme/theme1.xml",rn(a,i,T5(n.Themes,e)),s.themes.push(i),Pn(e.wbrels,-1,"theme/theme1.xml",Sn.THEME),i="xl/styles."+t,rn(a,i,lhe(n,i,e)),s.styles.push(i),Pn(e.wbrels,-1,"styles."+t,Sn.STY),n.vbaraw&&r&&(i="xl/vbaProject.bin",rn(a,i,n.vbaraw),s.vba.push(i),Pn(e.wbrels,-1,"vbaProject.bin",Sn.VBA)),i="xl/metadata."+t,rn(a,i,dhe(i)),s.metadata.push(i),Pn(e.wbrels,-1,"metadata."+t,Sn.XLMETA),rn(a,"[Content_Types].xml",r5(s,e)),rn(a,"_rels/.rels",ph(e.rels)),rn(a,"xl/_rels/workbook."+t+".rels",ph(e.wbrels)),delete e.revssf,delete e.ssf,a}function ape(n,e){uh=1024,n&&!n.SSF&&(n.SSF=La(_r)),n&&n.SSF&&(jw(),Bw(n.SSF),e.revssf=zw(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,H0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=k5.indexOf(e.bookType)>-1,s=n5();Y_(e=e||{});var a=D_(),i="",o=0;if(e.cellXfs=[],yu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),i="docProps/core.xml",rn(a,i,i5(n.Props,e)),s.coreprops.push(i),Pn(e.rels,2,i,Sn.CORE_PROPS),i="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],c=0;c<n.SheetNames.length;++c)(n.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(n.SheetNames[c]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,rn(a,i,l5(n.Props)),s.extprops.push(i),Pn(e.rels,3,i,Sn.EXT_PROPS),n.Custprops!==n.Props&&Vs(n.Custprops||{}).length>0&&(i="docProps/custom.xml",rn(a,i,c5(n.Custprops)),s.custprops.push(i),Pn(e.rels,4,i,Sn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var h={"!id":{}},p=n.Sheets[n.SheetNames[o-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+t,rn(a,i,L5(o-1,e,n,h)),s.sheets.push(i),Pn(e.wbrels,-1,"worksheets/sheet"+o+"."+t,Sn.WS[0])}if(p){var x=p["!comments"],y=!1,b="";if(x&&x.length>0){var S=!1;x.forEach(function(T){T[1].forEach(function(N){N.T==!0&&(S=!0)})}),S&&(b="xl/threadedComments/threadedComment"+o+"."+t,rn(a,b,Lce(x,d,e)),s.threadedcomments.push(b),Pn(h,-1,"../threadedComments/threadedComment"+o+"."+t,Sn.TCMNT)),b="xl/comments"+o+"."+t,rn(a,b,E5(x)),s.comments.push(b),Pn(h,-1,"../comments"+o+"."+t,Sn.CMNT),y=!0}p["!legacy"]&&y&&rn(a,"xl/drawings/vmlDrawing"+o+".vml",C5(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&rn(a,s5(i),ph(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+t,rn(a,i,x5(e.Strings,e)),s.strs.push(i),Pn(e.wbrels,-1,"sharedStrings."+t,Sn.SST)),i="xl/workbook."+t,rn(a,i,B5(n)),s.workbooks.push(i),Pn(e.rels,1,i,Sn.WB),i="xl/theme/theme1.xml",rn(a,i,T5(n.Themes,e)),s.themes.push(i),Pn(e.wbrels,-1,"theme/theme1.xml",Sn.THEME),i="xl/styles."+t,rn(a,i,w5(n,e)),s.styles.push(i),Pn(e.wbrels,-1,"styles."+t,Sn.STY),n.vbaraw&&r&&(i="xl/vbaProject.bin",rn(a,i,n.vbaraw),s.vba.push(i),Pn(e.wbrels,-1,"vbaProject.bin",Sn.VBA)),i="xl/metadata."+t,rn(a,i,N5()),s.metadata.push(i),Pn(e.wbrels,-1,"metadata."+t,Sn.XLMETA),d.length>1&&(i="xl/persons/person.xml",rn(a,i,Mce(d)),s.people.push(i),Pn(e.wbrels,-1,"persons/person.xml",Sn.PEOPLE)),rn(a,"[Content_Types].xml",r5(s,e)),rn(a,"_rels/.rels",ph(e.rels)),rn(a,"xl/_rels/workbook."+t+".rels",ph(e.wbrels)),delete e.revssf,delete e.ssf,a}function ipe(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Hl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function G5(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Gg(e.file,Xn.write(n,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Xn.write(n,e)}function ope(n,e){var t=La(e||{}),r=rpe(n,t);return lpe(r,t)}function lpe(n,e){var t={},r=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var s=n.FullPaths?Xn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Pw(s))}return e.password&&typeof encrypt_agile<"u"?G5(encrypt_agile(s,e.password),e):e.type==="file"?Gg(e.file,s):e.type=="string"?z0(s):s}function cpe(n,e){var t=e||{},r=Che(n,t);return G5(r,t)}function $o(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return rg(ag(r));case"binary":return ag(r);case"string":return n;case"file":return Gg(e.file,r,"utf8");case"buffer":return En?ec(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):$o(r,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function upe(n,e){switch(e.type){case"base64":return rg(n);case"binary":return n;case"string":return n;case"file":return Gg(e.file,n,"binary");case"buffer":return En?ec(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function fb(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?rg(t):e.type=="string"?z0(t):t;case"file":return Gg(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function Q_(n,e){Pie(),Xfe(n);var t=La(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=Q_(n,t);return t.type="array",Pw(r)}var s=0;if(t.sheet&&(typeof t.sheet=="number"?s=t.sheet:s=n.SheetNames.indexOf(t.sheet),!n.SheetNames[s]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return $o(The(n,t),t);case"slk":case"sylk":return $o(Gle.from_sheet(n.Sheets[n.SheetNames[s]],t),t);case"htm":case"html":return $o(U5(n.Sheets[n.SheetNames[s]],t),t);case"txt":return upe(K5(n.Sheets[n.SheetNames[s]],t),t);case"csv":return $o(Z_(n.Sheets[n.SheetNames[s]],t),t,"\uFEFF");case"dif":return $o(qle.from_sheet(n.Sheets[n.SheetNames[s]],t),t);case"dbf":return fb(Hle.from_sheet(n.Sheets[n.SheetNames[s]],t),t);case"prn":return $o(Kle.from_sheet(n.Sheets[n.SheetNames[s]],t),t);case"rtf":return $o(tce.from_sheet(n.Sheets[n.SheetNames[s]],t),t);case"eth":return $o(g5.from_sheet(n.Sheets[n.SheetNames[s]],t),t);case"fods":return $o(H5(n,t),t);case"wk1":return fb(lL.sheet_to_wk1(n.Sheets[n.SheetNames[s]],t),t);case"wk3":return fb(lL.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),fb(z5(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),cpe(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ope(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function dpe(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function q5(n,e,t){var r={};return r.type="file",r.file=e,dpe(r),Q_(n,r)}function fpe(n,e,t,r,s,a,i,o){var l=Us(t),c=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:t,enumerable:!1})}catch{p.__rowNum__=t}else p.__rowNum__=t;if(!i||n[t])for(var g=e.s.c;g<=e.e.c;++g){var x=i?n[t][g]:n[r[g]+l];if(x===void 0||x.t===void 0){if(c===void 0)continue;a[g]!=null&&(p[a[g]]=c);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[g]!=null){if(y==null)if(x.t=="e"&&y===null)p[a[g]]=null;else if(c!==void 0)p[a[g]]=c;else if(d&&y===null)p[a[g]]=null;else continue;else p[a[g]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:Gl(x,y,o);y!=null&&(h=!1)}}return{row:p,isempty:h}}function Av(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:n["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof d){case"string":l=ur(d);break;case"number":l=ur(n["!ref"]),l.s.r=d;break;default:l=d}r>0&&(s=0);var h=Us(l.s.r),p=[],g=[],x=0,y=0,b=Array.isArray(n),S=l.s.r,T=0,N={};b&&!n[S]&&(n[S]=[]);var C=c.skipHidden&&n["!cols"]||[],I=c.skipHidden&&n["!rows"]||[];for(T=l.s.c;T<=l.e.c;++T)if(!(C[T]||{}).hidden)switch(p[T]=ta(T),t=b?n[S][T]:n[p[T]+h],r){case 1:a[T]=T-l.s.c;break;case 2:a[T]=p[T];break;case 3:a[T]=c.header[T-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=i=Gl(t,null,c),y=N[i]||0,!y)N[i]=1;else{do o=i+"_"+y++;while(N[o]);N[i]=y,N[o]=1}a[T]=o}for(S=l.s.r+s;S<=l.e.r;++S)if(!(I[S]||{}).hidden){var F=fpe(n,l,S,p,r,a,b,c);(F.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[x++]=F.row)}return g.length=x,g}var gL=/"/g;function hpe(n,e,t,r,s,a,i,o){for(var l=!0,c=[],d="",h=Us(t),p=e.s.c;p<=e.e.c;++p)if(r[p]){var g=o.dense?(n[t]||[])[p]:n[r[p]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:Gl(g,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(gL,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(gL,'""')+'"')):d="";c.push(d)}return o.blankrows===!1&&l?null:c.join(i)}function Z_(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var s=ur(n["!ref"]),a=r.FS!==void 0?r.FS:",",i=a.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];r.dense=Array.isArray(n);for(var p=r.skipHidden&&n["!cols"]||[],g=r.skipHidden&&n["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(p[x]||{}).hidden||(h[x]=ta(x));for(var y=0,b=s.s.r;b<=s.e.r;++b)(g[b]||{}).hidden||(d=hpe(n,s,b,h,i,l,a,r),d!=null&&(r.strip&&(d=d.replace(c,"")),(d||r.blankrows!==!1)&&t.push((y++?o:"")+d)));return delete r.dense,t.join("")}function K5(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Z_(n,e);return t}function ppe(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var s=ur(n["!ref"]),a="",i=[],o,l=[],c=Array.isArray(n);for(o=s.s.c;o<=s.e.c;++o)i[o]=ta(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Us(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,t=c?(n[d]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function X5(n,e,t){var r=t||{},s=+!r.skipHeader,a=n||{},i=0,o=0;if(a&&r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var l=typeof r.origin=="string"?Ts(r.origin):r.origin;i=l.r,o=l.c}var c,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=ur(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var p=r.header||[],g=0;e.forEach(function(y,b){Vs(y).forEach(function(S){(g=p.indexOf(S))==-1&&(p[g=p.length]=S);var T=y[S],N="z",C="",I=zn({c:o+g,r:i+b+s});c=lg(a,I),T&&typeof T=="object"&&!(T instanceof Date)?a[I]=T:(typeof T=="number"?N="n":typeof T=="boolean"?N="b":typeof T=="string"?N="s":T instanceof Date?(N="d",r.cellDates||(N="n",T=Fa(T)),C=r.dateNF||_r[14]):T===null&&r.nullError&&(N="e",T=0),c?(c.t=N,c.v=T,delete c.w,delete c.R,C&&(c.z=C)):a[I]=c={t:N,v:T},C&&(c.z=C))})}),d.e.c=Math.max(d.e.c,o+p.length-1);var x=Us(i);if(s)for(g=0;g<p.length;++g)a[ta(g+o)+x]={t:"s",v:p[g]};return a["!ref"]=Zr(d),a}function mpe(n,e){return X5(null,n,e)}function lg(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=Ts(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?lg(n,zn(e)):lg(n,zn({r:e,c:t||0}))}function gpe(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function xpe(){return{SheetNames:[],Sheets:{}}}function ype(n,e,t,r){var s=1;if(!t)for(;s<=65535&&n.SheetNames.indexOf(t="Sheet"+s)!=-1;++s,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var a=t.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||t;for(++s;s<=65535&&n.SheetNames.indexOf(t=i+s)!=-1;++s);}if(P5(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function bpe(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=gpe(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function vpe(n,e){return n.z=e,n}function Y5(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function wpe(n,e,t){return Y5(n,"#"+e,t)}function Spe(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Tpe(n,e,t,r){for(var s=typeof e!="string"?e:ur(e),a=typeof e=="string"?e:Zr(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=lg(n,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=t,r&&(l.D=!0))}return n}var ls={encode_col:ta,encode_row:Us,encode_cell:zn,encode_range:Zr,decode_col:j_,decode_row:B_,split_cell:Poe,decode_cell:Ts,decode_range:li,format_cell:Gl,sheet_add_aoa:Y6,sheet_add_json:X5,sheet_add_dom:V5,aoa_to_sheet:Xh,json_to_sheet:mpe,table_to_sheet:W5,table_to_book:qhe,sheet_to_csv:Z_,sheet_to_txt:K5,sheet_to_json:Av,sheet_to_html:U5,sheet_to_formulae:ppe,sheet_to_row_object_array:Av,sheet_get_cell:lg,book_new:xpe,book_append_sheet:ype,book_set_sheet_visibility:bpe,cell_set_number_format:vpe,cell_set_hyperlink:Y5,cell_set_internal_link:wpe,cell_add_comment:Spe,sheet_set_array_formula:Tpe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Q5=24,xh="https://172.20.0.49:3000",Gw=(n,e)=>{if(!n||n.length===0){Dt.error("  .");return}Dt.success("   ...");const t=[""," "," "," "," "," "," "," "],r={fill:{fgColor:{rgb:"FFFFFF00"}},font:{bold:!0},alignment:{horizontal:"center",vertical:"center"}},s=n.map(D=>[D.,D[" "],D[" "],D[" "],D[" "],D[" "],D[" "],D[" "]]),a=[t,...s],i=n.reduce((D,A)=>D+A[" "],0),o=n.reduce((D,A)=>D+A[" "],0),l=n.reduce((D,A)=>D+A[" "],0),c=n.reduce((D,A)=>D+A[" "],0),d=n.reduce((D,A)=>D+A[" "],0),h=l-o,p=d-c,g=h>=0?":":":",x=p>=0?":":":",y=Math.abs(h),b=Math.abs(p);a.push([]),a.push(["","",i,'": ',o,l,c,d,'": ']),a.push([]),a.push(["","","","",y,g,b,x]);const S=ls.aoa_to_sheet(a);t.forEach((D,A)=>{const _=ls.encode_cell({r:0,c:A});S[_]&&(S[_].s=r)});const T=n.length+2,N=n.length+4;S[ls.encode_cell({r:T,c:1})].s=r,S[ls.encode_cell({r:N,c:4})].s=r,S[ls.encode_cell({r:N,c:6})].s=r,S["!cols"]=[{wch:12},{wch:15},{wch:12},{wch:50},{wch:15},{wch:15},{wch:12},{wch:12}],S["!props"]={rtl:!0};const C=ls.book_new();ls.book_append_sheet(C,S,"Report");const I=Q_(C,{bookType:"xlsx",type:"array"}),F=new Blob([I],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});h6.saveAs(F,`${e}_${new Date().toISOString().slice(0,10)}.xlsx`)},Npe=({isOpen:n,onClose:e,onGenerate:t})=>{const r=new Date().toISOString().slice(0,10),[s,a]=L.useState(r),[i,o]=L.useState(r),l=()=>{if(!s||!i){Dt.error("Please select both start and end dates.");return}if(new Date(s)>new Date(i)){Dt.error("Start date cannot be after end date.");return}t(s,i),e()};return n?w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:e,children:w.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",onClick:c=>c.stopPropagation(),children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[w.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[w.jsx(zg,{size:20})," Generate Custom Report"]}),w.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-slate-100",children:w.jsx(Zc,{size:20})})]}),w.jsxs("div",{className:"p-6 space-y-4",children:[w.jsx("p",{className:"text-sm text-slate-600",children:'Select a date range to generate a report for assets "On Mission" and their associated cooler movements.'}),w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-semibold text-slate-600 block mb-1",children:"From Date"}),w.jsx("input",{type:"date",value:s,onChange:c=>a(c.target.value),className:"w-full px-3 py-1.5 border border-slate-300 text-sm rounded-md"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-semibold text-slate-600 block mb-1",children:"To Date"}),w.jsx("input",{type:"date",value:i,onChange:c=>o(c.target.value),className:"w-full px-3 py-1.5 border border-slate-300 text-sm rounded-md"})]})]}),w.jsxs("div",{className:"flex justify-end items-center p-4 bg-slate-50 border-t rounded-b-xl gap-3",children:[w.jsx("button",{onClick:e,className:"px-4 py-2 bg-white border border-slate-300 rounded-md font-semibold shadow-sm hover:bg-slate-50",children:"Cancel"}),w.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md font-semibold shadow hover:bg-green-700",children:[w.jsx(Gre,{size:16})," Generate"]})]})]})}):null},Cpe=({onClose:n,onAssetUpdate:e})=>{var I,F;const[t,r]=L.useState(""),[s,a]=L.useState(!1),[i,o]=L.useState(null),[l,c]=L.useState(""),[d,h]=L.useState({barcode:"",status:"",driverName:"",vehicleNumber:"",notes:""}),[p,g]=L.useState(""),[x,y]=L.useState(""),b=async D=>{var A,_;if(D.preventDefault(),!!t.trim()){a(!0),o(null);try{const k=await fetch(`${xh}/api/assets/${t.trim()}`);if(k.status===404){Dt.error("Asset not found."),a(!1);return}if(!k.ok)throw new Error("Search failed");const O=await k.json();o(O),c(O.barcode),h({barcode:O.barcode,status:O.status,driverName:((A=O.currentLocation)==null?void 0:A.actualDriverName)||"",vehicleNumber:((_=O.currentLocation)==null?void 0:_.vehicleNumber)||"",notes:""})}catch(k){Dt.error("Failed to search for asset.",k)}finally{a(!1)}}},S=async()=>{if(!i)return;const D={newBarcode:d.barcode,status:d.status,notes:d.notes,driverName:d.driverName,vehicleNumber:d.vehicleNumber};a(!0);try{const A=await fetch(`${xh}/api/assets/admin/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!A.ok){const _=await A.json();throw new Error(_.message||"Update failed")}Dt.success("Asset updated successfully!"),e(),n()}catch(A){Dt.error(`Error: ${A.message}`)}finally{a(!1)}},T=async()=>{if(!(!i||!window.confirm(`Are you sure you want to PERMANENTLY DELETE asset ${l}? This action cannot be undone.`))){a(!0);try{if(!(await fetch(`${xh}/api/assets/${l}`,{method:"DELETE"})).ok)throw new Error("Delete failed");Dt.success(`Asset ${l} deleted.`),e(),n()}catch(D){Dt.error(`Error deleting asset: ${D.message}`)}finally{a(!1)}}},N=()=>{o(null),r(""),c(""),g(""),y("")},C=L.useMemo(()=>i!=null&&i.history?!p&&!x?i.history.slice(0,5):i.history.filter(D=>{const A=new Date(D.timestamp),_=p?new Date(p):null,k=x?new Date(x):null;return _&&_.setHours(0,0,0,0),k&&k.setHours(23,59,59,999),(!_||A>=_)&&(!k||A<=k)}):[],[i==null?void 0:i.history,p,x]);return w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:n,children:w.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[w.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Manage Asset"}),w.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-slate-100",children:w.jsx(Zc,{size:20})})]}),w.jsxs("div",{className:"p-6 overflow-y-auto",children:[w.jsxs("form",{onSubmit:b,className:"flex gap-2 mb-6",children:[w.jsx("input",{type:"text",value:t,onChange:D=>r(D.target.value),placeholder:"Enter asset barcode...",className:"flex-grow px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"}),w.jsxs("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md font-semibold shadow hover:bg-blue-700 disabled:bg-blue-300",children:[s&&!i?w.jsx(P0,{className:"animate-spin",size:16}):w.jsx(I_,{size:16})," ","Search"]})]}),s&&w.jsx("div",{className:"text-center p-8",children:w.jsx(P0,{className:"animate-spin inline-block w-8 h-8 text-blue-600"})}),!s&&!i&&w.jsxs("div",{className:"text-center py-12 text-slate-500",children:[w.jsx(Nd,{size:48,className:"mx-auto mb-4 text-slate-400"}),w.jsx("p",{children:"Search for an asset to view its details and manage it."})]}),i&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-slate-700 border-b pb-2 mb-3",children:"Asset Details"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Barcode:"})," ",w.jsx("span",{className:"font-mono",children:i.barcode})]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Status:"})," ",w.jsx("span",{className:"font-semibold",children:i.status})]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Created:"})," ",new Date(i.createdAt).toLocaleString("en-GB")]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Last Update:"})," ",new Date(i.updatedAt).toLocaleString("en-GB")]}),((I=i.currentLocation)==null?void 0:I.actualDriverName)&&w.jsxs("p",{children:[w.jsx("strong",{children:"Driver:"})," ",i.currentLocation.actualDriverName]}),((F=i.currentLocation)==null?void 0:F.vehicleNumber)&&w.jsxs("p",{children:[w.jsx("strong",{children:"Vehicle:"})," ",i.currentLocation.vehicleNumber]})]}),i.correctionLogs&&i.correctionLogs.length>0&&w.jsxs("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[w.jsxs("h4",{className:"font-semibold text-amber-800 flex items-center gap-2 mb-2",children:[w.jsx(Ug,{size:16})," Correction & Replacement History"]}),w.jsx("ul",{className:"text-sm space-y-2 text-slate-700",children:i.correctionLogs.map(D=>{const A=D.newBarcode===i.barcode;return w.jsxs("li",{className:"pl-2 border-l-2 border-amber-300",children:[w.jsxs("div",{children:[new Date(D.createdAt).toLocaleString("en-GB")," -"," ",w.jsx("strong",{children:D.reason})]}),w.jsxs("div",{className:"text-slate-600 text-xs",children:[A&&D.oldBarcode&&w.jsxs("span",{children:["This box replaced barcode:"," ",w.jsx("span",{className:"font-mono",children:D.oldBarcode})]}),!A&&w.jsxs("span",{children:["This box was replaced by:"," ",w.jsx("span",{className:"font-mono",children:D.newBarcode})]})]}),D.notes&&w.jsxs("div",{className:"text-xs text-slate-500 italic",children:["Notes: ",D.notes]}),w.jsxs("div",{className:"text-xs text-slate-500",children:[w.jsx(Vl,{size:12,className:"inline mr-1"})," By: ",D.changedBy]})]},D._id)})})]}),i.history&&i.history.length>0&&w.jsxs("div",{className:"mt-4",children:[w.jsx("h4",{className:"font-semibold mb-2",children:"Recent Activity"}),w.jsxs("div",{className:"p-3 bg-slate-50 border rounded-lg mb-3",children:[w.jsxs("label",{className:"text-sm font-semibold text-slate-600 flex items-center gap-2",children:[w.jsx(Tse,{size:14})," Filter by Date"]}),w.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[w.jsx("input",{type:"date",value:p,onChange:D=>g(D.target.value),className:"w-full px-2 py-1 border border-slate-300 text-sm rounded-md"}),w.jsx("span",{children:"to"}),w.jsx("input",{type:"date",value:x,onChange:D=>y(D.target.value),className:"w-full px-2 py-1 border border-slate-300 text-sm rounded-md"}),w.jsx("button",{onClick:()=>{g(""),y("")},className:"p-1.5 hover:bg-slate-200 rounded-full",children:w.jsx(Fw,{size:16,className:"text-slate-500"})})]})]}),w.jsx("ul",{className:"text-sm space-y-2 text-slate-700",children:C.map((D,A)=>w.jsxs("li",{className:"pl-2 border-l-2 border-slate-200",children:[w.jsxs("div",{children:[new Date(D.timestamp).toLocaleString("en-GB")," -"," ",w.jsx("strong",{children:D.status||D.eventType})]}),w.jsxs("div",{className:"text-slate-500 text-xs",children:[w.jsx(Vl,{size:12,className:"inline mr-1"})," ",D.driverName||"N/A"," |"," ",w.jsx(qh,{size:12,className:"inline ml-2 mr-1"})," ",D.vehicleNumber||"N/A"]})]},`${D.timestamp}-${A}`))}),w.jsx("div",{className:"text-xs text-slate-500 mt-2 text-center",children:!p&&!x?`Showing latest ${C.length} of ${i.history.length} events.`:`Showing ${C.length} events in selected range.`})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-slate-700 border-b pb-2 mb-3",children:"Update Asset"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Barcode"}),w.jsx("input",{type:"text",value:d.barcode,onChange:D=>h({...d,barcode:D.target.value}),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Status"}),w.jsxs("select",{value:d.status,onChange:D=>h({...d,status:D.target.value}),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md bg-white",children:[w.jsx("option",{value:"In Warehouse",children:"In Warehouse"}),w.jsx("option",{value:"On Mission",children:"On Mission"}),w.jsx("option",{value:"Broken",children:"Broken"}),w.jsx("option",{value:"Lost",children:"Lost"})]})]}),d.status==="On Mission"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Driver Name"}),w.jsx("input",{type:"text",value:d.driverName,onChange:D=>h({...d,driverName:D.target.value}),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Vehicle Number"}),w.jsx("input",{type:"text",value:d.vehicleNumber,onChange:D=>h({...d,vehicleNumber:D.target.value}),className:"w-full px-3 py-1.5 border border-slate-300 rounded-md"})]})]}),w.jsxs("div",{className:"md:col-span-2",children:[w.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Notes (Optional)"}),w.jsx("textarea",{value:d.notes,onChange:D=>h({...d,notes:D.target.value}),rows:"2",className:"w-full px-3 py-1.5 border border-slate-300 rounded-md"})]})]})]})]})]}),i&&w.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 border-t rounded-b-xl",children:[w.jsx("div",{children:w.jsxs("button",{onClick:T,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md font-semibold shadow hover:bg-red-700 disabled:bg-red-300",children:[w.jsx(hv,{size:16})," Delete Asset"]})}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:N,type:"button",className:"px-4 py-2 bg-white border border-slate-300 rounded-md font-semibold shadow-sm hover:bg-slate-50",children:"Clear Selection"}),w.jsxs("button",{onClick:S,disabled:s,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md font-semibold shadow hover:bg-green-700 disabled:bg-green-300",children:[s?w.jsx(P0,{className:"animate-spin",size:16}):w.jsx(Lw,{size:16})," ","Save Changes"]})]})]})]})})},Epe=({history:n})=>w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[w.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[w.jsx(ZB,{size:20})," Asset Event Log"]}),n.length>0?w.jsx("ul",{className:"space-y-3",children:n.map(e=>w.jsxs("li",{className:"p-3 bg-gray-50 rounded-md border flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsxs("p",{className:"font-semibold text-gray-800",children:[w.jsx(Nd,{size:14,className:"inline mr-1"})," ",e.barcode]}),w.jsxs("p",{className:"text-sm text-gray-600",children:[w.jsx(Vl,{size:14,className:"inline mr-1"})," ",e.driverName||"N/A"," |"," ",w.jsx(qh,{size:14,className:"inline mr-1"})," ",e.vehicleNumber||"N/A"]}),w.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString("he-IL")})]}),w.jsx("div",{className:"text-sm font-bold px-2 py-1 rounded-full bg-gray-100 text-gray-800",children:e.eventType})]},e._id))}):w.jsx("p",{className:"text-center text-slate-500 py-8",children:"No recent activity found."})]}),kpe=({movements:n})=>{const[e,t]=L.useState(""),[r,s]=L.useState(""),a=L.useMemo(()=>{const o=n.filter(c=>{const d=new Date(c.createdAt),h=e?new Date(e):null,p=r?new Date(r):null;return h&&h.setHours(0,0,0,0),p&&p.setHours(23,59,59,999),(!h||d>=h)&&(!p||d<=p)}),l={};return o.forEach(c=>{const d=new Date(c.createdAt).toISOString().split("T")[0],h=`${d}|${c.driverName}`;l[h]||(l[h]={date:d,driverName:c.driverName,largeCoolersOut:0,largeCoolersIn:0,smallCoolersOut:0,smallCoolersIn:0}),c.transactionType==="outgoing"?(l[h].largeCoolersOut+=c.largeCoolers,l[h].smallCoolersOut+=c.smallCoolers):(l[h].largeCoolersIn+=c.largeCoolers,l[h].smallCoolersIn+=c.smallCoolers)}),Object.values(l).sort((c,d)=>new Date(d.date)-new Date(c.date)||c.driverName.localeCompare(d.driverName))},[n,e,r]),i=()=>{const o=a.map(l=>({Date:l.date,"Driver Name":l.driverName,"Large Coolers OUT":l.largeCoolersOut,"Large Coolers IN":l.largeCoolersIn,"Large Coolers Balance":l.largeCoolersIn-l.largeCoolersOut,"Small Coolers OUT":l.smallCoolersOut,"Small Coolers IN":l.smallCoolersIn,"Small Coolers Balance":l.smallCoolersIn-l.smallCoolersOut}));Gw(o,"quantitative_report")};return w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[w.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Coolers & Ice Report"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{type:"date",value:e,onChange:o=>t(o.target.value),className:"px-3 py-1.5 border border-slate-300 text-sm rounded-md shadow-sm"}),w.jsx("span",{children:"to"}),w.jsx("input",{type:"date",value:r,onChange:o=>s(o.target.value),className:"px-3 py-1.5 border border-slate-300 text-sm rounded-md shadow-sm"}),w.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-slate-300 text-sm font-semibold rounded-md shadow-sm hover:bg-slate-50",children:[w.jsx(zg,{className:"w-4 h-4 text-green-600"})," Export"]})]})]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b-2 border-slate-200 bg-slate-50",children:[w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Date"}),w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Driver Name"}),w.jsx("th",{className:"p-2 text-center font-semibold text-slate-600",children:"Large Coolers (In/Out)"}),w.jsx("th",{className:"p-2 text-center font-semibold text-slate-600",children:"Small Coolers (In/Out)"}),w.jsx("th",{className:"p-2 text-center font-semibold text-slate-600",children:"Balance (Large/Small)"})]})}),w.jsx("tbody",{children:a.length===0?w.jsx("tr",{children:w.jsx("td",{colSpan:"5",className:"text-center p-8 text-slate-500",children:"No movements found."})}):a.map(o=>{const l=o.largeCoolersIn-o.largeCoolersOut,c=o.smallCoolersIn-o.smallCoolersOut;return w.jsxs("tr",{className:"border-b border-slate-100",children:[w.jsx("td",{className:"p-2 font-semibold",children:o.date}),w.jsx("td",{className:"p-2",children:o.driverName}),w.jsxs("td",{className:"p-2 text-center",children:[w.jsxs("span",{className:"text-green-600 font-semibold",children:["+",o.largeCoolersIn]})," /"," ",w.jsxs("span",{className:"text-red-600 font-semibold",children:["-",o.largeCoolersOut]})]}),w.jsxs("td",{className:"p-2 text-center",children:[w.jsxs("span",{className:"text-green-600 font-semibold",children:["+",o.smallCoolersIn]})," /"," ",w.jsxs("span",{className:"text-red-600 font-semibold",children:["-",o.smallCoolersOut]})]}),w.jsxs("td",{className:"p-2 text-center font-bold",children:[w.jsx("span",{className:l<0?"text-red-600":"text-slate-700",children:l})," ","/"," ",w.jsx("span",{className:c<0?"text-red-600":"text-slate-700",children:c})]})]},`${o.date}-${o.driverName}`)})})]})})]})},_pe=({assets:n})=>{const e=t=>((new Date-new Date(t))/864e5).toFixed(1);return w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border-2 border-red-500",children:[w.jsxs("h2",{className:"text-xl font-bold text-red-600 mb-4 flex items-center gap-2",children:[w.jsx(Ug,{})," Overdue Assets Alert (",n.length,")"]}),w.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["The following assets have been 'On Mission' for more than ",Q5," hours."]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-red-50",children:w.jsxs("tr",{className:"border-b-2 border-red-200",children:[w.jsx("th",{className:"p-2 text-left font-semibold text-red-700",children:"Barcode"}),w.jsx("th",{className:"p-2 text-left font-semibold text-red-700",children:"Driver Name"}),w.jsx("th",{className:"p-2 text-left font-semibold text-red-700",children:"Date Dispatched"}),w.jsx("th",{className:"p-2 text-center font-semibold text-red-700",children:"Days Out"})]})}),w.jsx("tbody",{children:n.length===0?w.jsx("tr",{children:w.jsx("td",{colSpan:"4",className:"text-center p-8 text-slate-500",children:"No overdue assets. Great job!"})}):n.map(t=>{var r;return w.jsxs("tr",{className:"border-b border-red-100",children:[w.jsx("td",{className:"p-2 font-mono",children:t.barcode}),w.jsx("td",{className:"p-2",children:((r=t.currentLocation)==null?void 0:r.actualDriverName)||"N/A"}),w.jsx("td",{className:"p-2",children:new Date(t.updatedAt).toLocaleDateString("en-GB")}),w.jsx("td",{className:"p-2 text-center font-bold text-red-600",children:e(t.updatedAt)})]},t.barcode)})})]})})]})},Ipe=({groupedAssets:n})=>{var s;const[e,t]=L.useState(((s=n[0])==null?void 0:s.date)||null),r=a=>t(i=>i===a?null:a);return n.length===0?w.jsxs("div",{className:"text-center p-12 bg-white rounded-xl shadow-sm border",children:[w.jsx(Nd,{size:40,className:"mx-auto text-slate-400 mb-4"}),w.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"All assets are in the warehouse."}),w.jsx("p",{className:"text-slate-500",children:"No assets are currently on mission."})]}):w.jsx("div",{className:"space-y-4",children:n.map(({date:a,missions:i,totalAssets:o})=>w.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[w.jsxs("button",{onClick:()=>r(a),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("h3",{className:"font-bold text-lg text-slate-800",children:new Date(a).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),w.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-bold px-3 py-1 rounded-full",children:[o," Assets"]})]}),e===a?w.jsx(Yre,{className:"text-slate-500"}):w.jsx(Zre,{className:"text-slate-500"})]}),e===a&&w.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(({missionId:l,driver:c,time:d,assets:h})=>w.jsxs("div",{className:"bg-slate-50 rounded-lg border p-3",children:[w.jsxs("div",{className:"font-semibold text-slate-700 mb-2 flex justify-between items-center",children:[w.jsxs("span",{className:"flex items-center gap-2",children:[w.jsx(Vl,{size:14,className:"inline"}),c]}),w.jsx("span",{className:"bg-white text-blue-700 text-xs font-bold px-2 py-0.5 rounded-full border",children:d})]}),w.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:h.map(p=>w.jsx("span",{className:"bg-white text-slate-800 font-mono text-xs px-2 py-1 rounded border border-slate-200",children:p.barcode},p.barcode))})]},l))})]},a))})},Ape=({title:n,assets:e})=>{const t=()=>{const r=e.map(s=>({Barcode:s.barcode,"Last Status":s.status,"Last Update":new Date(s.updatedAt).toLocaleString("en-GB")}));Gw(r,n.replace(/ /g,"_").toLowerCase())};return w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n}),w.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-slate-300 text-sm font-semibold rounded-md shadow-sm hover:bg-slate-50",children:[w.jsx(zg,{className:"w-4 h-4 text-green-600"})," Export"]})]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b-2 border-slate-200",children:[w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Barcode"}),w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Last Update"})]})}),w.jsx("tbody",{children:e.length===0?w.jsx("tr",{children:w.jsx("td",{colSpan:"2",className:"text-center p-8 text-slate-500",children:"No assets with this status."})}):e.map(r=>w.jsxs("tr",{className:"border-b border-slate-100",children:[w.jsx("td",{className:"p-2 font-mono",children:r.barcode}),w.jsx("td",{className:"p-2 text-slate-600",children:new Date(r.updatedAt).toLocaleString("en-GB")})]},r.barcode))})]})})]})},$pe=({driverSnapshots:n})=>w.jsx("div",{className:"space-y-6",children:n.length===0?w.jsxs("div",{className:"text-center p-12 bg-white rounded-xl shadow-sm border",children:[w.jsx(l6,{size:40,className:"mx-auto text-slate-400 mb-4"}),w.jsx("h3",{className:"text-xl font-bold text-slate-700",children:"No drivers are currently on a mission."})]}):n.map(({driver:e,totalAssets:t,missions:r})=>w.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[w.jsxs("div",{className:"p-4 bg-slate-50 border-b flex justify-between items-center",children:[w.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[w.jsx(Vl,{})," ",e]}),w.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-bold px-3 py-1 rounded-full",children:[t," Total Assets"]})]}),w.jsx("div",{className:"p-4 space-y-3",children:r.map(({missionId:s,time:a,vehicle:i,assets:o})=>w.jsxs("div",{className:"bg-slate-100 rounded-lg p-3",children:[w.jsxs("div",{className:"font-semibold text-slate-600 text-sm mb-2 flex justify-between",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("span",{className:"flex items-center gap-1.5",children:[w.jsx(qh,{size:14})," ",i||"N/A"]}),w.jsxs("span",{className:"flex items-center gap-1.5",children:[w.jsx(Nd,{size:14})," ",o.length," Assets"]})]}),w.jsx("span",{className:"bg-white text-blue-700 text-xs font-bold px-2 py-0.5 rounded-full border",children:a})]}),w.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(l=>w.jsx("span",{className:"bg-white text-slate-800 font-mono text-xs px-2 py-1 rounded border border-slate-200",children:l.barcode},l.barcode))})]},s))})]},e))}),Rpe=({searchDriver:n,setSearchDriver:e,searchVehicle:t,setSearchVehicle:r,searchStartDate:s,setSearchStartDate:a,searchEndDate:i,setSearchEndDate:o})=>{const l=()=>{e(""),r(""),a(""),o("")};return w.jsx("div",{className:"p-4 bg-white border rounded-xl mb-6 shadow-sm",children:w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-semibold text-slate-600 block mb-1",children:"Search by Driver"}),w.jsx("input",{type:"text",placeholder:"Enter driver name...",value:n,onChange:c=>e(c.target.value),className:"w-full px-3 py-1.5 border border-slate-300 text-sm rounded-md"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-semibold text-slate-600 block mb-1",children:"Search by Vehicle"}),w.jsx("input",{type:"text",placeholder:"Enter vehicle number...",value:t,onChange:c=>r(c.target.value),className:"w-full px-3 py-1.5 border border-slate-300 text-sm rounded-md"})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-semibold text-slate-600 block mb-1",children:"From Date"}),w.jsx("input",{type:"date",value:s,onChange:c=>a(c.target.value),className:"w-full px-3 py-1.5 border border-slate-300 text-sm rounded-md"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-semibold text-slate-600 block mb-1",children:"To Date"}),w.jsx("input",{type:"date",value:i,onChange:c=>o(c.target.value),className:"w-full px-3 py-1.5 border border-slate-300 text-sm rounded-md"})]})]}),w.jsx("div",{children:w.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 bg-slate-100 border border-slate-300 text-sm font-semibold rounded-md shadow-sm hover:bg-slate-200",children:[w.jsx(Fw,{size:16})," Clear Filters"]})})]})})},Ope=({assets:n})=>{const e=()=>{const t=n.map(r=>{var i;const s=(i=r.history)==null?void 0:i.find(o=>o.eventType.includes("Broken")||o.status==="Broken");let a="N/A";return r.wasReplaced?a="Replaced in System":r.contextEvent&&(r.contextEvent.eventType==="Dispatched"?a=`On Mission with: ${r.contextEvent.driverName||"N/A"}`:(r.contextEvent.eventType.includes("Returned")||r.contextEvent.eventType.includes("Received")||r.contextEvent.eventType.includes("Created"))&&(a="Reported from Warehouse")),{Barcode:r.barcode,"Date Reported":new Date(r.updatedAt).toLocaleString("en-GB"),Context:a,Notes:(s==null?void 0:s.notes)||""}});Gw(t,"broken_assets_report")};return w.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[w.jsx(A_,{})," Broken Assets Report (",n.length,")"]}),w.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-1.5 bg-white border border-slate-300 text-sm font-semibold rounded-md shadow-sm hover:bg-slate-50",children:[w.jsx(zg,{className:"w-4 h-4 text-green-600"})," Export"]})]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-slate-50",children:w.jsxs("tr",{className:"border-b-2 border-slate-200",children:[w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Barcode"}),w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Date Reported"}),w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Context"}),w.jsx("th",{className:"p-2 text-left font-semibold text-slate-600",children:"Notes"})]})}),w.jsx("tbody",{children:n.length===0?w.jsx("tr",{children:w.jsx("td",{colSpan:"4",className:"text-center p-8 text-slate-500",children:"No broken assets found."})}):n.map(t=>{var a;const r=(a=t.history)==null?void 0:a.find(i=>i.eventType.includes("Broken")||i.status==="Broken");let s;return t.wasReplaced?s=w.jsxs("span",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[w.jsx(ZB,{size:14})," Replaced in System"]}):t.contextEvent?t.contextEvent.eventType==="Dispatched"?s=w.jsxs("div",{children:[w.jsxs("p",{children:[w.jsx(Vl,{size:12,className:"inline mr-1"})," ",t.contextEvent.driverName||"N/A"]}),w.jsxs("p",{className:"text-xs text-slate-500",children:[w.jsx(qh,{size:12,className:"inline mr-1"})," ",t.contextEvent.vehicleNumber||"N/A"]})]}):s=w.jsxs("span",{className:"text-gray-700 flex items-center gap-2",children:[w.jsx(rae,{size:14})," Reported from Warehouse"]}):s=w.jsx("span",{className:"text-slate-400",children:"N/A"}),w.jsxs("tr",{className:"border-b border-slate-100",children:[w.jsx("td",{className:"p-2 font-mono",children:t.barcode}),w.jsx("td",{className:"p-2",children:new Date(t.updatedAt).toLocaleString("en-GB")}),w.jsx("td",{className:"p-2",children:s}),w.jsx("td",{className:"p-2 text-xs text-slate-600 italic",children:r==null?void 0:r.notes})]},t.barcode)})})]})})]})};function Dpe(){const n=typeof window<"u"?JSON.parse(localStorage.getItem("user")):null,[e,t]=L.useState([]),[r,s]=L.useState([]),[a,i]=L.useState([]),[o,l]=L.useState(!0),[c,d]=L.useState("dashboard"),[h,p]=L.useState(!1),[g,x]=L.useState(!1),[y,b]=L.useState(""),[S,T]=L.useState(""),[N,C]=L.useState(""),[I,F]=L.useState(""),D=L.useCallback(async()=>{l(!0);try{const[K,q,V]=await Promise.all([fetch(`${xh}/api/assets`),fetch(`${xh}/api/assets/history?limit=15`),fetch(`${xh}/api/quantitatives`)]);if(K.ok){const X=await K.json();t(X)}else throw new Error("Failed to load asset data");if(q.ok){const X=await q.json();s(X)}if(V.ok){const X=await V.json();i(X)}}catch(K){Dt.error("Failed to load some data",{description:K.message})}finally{l(!1)}},[]);L.useEffect(()=>{D()},[D]);const A=(K,q)=>{const V=new Date(K);V.setHours(0,0,0,0);const X=new Date(q);X.setHours(23,59,59,999);const Q=new Map;a.forEach(j=>{if(j.createdAt){const J=new Date(j.createdAt);if(!isNaN(J)&&J>=V&&J<=X){const M=J.toISOString().split("T")[0],z=j.driverName||"Unknown Driver",G=`${z}|${M}`;Q.has(G)||Q.set(G,{date:M,driverName:z,barcodes:[],largeCoolersOut:0,largeCoolersIn:0,smallCoolersOut:0,smallCoolersIn:0});const U=Q.get(G);j.transactionType==="outgoing"?(U.largeCoolersOut+=j.largeCoolers,U.smallCoolersOut+=j.smallCoolers):(U.largeCoolersIn+=j.largeCoolers,U.smallCoolersIn+=j.smallCoolers)}}}),e.forEach(j=>{var M;const J=((M=j.currentLocation)==null?void 0:M.dispatchedAt)||j.updatedAt;if(j.status==="On Mission"&&J){const z=new Date(J);if(!isNaN(z)&&z>=V&&z<=X){const G=z.toISOString().split("T")[0],U=j.currentLocation.actualDriverName||"Unknown Driver",se=`${U}|${G}`;Q.has(se)||Q.set(se,{date:G,driverName:U,barcodes:[],largeCoolersOut:0,largeCoolersIn:0,smallCoolersOut:0,smallCoolersIn:0}),Q.get(se).barcodes.push(j.barcode)}}}),Q.forEach(j=>{j.smallCoolersOut+=j.largeCoolersOut*4});const Y=Array.from(Q.values()).map(j=>({:j.date," ":j.driverName," ":j.barcodes.length," ":j.barcodes.join(", ")," ":j.largeCoolersOut," ":j.largeCoolersIn," ":j.smallCoolersOut," ":j.smallCoolersIn})).sort((j,J)=>new Date(J.)-new Date(j.)||j[" "].localeCompare(J[" "]));if(Y.length===0){Dt.error("      .");return}Gw(Y,"custom_report")},{brokenAssets:_,lostAssets:k,overdueAssets:O,groupedOnMissionAssets:P,driverSnapshots:W}=L.useMemo(()=>{if(!e)return{brokenAssets:[],lostAssets:[],overdueAssets:[],groupedOnMissionAssets:[],driverSnapshots:[]};const K=[],q=[],V=[],X=new Date;e.forEach(U=>{U.status==="Broken"&&K.push(U),U.status==="Lost"&&q.push(U),U.status==="On Mission"&&V.push(U)});const Q=V.filter(U=>{var Be,Ze,He;const se=((Be=U.currentLocation)==null?void 0:Be.actualDriverName)||"",pe=((Ze=U.currentLocation)==null?void 0:Ze.vehicleNumber)||"",me=new Date(((He=U.currentLocation)==null?void 0:He.dispatchedAt)||U.updatedAt),be=y?se.toLowerCase().includes(y.toLowerCase()):!0,ge=S?pe.toLowerCase().includes(S.toLowerCase()):!0,ke=N?new Date(N):null,Le=I?new Date(I):null;ke&&ke.setHours(0,0,0,0),Le&&Le.setHours(23,59,59,999);const rt=(!ke||me>=ke)&&(!Le||me<=Le);return be&&ge&&rt}),Y=Q.filter(U=>{var me;const se=((me=U.currentLocation)==null?void 0:me.dispatchedAt)||U.updatedAt;return(X-new Date(se))/(1e3*60*60)>Q5}),j=Q.reduce((U,se)=>{var ke,Le,rt,Be;const pe=new Date(((ke=se.currentLocation)==null?void 0:ke.dispatchedAt)||se.updatedAt),me=pe.toISOString().slice(0,10),be=((Le=se.currentLocation)==null?void 0:Le.actualDriverName)||"Unknown Driver",ge=((rt=se.currentLocation)==null?void 0:rt.missionId)||`${be}-${me}`;return U[ge]||(U[ge]={missionId:ge,driver:be,date:me,time:pe.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),vehicle:(Be=se.currentLocation)==null?void 0:Be.vehicleNumber,assets:[]}),U[ge].assets.push(se),U},{}),J=Object.values(j).reduce((U,se)=>{const pe=se.date;return U[pe]||(U[pe]={date:pe,missions:[],totalAssets:0}),U[pe].missions.push(se),U[pe].totalAssets+=se.assets.length,U[pe].missions.sort((me,be)=>be.time.localeCompare(me.time)),U},{}),M=Object.values(J).sort((U,se)=>new Date(se.date)-new Date(U.date)),z=Object.values(j).reduce((U,se)=>{const pe=se.driver;return U[pe]||(U[pe]={driver:pe,missions:[],totalAssets:0}),U[pe].missions.push(se),U[pe].totalAssets+=se.assets.length,U[pe].missions.sort((me,be)=>be.time.localeCompare(me.time)),U},{}),G=Object.values(z).sort((U,se)=>se.totalAssets-U.totalAssets);return{brokenAssets:K.sort((U,se)=>new Date(se.updatedAt)-new Date(U.updatedAt)),lostAssets:q,overdueAssets:Y,groupedOnMissionAssets:M,driverSnapshots:G}},[e,y,S,N,I]);return w.jsxs("div",{className:"min-h-screen bg-slate-100",children:[w.jsx(Wg,{position:"top-center"}),w.jsx(Jl,{user:n}),w.jsxs("div",{className:"flex",children:[w.jsx(xu,{user:n}),w.jsx("main",{className:"flex-1 p-6 lg:p-8",children:w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsxs("div",{className:"flex justify-between items-start mb-6",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Asset Inventory Dashboard"}),w.jsx("p",{className:"text-slate-500",children:"Live status of all tracked assets."})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold shadow hover:bg-green-700",children:[w.jsx(zg,{size:16})," Generate Report"]}),w.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold shadow hover:bg-blue-700",children:[w.jsx(kh,{size:16})," Manage Asset"]})]})]}),w.jsxs("div",{className:"flex items-center border-b border-slate-200 mb-6 bg-white rounded-t-lg px-2 overflow-x-auto",children:[w.jsx("button",{onClick:()=>d("dashboard"),className:`px-4 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="dashboard"?"border-b-2 border-blue-600 text-blue-600":"text-slate-500 hover:text-slate-800"}`,children:"Dashboard"}),w.jsx("button",{onClick:()=>d("driverSnapshot"),className:`px-4 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="driverSnapshot"?"border-b-2 border-teal-600 text-teal-600":"text-slate-500 hover:text-slate-800"}`,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(l6,{size:14})," Drivers Status"]})}),w.jsx("button",{onClick:()=>d("overdue"),className:`px-4 py-3 font-semibold text-sm relative transition-colors whitespace-nowrap ${c==="overdue"?"border-b-2 border-red-600 text-red-600":"text-slate-500 hover:text-slate-800"}`,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Ug,{size:14})," Overdue Assets",O.length>0&&w.jsx("span",{className:"bg-red-600 text-white text-xs font-bold rounded-full px-2 py-0.5",children:O.length})]})}),w.jsx("button",{onClick:()=>d("quantitative"),className:`px-4 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="quantitative"?"border-b-2 border-purple-600 text-purple-600":"text-slate-500 hover:text-slate-800"}`,children:"Coolers & Ice"}),w.jsxs("button",{onClick:()=>d("brokenAssets"),className:`px-4 py-3 font-semibold text-sm relative transition-colors whitespace-nowrap ${c==="brokenAssets"?"border-b-2 border-orange-600 text-orange-600":"text-slate-500 hover:text-slate-800"}`,children:["Broken (",_.length,")"]}),w.jsxs("button",{onClick:()=>d("lostAssets"),className:`px-4 py-3 font-semibold text-sm relative transition-colors whitespace-nowrap ${c==="lostAssets"?"border-b-2 border-red-600 text-red-600":"text-slate-500 hover:text-slate-800"}`,children:["Lost (",k.length,")"]}),w.jsx("button",{onClick:()=>d("history"),className:`px-4 py-3 font-semibold text-sm transition-colors whitespace-nowrap ${c==="history"?"border-b-2 border-green-600 text-green-600":"text-slate-500 hover:text-slate-800"}`,children:"Recent Activity"})]}),(c==="dashboard"||c==="driverSnapshot")&&w.jsx(Rpe,{searchDriver:y,setSearchDriver:b,searchVehicle:S,setSearchVehicle:T,searchStartDate:N,setSearchStartDate:C,searchEndDate:I,setSearchEndDate:F}),o?w.jsx("div",{className:"text-center p-12",children:w.jsx(P0,{className:"animate-spin inline-block w-8 h-8 text-blue-600"})}):w.jsxs(w.Fragment,{children:[c==="dashboard"&&w.jsx(Ipe,{groupedAssets:P}),c==="driverSnapshot"&&w.jsx($pe,{driverSnapshots:W}),c==="overdue"&&w.jsx(_pe,{assets:O}),c==="quantitative"&&w.jsx(kpe,{movements:a}),c==="brokenAssets"&&w.jsx(Ope,{assets:_}),c==="lostAssets"&&w.jsx(Ape,{title:"Lost Assets Report",assets:k}),c==="history"&&w.jsx(Epe,{history:r})]})]})})]}),h&&w.jsx(Cpe,{onClose:()=>p(!1),onAssetUpdate:D}),w.jsx(Npe,{isOpen:g,onClose:()=>x(!1),onGenerate:A})]})}const Zi="https://172.20.0.49:3000",Xu=n=>({id:n._id,filename:n.source_path.split(/[\\/]/).pop(),invoice_date:n.invoice_date?new Date(n.invoice_date).toISOString().substring(0,10):null,total_amount:n.total_amount??null,subtotal_amount:n.subtotal_amount??null,delivery_fee:n.delivery_fee??null,order_reference:n.order_reference||"",city:n.city||"",item_row_count:n.item_row_count||0,source_path:n.source_path||"",processed_at:n.processed_at?new Date(n.processed_at).toISOString().substring(0,10):null,confirmed:n.confirmed||!1}),hb=({children:n,className:e=""})=>w.jsx("div",{className:`bg-white rounded-lg shadow-sm ${e}`,children:n}),HC=({children:n,className:e=""})=>w.jsx("div",{className:`p-6 ${e}`,children:n}),Yu=n=>w.jsx("input",{...n,className:`flex h-9 w-full rounded-md border border-slate-300 bg-transparent px-3 text-sm placeholder:text-slate-400 focus:ring-1 focus:ring-indigo-500 disabled:opacity-50 ${n.className}`}),bs=({children:n,variant:e="primary",size:t="default",className:r="",...s})=>{const a="inline-flex items-center justify-center rounded-md text-sm font-medium transition focus:outline-none disabled:opacity-50",i={primary:"bg-indigo-600 text-white hover:bg-indigo-500",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200",outline:"border border-slate-200 text-slate-800 hover:bg-slate-100",ghost:"text-slate-800 hover:bg-slate-100",danger:"bg-red-50 text-red-700 hover:bg-red-100 border border-red-200"},o={default:"h-9 px-4",sm:"h-8 px-3 text-xs",lg:"h-10 px-8"};return w.jsx("button",{className:`${a} ${i[e]} ${o[t]} ${r}`,...s,children:n})},Fpe=()=>{const n=JSON.parse(localStorage.getItem("user")||"{}"),[e,t]=L.useState([]),[r,s]=L.useState(!0),[a,i]=L.useState(null),[o,l]=L.useState(""),[c,d]=L.useState(""),[h,p]=L.useState(""),[g,x]=L.useState({viewFinancials:!1,editInvoices:!1,undoInvoice:!1,deleteInvoices:!1,csvExport:!1}),[y,b]=L.useState(""),[S,T]=L.useState(null),N=!!S,[C,I]=L.useState(null),[F,D]=L.useState(""),A=!!C,[_,k]=L.useState(null),[O,P]=L.useState(""),W=!!_,[K,q]=L.useState(null),[V,X]=L.useState({}),[Q]=L.useState(new Set),Y=we=>ne(we)&&we.confirmed===!1,[j,J]=L.useState(1),[M,z]=L.useState(15),{t:G,i18n:U}=pP(),se={textAlign:U.language==="he"?"right":"left"},pe=we=>{T(we.currentTarget)},me=()=>{T(null)},be=we=>{b(we),me()},ge=we=>{I(we.currentTarget)},ke=()=>{I(null)},Le=we=>{D(we),ke()},rt=we=>k(we.currentTarget),Be=()=>k(null),Ze=we=>{P(we),Be()},He=L.useMemo(()=>{if(!e)return[];const we=[...new Set(e.map(pt=>pt.city).filter(Boolean))],kt=we.filter(pt=>pt!=="UNKNOWN"),lt=we.includes("UNKNOWN");kt.sort();let Xe=kt;return lt&&Xe.push("UNKNOWN"),Xe.map(pt=>({value:pt,label:pt}))},[e]);L.useEffect(()=>{var we,kt,lt,Xe,pt;x({viewFinancials:((we=n.permissions)==null?void 0:we.viewFinancials)??!1,editInvoices:((kt=n.permissions)==null?void 0:kt.editInvoices)??!1,undoInvoice:((lt=n.permissions)==null?void 0:lt.undoInvoice)??!1,deleteInvoices:((Xe=n.permissions)==null?void 0:Xe.deleteInvoices)??!1,csvExport:((pt=n.permissions)==null?void 0:pt.csvExport)??!1}),(async()=>{try{const Xt=await fetch(`${Zi}/api/invoices`);if(!Xt.ok)throw new Error(Xt.statusText);const _t=await Xt.json();t(_t.map(Xu))}catch(Xt){console.error(Xt),i("Error loading invoices.")}finally{s(!1)}})()},[]),L.useEffect(()=>{J(1)},[o,c,h,M]);const ne=we=>{const lt=we.invoice_date&&we.invoice_date>="2025-07-01"&&(we.subtotal_amount==null||we.subtotal_amount===0);return!we.filename||!we.invoice_date||we.total_amount==null||we.total_amount===0||we.delivery_fee==null||we.delivery_fee===0||!we.order_reference||!we.city||we.item_row_count<=0||we.city==="UNKNOWN"||lt},Ae=L.useMemo(()=>e.filter(we=>{const kt=o.toLowerCase(),lt=!o||Object.values(we).join(" ").toLowerCase().includes(kt),Xe=!c||we.invoice_date>=c,pt=!h||we.invoice_date<=h,Xt=!O||we.city===O;let _t=!0;if(y){const yt=we.total_amount;if(y==="negative")_t=yt<0;else if(y.includes("+")){const qt=parseInt(y,10);_t=yt>=qt}else{const[qt,gn]=y.split("-").map(Number);_t=yt>=qt&&yt<=gn}}let rs=!0;if(F){const yt=we.subtotal_amount??0;if(F==="negative")rs=yt<0;else if(F.includes("+")){const qt=parseInt(F,10);rs=yt>=qt}else{const[qt,gn]=F.split("-").map(Number);rs=yt>=qt&&yt<=gn}}return lt&&Xe&&pt&&_t&&Xt&&rs}),[e,o,c,h,y,O,F]),Me=L.useMemo(()=>{let we=0,kt=0,lt=0,Xe=0;Ae.forEach(_t=>{_t.total_amount>=0?(we+=_t.total_amount,lt++):(kt+=Math.abs(_t.total_amount),Xe++)});const pt=we-kt,Xt=_t=>_t.toLocaleString("he-IL",{minimumFractionDigits:2,maximumFractionDigits:2});return{inc:Xt(we),cred:Xt(kt),net:Xt(pt),cntInv:lt,cntCred:Xe,rawNet:pt}},[Ae]),Ve=L.useMemo(()=>[...Ae].sort((we,kt)=>(Y(kt)?1:0)-(Y(we)?1:0)),[Ae,Q]),ot=Math.ceil(Ve.length/M),st=L.useMemo(()=>{const we=(j-1)*M;return Ve.slice(we,we+M)},[Ve,j,M]),Ge=L.useMemo(()=>Ve.some(Y),[Ve]),at=we=>we&&window.open(`${Zi}/api/invoices/download/${we}`,"_blank"),Qt=()=>{const we=Ve.filter(tt=>tt.total_amount>=0);if(!we.length)return alert("No income invoices found in the selected range to generate the report.");const kt=[...new Set(we.map(tt=>tt.city||"UNKNOWN"))].sort((tt,Qe)=>tt.localeCompare(Qe)),lt=we.reduce((tt,Qe)=>{const wt=Qe.city||"UNKNOWN";return tt[wt]||(tt[wt]=[]),tt[wt].push(Qe),tt},{}),Xe=[];kt.forEach((tt,Qe)=>{lt[tt].forEach(Nt=>{const ln=Nt.delivery_fee||0;let ss=Nt.subtotal_amount||0;ln===29.9&&(ss-=24.519),Xe.push({File:Nt.filename,Date:Nt.invoice_date,Reference:Nt.order_reference,"Original Amount":Nt.total_amount,"Adjusted Amount":Nt.total_amount-ln,"Original Subtotal with fee":Nt.subtotal_amount,"Adjusted Subtotal without fee":ss,"Delivery Fee":ln,"Item Count":Nt.item_row_count||0,City:Nt.city})}),Qe<kt.length-1&&Xe.push({})});const pt=ls.json_to_sheet(Xe);["D","E","F","G","H"].forEach(tt=>{for(let Qe=2;Qe<=Xe.length+1;Qe++){if(Xe[Qe-2]&&Object.keys(Xe[Qe-2]).length===0)continue;const wt=`${tt}${Qe}`;pt[wt]&&typeof pt[wt].v=="number"&&(pt[wt].z="#,##0.00")}}),pt["!cols"]=[{wch:25},{wch:25},{wch:25},{wch:25},{wch:25},{wch:25},{wch:25},{wch:25},{wch:25},{wch:25}];const Xt=we.reduce((tt,Qe)=>{const wt=Qe.city||"UNKNOWN";tt[wt]||(tt[wt]={adjustedIncome:0,invoiceCount:0,totalAdjustedSubtotal:0,totalItemCount:0});const Nt=Qe.delivery_fee||0;let ln=Qe.subtotal_amount||0;return Nt===29.9&&(ln-=24.519),tt[wt].totalAdjustedSubtotal+=ln,tt[wt].adjustedIncome+=Qe.total_amount-Nt,tt[wt].invoiceCount++,tt[wt].totalItemCount+=Qe.item_row_count||0,tt},{}),_t=[];_t.push({Category:"City",Value:"Total Delivery after VAT",Count:"Invoice Count",Subtotal:"Total before 18% VAT per city",Items:"Items count"});let rs=0,yt=0,qt=0,gn=0;kt.forEach(tt=>{const Qe=Xt[tt];_t.push({Category:tt,Value:Qe.adjustedIncome,Count:Qe.invoiceCount,Subtotal:Qe.totalAdjustedSubtotal,Items:Qe.totalItemCount}),rs+=Qe.adjustedIncome,yt+=Qe.invoiceCount,qt+=Qe.totalAdjustedSubtotal,gn+=Qe.totalItemCount}),_t.push({});const fi=parseFloat((qt*.1).toFixed(2));_t.push({Category:"--- Overall Summary ---"}),_t.push({Category:"Total Adjusted Income (incl. VAT)",Value:rs}),_t.push({Category:"Total Before 18% VAT ",Value:qt}),_t.push({Category:"10% of Pre-VAT (from Adjusted Income)",Value:fi}),_t.push({Category:"Total Invoices",Count:yt}),_t.push({Category:"Total item count",Items:gn}),_t.push({Category:""});const Wr=ls.json_to_sheet(_t,{skipHeader:!0}),wo="B",uc="D",Ua=kt.length;[...Array.from({length:Ua},(tt,Qe)=>Qe+2),Ua+4,Ua+5,Ua+8,Ua+9].forEach(tt=>{const Qe=`${wo}${tt}`;Wr[Qe]&&typeof Wr[Qe].v=="number"&&(Wr[Qe].z="#,##0.00")}),Array.from({length:Ua},(tt,Qe)=>Qe+2).forEach(tt=>{const Qe=`${uc}${tt}`;Wr[Qe]&&typeof Wr[Qe].v=="number"&&(Wr[Qe].z="#,##0.00")}),Wr["!cols"]=[{wch:35},{wch:20},{wch:20},{wch:25}];const So=ls.book_new();ls.book_append_sheet(So,pt,"Income Invoices Details"),ls.book_append_sheet(So,Wr,"Income Summary"),q5(So,"Income_Report.xlsx")},Vt=we=>{q(we.id),X({invoice_date:we.invoice_date,total_amount:we.total_amount,subtotal_amount:we.subtotal_amount,delivery_fee:we.delivery_fee,order_reference:we.order_reference,city:we.city,item_row_count:we.item_row_count})},Mt=async we=>{if(window.confirm(G("confirmDeleteMessage")))try{const kt=await fetch(`${Zi}/api/invoices/${we}`,{method:"DELETE"});if(!kt.ok)throw new Error(await kt.text()||"Failed to delete invoice");t(lt=>lt.filter(Xe=>Xe.id!==we)),alert(G("invoiceDeletedSuccess"))}catch(kt){console.error("Error deleting invoice:",kt),alert(`Error: ${kt.message}`)}},Ut=["file","date","amount","subtotal","delivery fee","reference","city","rowCount","actions"];return r?w.jsx("div",{className:"flex items-center justify-center h-screen text-xl text-slate-500",children:"Loading..."}):a?w.jsx("div",{className:"flex items-center justify-center h-screen text-red-700 p-4",children:a}):w.jsxs(w.Fragment,{children:[w.jsx(Jl,{user:n}),w.jsx(xu,{user:n}),w.jsxs("div",{className:"bg-slate-50 min-h-screen p-4 md:ml-15",children:[w.jsx("header",{className:"mb-8 text-start",children:w.jsx("h1",{style:se,className:"text-3xl font-bold text-start",children:G("invoicesDashboard")})}),g.viewFinancials&&w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 w-full",children:[w.jsx(hb,{children:w.jsxs(HC,{className:"text-center",children:[w.jsx("p",{className:"text-green-600",children:G("totalIncome")}),w.jsxs("p",{className:"text-3xl",children:["",Me.inc]}),w.jsxs("p",{className:"text-xs",children:[Me.cntInv," ",G("invoices")]})]})}),w.jsx(hb,{children:w.jsxs(HC,{className:"text-center",children:[w.jsx("p",{className:"text-red-600",children:G("totalCredits")}),w.jsxs("p",{className:"text-3xl",children:["",Me.cred]}),w.jsxs("p",{className:"text-xs",children:[Me.cntCred," ",G("creditNotes")]})]})}),w.jsx(hb,{className:"bg-slate-800 text-white text-center",children:w.jsxs(HC,{children:[w.jsx("p",{className:"text-blue-400",children:G("netTotal")}),w.jsxs("p",{className:"text-3xl text-black",children:["",Me.net]}),w.jsxs("p",{className:"text-xs text-black",children:[Ve.length," ",G("allInvoices")]})]})})]}),w.jsxs(hb,{children:[w.jsxs("div",{style:se,className:"p-4 border-b border-slate-200 flex flex-col md:flex-row md:items-center gap-4",children:[w.jsx("div",{className:"flex-grow w-full md:max-w-sm",children:w.jsx(tb,{size:"small",variant:"outlined",fullWidth:!0,placeholder:G("searchInvoices"),value:o,onChange:we=>l(we.target.value),InputProps:{startAdornment:w.jsx(Pee,{position:"start",children:w.jsx(I_,{})})}})}),w.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[w.jsx(tb,{label:G("startDate"),type:"date",value:c,onChange:we=>d(we.target.value),InputLabelProps:{shrink:!0},size:"small"}),w.jsx(tb,{label:G("endDate"),type:"date",value:h,onChange:we=>p(we.target.value),InputLabelProps:{shrink:!0},size:"small"}),w.jsx(bs,{variant:"ghost",onClick:()=>{l(""),d(""),p("")},children:G("clear")})]}),w.jsx("div",{className:"flex items-center gap-2",children:g.csvExport&&w.jsx(w.Fragment,{children:w.jsxs(bs,{className:"text-xs",variant:"secondary",onClick:()=>Qt(),title:"Download Summary Report",children:[w.jsx(YB,{size:18,className:"mr-1"}),w.jsx("span",{children:"Export Report"})]})})})]})]}),Ge&&w.jsxs("div",{style:se,className:"p-4 bg-red-100 text-red-800 text-sm",children:[" ",G("alertInvoice")]}),w.jsx("div",{className:"md:hidden",children:w.jsx("div",{className:"divide-y divide-slate-200 p-4 space-y-4",children:st.map(we=>{const kt=Y(we),lt=K===we.id;return w.jsxs("div",{className:`pt-4 first:pt-0 ${kt?"bg-red-50 p-3 rounded-lg":""}`,children:[w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx("a",{href:`${Zi}/api/invoices/${we.filename}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-indigo-600 truncate pr-2",children:we.filename?we.filename.replace(/\.pdf$/i,""):"No Filename"}),w.jsx("span",{className:"font-bold text-lg whitespace-nowrap",children:we.total_amount!=null?`${we.total_amount.toFixed(2)}`:""})]}),w.jsxs("div",{style:se,className:"text-sm text-slate-600 space-y-1 mb-3",children:[w.jsxs("p",{children:[w.jsxs("strong",{children:[G("date"),":"]})," ",we.invoice_date||""]}),w.jsxs("p",{children:[w.jsxs("strong",{children:[G("fee"),":"]})," ",we.delivery_fee!=null?`${we.delivery_fee.toFixed(2)}`:""]}),w.jsxs("p",{children:[w.jsxs("strong",{children:[G("reference"),":"]})," ",we.order_reference||""]}),w.jsxs("p",{children:[w.jsxs("strong",{children:[G("city"),":"]})," ",we.city||""]})]}),w.jsxs("div",{className:"flex items-center justify-end flex-wrap gap-2 mt-3",children:[w.jsx(bs,{variant:"secondary",size:"sm",onClick:()=>at(we.filename),children:w.jsx(NF,{})}),g.editInvoices&&!lt&&w.jsx(bs,{variant:"secondary",size:"sm",onClick:()=>Vt(we),children:G("edit")}),g.editInvoices&&kt&&!lt&&w.jsx(bs,{variant:"secondary",size:"sm",onClick:async()=>{try{const Xe=await fetch(`${Zi}/api/invoices/${we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmed:!0})});if(!Xe.ok)throw new Error(Xe.statusText);const pt=await Xe.json();t(Xt=>Xt.map(_t=>_t.id===we.id?Xu(pt):_t))}catch(Xe){console.error(Xe),alert("Error confirming invoice")}},children:G("confirm")}),g.undoInvoice&&we.confirmed&&!lt&&w.jsx(bs,{variant:"secondary",size:"sm",onClick:async()=>{try{const Xe=await fetch(`${Zi}/api/invoices/${we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmed:!1})});if(!Xe.ok)throw new Error(Xe.statusText);const pt=await Xe.json();t(Xt=>Xt.map(_t=>_t.id===we.id?Xu(pt):_t))}catch(Xe){console.error(Xe),alert("Error undoing confirmation")}},children:G("undo")}),g.deleteInvoices&&!lt&&w.jsxs(bs,{variant:"danger",size:"sm",onClick:()=>Mt(we.id),children:[w.jsx(hv,{size:16,className:"mr-1"})," ",G("delete")]}),lt&&w.jsxs(w.Fragment,{children:[w.jsx(bs,{variant:"primary",size:"sm",onClick:async()=>{try{const Xe=await fetch(`${Zi}/api/invoices/${we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!Xe.ok)throw new Error(Xe.statusText);const pt=await Xe.json();t(Xt=>Xt.map(_t=>_t.id===we.id?Xu(pt):_t))}catch(Xe){console.error(Xe),alert("Error saving invoice")}finally{q(null)}},children:G("save")}),w.jsx(bs,{variant:"secondary",size:"sm",onClick:()=>q(null),children:G("cancel")})]})]})]},we.id)})})}),w.jsx("div",{className:"hidden md:block overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm text-left",children:[w.jsx("thead",{className:"bg-slate-100 text-center",children:w.jsx("tr",{children:Ut.map(we=>{if(we==="amount"){const kt=[{value:"0-100",label:"0 - 100"},{value:"101-200",label:"101 - 200"},{value:"201-500",label:"201 - 500"},{value:"501-1000",label:"501 - 1000"},{value:"1001+",label:"1001+"},{value:"negative",label:"Negative Amounts"}];let lt;if(y==="")lt=`${G("amount")}`;else{const Xe=kt.find(pt=>pt.value===y);lt=Xe?Xe.label:""}return w.jsxs("th",{className:"px-6 py-3 font-medium uppercase text-slate-600",children:[w.jsxs("button",{onClick:pe,className:"flex items-center justify-center w-full bg-transparent border-none p-0 cursor-pointer",children:[w.jsx("span",{className:"font-medium uppercase text-slate-600",children:lt}),w.jsx(LC,{size:18,className:"ml-1"})]}),w.jsxs(Lb,{anchorEl:S,open:N,onClose:me,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[w.jsx(qu,{onClick:()=>be(""),children:w.jsx("em",{children:"All"})}),kt.map(Xe=>w.jsx(qu,{onClick:()=>be(Xe.value),children:Xe.label},Xe.value))]})]},we)}else if(we==="subtotal"){const kt=[{value:"0-100",label:"0 - 100"},{value:"101-200",label:"101 - 200"},{value:"201-500",label:"201 - 500"},{value:"501-1000",label:"501 - 1000"},{value:"1001+",label:"1001+"},{value:"negative",label:"Negative Amounts"}];let lt;if(F==="")lt=`${G("subtotal")}`;else{const Xe=kt.find(pt=>pt.value===F);lt=Xe?Xe.label:""}return w.jsxs("th",{className:"px-6 py-3 font-medium uppercase text-slate-600",children:[w.jsxs("button",{onClick:ge,className:"flex items-center justify-center w-full bg-transparent border-none p-0 cursor-pointer",children:[w.jsx("span",{className:"font-medium uppercase text-slate-600",children:lt}),w.jsx(LC,{size:18,className:"ml-1"})]}),w.jsxs(Lb,{anchorEl:C,open:A,onClose:ke,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[w.jsx(qu,{onClick:()=>Le(""),children:w.jsx("em",{children:"All"})}),kt.map(Xe=>w.jsx(qu,{onClick:()=>Le(Xe.value),children:Xe.label},Xe.value))]})]},we)}else if(we==="city")return w.jsxs("th",{className:"px-6 py-3 font-medium uppercase text-slate-600",children:[w.jsxs("button",{onClick:rt,className:"flex items-center justify-center w-full bg-transparent border-none p-0 cursor-pointer",children:[w.jsx("span",{className:"font-medium uppercase text-slate-600",children:O||G("city")}),w.jsx(LC,{size:18,className:"ml-1"})]}),w.jsxs(Lb,{anchorEl:_,open:W,onClose:Be,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[w.jsx(qu,{onClick:()=>Ze(""),children:w.jsx("em",{children:"All Cities"})}),He.map(kt=>w.jsx(qu,{onClick:()=>Ze(kt.value),children:kt.label},kt.value))]})]},we);return w.jsx("th",{className:"px-6 py-3 font-medium uppercase text-slate-600",children:G(we)},we)})})}),w.jsx("tbody",{className:"divide-y divide-slate-100 text-center",children:st.map(we=>{const kt=Y(we),lt=K===we.id;return w.jsxs("tr",{className:kt?"bg-red-100":"bg-white",children:[w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:we.filename?w.jsx("a",{href:`${Zi}/api/invoices/${we.filename}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline",children:we.filename.replace(/\.pdf$/i,"")}):""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"date",value:V.invoice_date,onChange:Xe=>X(pt=>({...pt,invoice_date:Xe.target.value}))}):we.invoice_date||""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"number",value:V.total_amount,onChange:Xe=>X(pt=>({...pt,total_amount:parseFloat(Xe.target.value)}))}):we.total_amount!=null?we.total_amount.toFixed(2):""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"number",value:V.subtotal_amount,onChange:Xe=>X(pt=>({...pt,subtotal_amount:parseFloat(Xe.target.value)}))}):we.subtotal_amount!=null?we.subtotal_amount.toFixed(2):""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"number",value:V.delivery_fee,onChange:Xe=>X(pt=>({...pt,delivery_fee:parseFloat(Xe.target.value)}))}):we.delivery_fee!=null?we.delivery_fee.toFixed(2):""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"text",value:V.order_reference,onChange:Xe=>X(pt=>({...pt,order_reference:Xe.target.value}))}):we.order_reference||""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"text",value:V.city,onChange:Xe=>X(pt=>({...pt,city:Xe.target.value}))}):we.city||""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:lt?w.jsx(Yu,{type:"number",value:V.item_row_count,onChange:Xe=>X(pt=>({...pt,item_row_count:parseInt(Xe.target.value,10)}))}):we.item_row_count>0?we.item_row_count:""}),w.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-2",children:[w.jsxs(bs,{variant:"secondary",size:"sm",onClick:()=>at(we.filename),children:[" ",w.jsx(NF,{})," "]}),g.editInvoices&&!lt&&w.jsx(bs,{variant:"secondary",size:"sm",onClick:()=>Vt(we),children:G("edit")}),g.editInvoices&&kt&&!lt&&w.jsx(bs,{variant:"secondary",size:"sm",onClick:async()=>{try{const Xe=await fetch(`${Zi}/api/invoices/${we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmed:!0})});if(!Xe.ok)throw new Error(Xe.statusText);const pt=await Xe.json();t(Xt=>Xt.map(_t=>_t.id===we.id?Xu(pt):_t))}catch(Xe){console.error(Xe),alert("Error confirming invoice")}},children:G("confirm")}),g.deleteInvoices&&!lt&&w.jsxs(bs,{variant:"danger",size:"sm",onClick:()=>Mt(we.id),children:[" ",w.jsx(hv,{size:16})," "]}),g.undoInvoice&&we.confirmed&&!lt&&w.jsx(bs,{variant:"secondary",size:"sm",onClick:async()=>{try{const Xe=await fetch(`${Zi}/api/invoices/${we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirmed:!1})});if(!Xe.ok)throw new Error(Xe.statusText);const pt=await Xe.json();t(Xt=>Xt.map(_t=>_t.id===we.id?Xu(pt):_t))}catch(Xe){console.error(Xe),alert("Error undoing confirmation")}},children:G("undo")}),lt&&w.jsxs(w.Fragment,{children:[w.jsx(bs,{variant:"primary",size:"sm",onClick:async()=>{try{const Xe=await fetch(`${Zi}/api/invoices/${we.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!Xe.ok)throw new Error(Xe.statusText);const pt=await Xe.json();t(Xt=>Xt.map(_t=>_t.id===we.id?Xu(pt):_t))}catch(Xe){console.error(Xe),alert("Error saving invoice")}finally{q(null)}},children:G("save")}),w.jsx(bs,{variant:"secondary",size:"sm",onClick:()=>q(null),children:G("cancel")})]})]})})]},we.id)})})]})}),ot>1&&w.jsxs("div",{className:"p-4 border-t border-slate-200 flex flex-col md:flex-row items-center justify-between gap-4",children:[w.jsxs("div",{className:"flex items-center flex-wrap justify-center gap-4 text-sm text-slate-600",children:[w.jsxs("span",{children:[G("page")," ",j," ",G("of")," ",ot]}),w.jsx(tb,{select:!0,label:G("perPage"),value:M,onChange:we=>z(Number(we.target.value)),size:"small",variant:"outlined",sx:{minWidth:100},children:[15,25,50,100,500,1e3].map(we=>w.jsx(qu,{value:we,children:we},we))}),w.jsxs("span",{children:["(",G("total")," ",Ve.length," ",G("invoices"),")"]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(bs,{variant:"outline",size:"sm",onClick:()=>J(we=>Math.max(we-1,1)),disabled:j===1,children:G("previous")}),w.jsx(bs,{variant:"outline",size:"sm",onClick:()=>J(we=>Math.min(we+1,ot)),disabled:j>=ot,children:G("next")})]})]})]})]})]})};var k0={exports:{}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lpe=1e-7,Mpe=1e-4;class J_{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class qw{refCount(e){return Ia("refCount")}incRef(e){return Ia("incRef")}timerAvailable(){return!0}time(e){return Ia("time")}read(e){return Ia("read")}readSync(e){return Ia("readSync")}readToGPU(e,t){return Ia("readToGPU")}numDataIds(){return Ia("numDataIds")}disposeData(e,t){return Ia("disposeData")}write(e,t,r){return Ia("write")}move(e,t,r,s,a){return Ia("move")}createTensorFromGPUData(e,t,r){return Ia("createTensorFromGPUData")}memory(){return Ia("memory")}floatPrecision(){return Ia("floatPrecision")}epsilon(){return this.floatPrecision()===32?Lpe:Mpe}dispose(){return Ia("dispose")}}function Ia(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eI(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,Al(n,e,t)}function Ppe(n,e){if(n.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${n.length}Second array length was ${e.length}`);let t=n.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,Al(n,t,r),Al(e,t,r)}function nu(n,e,t){return Math.max(n,Math.min(e,t))}function Kw(n){return n%2===0?n:n+1}function Al(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Z5(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function Bpe(n,e){const t=Math.random();return e*t+(1-t)*n}function jpe(n,e){let t=0;for(let r=0;r<n.length;r++){const s=Number(n[r])-Number(e[r]);t+=s*s}return t}function Z(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function ks(n,e,t=""){Z(on(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function Yd(n){Z(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Fe(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function zpe(n){return n.length===0}function J5(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function on(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function _d(n){return n%1===0}function Upe(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;{const e=Math.exp(2*n);return(e-1)/(e+1)}}function $v(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function Vpe(n){const e=new Uint32Array(n);for(let t=0;t<n;++t)e[t]=t;return eI(e),e}function yd(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function GE(n,e=s=>0,t,r){return new Promise((s,a)=>{let i=0;const o=()=>{if(n()){s();return}i++;const l=e(i);if(t!=null&&i>=t){a();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function tI(n,e){let t=1,r=-1;for(let a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(n[a]<0)throw Error(`Shapes can not be < 0. Found ${n[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const s=n.slice();return s[r]=e/t,s}function nn(n,e){const t=e.length;return n=n==null?e.map((r,s)=>s):[].concat(n),Z(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),Z(n.every(r=>_d(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function tc(n,e){const t=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||s?null:nn(e,n).sort();let i=0;for(let o=0;o<n.length;++o){if(a!=null){if(a[i]===o&&n[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${n[o]}' is not 1`);(a[i]==null||a[i]>o)&&n[o]===1&&(t.push(n[o]),r.push(o)),a[i]<=o&&i++}n[o]!==1&&(t.push(n[o]),r.push(o))}return{newShape:t,keptDims:r}}function fs(n,e){return wr(n,e)}function wr(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function ej(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function tj(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function nI(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function cg(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function nj(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function zo(n){return typeof n=="string"||n instanceof String}function rj(n){return typeof n=="boolean"}function Rv(n){return typeof n=="number"}function Qd(n){return Array.isArray(n)?Qd(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":Rv(n)?"float32":zo(n)?"string":rj(n)?"bool":"float32"}function ru(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Ov(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function $t(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function sj(n,e,t,r=!1){const s=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let i=0;i<a;i++)s[i]=t[n+i]}else{const a=e[0],i=e.slice(1),o=i.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<a;l++)s[l]=sj(n+l*o,i,t,r)}return s}function ii(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((s,a)=>s*a)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return sj(0,n,e,t)}function aj(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function Xw(n,e){const t=Es(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function Es(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function rI(n,e){const t=n.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return ii(n,new Float32Array(t));if(e==="int32")return ii(n,new Int32Array(t));if(e==="bool")return ii(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function za(n){n.forEach(e=>{Z(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function co(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let s=0;s<n.length-1;++s)r+=t[s]*n[s];return r}function Zd(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(n/t[s]),n-=r[s]*t[s];return r[r.length-1]=n,r}function su(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xL="tfjsflags";class ij{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Wpe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(Ce().getBool("IS_TEST")||Ce().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];Ce().getBool("IS_TEST")||Ce().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(su(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);xL in e&&e[xL].split(",").forEach(r=>{const[s,a]=r.split(":");this.urlFlags[s]=Gpe(s,a)})}}function Wpe(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(Hpe(e,r[0],r[1]),r.join("="))),e}function Hpe(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function Gpe(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function Ce(){return sI}let sI=null;function qpe(n){sI=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let GC;function oj(){if(GC==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");GC=n}return GC}function Kpe(){const n=oj();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function aI(n,e){const t=Kpe();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const Qg="Abs",Zh="Acos",Jh="Acosh",Jd="Add",Zg="AddN",Yw="All",Qw="Any",Jg="ArgMax",ex="ArgMin",ep="Asin",tp="Asinh",np="Atan",rp="Atanh",sp="Atan2",tx="AvgPool",Zw="AvgPoolGrad",nx="AvgPool3D",Jw="AvgPool3DGrad",rx="BatchMatMul",sx="BatchToSpaceND",e2="Bincount",ax="BitwiseAnd",lj="BroadcastTo",t2="BroadcastArgs",ap="Cast",ip="Ceil",op="ClipByValue",n2="Complex",ix="ComplexAbs",ox="Concat",lx="Conv2D",r2="Conv2DBackpropFilter",cx="Conv2DBackpropInput",ux="Conv3D",s2="Conv3DBackpropFilterV2",a2="Conv3DBackpropInputV2",lp="Cos",cp="Cosh",i2="Cumprod",dx="Cumsum",o2="CropAndResize",l2="DenseBincount",c2="DepthToSpace",fx="DepthwiseConv2dNative",u2="DepthwiseConv2dNativeBackpropFilter",d2="DepthwiseConv2dNativeBackpropInput",f2="Diag",hx="Dilation2D",Dv="Dilation2DBackpropInput",Fv="Dilation2DBackpropFilter",h2="Draw",up="RealDiv",p2="Einsum",dp="Elu",m2="EluGrad",fp="Erf",px="Equal",hp="Exp",mx="ExpandDims",pp="Expm1",g2="FFT",x2="Fill",y2="FlipLeftRight",mp="Floor",gp="FloorDiv",gx="FusedBatchNorm",xx="GatherV2",b2="GatherNd",yx="Greater",xp="GreaterEqual",yp="Identity",v2="IFFT",w2="Imag",bp="IsFinite",vp="IsInf",wp="IsNan",bx="LeakyRelu",vx="Less",wx="LessEqual",S2="LinSpace",Sp="Log",Tp="Log1p",Sx="LogicalAnd",Tx="LogicalNot",Nx="LogicalOr",Xpe="LogicalXor",cj="LogSoftmax",Ype="LowerBound",Cx="LRN",T2="LRNGrad",Qpe="MatrixBandPart",Ex="Max",Np="Maximum",kx="MaxPool",N2="MaxPoolGrad",_x="MaxPool3D",C2="MaxPool3DGrad",E2="MaxPoolWithArgmax",Ix="Mean",Ax="Min",Cp="Minimum",$x="MirrorPad",Ep="Mod",k2="Multinomial",kp="Multiply",Rx="Neg",Ox="NotEqual",_2="NonMaxSuppressionV3",I2="NonMaxSuppressionV4",A2="NonMaxSuppressionV5",Dx="OnesLike",Fx="OneHot",Lx="Pack",Mx="PadV2",Zpe="Pool",_p="Pow",Px="Prelu",Bx="Prod",$2="RaggedGather",R2="RaggedRange",O2="RaggedTensorToTensor",D2="Range",F2="Real",Ip="Reciprocal",Ap="Relu",jx="Reshape",zx="ResizeNearestNeighbor",L2="ResizeNearestNeighborGrad",Ux="ResizeBilinear",M2="ResizeBilinearGrad",$p="Relu6",Vx="Reverse",Rp="Round",Op="Rsqrt",P2="ScatterNd",B2="TensorScatterUpdate",j2="SearchSorted",Wx="Select",Dp="Selu",Hx="Slice",Fp="Sin",Lp="Sinh",Mp="Sign",Pp="Sigmoid",Bp="Softplus",jp="Sqrt",Gx="Sum",qx="SpaceToBatchND",Kx="SplitV",Xx="Softmax",z2="SparseFillEmptyRows",U2="SparseReshape",V2="SparseSegmentMean",W2="SparseSegmentSum",H2="SparseToDense",zp="SquaredDifference",G2="Square",Yx="StaticRegexReplace",q2="StridedSlice",K2="StringNGrams",X2="StringSplit",Y2="StringToHashBucketFast",Up="Sub",Vp="Tan",Wp="Tanh",Hp="Tile",Q2="TopK",Z2="Transform",bd="Transpose",J2="Unique",Qx="Unpack",Zx="UnsortedSegmentSum",Jpe="UpperBound",Jx="ZerosLike",Gp="Step",Lv="FromPixels",eS="RotateWithOffset",ug="_FusedMatMul",dg="FusedConv2D",fg="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ti(...n){Ce().getBool("IS_TEST")||Ce().getBool("PROD")||console.warn(...n)}function eme(...n){Ce().getBool("IS_TEST")||Ce().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ih=aI("kernelRegistry",()=>new Map),hg=aI("gradRegistry",()=>new Map);function pg(n,e){const t=iI(n,e);return Ih.get(t)}function qE(n){return hg.get(n)}function Mv(n){const e=Ih.entries(),t=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[a,i]=s,[o]=a.split("_");o===n&&t.push(i)}return t}function tS(n){const{kernelName:e,backendName:t}=n,r=iI(e,t);Ih.has(r)&&ti(`The kernel '${e}' for backend '${t}' is already registered`),Ih.set(r,n)}function uj(n){const{kernelName:e}=n;hg.has(e)&&Ce().getBool("DEBUG")&&ti(`Overriding the gradient for '${e}'`),hg.set(e,n)}function tme(n,e){const t=iI(n,e);if(!Ih.has(t))throw new Error(`The kernel '${n}' for backend '${e}' is not registered`);Ih.delete(t)}function nme(n){if(!hg.has(n))throw new Error(`The gradient '${n}' for backend is not registered`);hg.delete(n)}function rme(n,e){Mv(n).forEach(r=>{const s=Object.assign({},r,{backendName:e});tS(s)})}function iI(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dj(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var qC,yL;function sme(){if(yL)return qC;yL=1,qC=e;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(k,O,P){this.low=k|0,this.high=O|0,this.unsigned=!!P}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function t(k){return(k&&k.__isLong__)===!0}e.isLong=t;var r={},s={};function a(k,O){var P,W,K;return O?(k>>>=0,(K=0<=k&&k<256)&&(W=s[k],W)?W:(P=o(k,(k|0)<0?-1:0,!0),K&&(s[k]=P),P)):(k|=0,(K=-128<=k&&k<128)&&(W=r[k],W)?W:(P=o(k,k<0?-1:0,!1),K&&(r[k]=P),P))}e.fromInt=a;function i(k,O){if(isNaN(k))return O?T:S;if(O){if(k<0)return T;if(k>=x)return D}else{if(k<=-y)return A;if(k+1>=y)return F}return k<0?i(-k,O).neg():o(k%g|0,k/g|0,O)}e.fromNumber=i;function o(k,O,P){return new e(k,O,P)}e.fromBits=o;var l=Math.pow;function c(k,O,P){if(k.length===0)throw Error("empty string");if(k==="NaN"||k==="Infinity"||k==="+Infinity"||k==="-Infinity")return S;if(typeof O=="number"?(P=O,O=!1):O=!!O,P=P||10,P<2||36<P)throw RangeError("radix");var W;if((W=k.indexOf("-"))>0)throw Error("interior hyphen");if(W===0)return c(k.substring(1),O,P).neg();for(var K=i(l(P,8)),q=S,V=0;V<k.length;V+=8){var X=Math.min(8,k.length-V),Q=parseInt(k.substring(V,V+X),P);if(X<8){var Y=i(l(P,X));q=q.mul(Y).add(i(Q))}else q=q.mul(K),q=q.add(i(Q))}return q.unsigned=O,q}e.fromString=c;function d(k,O){return typeof k=="number"?i(k,O):typeof k=="string"?c(k,O):o(k.low,k.high,typeof O=="boolean"?O:k.unsigned)}e.fromValue=d;var h=65536,p=1<<24,g=h*h,x=g*g,y=x/2,b=a(p),S=a(0);e.ZERO=S;var T=a(0,!0);e.UZERO=T;var N=a(1);e.ONE=N;var C=a(1,!0);e.UONE=C;var I=a(-1);e.NEG_ONE=I;var F=o(-1,2147483647,!1);e.MAX_VALUE=F;var D=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=D;var A=o(0,-2147483648,!1);e.MIN_VALUE=A;var _=e.prototype;return _.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},_.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(A)){var P=i(O),W=this.div(P),K=W.mul(P).sub(this);return W.toString(O)+K.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var q=i(l(O,6),this.unsigned),V=this,X="";;){var Q=V.div(q),Y=V.sub(Q.mul(q)).toInt()>>>0,j=Y.toString(O);if(V=Q,V.isZero())return j+X;for(;j.length<6;)j="0"+j;X=""+j+X}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,P=31;P>0&&(O&1<<P)==0;P--);return this.high!=0?P+33:P+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(O){return t(O)||(O=d(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},_.eq=_.equals,_.notEquals=function(O){return!this.eq(O)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(O){return this.comp(O)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(O){return this.comp(O)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(O){return this.comp(O)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(O){return this.comp(O)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(O){if(t(O)||(O=d(O)),this.eq(O))return 0;var P=this.isNegative(),W=O.isNegative();return P&&!W?-1:!P&&W?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(N)},_.neg=_.negate,_.add=function(O){t(O)||(O=d(O));var P=this.high>>>16,W=this.high&65535,K=this.low>>>16,q=this.low&65535,V=O.high>>>16,X=O.high&65535,Q=O.low>>>16,Y=O.low&65535,j=0,J=0,M=0,z=0;return z+=q+Y,M+=z>>>16,z&=65535,M+=K+Q,J+=M>>>16,M&=65535,J+=W+X,j+=J>>>16,J&=65535,j+=P+V,j&=65535,o(M<<16|z,j<<16|J,this.unsigned)},_.subtract=function(O){return t(O)||(O=d(O)),this.add(O.neg())},_.sub=_.subtract,_.multiply=function(O){if(this.isZero())return S;if(t(O)||(O=d(O)),n){var P=n.mul(this.low,this.high,O.low,O.high);return o(P,n.get_high(),this.unsigned)}if(O.isZero())return S;if(this.eq(A))return O.isOdd()?A:S;if(O.eq(A))return this.isOdd()?A:S;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(b)&&O.lt(b))return i(this.toNumber()*O.toNumber(),this.unsigned);var W=this.high>>>16,K=this.high&65535,q=this.low>>>16,V=this.low&65535,X=O.high>>>16,Q=O.high&65535,Y=O.low>>>16,j=O.low&65535,J=0,M=0,z=0,G=0;return G+=V*j,z+=G>>>16,G&=65535,z+=q*j,M+=z>>>16,z&=65535,z+=V*Y,M+=z>>>16,z&=65535,M+=K*j,J+=M>>>16,M&=65535,M+=q*Y,J+=M>>>16,M&=65535,M+=V*Q,J+=M>>>16,M&=65535,J+=W*j+K*Y+q*Q+V*X,J&=65535,o(z<<16|G,J<<16|M,this.unsigned)},_.mul=_.multiply,_.divide=function(O){if(t(O)||(O=d(O)),O.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var P=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,O.low,O.high);return o(P,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?T:S;var W,K,q;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return T;if(O.gt(this.shru(1)))return C;q=T}else{if(this.eq(A)){if(O.eq(N)||O.eq(I))return A;if(O.eq(A))return N;var V=this.shr(1);return W=V.div(O).shl(1),W.eq(S)?O.isNegative()?N:I:(K=this.sub(O.mul(W)),q=W.add(K.div(O)),q)}else if(O.eq(A))return this.unsigned?T:S;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();q=S}for(K=this;K.gte(O);){W=Math.max(1,Math.floor(K.toNumber()/O.toNumber()));for(var X=Math.ceil(Math.log(W)/Math.LN2),Q=X<=48?1:l(2,X-48),Y=i(W),j=Y.mul(O);j.isNegative()||j.gt(K);)W-=Q,Y=i(W,this.unsigned),j=Y.mul(O);Y.isZero()&&(Y=N),q=q.add(Y),K=K.sub(j)}return q},_.div=_.divide,_.modulo=function(O){if(t(O)||(O=d(O)),n){var P=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,O.low,O.high);return o(P,n.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return o(~this.low,~this.high,this.unsigned)},_.and=function(O){return t(O)||(O=d(O)),o(this.low&O.low,this.high&O.high,this.unsigned)},_.or=function(O){return t(O)||(O=d(O)),o(this.low|O.low,this.high|O.high,this.unsigned)},_.xor=function(O){return t(O)||(O=d(O)),o(this.low^O.low,this.high^O.high,this.unsigned)},_.shiftLeft=function(O){return t(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):o(0,this.low<<O-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(O){return t(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):o(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(O){if(t(O)&&(O=O.toInt()),O&=63,O===0)return this;var P=this.high;if(O<32){var W=this.low;return o(W>>>O|P<<32-O,P>>>O,this.unsigned)}else return O===32?o(P,0,this.unsigned):o(P>>>O-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},_.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var O=this.high,P=this.low;return[P&255,P>>>8&255,P>>>16&255,P>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},_.toBytesBE=function(){var O=this.high,P=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,P>>>24,P>>>16&255,P>>>8&255,P&255]},e.fromBytes=function(O,P,W){return W?e.fromBytesLE(O,P):e.fromBytesBE(O,P)},e.fromBytesLE=function(O,P){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,P)},e.fromBytesBE=function(O,P){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],P)},qC}var fj=sme();const hj=Ig(fj),ame=lP({__proto__:null,default:hj},[fj]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const od=hj||ame;function e1(n){return od.fromString(n,!0,16)}const pj=e1("c3a5c85c97cb3127"),sd=e1("b492b66fbe98f273"),Qs=e1("9ae16a3b2f90404f");function KE(n){return n.xor(n.shru(47))}function mj(n,e,t){const r=n.slice(e,e+t);return od.fromBytes(Array.from(r),!0,!0)}function rr(n,e){return mj(n,e,8)}function bL(n,e){return mj(n,e,4)}function cs(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function Kc(n,e,t=e1("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let s=e.xor(r).mul(t);return s=s.xor(s.shru(47)),s=s.mul(t),s}function ime(n,e,t,r,s,a){s=s.add(n),a=cs(a.add(s).add(r),21);const i=s;return s=s.add(e),s=s.add(t),a=a.add(cs(s,44)),[s.add(r),a.add(i)]}function pb(n,e,t,r){return ime(rr(n,e),rr(n,e+8),rr(n,e+16),rr(n,e+24),t,r)}function ome(n,e=n.length){if(e>=8){const t=Qs.add(e*2),r=rr(n,0).add(Qs),s=rr(n,e-8),a=cs(s,37).mul(t).add(r),i=cs(r,25).add(s).mul(t);return Kc(a,i,t)}if(e>=4){const t=Qs.add(e*2),r=bL(n,0);return Kc(r.shl(3).add(e),bL(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],s=n[e-1],a=t+(r<<8),i=e+(s<<2);return KE(Qs.mul(a).xor(pj.mul(i))).mul(Qs)}return Qs}function lme(n,e=n.length){const t=Qs.add(e*2),r=rr(n,0).mul(sd),s=rr(n,8),a=rr(n,e-8).mul(t),i=rr(n,e-16).mul(Qs);return Kc(cs(r.add(s),43).add(cs(a,30)).add(i),r.add(cs(s.add(Qs),18)).add(a),t)}function cme(n,e=n.length){const t=Qs.add(e*2),r=rr(n,0).mul(Qs),s=rr(n,8),a=rr(n,e-8).mul(t),i=rr(n,e-16).mul(Qs),o=cs(r.add(s),43).add(cs(a,30)).add(i),l=Kc(o,r.add(cs(s.add(Qs),18)).add(a),t),c=rr(n,16).mul(t),d=rr(n,24),h=o.add(rr(n,e-32)).mul(t),p=l.add(rr(n,e-24)).mul(t);return Kc(cs(c.add(d),43).add(cs(h,30)).add(p),c.add(cs(d.add(r),18)).add(h),t)}function gj(n,e=n.length){const t=od.fromNumber(81,!0);if(e<=32)return e<=16?ome(n,e):lme(n,e);if(e<=64)return cme(n,e);let r=t,s=t.mul(sd).add(113),a=KE(s.mul(Qs).add(113)).mul(Qs),i=[od.UZERO,od.UZERO],o=[od.UZERO,od.UZERO];r=r.mul(Qs).add(rr(n,0));let l=0;const c=(e-1>>6)*64,d=c+(e-1&63)-63;do r=cs(r.add(s).add(i[0]).add(rr(n,l+8)),37).mul(sd),s=cs(s.add(i[1]).add(rr(n,l+48)),42).mul(sd),r=r.xor(o[1]),s=s.add(i[0]).add(rr(n,l+40)),a=cs(a.add(o[0]),33).mul(sd),i=pb(n,l,i[1].mul(sd),r.add(o[0])),o=pb(n,l+32,a.add(o[1]),s.add(rr(n,l+16))),[a,r]=[r,a],l+=64;while(l!==c);const h=sd.add(a.and(255).shl(1));return l=d,o[0]=o[0].add(e-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=cs(r.add(s).add(i[0]).add(rr(n,l+8)),37).mul(h),s=cs(s.add(i[1]).add(rr(n,l+48)),42).mul(h),r=r.xor(o[1].mul(9)),s=s.add(i[0].mul(9).add(rr(n,l+40))),a=cs(a.add(o[0]),33).mul(h),i=pb(n,l,i[1].mul(h),r.add(o[0])),o=pb(n,l+32,a.add(o[1]),s.add(rr(n,l+16))),[a,r]=[r,a],Kc(Kc(i[0],o[0],h).add(KE(s).mul(pj)).add(a),Kc(i[1],o[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nc(n,e){return e==="string"?Ho(n):bu([n],e)}function ume(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function bu(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Zo(n)),Ce().getBool("DEBUG")&&ej(n,e),ume(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function Xs(){return Ce().platform.now()}function dme(n,e){return Ce().platform.fetch(n,e)}function Ho(n,e="utf-8"){return e=e||"utf-8",Ce().platform.encode(n,e)}function ql(n,e="utf-8"){return e=e||"utf-8",Ce().platform.decode(n,e)}function us(n){return Ce().platform.isTypedArray!=null?Ce().platform.isTypedArray(n):dj(n)}function Zo(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||su(n)||n==null||us(n)&&t)e.push(n);else if(Array.isArray(n)||us(n))for(let r=0;r<n.length;++r)Zo(n[r],e,t);else{let r=-1;for(const s of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Zo(n[s],e,t)}return e}const fme=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:on,arraysEqualWithNull:J5,assert:Z,assertNonNegativeIntegerDimensions:za,assertNonNull:Yd,assertShapesMatch:ks,bytesFromStringArray:nj,bytesPerElement:cg,checkConversionForErrors:ej,clamp:nu,computeStrides:$t,convertBackendValuesAndArrayBuffer:aj,createScalarValue:nc,createShuffledIndices:Vpe,decodeString:ql,distSquared:jpe,encodeString:Ho,fetch:dme,fingerPrint64:gj,flatten:Zo,getArrayFromDType:wr,getTypedArrayFromDType:fs,hasEncodingLoss:nI,hexToLong:e1,indexToLoc:Zd,inferDtype:Qd,inferFromImplicitShape:tI,isBoolean:rj,isFunction:ru,isInt:_d,isNumber:Rv,isPromise:su,isScalarShape:zpe,isString:zo,isTypedArray:us,isValidDtype:tj,locToIndex:co,makeOnesTypedArray:Xw,makeZerosNestedTypedArray:rI,makeZerosTypedArray:Es,nearestDivisor:Ov,nearestLargerEven:Kw,now:Xs,parseAxisParam:nn,randUniform:Bpe,repeatedTry:GE,rightPad:yd,shuffle:eI,shuffleCombo:Ppe,sizeFromShape:Fe,sizeToSquarishShape:$v,squeezeShape:tc,sum:Z5,swap:Al,tanh:Upe,toNestedArray:ii,toTypedArray:bu},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hme{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new mme)}profileKernel(e,t,r){let s;const a=()=>{s=r()};let i;const o=Xs();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const c of s)c.dataSync();i=Promise.resolve({kernelMs:Xs()-o})}if(Ce().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const d=s[c];d.data().then(h=>{pme(h,d.dtype,e)})}return{kernelName:e,outputs:s,inputs:t,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:s,inputs:a,extraInfo:i}=e;r.forEach(o=>{Promise.all([o.data(),s,i]).then(l=>{this.logger.logKernelProfile(t,o,l[0],l[1],a,l[2])})})}}function pme(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const s=n[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${t}'`),!0}return!1}class mme{logKernelProfile(e,t,r,s,a,i){const o=typeof s=="number"?yd(`${s}ms`,9):s.error,l=yd(e,25),c=t.rank,d=t.size,h=yd(t.shape.toString(),14);let p="";for(const g in a){const x=a[g];if(x!=null){const y=x.shape||t.shape,b=y.length;p+=`${g}: ${b}D ${b>0?y:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${h}	%c${d}	%c${p}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gme(n,e,t){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<n.length;l++){const c=n[l],d=c.inputs;for(const h in d){const p=d[h];let g=!1;for(let x=0;x<e.length;x++)if(r[p.id]){c.outputs.forEach(y=>r[y.id]=!0),g=!0,s[c.id]=!0;break}if(g)break}}const a={};a[t.id]=!0;const i={};for(let l=n.length-1;l>=0;l--){const c=n[l],d=c.inputs;for(let h=0;h<c.outputs.length;h++)if(a[c.outputs[h].id]){for(const p in d)a[d[p].id]=!0,i[c.id]=!0;break}}const o=[];for(let l=0;l<n.length;l++){const c=n[l];if(s[c.id]&&i[c.id]){const d={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(d[p]=g)}const h=Object.assign({},c);h.inputs=d,h.outputs=c.outputs,o.push(h)}}return o}function xme(n,e,t,r){for(let s=e.length-1;s>=0;s--){const a=e[s],i=[];if(a.outputs.forEach(l=>{const c=n[l.id];c!=null?i.push(c):i.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(i);for(const l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=t(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const d=a.inputs[l];if(!on(c.shape,d.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${d.shape}'`);if(n[d.id]==null)n[d.id]=c;else{const h=n[d.id];n[d.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vL=20,g0=3,KC=7;function yme(n,e,t,r){const s=$t(e),a=bme(n,e,t,s),i=e.length,o=jb(n,e,t,s,a),l=["Tensor"];return r&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function bme(n,e,t,r){const s=Fe(e),a=r[r.length-1],i=new Array(a).fill(0),o=e.length,l=t==="complex64"?I0(n):n;if(o>1)for(let c=0;c<s/a;c++){const d=c*a;for(let h=0;h<a;h++)i[h]=Math.max(i[h],_0(l[d+h],0,t).length)}return i}function _0(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(KC))} + ${parseFloat(n[1].toFixed(KC))}j`:zo(n)?r=`'${n}'`:t==="bool"?r=xj(n):r=parseFloat(n.toFixed(KC)).toString(),yd(r,e)}function xj(n){return n===0?"false":"true"}function jb(n,e,t,r,s,a=!0){const i=t==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(t==="complex64"){const y=I0(n);return[_0(y[0],0,t)]}return t==="bool"?[xj(n[0])]:[n[0].toString()]}if(l===1){if(o>vL){const b=g0*i;let S=Array.from(n.slice(0,b)),T=Array.from(n.slice((o-g0)*i,o*i));return t==="complex64"&&(S=I0(S),T=I0(T)),["["+S.map((N,C)=>_0(N,s[C],t)).join(", ")+", ..., "+T.map((N,C)=>_0(N,s[o-g0+C],t)).join(", ")+"]"]}return["["+(t==="complex64"?I0(n):Array.from(n)).map((b,S)=>_0(b,s[S],t)).join(", ")+"]"]}const c=e.slice(1),d=r.slice(1),h=r[0]*i,p=[];if(o>vL){for(let y=0;y<g0;y++){const b=y*h,S=b+h;p.push(...jb(n.slice(b,S),c,t,d,s,!1))}p.push("...");for(let y=o-g0;y<o;y++){const b=y*h,S=b+h;p.push(...jb(n.slice(b,S),c,t,d,s,y===o-1))}}else for(let y=0;y<o;y++){const b=y*h,S=b+h;p.push(...jb(n.slice(b,S),c,t,d,s,y===o-1))}const g=l===2?",":"";p[0]="["+(o>0?p[0]+g:"");for(let y=1;y<p.length-1;y++)p[y]=" "+p[y]+g;let x=`,
`;for(let y=2;y<l;y++)x+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(a?"":x),p}function I0(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zr{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=Fe(e),r!=null){const s=r.length;Z(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||wr(t,this.size),this.strides=$t(e)}set(e,...t){t.length===0&&(t=[0]),Z(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const s of e){if(s<0||s>=this.shape[t]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}t++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return no().makeTensor(this.values,this.shape,this.dtype)}}let no=null,lh=null;function vme(n){no=n}function wme(n){lh=n}class kn{constructor(e,t,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Fe(e),this.strides=$t(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return lh.buffer(this.shape,this.dtype,e)}bufferSync(){return lh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return ii(this.shape,e,this.dtype==="complex64")}arraySync(){return ii(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=no().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>ql(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),no().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=no().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>ql(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await no().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),no().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return lh.print(this,e)}clone(){return this.throwIfDisposed(),lh.clone(this)}toString(e=!1){const t=this.dataSync();return yme(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),lh.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),no().makeVariable(this,e,t,r)}}Object.defineProperty(kn,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function Pe(){return aI("Tensor",()=>kn)}Pe();class mg extends kn{constructor(e,t,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!on(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);no().disposeTensor(this),this.dataId=e.dataId,no().incRef(this,null)}dispose(){no().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(mg,Symbol.hasInstance,{value:n=>n instanceof kn&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var XE;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(XE||(XE={}));var YE;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(YE||(YE={}));var QE;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(QE||(QE={}));var ZE;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(ZE||(ZE={}));var JE;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(JE||(JE={}));const Sme={float32:ZE,int32:YE,bool:QE,complex64:JE};function ya(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return Sme[n][e]}function nS(n){return ya(n,"int32")}function yj(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function bj(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xr(n,e){if(n.dtype===e.dtype)return[n,e];const t=ya(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function vj(n,e){Z(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function Tme(n,e){return e.some(t=>t.id===n.id)}function oI(n){const e=[];return wj(n,e,new Set),e}function wj(n,e,t){if(n==null)return;if(n instanceof kn){e.push(n);return}if(!Nme(n))return;const r=n;for(const s in r){const a=r[s];t.has(a)||(t.add(a),wj(a,e,t))}}function Nme(n){return Array.isArray(n)||typeof n=="object"}const Cme=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:vj,getTensorsInContainer:oI,isTensorInList:Tme,makeTypesMatch:xr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XC(n){return n.kernelName!=null}class wL{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Ah{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new wL}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(ti(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new hme(this.backendInstance),!0}setupRegisteredKernels(){Mv(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Mv(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof qw)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,a=r.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ti(`Initialization of backend ${e} failed`),ti(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ti(`Initialization of backend ${e} failed`),ti(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:s,asyncInit:a}=this.initializeBackend(r);if(a||s)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),s=r.backend,a=this.readSync(t),i=s.refCount(t);s.disposeData(t,!0),r.backend=e,e.move(t,a,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=t(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,r){e();try{const s=r();return t(),s}catch(s){throw t(),s}}nextTensorId(){return Ah.nextTensorId++}nextVariableId(){return Ah.nextVariableId++}clone(e){const t=ue.runKernel(yp,{x:e}),r={x:e},s=i=>({x:()=>{const o="float32",l={x:i},c={dtype:o};return ue.runKernel(ap,l,c)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[t],s,a,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(pg(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const s=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-t-a-i;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const s=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=XC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(XC(e)){const{kernelName:x,inputs:y,attrs:b}=e;this.backendName==null&&this.backend;const S=pg(x,this.backendName);Z(S!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),o=()=>{const T=this.backend.numDataIds();l=S.kernelFunc({inputs:y,attrs:b,backend:this.backend});const N=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,T,N);const C=N.map(I=>I.rank!=null?I:this.makeTensorFromTensorInfo(I));if(s){const I=this.getTensorsForGradient(x,y,C);r=this.saveTensorsForBackwardMode(I)}return C}}else{const{forwardFunc:x}=e,y=b=>{s&&(r=b.map(S=>this.keep(this.clone(S))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>x(this.backend,y));const S=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,b,S),S}}const{inputs:d,attrs:h}=e,p=XC(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=o():(g=this.profiler.profileKernel(c,d,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),t=g.outputs)}),s&&this.addTapeNode(c,d,t,p,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(x=>d[x]!=null?d[x].shape:null),outputShapes:t.map(x=>x.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const s=qE(e);if(s!=null){const a=s.inputsToSave||[],i=s.outputsToSave||[];let o;s.saveAllInputs?(Z(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(c=>t[c])):o=a.map(c=>t[c]);const l=r.filter((c,d)=>i[d]);return o.concat(l)}return[]}makeTensor(e,t,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let a=e;r==="string"&&zo(e[0])&&(a=e.map(l=>Ho(l)));const i=s.write(a,t,r),o=new kn(t,r,i,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(i),c=nj(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,t,r,s){r=r||"float32";const a={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:s,dtype:a}=e,i=new kn(s,a,r,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const a=new mg(e,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*cg(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof mg||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*cg(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,s,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:a},l=qE(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=c=>(c=c.map((d,h)=>{if(d==null){const p=r[h],g=Es(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return d}),s(c.length>1?c:c[0],a,i))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=oI(e),r=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const i=this.state.activeScope.track[a];!i.kept&&!r.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(e,t,r,s=!1){if(Z(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Z(a instanceof kn,()=>"The result y returned by f() must be a tensor.");const i=gme(this.state.activeTape,t,a);if(!s&&i.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[a.id]=r??Eme(a.shape),xme(o,i,c=>this.tidy(c),kme);const l=t.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const d of c.saved)d.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return Z(ru(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{Z(t.every(o=>o instanceof kn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};t.forEach((o,l)=>{s[l]=o});const a=(o,l)=>(r=e(...t,l),Z(r.value instanceof kn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Z(ru(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(o,l)=>{const c=r.gradFunc(o,l),d=Array.isArray(c)?c:[c];Z(d.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Z(d.every(p=>p instanceof kn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return d.forEach((p,g)=>{h[g]=()=>p}),h};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Xs(),r=await this.backend.time(e);return r.wallMs=Xs()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new wL;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Ah.nextTensorId=0;Ah.nextVariableId=0;function Eme(n){const e=Xw(Fe(n),"float32");return ue.makeTensor(e,n,"float32")}function Sj(){const n=oj();if(n._tfengine==null){const e=new ij(n);n._tfengine=new Ah(e)}return qpe(n._tfengine.ENV),vme(()=>n._tfengine),n._tfengine}const ue=Sj();function kme(n,e){const t={a:n,b:e};return ue.runKernel(Jd,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(){return typeof navigator<"u"&&navigator!=null}let ek;function Ime(n){ek=n}function lI(n){if(ek!==void 0)return ek;if(n||_me()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function cI(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Ame=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:cI,isMobile:lI,mockIsMobile:Ime},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ba=Ce();ba.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ba.registerFlag("IS_BROWSER",()=>cI());ba.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ba.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ba.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ba.registerFlag("PROD",()=>!1);ba.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ba.getBool("DEBUG"));ba.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ba.registerFlag("IS_TEST",()=>!1);ba.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ba.getBool("DEBUG"));ba.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ba.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ba.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jo(n,e){let t=n;if(us(n))return e==="string"?[]:[n.length];if(yj(n)){const s=n.channels||"RGBA";return[n.height,n.width*s.length]}else if(bj(n))return[n.buffer.size/(e==null?4:cg(e))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(t)||us(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&Ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Tj(n,r,[]),r}function Tj(n,e,t){if(t=t||[],!Array.isArray(n)&&!us(n)){Z(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}Z(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),Z(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let s=0;s<n.length;++s)Tj(n[s],r,t.concat(s))}function SL(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function te(n,e,t,r="numeric"){if(n instanceof Pe())return SL(r,n.dtype,e,t),n;let s=Qd(n);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),SL(r,s,e,t),n==null||!us(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const l=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${l}'`)}const a=Jo(n,s);!us(n)&&!Array.isArray(n)&&(n=[n]);const o=s!=="string"?bu(n,s):Zo(n,[],!0);return ue.makeTensor(o,a,s)}function gg(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((a,i)=>te(a,`${e}[${i}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uI="__op";function de(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+uI;const s=(...a)=>{ue.startScope(t);try{const i=r(...a);return su(i)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(i),i}catch(i){throw ue.endScope(null),i}};return Object.defineProperty(s,"name",{value:t,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $me(n,e){const t=te(n,"real","complex"),r=te(e,"imag","complex");ks(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:t,imag:r};return ue.runKernel(n2,s)}const Kl=de({complex_:$me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vu(n,e,t,r){if(r==null)r=Qd(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(bj(n)||yj(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ue.backend.createTensorFromGPUData(n,e||t,r)}if(!us(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){za(e);const s=Fe(e),a=Fe(t);Z(s===a,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${a}`);for(let i=0;i<t.length;++i){const o=t[i],l=i===t.length-1?o!==Fe(e.slice(i)):!0;Z(t[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!us(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?bu(n,r):Zo(n,[],!0),ue.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(n,e,t){const r=Jo(n,t);return vu(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Id={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class yo{static join(e){return new yo(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>us(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+s.byteLength;this.shards.push({buffer:s,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=t-e,a=new ArrayBuffer(s),i=new Uint8Array(a);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=e+o-c.start,p=o,x=Math.min(t,c.end)-c.start,y=new Uint8Array(c.buffer,h,x-h);if(i.set(y,p),o+=y.length,t<c.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(s){return e<s.start?-1:e>=s.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Rme(this.shards,t);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Rme(n,e){let t=0,r=n.length;for(;t<=r;){const s=Math.floor((r-t)/2)+t,a=e(n[s]);if(a===0)return s;a<0?r=s:t=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ome(){Ce().set("PROD",!0)}function Dme(){Ce().set("DEBUG",!0)}function Fme(){Ce().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Lme(n){Ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Mme(){ue.disposeVariables()}function to(){return ue}function tk(){return ue.memory()}function Pme(n){return ue.profile(n)}function Te(n,e){return ue.tidy(n,e)}function tn(n){oI(n).forEach(t=>t.dispose())}function Xr(n){return ue.keep(n)}function Bme(n){return ue.time(n)}function jme(n){return ue.setBackend(n)}function zme(){return ue.ready()}function Nj(){return ue.backendName}function Ume(n){ue.removeBackend(n)}function Vme(n){return ue.findBackend(n)}function Wme(n){return ue.findBackendFactory(n)}function dI(n,e,t=1){return ue.registerBackend(n,e,t)}function fI(){return ue.backend}function Hme(n,e){Ce().setPlatform(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const au=4;async function nk(n,e){const t=[],r=[],s=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);for(let i=0;i<s.length;++i){const o=s[i],l=Array.isArray(n)?n[i].tensor:n[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const d=new Promise(async h=>{const p=await l.bytes(),g=p.reduce((b,S)=>b+S.length,0)+au*p.length,x=new Uint8Array(g);let y=0;for(let b=0;b<p.length;b++){const S=p[b],T=new Uint8Array(new Uint32Array([S.length]).buffer);x.set(T,y),y+=au,x.set(S,y),y+=S.length}h(x)});r.push(d)}else r.push(l.data());e!=null&&(c.group=e),t.push(c)}const a=await Promise.all(r);return{data:Kme(a),specs:t}}function Cj(n,e){const t=new yo(n),r={};let s=0;for(const a of e){const i=Gme(a,(o,l)=>t.slice(s+o,s+l));r[a.name]=Ej(a,t.slice(s,s+i)),s+=i}return r}function Gme(n,e){const t=Fe(n.shape);let r;if("quantization"in n){const s=n.quantization;r=Id[s.dtype]}else if(n.dtype==="string"){let s=0;for(let a=0;a<t;a++)s+=au+new Uint32Array(e(s,s+au))[0];return s}else r=Id[n.dtype];return t*r}async function qme(n,e){const t=Fe(n.shape);let r;if("quantization"in n){const s=n.quantization;r=Id[s.dtype]}else if(n.dtype==="string"){let s=0;for(let a=0;a<t;a++)s+=au+new Uint32Array(await e(s,s+au))[0];return s}else r=Id[n.dtype];return t*r}function Ej(n,e){const t=n.name,r=n.dtype,s=n.shape,a=Fe(s);let i,o=0;if("quantization"in n){const l=n.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${n.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=Id[l.dtype],d=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(d.length);for(let h=0;h<d.length;h++){const p=d[h];i[h]=p*l.scale+l.min}}else if(l.dtype==="float16")i=e0e()(d);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(d.length);for(let h=0;h<d.length;h++){const p=d[h];i[h]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);o+=a*c}else if(r==="string"){const l=Fe(n.shape);i=[];for(let c=0;c<l;c++){const d=new Uint32Array(e.slice(o,o+au))[0];o+=au;const h=new Uint8Array(e.slice(o,o+d));i.push(h),o+=d}}else{const l=Id[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const c=new Float32Array(i.length/2),d=new Float32Array(i.length/2);for(let x=0;x<c.length;x++)c[x]=i[x*2],d[x]=i[x*2+1];const h=Fi(c,s,"float32"),p=Fi(d,s,"float32"),g=Kl(h,p);return h.dispose(),p.dispose(),g}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);o+=a*l}return Fi(i,s,r)}async function TL(n,e,t){let r=new Uint8Array(e);for(;r.byteLength<t;){const{done:s,value:a}=await n.read();if(s&&a==null){const o=t-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const i=new Uint8Array(r.length+a.byteLength);i.set(r,0),i.set(new Uint8Array(a),r.length),r=i}return r.buffer}async function kj(n,e){const t={},r=n.getReader();let s=new ArrayBuffer(0);for(const a of e){const i=await qme(a,async(c,d)=>(s=await TL(r,s,d),s.slice(c,d)));s=await TL(r,s,i);const o=s.slice(0,i);s=s.slice(i);const l=Ej(a,o);if(t[a.name]=l,Nj()==="webgpu"){const c=fI();"uploadToGPU"in c&&Fe(l.shape)>=Ce().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return t}function Kme(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(a=>{if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let s=0;return t.forEach(a=>{r.set(new Uint8Array(a.buffer),s),s+=a.byteLength}),r.buffer}const hI=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function NL(n){return hI?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function Xme(n){if(hI)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Yme(n){if(hI){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function _j(n){return yo.join(n)}function CL(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);const t=n.split("/");return t[t.length-1]}function Ij(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function pI(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function mI(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),pI(n,t,r)}function t1(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:NL(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:NL(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new yo(n.weightData).byteLength}}function Pv(n){const e=[];for(const t of n)e.push(...t.weights);return e}function Qme(){const n=t=>{let r=t<<13,s=0;for(;(r&8388608)===0;)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function Zme(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function Jme(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function e0e(){const n=Qme(),e=Zme(),t=Jme();return r=>{const s=new ArrayBuffer(4*r.length),a=new Uint32Array(s);for(let i=0;i<r.length;i++){const o=r[i],l=n[t[o>>10]+(o&1023)]+e[o>>10];a[i]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return hr.instance==null&&(hr.instance=new hr),hr.instance}static registerSaveRouter(e){hr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){hr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return hr.getHandlers(e,"save")}static getLoadHandlers(e,t){return hr.getHandlers(e,"load",t)}static getHandlers(e,t,r){const s=[];return(t==="load"?hr.getInstance().loadRouters:hr.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&s.push(o)}),s}}const t0e=n=>hr.registerSaveRouter(n),n0e=n=>hr.registerLoadRouter(n),Aj=n=>hr.getSaveHandlers(n),r0e=(n,e)=>hr.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rk="tensorflowjs",sk=1,md="models_store",Wc="model_info_store";function $j(){if(!Ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function ak(n){const e=n.result;e.createObjectStore(md,{keyPath:"modelPath"}),e.createObjectStore(Wc,{keyPath:"modelPath"})}class Ad{constructor(e){if(this.indexedDB=$j(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,s)=>{const a=this.indexedDB.open(rk,sk);a.onupgradeneeded=()=>ak(a),a.onsuccess=()=>{const i=a.result;if(t==null){const o=i.transaction(md,"readonly"),c=o.objectStore(md).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=d=>(i.close(),s(c.error)),o.oncomplete=()=>i.close()}else{t.weightData=yo.join(t.weightData);const o=t1(t),l=i.transaction(Wc,"readwrite");let c=l.objectStore(Wc),d;try{d=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(p){return s(p)}let h;d.onsuccess=()=>{h=i.transaction(md,"readwrite");const p=h.objectStore(md);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:o})}catch(x){return s(x)}g.onsuccess=()=>r({modelArtifactsInfo:o}),g.onerror=x=>{c=l.objectStore(Wc);const y=c.delete(this.modelPath);y.onsuccess=()=>(i.close(),s(g.error)),y.onerror=b=>(i.close(),s(g.error))}},d.onerror=p=>(i.close(),s(d.error)),l.oncomplete=()=>{h==null?i.close():h.oncomplete=()=>i.close()}}},a.onerror=i=>s(a.error)})}}Ad.URL_SCHEME="indexeddb://";const Rj=n=>Ce().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Ad.URL_SCHEME)?s0e(n.slice(Ad.URL_SCHEME.length)):null;hr.registerSaveRouter(Rj);hr.registerLoadRouter(Rj);function s0e(n){return new Ad(n)}function a0e(n){return n.startsWith(Ad.URL_SCHEME)?n.slice(Ad.URL_SCHEME.length):n}class i0e{constructor(){this.indexedDB=$j()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(rk,sk);r.onupgradeneeded=()=>ak(r),r.onsuccess=()=>{const s=r.result,a=s.transaction(Wc,"readonly"),o=a.objectStore(Wc).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),t(o.error)),a.oncomplete=()=>s.close()},r.onerror=s=>t(r.error)})}async removeModel(e){return e=a0e(e),new Promise((t,r)=>{const s=this.indexedDB.open(rk,sk);s.onupgradeneeded=()=>ak(s),s.onsuccess=()=>{const a=s.result,i=a.transaction(Wc,"readwrite"),o=i.objectStore(Wc),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const d=o.delete(e),h=()=>{c=a.transaction(md,"readwrite");const g=c.objectStore(md).delete(e);g.onsuccess=()=>t(l.result.modelArtifactsInfo),g.onerror=x=>r(l.error)};d.onsuccess=h,d.onerror=p=>(h(),a.close(),r(l.error))}},l.onerror=d=>(a.close(),r(l.error)),i.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}},s.onerror=a=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $l="/",ch="tensorflowjs_models",Oj="info",o0e="model_topology",l0e="weight_specs",c0e="weight_data",u0e="model_metadata";function Dj(n){return{info:[ch,n,Oj].join($l),topology:[ch,n,o0e].join($l),weightSpecs:[ch,n,l0e].join($l),weightData:[ch,n,c0e].join($l),modelMetadata:[ch,n,u0e].join($l)}}function Fj(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function d0e(n){const e=n.split($l);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join($l)}function f0e(n){return n.startsWith($d.URL_SCHEME)?n.slice($d.URL_SCHEME.length):n}class $d{constructor(e){if(!Ce().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Dj(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=t1(e),a=yo.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Xme(a));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw Fj(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=s;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const o=JSON.parse(a);t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,o.signature!=null&&(t.signature=o.signature),o.userDefinedMetadata!=null&&(t.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(t.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(t.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(t.trainingConfig=o.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=Yme(i),t}}$d.URL_SCHEME="localstorage://";const Lj=n=>Ce().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith($d.URL_SCHEME)?h0e(n.slice($d.URL_SCHEME.length)):null;hr.registerSaveRouter(Lj);hr.registerLoadRouter(Lj);function h0e(n){return new $d(n)}class p0e{constructor(){Z(Ce().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Z(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=ch+$l,r=$l+Oj;for(let s=0;s<this.LS.length;++s){const a=this.LS.key(s);if(a.startsWith(t)&&a.endsWith(r)){const i=d0e(a);e[i]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=f0e(e);const t=Dj(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return Fj(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yh="://";class Ys{constructor(){this.managers={}}static getInstance(){return Ys.instance==null&&(Ys.instance=new Ys),Ys.instance}static registerManager(e,t){Z(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(yh)&&(e=e.slice(0,e.indexOf(yh))),Z(e.length>0,()=>"scheme must not be an empty string.");const r=Ys.getInstance();Z(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=Ys.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Ys.getInstance().managers)}}function zb(n){if(n.indexOf(yh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ys.getSchemes().join(",")}`);return{scheme:n.split(yh)[0],path:n.split(yh)[1]}}async function Mj(n,e,t=!1){Z(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=hr.getLoadHandlers(n);Z(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),Z(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const s=r[0],a=hr.getSaveHandlers(e);Z(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Z(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const i=a[0],o=zb(n).scheme,l=zb(n).path,c=o===zb(n).scheme,d=await s.load();t&&c&&await Ys.getManager(o).removeModel(l);const h=await i.save(d);return t&&!c&&await Ys.getManager(o).removeModel(l),h.modelArtifactsInfo}async function m0e(){const n=Ys.getSchemes(),e={};for(const t of n){const r=await Ys.getManager(t).listModels();for(const s in r){const a=t+yh+s;e[a]=r[s]}}return e}async function g0e(n){const e=zb(n);return Ys.getManager(e.scheme).removeModel(e.path)}async function x0e(n,e){return Mj(n,e,!1)}async function y0e(n,e){return Mj(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b0e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!Ce().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return dj(e)}}if(Ce().get("IS_BROWSER")){Ce().setPlatform("browser",new b0e);try{Ys.registerManager($d.URL_SCHEME,new p0e)}catch{}try{Ys.registerManager(Ad.URL_SCHEME,new i0e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0e={importFetch:()=>require("node-fetch")};let YC;class w0e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return Ce().global.fetch!=null?Ce().global.fetch(e,t):(YC==null&&(YC=v0e.importFetch()),YC(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Ce().get("IS_NODE")&&!Ce().get("IS_BROWSER")&&Ce().setPlatform("node",new w0e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(n,e="float32",t){return e=e||"float32",za(n),new zr(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0e(n,e){const t=te(n,"x","cast");if(!tj(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},s={dtype:e};return ue.runKernel(ap,r,s)}const dt=de({cast_:S0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(n){const t={x:te(n,"x","clone","string_or_numeric")};return ue.runKernel(yp,t)}const Go=de({clone_:T0e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gI(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Sj();const N0e={buffer:Yt,cast:dt,clone:Go,print:gI};wme(N0e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0e(n,e){let t=te(n,"a","add"),r=te(e,"b","add");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(Jd,s)}const Ye=de({add_:C0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E0e(n,e){let t=te(n,"a","floorDiv"),r=te(e,"b","floorDiv");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(gp,s)}const rS=de({floorDiv_:E0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0e(n,e){let t=te(n,"a","div"),r=te(e,"b","div");if([t,r]=xr(t,r),t.dtype==="int32"&&r.dtype==="int32")return rS(t,r);const s={a:t,b:r},a={};return ue.runKernel(up,s,a)}const It=de({div_:k0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _0e(n,e){let t=te(n,"a","mul"),r=te(e,"b","mul");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(kp,s)}const he=de({mul_:_0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(n){const e=te(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return ue.runKernel(ix,t)}else{const t={x:e};return ue.runKernel(Qg,t)}}const Mr=de({abs_:I0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0e(n){const t={x:te(n,"x","acos")};return ue.runKernel(Zh,t)}const xI=de({acos_:A0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $0e(n){const t={x:te(n,"x","acosh")};return ue.runKernel(Jh,t)}const yI=de({acosh_:$0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0e(n){Z(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),Z(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((s,a)=>te(s,`tensors${a}`,"addN")),t=e[0];e.forEach(s=>{if(s.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!on(s.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return ue.runKernel(Zg,r)}const Pj=de({addN_:R0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0e(n,e=null,t=!1){const s={x:te(n,"x","all","bool")},a={axis:e,keepDims:t};return ue.runKernel(Yw,s,a)}const sS=de({all_:O0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D0e(n,e=null,t=!1){const s={x:te(n,"x","any","bool")},a={axis:e,keepDims:t};return ue.runKernel(Qw,s,a)}const xg=de({any_:D0e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0e(n,e=0){const r={x:te(n,"x","argMax")},s={axis:e};return ue.runKernel(Jg,r,s)}const Rd=de({argMax_:F0e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0e(n,e=0){const r={x:te(n,"x","argMin")},s={axis:e};return ue.runKernel(ex,r,s)}const bI=de({argMin_:L0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(n){const t={x:te(n,"x","asin")};return ue.runKernel(ep,t)}const vI=de({asin_:M0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0e(n){const t={x:te(n,"x","asinh")};return ue.runKernel(tp,t)}const wI=de({asinh_:P0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(n){const t={x:te(n,"x","atan")};return ue.runKernel(np,t)}const SI=de({atan_:B0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0e(n,e){let t=te(n,"a","atan2"),r=te(e,"b","atan2");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(sp,s)}const TI=de({atan2_:j0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0e(n){const t={x:te(n,"x","atanh")};return ue.runKernel(rp,t)}const NI=de({atanh_:z0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1(n,e,t,r,s="NHWC",a){const i=n[3],o=[...e,i],l=sc(s);return ps(n,o,t,a,r,null,null,l)}function zi(n,e,t,r,s,a,i="channelsLast"){const[o,l]=yg(e);let c;if(i==="channelsLast")c=[o,l,n[3],n[3]];else if(i==="channelsFirst")c=[o,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return ps(n,c,t,r,s,a,!1,i)}function rc(n,e,t,r,s,a,i="NDHWC"){const[o,l,c]=ik(e);let d,h;if(i==="NDHWC")h="channelsLast",d=[o,l,c,n[4],n[4]];else if(i==="NCDHW")h="channelsFirst",d=[o,l,c,n[1],n[1]];else throw new Error(`Unknown dataFormat ${i}`);return wu(n,d,t,r,s,!1,h,a)}function ps(n,e,t,r,s,a,i=!1,o="channelsLast"){let[l,c,d,h]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,d,h]=n;else if(o==="channelsFirst")[l,h,c,d]=n;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,,x]=e,[y,b]=yg(t),[S,T]=yg(r),N=bh(p,S),C=bh(g,T),{padInfo:I,outHeight:F,outWidth:D}=W0e(s,c,d,y,b,N,C,a,o),A=i?x*h:x;let _;return o==="channelsFirst"?_=[l,A,F,D]:o==="channelsLast"&&(_=[l,F,D,A]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:d,inChannels:h,outHeight:F,outWidth:D,outChannels:A,padInfo:I,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:g,effectiveFilterHeight:N,effectiveFilterWidth:C,dilationHeight:S,dilationWidth:T,inShape:n,outShape:_,filterShape:e}}function wu(n,e,t,r,s,a=!1,i="channelsLast",o){let[l,c,d,h,p]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,d,h,p]=n;else if(i==="channelsFirst")[l,p,c,d,h]=n;else throw new Error(`Unknown dataFormat ${i}`);const[g,x,y,,b]=e,[S,T,N]=ik(t),[C,I,F]=ik(r),D=bh(g,C),A=bh(x,I),_=bh(y,F),{padInfo:k,outDepth:O,outHeight:P,outWidth:W}=H0e(s,c,d,h,S,T,N,D,A,_,o),K=a?b*p:b;let q;return i==="channelsFirst"?q=[l,K,O,P,W]:i==="channelsLast"&&(q=[l,O,P,W,K]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:d,inWidth:h,inChannels:p,outDepth:O,outHeight:P,outWidth:W,outChannels:K,padInfo:k,strideDepth:S,strideHeight:T,strideWidth:N,filterDepth:g,filterHeight:x,filterWidth:y,effectiveFilterDepth:D,effectiveFilterHeight:A,effectiveFilterWidth:_,dilationDepth:C,dilationHeight:I,dilationWidth:F,inShape:n,outShape:q,filterShape:e}}function U0e(n,e,t,r,s){r==null&&(r=CI(n,e,t));const a=n[0],i=n[1],o=bg((a-e+2*r)/t+1,s),l=bg((i-e+2*r)/t+1,s);return[o,l]}function V0e(n,e,t,r,s,a){s==null&&(s=CI(n,e[0],r[0]));const i=[0,0,0,t];for(let o=0;o<3;o++)n[o]+2*s>=e[o]&&(i[o]=bg((n[o]-e[o]+2*s)/r[o]+1,a));return i}function CI(n,e,t,r=1){const s=bh(e,r);return Math.floor((n[0]*(t-1)-t+s)/2)}function yg(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function ik(n){return typeof n=="number"?[n,n,n]:n}function bh(n,e){return e<=1?n:n+(n-1)*(e-1)}function W0e(n,e,t,r,s,a,i,o,l){let c,d,h;if(typeof n=="number"){c={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const g=U0e([e,t],a,r,n,o);d=g[0],h=g[1]}else if(n==="same"){d=Math.ceil(e/r),h=Math.ceil(t/s);const p=Math.max(0,(d-1)*r+a-e),g=Math.max(0,(h-1)*s+i-t),x=Math.floor(p/2),y=p-x,b=Math.floor(g/2),S=g-b;c={top:x,bottom:y,left:b,right:S,type:"SAME"}}else if(n==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((e-a+1)/r),h=Math.ceil((t-i+1)/s);else if(typeof n=="object"){const p=l==="channelsLast"?n[1][0]:n[2][0],g=l==="channelsLast"?n[1][1]:n[2][1],x=l==="channelsLast"?n[2][0]:n[3][0],y=l==="channelsLast"?n[2][1]:n[3][1];c={top:p,bottom:g,left:x,right:y,type:p===0&&g===0&&x===0&&y===0?"VALID":"EXPLICIT"},d=bg((e-a+p+g)/r+1,o),h=bg((t-i+x+y)/s+1,o)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:c,outHeight:d,outWidth:h}}function H0e(n,e,t,r,s,a,i,o,l,c,d){let h,p,g,x;if(n==="valid"&&(n=0),typeof n=="number"){h={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const b=V0e([e,t,r,1],[o,l,c],1,[s,a,i],n,d);p=b[0],g=b[1],x=b[2]}else if(n==="same"){p=Math.ceil(e/s),g=Math.ceil(t/a),x=Math.ceil(r/i);const y=(p-1)*s+o-e,b=(g-1)*a+l-t,S=(x-1)*i+c-r,T=Math.floor(y/2),N=y-T,C=Math.floor(b/2),I=b-C,F=Math.floor(S/2),D=S-F;h={top:C,bottom:I,left:F,right:D,front:T,back:N,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:h,outDepth:p,outHeight:g,outWidth:x}}function bg(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function iu(n){const[e,t,r]=yg(n);return e===1&&t===1&&r===1}function _s(n,e){return iu(n)||iu(e)}function Od(n){return yg(n).every(e=>e>0)}function sc(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function aa(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")Z(_d(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{Z(_d(s),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${s}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G0e(n,e){const r={x:te(n,"x","reshape","string_or_numeric")},s={shape:e};return ue.runKernel(jx,r,s)}const xe=de({reshape_:G0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0e(n,e,t,r,s){const a=te(n,"x","avgPool","float32"),i=1;Z(_s(t,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`);let o=a,l=!1;a.rank===3&&(l=!0,o=xe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Z(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),aa("avgPool",r,s);const c={x:o},d={filterSize:e,strides:t,pad:r,dimRoundingMode:s};let h=ue.runKernel(tx,c,d);return h=dt(h,a.dtype),l?xe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const r1=de({avgPool_:q0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K0e(n,e,t,r,s,a="NDHWC"){const i=te(n,"x","avgPool3d","float32");let o=i,l=!1;i.rank===4&&(l=!0,o=xe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Z(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),Z(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Z(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),aa("avgPool3d",r,s);const c={x:o},d={filterSize:e,strides:t,pad:r,dimRoundingMode:s,dataFormat:a};let h=ue.runKernel(nx,c,d);return h=dt(h,o.dtype),l?xe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const EI=de({avgPool3d_:K0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X0e(n,e=0){Z(n.length>=1,()=>"Pass at least one tensor to concat");const t=gg(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),t.length===1)return Go(t[0]);const r=t,s={axis:e};return ue.runKernel(ox,r,s)}const Ir=de({concat_:X0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0e(n,e,t=!1,r=!1){let s=te(n,"a","matMul"),a=te(e,"b","matMul");[s,a]=xr(s,a);const i={a:s,b:a},o={transposeA:t,transposeB:r};return ue.runKernel(rx,i,o)}const en=de({matMul_:Y0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(n){const t={x:te(n,"x","sigmoid","float32")};return ue.runKernel(Pp,t)}const uo=de({sigmoid_:Q0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0e(n,e,t){const r=te(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},a={begin:e,size:t};return ue.runKernel(Hx,s,a)}const hn=de({slice_:Z0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0e(n){const t={x:te(n,"x","tanh","float32")};return ue.runKernel(Wp,t)}const ou=de({tanh_:J0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(n,e,t,r,s,a){const i=te(n,"forgetBias","basicLSTMCell"),o=te(e,"lstmKernel","basicLSTMCell"),l=te(t,"lstmBias","basicLSTMCell"),c=te(r,"data","basicLSTMCell"),d=te(s,"c","basicLSTMCell"),h=te(a,"h","basicLSTMCell"),p=Ir([c,h],1),g=en(p,o),x=Ye(g,l),y=x.shape[0],b=x.shape[1]/4,S=[y,b],T=hn(x,[0,0],S),N=hn(x,[0,b],S),C=hn(x,[0,b*2],S),I=hn(x,[0,b*3],S),F=Ye(he(uo(T),ou(N)),he(d,uo(Ye(i,C)))),D=he(ou(F),uo(I));return[F,D]}const Bj=de({basicLSTMCell_:ege});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tge(n,e,t){const r=te(n,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);Z(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),Z(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),Z(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const a={x:r},i={blockShape:e,crops:t};return ue.runKernel(sx,a,i)}const s1=de({batchToSpaceND_:tge});function nge(n){let e;return n.rank===0||n.rank===1?e=xe(n,[1,1,1,n.size]):n.rank===2?e=xe(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=xe(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rge(n,e,t,r,s,a){a==null&&(a=.001);const i=te(n,"x","batchNorm"),o=te(e,"mean","batchNorm"),l=te(t,"variance","batchNorm");let c;s!=null&&(c=te(s,"scale","batchNorm"));let d;r!=null&&(d=te(r,"offset","batchNorm")),Z(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(d==null||o.rank===d.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:nge(i),scale:c,offset:d,mean:o,variance:l},g={varianceEpsilon:a},x=ue.runKernel(gx,p,g);return xe(x,i.shape)}const qp=de({batchNorm_:rge});function sge(n,e,t,r,s,a){const i=te(n,"x","batchNorm"),o=te(e,"mean","batchNorm"),l=te(t,"variance","batchNorm");let c;s!=null&&(c=te(s,"scale","batchNorm"));let d;return r!=null&&(d=te(r,"offset","batchNorm")),Z(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),Z(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),Z(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&Z(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),d!=null&&Z(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${d.rank}.`),qp(i,o,l,d,c,a)}const kI=de({batchNorm2d_:sge});function age(n,e,t,r,s,a){const i=te(n,"x","batchNorm"),o=te(e,"mean","batchNorm"),l=te(t,"variance","batchNorm");let c;s!=null&&(c=te(s,"scale","batchNorm"));let d;return r!=null&&(d=te(r,"offset","batchNorm")),Z(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),Z(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),Z(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&Z(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),d!=null&&Z(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${d.rank}.`),qp(i,o,l,d,c,a)}const _I=de({batchNorm3d_:age});function ige(n,e,t,r,s,a){const i=te(n,"x","batchNorm"),o=te(e,"mean","batchNorm"),l=te(t,"variance","batchNorm");let c;s!=null&&(c=te(s,"scale","batchNorm"));let d;return r!=null&&(d=te(r,"offset","batchNorm")),Z(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),Z(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),Z(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&Z(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),d!=null&&Z(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${d.rank}.`),qp(i,o,l,d,c,a)}const II=de({batchNorm4d_:ige});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oge(n,e,t){const r=te(n,"x","bincount"),s=te(e,"weights","bincount");Z(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),Z(t>=0,()=>`size must be non-negative, but got ${t}.`),Z(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const a={x:r,weights:s},i={size:t};return ue.runKernel(e2,a,i)}const AI=de({bincount_:oge});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lge(n,e){const t=te(n,"x","bitwiseAnd"),r=te(e,"y","bitwiseAnd");if(!on(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if(t.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);const s={a:t,b:r};return ue.runKernel(ax,s)}const jj=de({bitwiseAnd_:lge});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(n,e){const t=te(n,"s0","broadcastArgs","int32"),r=te(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:t,s1:r};return ue.runKernel(t2,s)}const zj=de({broadcastArgs_:cge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uge(n,e){let t=te(n,"broadcastTo","x");const r=t.shape;if(za(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const c=t.shape.slice();for(;c.length<e.length;)c.unshift(1);t=xe(t,c)}const s=t.shape,a=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])a[c]=1;else if(t.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((c,d)=>c>1?d:-1).filter(c=>c>=0).length===0)return Go(t);const o={x:t},l={reps:a};return ue.runKernel(Hp,o,l)}const vd=de({broadcastTo_:uge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dge(n){const t={x:te(n,"x","ceil","float32")};return ue.runKernel(ip,t)}const $I=de({ceil_:dge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ef(n,e,t){za(n),t=t||Qd(e);const r={shape:n,value:e,dtype:t};return ue.runKernel(x2,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fge(n,e,t){const r=te(n,"x","clipByValue");if(Z(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return ef(r.shape,e,r.dtype);const s={x:r},a={clipValueMin:e,clipValueMax:t};return ue.runKernel(op,s,a)}const va=de({clipByValue_:fge});function hge(n){return Ir(n,0)}const RI=de({concat1d_:hge});function pge(n,e){return Ir(n,e)}const OI=de({concat2d_:pge});function mge(n,e){return Ir(n,e)}const DI=de({concat3d_:mge});function gge(n,e){return Ir(n,e)}const FI=de({concat4d_:gge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xge(n,e,t,r,s="NHWC",a=[1,1],i){const o=te(n,"x","conv2d","float32"),l=te(e,"filter","conv2d","float32");let c=o,d=!1;o.rank===3&&(d=!0,c=xe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Z(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),Z(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),aa("conv2d",r,i);const h=s==="NHWC"?c.shape[3]:c.shape[1];Z(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),Z(_s(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Z(Od(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),Z(Od(t),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},x=ue.runKernel(lx,p,g);return d?xe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const Xl=de({conv2d_:xge});function yge(n,e,t,r,s="NWC",a=1,i){const o=te(n,"x","conv1d"),l=te(e,"filter","conv1d");let c=o,d=!1;o.rank===2&&(d=!0,c=xe(o,[1,o.shape[0],o.shape[1]])),Z(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),Z(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),aa("conv1d",r,i),Z(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),Z(_s(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),Z(Od(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),Z(Od(t),()=>"Error in conv1D: Stride should be larger than 0."),Z(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=xe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=xe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),b=Xl(p,h,[1,t],r,"NHWC",[1,a],i);return d?xe(b,[b.shape[2],b.shape[3]]):xe(b,[b.shape[0],b.shape[2],b.shape[3]])}const aS=de({conv1d_:yge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bge(n,e,t,r,s,a="NHWC",i){Z(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let o=n,l=e,c=!1;e.rank===3&&(c=!0,l=xe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,n[0],n[1],n[2]]),Z(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),Z(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),Z(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const d=a==="NHWC"?o[3]:o[1],h=a==="NHWC"?l.shape[3]:l.shape[1];Z(d===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${t.shape[2]}.`),Z(h===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${t.shape[3]}.`),aa("conv2dDerInput",s,i);const p={dy:l,filter:t},g={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,inputShape:o},x=ue.runKernel(cx,p,g);return c?xe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const LI=de({conv2DBackpropInput_:bge});function vge(n,e,t,r,s,a){const i=te(n,"x","conv2dTranspose"),o=te(e,"filter","conv2dTranspose");return LI(t,i,o,r,s,"NHWC",a)}const iS=de({conv2dTranspose_:vge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wge(n,e,t,r,s="NDHWC",a=[1,1,1]){const i=te(n,"x","conv3d"),o=te(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=xe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Z(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),Z(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),Z(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),Z(_s(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Z(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),Z(Od(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),Z(Od(t),()=>"Error in conv3D: Strides should be larger than 0.");const d={x:l,filter:o},h={strides:t,pad:r,dataFormat:s,dilations:a},p=ue.runKernel(ux,d,h);return c?xe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const MI=de({conv3d_:wge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(n,e,t,r,s){Z(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,i=e,o=!1;e.rank===4&&(o=!0,i=xe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,n[0],n[1],n[2],n[3]]);const l=a[4],c=i.shape[4];Z(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),Z(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),Z(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),Z(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),Z(c===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[4]}.`);const d={dy:i,filter:t},h={pad:s,strides:r,inputShape:a},p=ue.runKernel(a2,d,h);return o?xe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const Uj=de({conv3DBackpropInput_:Sge});function Tge(n,e,t,r,s){const a=te(n,"x","conv3dTranspose"),i=te(e,"filter","conv3dTranspose");return Uj(t,a,i,r,s)}const PI=de({conv3dTranspose_:Tge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nge(n){const t={x:te(n,"x","cos","float32")};return ue.runKernel(lp,t)}const a1=de({cos_:Nge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cge(n){const t={x:te(n,"x","cosh","float32")};return ue.runKernel(cp,t)}const oS=de({cosh_:Cge});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ege(n,e=0,t=!1,r=!1){const a={x:te(n,"x","cumprod")},i={axis:e,exclusive:t,reverse:r};return ue.runKernel(i2,a,i)}const vg=de({cumprod_:Ege});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kge(n,e=0,t=!1,r=!1){const a={x:te(n,"x","cumsum")},i={axis:e,exclusive:t,reverse:r};return ue.runKernel(dx,a,i)}const lS=de({cumsum_:kge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ge(n,e,t,r=!1){const s=te(n,"x","denseBincount"),a=te(e,"weights","denseBincount");Z(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),Z(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),Z(t>=0,()=>`size must be non-negative, but got ${t}.`),Z(a.size===s.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${a.shape}.`);const i={x:s,weights:a},o={size:t,binaryOutput:r};return ue.runKernel(l2,i,o)}const Bv=de({denseBincount_:_ge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ige(n,e,t="NHWC"){const r=te(n,"x","depthToSpace","float32"),s=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],i=t==="NHWC"?r.shape[3]:r.shape[1];Z(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),Z(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),Z(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),Z(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:t};return ue.runKernel(c2,o,l)}const BI=de({depthToSpace_:Ige});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Age(n,e,t,r,s="NHWC",a=[1,1],i){const o=te(n,"x","depthwiseConv2d","float32"),l=te(e,"filter","depthwiseConv2d","float32");let c=o,d=!1;o.rank===3&&(d=!0,c=xe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Z(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),Z(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=s==="NHWC"?c.shape[3]:c.shape[1];Z(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),aa("depthwiseConv2d",r,i);const p={x:c,filter:l},g={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},x=ue.runKernel(fx,p,g);return d?xe(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const Kp=de({depthwiseConv2d_:Age});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ge(n){const t={x:te(n,"x","diag")};return ue.runKernel(f2,t)}const Vj=de({diag_:$ge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rge(n,e,t,r,s=[1,1],a="NHWC"){const i=te(n,"x","dilation2d"),o=te(e,"filter","dilation2d");Z(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),Z(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),Z(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=i,c=!1;i.rank===3&&(l=xe(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),Z(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const d={x:l,filter:o},h={strides:t,pad:r,dilations:s},p=ue.runKernel(hx,d,h);return c?xe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const jI=de({dilation2d_:Rge});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dd(n,e){const t=n.length,r=[];for(let s=0;s<t;s++){const a=t-1-s,i=n[a]||1;(e[e.length-1-s]||1)>1&&i===1&&r.unshift(a)}return r}function Ur(n,e){const t=[];for(let r=0;r<e.length;r++){const s=n[n.length-r-1],a=e.length-r-1,i=e[a];(s==null||s===1&&i>1)&&t.unshift(a)}return t}function Gt(n,e){const t=Math.max(n.length,e.length),r=new Array(t);for(let s=0;s<t;s++){let a=n[n.length-s-1];a==null&&(a=1);let i=e[e.length-s-1];if(i==null&&(i=1),a===1)r[t-s-1]=i;else if(i===1)r[t-s-1]=a;else if(a!==i){const o=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(o)}else r[t-s-1]=a}return r}const Oge=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Gt,getBroadcastDims:Dd,getReductionAxes:Ur},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dge(n,e){let t=te(n,"a","equal","string_or_numeric"),r=te(e,"b","equal","string_or_numeric");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(px,s)}const Mi=de({equal_:Dge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fge(n,e,t){const r=te(e,"a","where"),s=te(t,"b","where"),a=te(n,"condition","where","bool"),i=Gt(Gt(a.shape,r.shape),s.shape),o=vd(a,i),l=vd(r,i),c=vd(s,i),d={condition:o,t:l,e:c};return ue.runKernel(Wx,d)}const Cs=de({where_:Fge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lge(n){const t={x:te(n,"x","zerosLike")};return ue.runKernel(Jx,t)}const mn=de({zerosLike_:Lge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mge(n,e){let t=te(n,"a","div"),r=te(e,"b","div");[t,r]=xr(t,r);const s=It(t,r),a=mn(s),i=Mi(r,a);return Cs(i,a,s)}const zI=de({divNoNan_:Mge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pge(n,e){const t=te(n,"t1","dot"),r=te(e,"t2","dot");Z((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const s=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];if(Z(s===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${a}.`),t.rank===1&&r.rank===1){const i=xe(t,[1,-1]),o=xe(r,[-1,1]),l=en(i,o);return xe(l,[])}else if(t.rank===1&&r.rank===2){const i=xe(t,[1,-1]),o=xe(r,[r.shape[0],r.shape[1]]),l=en(i,o);return xe(l,[l.size])}else if(t.rank===2&&r.rank===1){const i=xe(r,[-1,1]),o=en(t,i);return xe(o,[o.size])}else{const i=xe(r,[r.shape[0],r.shape[1]]);return en(t,i)}}const UI=de({dot_:Pge});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bge(n,...e){const t=e.map((s,a)=>te(s,`tensors${a}`,"einsum")),r={equation:n};return ue.runKernel(p2,t,r)}const ld=de({einsum_:Bge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jge(n){const t={x:te(n,"x","elu","float32")};return ue.runKernel(dp,t)}const Xp=de({elu_:jge});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zge(n,e){const t=te(n,"x","ensureShape","string_or_numeric");if(!J5(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const Wj=de({ensureShape_:zge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uge(n){let e=te(n,"x","erf");Z(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=dt(e,"float32"));const t={x:e};return ue.runKernel(fp,t)}const cS=de({erf_:Uge});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VI(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function Hj(n,e,t){const r=n.length+e.length,s=[];let a=0,i=0;for(let o=0;o<r;o++)t.indexOf(o)===-1?s.push(n[a++]):s.push(e[i++]);return s}function ms(n,e){const t=[],r=n.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);const s=e.map(a=>n[a]);return[t,s]}function $r(n,e){const t=e.map(r=>1);return Hj(n,t,e)}function Is(n,e,t){Z(VI(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function yr(n,e){if(VI(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function Su(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Rr(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vge(n,e=null,t=!1){const s={x:te(n,"x","max")},a={reductionIndices:e,keepDims:t};return ue.runKernel(Ex,s,a)}const oi=de({max_:Vge});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wge(n,e=null,t=!1){const s={x:te(n,"x","min")},a={axis:e,keepDims:t};return ue.runKernel(Ax,s,a)}const $h=de({min_:Wge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hge(n,e){let t=te(n,"base","pow"),r=te(e,"exp","pow");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(_p,s)}const el=de({pow_:Hge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rt(n,e){if((us(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&us(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vu(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gge(n){const t={x:te(n,"x","sqrt","float32")};return ue.runKernel(jp,t)}const hs=de({sqrt_:Gge});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(n){const e=te(n,"x","square"),t={};return ue.runKernel("Square",{x:e},t)}const jn=de({square_:qge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(n,e=null,t=!1){let r=te(n,"x","sum");r.dtype==="bool"&&(r=dt(r,"int32"));const s={x:r},a={axis:e,keepDims:t};return ue.runKernel(Gx,s,a)}const St=de({sum_:Kge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(n,e="euclidean",t=null,r=!1){n=te(n,"x","norm");const s=Gj(n,e,t);let a=s.shape;if(r){const i=nn(t,n.shape);a=$r(s.shape,i)}return xe(s,a)}function Gj(n,e,t=null){if(n.rank===0)return Mr(n);if(n.rank!==1&&t===null)return Gj(xe(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return St(Mr(n),t);if(e===1/0)return oi(Mr(n),t);if(e===-1/0)return $h(Mr(n),t);if(e==="euclidean"||e===2)return hs(St(el(Mr(n),Rt(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return oi(St(Mr(n),t[0]),t[1]-1);if(e===1/0)return oi(St(Mr(n),t[1]),t[0]);if(e===-1/0)return $h(St(Mr(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return hs(St(jn(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const Yp=de({norm_:Xge});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(n,e=null,t=!1){return Yp(n,"euclidean",e,t)}const WI=de({euclideanNorm_:Yge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qge(n){const t={x:te(n,"x","exp")};return ue.runKernel(hp,t)}const wa=de({exp_:Qge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zge(n,e=0){const t=te(n,"x","expandDims","string_or_numeric");Z(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},s={dim:e};return ue.runKernel(mx,r,s)}const Ps=de({expandDims_:Zge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jge(n){const t={x:te(n,"x","expm1")};return ue.runKernel(pp,t)}const HI=de({expm1_:Jge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(n,e){const t=te(n,"x","tile","string_or_numeric");Z(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},s={reps:e};return ue.runKernel(Hp,r,s)}const ri=de({tile_:exe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(n,e,t,r="float32"){e==null&&(e=n);const s=Yt([n,e],r),a=n<=e?n:e;for(let o=0;o<a;++o)s.set(1,o,o);const i=xe(s.toTensor(),[n,e]);if(t==null)return i;if(t.length===1)return ri(Ps(i,0),[t[0],1,1]);if(t.length===2)return ri(Ps(Ps(i,0),0),[t[0],t[1],1,1]);if(t.length===3)return ri(Ps(Ps(Ps(i,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const uS=de({eye_:txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(n){const t={x:te(n,"x","floor","float32")};return ue.runKernel(mp,t)}const Qp=de({floor_:nxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(n,e,t=0,r=0){const s=te(n,"x","gather"),a=te(e,"indices","gather","int32"),i={x:s,indices:a},o={axis:t,batchDims:r};return ue.runKernel(xx,i,o)}const Zp=de({gather_:rxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(n,e){let t=te(n,"a","greater","string_or_numeric"),r=te(e,"b","greater","string_or_numeric");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(yx,s)}const Na=de({greater_:sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(n,e){let t=te(n,"a","greaterEqual","string_or_numeric"),r=te(e,"b","greaterEqual","string_or_numeric");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(xp,s)}const ac=de({greaterEqual_:axe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(n){const t={input:te(n,"input","imag")};return ue.runKernel(w2,t)}const i1=de({imag_:ixe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(n){const t={x:te(n,"x","isFinite")};return ue.runKernel(bp,t)}const GI=de({isFinite_:oxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lxe(n){const t={x:te(n,"x","isInf")};return ue.runKernel(vp,t)}const qI=de({isInf_:lxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(n){const t={x:te(n,"x","isNaN")};return ue.runKernel(wp,t)}const KI=de({isNaN_:cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(n,e=.2){const r={x:te(n,"x","leakyRelu")},s={alpha:e};return ue.runKernel(bx,r,s)}const o1=de({leakyRelu_:uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(n,e){let t=te(n,"a","less","string_or_numeric"),r=te(e,"b","less","string_or_numeric");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(vx,s)}const Rh=de({less_:dxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fxe(n,e){let t=te(n,"a","lessEqual","string_or_numeric"),r=te(e,"b","lessEqual","string_or_numeric");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(wx,s)}const Tu=de({lessEqual_:fxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qj(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return ue.runKernel(S2,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(n,e=5,t=1,r=1,s=.5){const a=te(n,"x","localResponseNormalization");Z(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),Z(_d(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=a,o=!1;a.rank===3&&(o=!0,i=xe(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},c={depthRadius:e,bias:t,alpha:r,beta:s},d=ue.runKernel(Cx,l,c);return o?xe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const XI=de({localResponseNormalization_:hxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pxe(n){const t={x:te(n,"x","log","float32")};return ue.runKernel(Sp,t)}const Ma=de({log_:pxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(n){const t={x:te(n,"x","log1p")};return ue.runKernel(Tp,t)}const l1=de({log1p_:mxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe(n){return Z(ru(n),()=>"The f passed in grad(f) must be a function"),(e,t)=>{const r=te(e,"x","tf.grad","string_or_numeric"),s=t!=null?te(t,"dy","tf.grad"):null;return ue.tidy(()=>{const{value:a,grads:i}=ue.gradients(()=>n(r),[r],s);return s!=null&&ks(a.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),dS(i),i[0]})}}function xxe(n){return Z(ru(n),()=>"The f passed in grads(f) must be a function"),(e,t)=>{Z(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=gg(e,"args","tf.grads","string_or_numeric"),s=t!=null?te(t,"dy","tf.grads"):null;return ue.tidy(()=>{const{value:a,grads:i}=ue.gradients(()=>n(...r),r,s);return s!=null&&ks(a.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),dS(i),i})}}function yxe(n){return Z(ru(n),()=>"The f passed in valueAndGrad(f) must be a function"),(e,t)=>{Z(e instanceof kn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),Z(t==null||t instanceof kn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=ue.gradients(()=>n(e),[e],t);return dS(r),{grad:r[0],value:s}}}function bxe(n){return Z(ru(n),()=>"The f passed in valueAndGrads(f) must be a function"),(e,t)=>{Z(Array.isArray(e)&&e.every(s=>s instanceof kn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),Z(t==null||t instanceof kn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=ue.gradients(()=>n(...e),e,t);return t!=null&&ks(r.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),dS(r.grads),r}}function Kj(n,e){Z(ru(n),()=>"The f passed in variableGrads(f) must be a function"),Z(e==null||Array.isArray(e)&&e.every(c=>c instanceof mg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const c in ue.registeredVariables)e.push(ue.registeredVariables[c])}const r=t?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),Z(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const a=!0,{value:i,grads:o}=ue.gradients(n,e,null,a);Z(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Z(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((c,d)=>{o[d]!=null&&(l[c.name]=o[d])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:i,grads:l}}function tl(n){return ue.customGrad(n)}function dS(n){if(n.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(n){const t={x:te(n,"x","neg")};return ue.runKernel(Rx,t)}const sr=de({neg_:vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(n){const t={x:te(n,"x","softplus")};return ue.runKernel(Bp,t)}const tf=de({softplus_:wxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(n){const e=te(n,"x","logSigmoid");return tl(r=>({value:sr(tf(sr(r))),gradFunc:i=>he(i,uo(sr(r)))}))(e)}const YI=de({logSigmoid_:Sxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(n,e){let t=te(n,"a","sub"),r=te(e,"b","sub");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(Up,s)}const bt=de({sub_:Txe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(n,e=-1){const t=te(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return tl((s,a)=>{const o=oi(s,e,!0),l=bt(s,o),c=bt(dt(l,"float32"),Ma(St(wa(l),e,!0)));return a([c]),{value:c,gradFunc:(h,p)=>{const[g]=p,x=!0,y=wa(g);return bt(h,he(St(h,e,x),y))}}})(t)}const fS=de({logSoftmax_:Nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(n,e=null,t=!1){const r=te(n,"x","logSumExp"),s=nn(e,r.shape),a=oi(r,s,!0),i=bt(r,a),o=wa(i),l=St(o,s),c=Ma(l),d=Ye(xe(a,c.shape),c);if(t){const h=$r(d.shape,s);return xe(d,h)}return d}const c1=de({logSumExp_:Cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(n,e){const t=te(n,"a","logicalAnd","bool"),r=te(e,"b","logicalAnd","bool");Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(Sx,s)}const po=de({logicalAnd_:Exe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(n){const t={x:te(n,"x","logicalNot","bool")};return ue.runKernel(Tx,t)}const u1=de({logicalNot_:kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(n,e){const t=te(n,"a","logicalOr","bool"),r=te(e,"b","logicalOr","bool");Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(Nx,s)}const hS=de({logicalOr_:_xe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(n,e){const t=te(n,"a","logicalXor","bool"),r=te(e,"b","logicalXor","bool");return Gt(t.shape,r.shape),po(hS(n,e),u1(po(n,e)))}const QI=de({logicalXor_:Ixe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mb=2147483648;function Axe(n,e,t="left"){const r=te(n,"sortedSequence","searchSorted"),s=te(e,"values","searchSorted"),a=r.shape[r.shape.length-1],i=s.shape[s.shape.length-1],o=xe(r,[-1,a]),l=xe(s,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Fe(l.shape)>=mb)throw new Error(`values tensor size must less than ${mb}`);if(o.shape[1]>=mb)throw new Error(`trailing dim_size must less than ${mb} for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},d={side:t};return ue.runKernel(j2,c,d)}const pS=de({searchSorted_:Axe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xj(n,e){return pS(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(n,e,t,r,s){const a=te(n,"x","maxPool"),i=1;let o=a,l=!1;a.rank===3&&(l=!0,o=xe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Z(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),Z(_s(t,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${i}'`),aa("maxPool",r,s);const c={x:o},d={filterSize:e,strides:t,pad:r,dimRoundingMode:s},h=ue.runKernel(kx,c,d);return l?xe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const d1=de({maxPool_:$xe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rxe(n,e=[1,1,1],t,r,s,a="NDHWC"){const i=te(n,"x","maxPool3d");let o=i,l=!1;i.rank===4&&(l=!0,o=xe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Z(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),Z(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),aa("maxPool3d",r,s);const c={x:o},d={filterSize:e,strides:t,pad:r,dimRoundingMode:s,dataFormat:a},h=ue.runKernel(_x,c,d);return l?xe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const ZI=de({maxPool3d_:Rxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oxe(n,e,t,r,s=!1){const i={x:te(n,"x","maxPoolWithArgmax")},o={filterSize:e,strides:t,pad:r,includeBatchInIndex:s},l=ue.runKernel(E2,i,o);return{result:l[0],indexes:l[1]}}const Yj=de({maxPoolWithArgmax_:Oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(n,e){let t=te(n,"a","maximum"),r=te(e,"b","maximum");[t,r]=xr(t,r),t.dtype==="bool"&&(t=dt(t,"int32"),r=dt(r,"int32")),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(Np,s)}const ol=de({maximum_:Dxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(n,e=null,t=!1){const s={x:te(n,"x","mean")},a={axis:e,keepDims:t};return ue.runKernel(Ix,s,a)}const pr=de({mean_:Fxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(n,e="float32"){if(za(n),e==="complex64"){const r=Pr(n,"float32"),s=Pr(n,"float32");return Kl(r,s)}const t=Es(Fe(n),e);return ue.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(n,e="float32"){if(za(n),e==="complex64"){const r=pa(n,"float32"),s=Pr(n,"float32");return Kl(r,s)}const t=Xw(Fe(n),e);return ue.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qj(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=te(n,"x","meshgrid",n instanceof kn?n.dtype:"float32");if(e===void 0)return[r];let s=te(e,"y","meshgrid",e instanceof kn?e.dtype:"float32");const a=Fe(r.shape),i=Fe(s.shape);return t==="xy"?(r=xe(r,[1,-1]),s=xe(s,[-1,1]),[en(pa([i,1],r.dtype),r),en(s,pa([1,a],s.dtype))]):(r=xe(r,[-1,1]),s=xe(s,[1,-1]),[en(r,pa([1,i],r.dtype)),en(pa([a,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(n,e){let t=te(n,"a","minimum"),r=te(e,"b","minimum");[t,r]=xr(t,r),t.dtype==="bool"&&(t=dt(t,"int32"),r=dt(r,"int32")),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(Cp,s)}const lu=de({minimum_:Lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(n,e,t){Z(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=te(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Z(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=t==="reflect"?1:0;for(let o=0;o<r.rank;o++)Z(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Z(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:t},i={x:r};return ue.runKernel($x,i,a)}const JI=de({mirrorPad_:Mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(n,e){let t=te(n,"a","mod"),r=te(e,"b","mod");[t,r]=xr(t,r);const s={a:t,b:r};return ue.runKernel(Ep,s)}const eA=de({mod_:Pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(n,e=null,t=!1){n=te(n,"x","moments");const r=nn(e,n.shape),s=pr(n,r,t);let a=s.shape;t||(a=$r(s.shape,r));const i=jn(bt(dt(n,"float32"),xe(s,a))),o=pr(i,r,t);return{mean:s,variance:o}}const f1=de({moments_:Bxe});function jxe(n,e,t,r){const s=te(e,"data","multiRNNCell"),a=gg(t,"c","multiRNNCell"),i=gg(r,"h","multiRNNCell");let o=s;const l=[];for(let h=0;h<n.length;h++){const p=n[h](o,a[h],i[h]);l.push(p[0]),l.push(p[1]),o=p[1]}const c=[],d=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),d.push(l[h+1]);return[c,d]}const Zj=de({multiRNNCell_:jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(n,e,t,r=!1){const s=te(n,"logits","multinomial"),a=s.size,i=s.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);t=t||Math.random();const l={logits:i===1?xe(s,[1,-1]):s},c={numSamples:e,seed:t,normalized:r},d=ue.runKernel(k2,l,c);return i===1?xe(d,[d.size]):d}const Jj=de({multinomial_:zxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uxe(n,e){let t=te(n,"a","notEqual","string_or_numeric"),r=te(e,"b","notEqual","string_or_numeric");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r};return ue.runKernel(Ox,s)}const Fd=de({notEqual_:Uxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(n,e,t=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:te(n,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:t,offValue:r};return ue.runKernel(Fx,i,o)}const Oh=de({oneHot_:Vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(n){const t={x:te(n,"x","onesLike")};return ue.runKernel(Dx,t)}const Pa=de({onesLike_:Wxe});function Hxe(n,e){const t=te(n,"v1","outerProduct"),r=te(e,"v2","outerProduct");Z(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const s=xe(t,[-1,1]),a=xe(r,[1,-1]);return en(s,a)}const ez=de({outerProduct_:Hxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(n,e,t=0){const r=te(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:t},a={x:r};return ue.runKernel(Mx,a,s)}const ic=de({pad_:Gxe});function qxe(n,e,t=0){return Z(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),ic(n,[e],t)}const tz=de({pad1d_:qxe});function Kxe(n,e,t=0){return Z(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ic(n,e,t)}const nz=de({pad2d_:Kxe});function Xxe(n,e,t=0){return Z(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ic(n,e,t)}const rz=de({pad3d_:Xxe});function Yxe(n,e,t=0){return Z(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ic(n,e,t)}const sz=de({pad4d_:Yxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qxe(n,e,t){const r=te(n,"x","spaceToBatchND");Z(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),Z(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),Z(r.shape.reduce((i,o,l)=>l>0&&l<=e.length?i&&(o+t[l-1][0]+t[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},a={blockShape:e,paddings:t};return ue.runKernel(qx,s,a)}const h1=de({spaceToBatchND_:Qxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zxe(n,e,t,r,s,a,i){s==null&&(s=[1,1]),a==null&&(a=1),r===0&&(r="valid");const o=te(n,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=xe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Z(_s(a,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${s}'`);const d=zi(l.shape,e,a,s,r),h=[d.dilationHeight,d.dilationWidth];let p;r==="same"?p=e1e([d.filterHeight,d.filterWidth],h):p=[[0,0],[0,0]];const g=h[0]===1&&h[1]===1,[x,y]=Jxe([d.inHeight,d.inWidth],h,p),b=g?r:"valid",S=g?l:h1(l,h,x),N=(t==="avg"?()=>r1(S,e,a,b,i):()=>d1(S,e,a,b,i))(),C=g?N:s1(N,h,y);return c?xe(C,[C.shape[1],C.shape[2],C.shape[3]]):C}function Jxe(n,e,t){const r=t.map(d=>d[0]),s=t.map(d=>d[1]),a=n.concat(r,s),i=e.map((d,h)=>(d-a[h]%d)%d),o=s.map((d,h)=>d+i[h]),l=e.map((d,h)=>[r[h],o[h]]),c=e.map((d,h)=>[0,i[h]]);return[l,c]}function e1e(n,e){const r=n.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),s=r.map(i=>Math.floor(i/2)),a=r.map((i,o)=>i-s[o]);return r.map((i,o)=>[s[o],a[o]])}const tA=de({pool_:Zxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1e(n,e){const t=te(n,"x","prelu"),r=te(e,"alpha","prelu"),s={x:t,alpha:r};return ue.runKernel(Px,s)}const p1=de({prelu_:t1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n1e(n,e=null,t=!1){let r=te(n,"x","prod");r.dtype==="bool"&&(r=dt(r,"int32"));const s={x:r},a={axis:e,keepDims:t};return ue.runKernel(Bx,s,a)}const nA=de({prod_:n1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r1e(n,e,t,r){const s=n.map((d,h)=>te(d,`tensors${h}`,"raggedGather","int32")),a=te(e,"paramsDenseValues","raggedGather"),i=te(t,"indices","raggedGather","int32"),o={paramsNestedSplits:s,paramsDenseValues:a,indices:i},l={outputRaggedRank:r},c=ue.runKernel($2,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const az=de({raggedGather_:r1e});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s1e(n,e,t){const r=te(n,"starts","raggedRange"),s=te(e,"limits","raggedRange",r.dtype),a=te(t,"deltas","raggedRange",r.dtype),i={starts:r,limits:s,deltas:a},o=ue.runKernel(R2,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const iz=de({raggedRange_:s1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(n,e,t,r,s){const a=te(n,"shape","raggedTensorToTensor","int32"),i=te(e,"values","raggedTensorToTensor"),o=te(t,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map((h,p)=>te(h,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:a,values:i,defaultValue:o,rowPartitionTensors:l},d={rowPartitionTypes:s};return ue.runKernel(O2,c,d)}const oz=de({raggedTensorToTensor_:a1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(n,e,t){za(n);const r=Fe(n);let s=null;if(t==null||t==="float32")s=new Float32Array(r);else if(t==="int32")s=new Int32Array(r);else if(t==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let a=0;a<r;a++)s[a]=e();return ue.makeTensor(s,n,t)}const lz=de({rand_:i1e});var Ub={exports:{}},o1e=Ub.exports,EL;function l1e(){return EL||(EL=1,function(n){(function(e,t,r){function s(l){var c=this,d=o();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(l),c.s0<0&&(c.s0+=1),c.s1-=d(l),c.s1<0&&(c.s1+=1),c.s2-=d(l),c.s2<0&&(c.s2+=1),d=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var d=new s(l),h=c&&c.state,p=d.next;return p.int32=function(){return d.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&a(h,d),p.state=function(){return a(d,{})}),p}function o(){var l=4022871197,c=function(d){d=String(d);for(var h=0;h<d.length;h++){l+=d.charCodeAt(h);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=i:this.alea=i})(o1e,n)}(Ub)),Ub.exports}var Vb={exports:{}},c1e=Vb.exports,kL;function u1e(){return kL||(kL=1,function(n){(function(e,t,r){function s(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:c+=o;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function i(o,l){var c=new s(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&a(d,c),h.state=function(){return a(c,{})}),h}t&&t.exports?t.exports=i:this.xor128=i})(c1e,n)}(Vb)),Vb.exports}var Wb={exports:{}},d1e=Wb.exports,_L;function f1e(){return _L||(_L=1,function(n){(function(e,t,r){function s(o){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var d=0;d<c.length+64;d++)l.x^=c.charCodeAt(d)|0,d==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function i(o,l){var c=new s(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&a(d,c),h.state=function(){return a(c,{})}),h}t&&t.exports?t.exports=i:this.xorwow=i})(d1e,n)}(Wb)),Wb.exports}var Hb={exports:{}},h1e=Hb.exports,IL;function p1e(){return IL||(IL=1,function(n){(function(e,t,r){function s(o){var l=this;l.next=function(){var d=l.x,h=l.i,p,g;return p=d[h],p^=p>>>7,g=p^p<<24,p=d[h+1&7],g^=p^p>>>10,p=d[h+3&7],g^=p^p>>>3,p=d[h+4&7],g^=p^p<<7,p=d[h+7&7],p=p^p<<13,g^=p^p<<9,d[h]=g,l.i=h+1&7,g};function c(d,h){var p,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,p=0;p<h.length;++p)g[p&7]=g[p&7]<<15^h.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],d.x=g,d.i=0,p=256;p>0;--p)d.next()}c(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function i(o,l){o==null&&(o=+new Date);var c=new s(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=c.next,h.quick=h,d&&(d.x&&a(d,c),h.state=function(){return a(c,{})}),h}t&&t.exports?t.exports=i:this.xorshift7=i})(h1e,n)}(Hb)),Hb.exports}var Gb={exports:{}},m1e=Gb.exports,AL;function g1e(){return AL||(AL=1,function(n){(function(e,t,r){function s(o){var l=this;l.next=function(){var d=l.w,h=l.X,p=l.i,g,x;return l.w=d=d+1640531527|0,x=h[p+34&127],g=h[p=p+1&127],x^=x<<13,g^=g<<17,x^=x>>>15,g^=g>>>12,x=h[p]=x^g,l.i=p,x+(d^d>>>16)|0};function c(d,h){var p,g,x,y,b,S=[],T=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,T=Math.max(T,h.length)),x=0,y=-32;y<T;++y)h&&(g^=h.charCodeAt((y+32)%h.length)),y===0&&(b=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,y>=0&&(b=b+1640531527|0,p=S[y&127]^=g+b,x=p==0?x+1:0);for(x>=128&&(S[(h&&h.length||0)&127]=-1),x=127,y=512;y>0;--y)g=S[x+34&127],p=S[x=x+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,S[x]=g^p;d.w=b,d.X=S,d.i=x}c(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function i(o,l){o==null&&(o=+new Date);var c=new s(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=c.next,h.quick=h,d&&(d.X&&a(d,c),h.state=function(){return a(c,{})}),h}t&&t.exports?t.exports=i:this.xor4096=i})(m1e,n)}(Gb)),Gb.exports}var qb={exports:{}},x1e=qb.exports,$L;function y1e(){return $L||($L=1,function(n){(function(e,t,r){function s(o){var l=this,c="";l.next=function(){var h=l.b,p=l.c,g=l.d,x=l.a;return h=h<<25^h>>>7^p,p=p-g|0,g=g<<24^g>>>8^x,x=x-h|0,l.b=h=h<<20^h>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^x,l.a=x-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var d=0;d<c.length+20;d++)l.b^=c.charCodeAt(d)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function i(o,l){var c=new s(o),d=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,x=(p+g)/(1<<21);while(x===0);return x},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&a(d,c),h.state=function(){return a(c,{})}),h}t&&t.exports?t.exports=i:this.tychei=i})(x1e,n)}(qb)),qb.exports}var Kb={exports:{}};const b1e={},v1e=Object.freeze(Object.defineProperty({__proto__:null,default:b1e},Symbol.toStringTag,{value:"Module"})),w1e=jk(v1e);var S1e=Kb.exports,RL;function T1e(){return RL||(RL=1,function(n){(function(e,t,r){var s=256,a=6,i=52,o="random",l=r.pow(s,a),c=r.pow(2,i),d=c*2,h=s-1,p;function g(C,I,F){var D=[];I=I==!0?{entropy:!0}:I||{};var A=S(b(I.entropy?[C,N(t)]:C??T(),3),D),_=new x(D),k=function(){for(var O=_.g(a),P=l,W=0;O<c;)O=(O+W)*s,P*=s,W=_.g(1);for(;O>=d;)O/=2,P/=2,W>>>=1;return(O+W)/P};return k.int32=function(){return _.g(4)|0},k.quick=function(){return _.g(4)/4294967296},k.double=k,S(N(_.S),t),(I.pass||F||function(O,P,W,K){return K&&(K.S&&y(K,_),O.state=function(){return y(_,{})}),W?(r[o]=O,P):O})(k,A,"global"in I?I.global:this==r,I.state)}function x(C){var I,F=C.length,D=this,A=0,_=D.i=D.j=0,k=D.S=[];for(F||(C=[F++]);A<s;)k[A]=A++;for(A=0;A<s;A++)k[A]=k[_=h&_+C[A%F]+(I=k[A])],k[_]=I;(D.g=function(O){for(var P,W=0,K=D.i,q=D.j,V=D.S;O--;)P=V[K=h&K+1],W=W*s+V[h&(V[K]=V[q=h&q+P])+(V[q]=P)];return D.i=K,D.j=q,W})(s)}function y(C,I){return I.i=C.i,I.j=C.j,I.S=C.S.slice(),I}function b(C,I){var F=[],D=typeof C,A;if(I&&D=="object")for(A in C)try{F.push(b(C[A],I-1))}catch{}return F.length?F:D=="string"?C:C+"\0"}function S(C,I){for(var F=C+"",D,A=0;A<F.length;)I[h&A]=h&(D^=I[h&A]*19)+F.charCodeAt(A++);return N(I)}function T(){try{var C;return p&&(C=p.randomBytes)?C=C(s):(C=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(C)),N(C)}catch{var I=e.navigator,F=I&&I.plugins;return[+new Date,e,F,e.screen,N(t)]}}function N(C){return String.fromCharCode.apply(0,C)}if(S(r.random(),t),n.exports){n.exports=g;try{p=w1e}catch{}}else r["seed"+o]=g})(typeof self<"u"?self:S1e,[],Math)}(Kb)),Kb.exports}var QC,OL;function N1e(){if(OL)return QC;OL=1;var n=l1e(),e=u1e(),t=f1e(),r=p1e(),s=g1e(),a=y1e(),i=T1e();return i.alea=n,i.xor128=e,i.xorwow=t,i.xorshift7=r,i.xor4096=s,i.tychei=a,QC=i,QC}var mS=N1e();/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1e=.001,cz=.1;function E1e(n,e,t){return t==null&&(t=rA()),ok(n,e,(r,s)=>sA(r,s,t))}function rA(){return ue.backend.floatPrecision()===32?C1e:cz}function ok(n,e,t){let r=!0;if((us(n)||us(e))&&(r=!1),us(n)&&us(e)&&(r=!0),r){const i=n.constructor.name,o=e.constructor.name;if(i!==o)throw new Error(`Arrays are of different type. Actual: ${i}. Expected: ${o}`)}if(Array.isArray(n)&&Array.isArray(e)){const i=Jo(n),o=Jo(e);if(!on(i,o))throw new Error(`Arrays have different shapes. Actual: [${i}]. Expected: [${o}]`)}const s=us(n)?n:Zo(n),a=us(e)?e:Zo(e);if(s.length!==a.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${a.length}.
Actual:   ${s}.
Expected: ${a}.`);for(let i=0;i<a.length;++i){const o=s[i],l=a[i];if(!t(o,l))throw new Error(`Arrays differ: actual[${i}] = ${o}, expected[${i}] = ${l}.
Actual:   ${s}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function k1e(n,e){n().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function _1e(n,e){const t=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return zo(n)||zo(n[0])||zo(e)||zo(e[0])?ok(n,t,(r,s)=>r==s):ok(n,e,(r,s)=>sA(r,s,0))}function I1e(n,e,t){if(t==null&&(t=rA()),!sA(n,e,t))throw new Error(`Numbers differ: actual === ${n}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function sA(n,e,t){return!isFinite(n)&&!isFinite(e)?!0:!(isNaN(n)||isNaN(e)||Math.abs(n-e)>t)}function A1e(n,e,t){for(let r=0;r<n.length;r++)if(n[r]<e||n[r]>t)throw new Error(`Value out of range:${n[r]} low: ${e}, high: ${t}`)}function $1e(n,e){const t=new Float32Array(n),r=new Float32Array(e);if(t.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${t.length}`);for(let s=0;s<r.length;s++)if(t[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${t[s]} instead`)}function uz(n){for(let e=0;e<n.length;e++){const t=n[e];Array.isArray(t)?uz(t):n[e]=Ho(t)}return n}function R1e(n){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(n),new Promise(t=>{e.addEventListener("loadeddata",r=>t(e)),e.load()})}async function O1e(n){await n.play(),"requestVideoFrameCallback"in n&&await new Promise(e=>{n.requestVideoFrameCallback(e)})}const D1e=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:cz,createVideoElement:R1e,encodeStrings:uz,expectArrayBuffersEqual:$1e,expectArraysClose:E1e,expectArraysEqual:_1e,expectNumbersClose:I1e,expectPromiseToFail:k1e,expectValuesInRange:A1e,play:O1e,testEpsilon:rA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aA{constructor(e,t,r,s,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=a||Math.random();this.random=mS.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,t,r=!1;for(;!r;){let s,a,i;do s=2*this.random()-1,a=2*this.random()-1,i=s*s+a*a;while(i>=1||i===0);const o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*o,t=this.mean+this.stdDev*a*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class F1e{constructor(e,t,r,s){this.alpha=e,this.beta=1/t,this.dtype=r;const a=s||Math.random();this.randu=mS.alea(a.toString()),this.randn=new aA(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,s,a,i;for(;;){do s=this.randn.nextValue(),i=1+this.c*s;while(i<=0);if(i*=i*i,e=s*s,t=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<t||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class L1e{constructor(e=0,t=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=mS.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M1e(n,e,t=1,r="float32",s){if(za(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new F1e(e,t,r,s),i=Yt(n,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const dz=de({randomGamma_:M1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(n,e=0,t=1,r,s){if(za(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new aA(e,t,r,!1,s),i=Yt(n,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const gS=de({randomNormal_:P1e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1e(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return gS(n,0,1,e,t)}const fz=de({randomStandardNormal_:B1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1e(n,e=0,t=1,r="float32",s){za(n);const a=Yt(n,r),i=new L1e(e,t,null,s);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const Nu=de({randomUniform_:j1e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1e(n,e,t,r){return Nu(n,e,t,"int32",r)}const hz=de({randomUniformInt_:z1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ld(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const s={start:n,stop:e,step:t,dtype:r};return ue.runKernel(D2,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1e(n){const t={input:te(n,"input","real")};return ue.runKernel(F2,t)}const Dh=de({real_:U1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1e(n){const t={x:te(n,"x","reciprocal")};return ue.runKernel(Ip,t)}const iA=de({reciprocal_:V1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W1e(n){const t={x:te(n,"x","relu")};return ue.runKernel(Ap,t)}const bo=de({relu_:W1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H1e(n){const t={x:te(n,"x","relu6")};return ue.runKernel($p,t)}const xS=de({relu6_:H1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1e(n,e){const r={x:te(n,"x","reverse")},s={dims:e};return ue.runKernel(Vx,r,s)}const ci=de({reverse_:G1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(n){const e=te(n,"x","reverse");return Z(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),ci(e,0)}const pz=de({reverse1d_:q1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K1e(n,e){const t=te(n,"x","reverse");return Z(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),ci(t,e)}const mz=de({reverse2d_:K1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X1e(n,e){const t=te(n,"x","reverse");return Z(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),ci(t,e)}const gz=de({reverse3d_:X1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(n,e){const t=te(n,"x","reverse");return Z(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),ci(t,e)}const xz=de({reverse4d_:Y1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q1e(n){const t={x:te(n,"x","round")};return ue.runKernel(Rp,t)}const yS=de({round_:Q1e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z1e(n){const t={x:te(n,"x","rsqrt","float32")};return ue.runKernel(Op,t)}const bS=de({rsqrt_:Z1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1e(n){const t={x:te(n,"x","selu")};return ue.runKernel(Dp,t)}const vS=de({selu_:J1e});function eye(n,e,t,r,s,a=[1,1],i="NHWC"){const o=te(n,"x","separableConv2d"),l=te(e,"depthwiseFilter","separableConv2d"),c=te(t,"pointwiseFilter","separableConv2d");let d=o,h=!1;if(o.rank===3&&(h=!0,d=xe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Z(d.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${d.rank}.`),Z(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),Z(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),Z(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),Z(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];Z(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const x=Kp(d,l,r,s,i,a),b=Xl(x,c,1,"valid",i);return h?xe(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const wS=de({separableConv2d_:eye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tye(n,e){const t=te(n,"x","setdiff1d"),r=te(e,"y","setdiff1d");Z(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),Z(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),Z(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await t.data(),a=await r.data(),i=new Set(a);let o=0;for(let d=0;d<s.length;d++)i.has(s[d])||o++;const l=new zr([o],t.dtype),c=new zr([o],"int32");for(let d=0,h=0;d<s.length;d++)i.has(s[d])||(l.values[h]=s[d],c.values[h]=d,h++);return[l.toTensor(),c.toTensor()]}const yz=tye;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(n){const t={x:te(n,"x","sign")};return ue.runKernel(Mp,t)}const oA=de({sign_:nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(n){const t={x:te(n,"x","sin","float32")};return ue.runKernel(Fp,t)}const SS=de({sin_:rye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sye(n){const t={x:te(n,"x","sinh")};return ue.runKernel(Lp,t)}const TS=de({sinh_:sye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aye(n,e,t){const r=te(n,"x","slice1d");return Z(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),hn(r,[e],[t])}const m1=de({slice1d_:aye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(n,e,t){const r=te(n,"x","slice2d");return Z(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),hn(r,e,t)}const NS=de({slice2d_:iye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oye(n,e,t){const r=te(n,"x","slice3d");return Z(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),hn(r,e,t)}const g1=de({slice3d_:oye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(n,e,t){const r=te(n,"x","slice4d");return Z(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),hn(r,e,t)}const Fh=de({slice4d_:lye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(n,e=-1){const t=te(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},s={dim:e};return ue.runKernel(Xx,r,s)}const x1=de({softmax_:cye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(n){Z(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return ue.runKernel(g2,e)}const y1=de({fft_:uye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(n){Z(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return ue.runKernel(v2,e)}const Lh=de({ifft_:dye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const s=xe(n,[t,e]);r=Lh(s)}else{const s=[t,2*(e-1)],a=xe(Dh(n),[t,e]),i=xe(i1(n),[t,e]),o=ci(hn(a,[0,1],[t,e-2]),1),l=he(ci(hn(i,[0,1],[t,e-2]),1),Rt(-1)),c=Ir([a,o],1),d=Ir([i,l],1),h=xe(Kl(c,d),[s[0],s[1]]);r=Lh(h)}if(r=Dh(r),n.rank===3&&n.shape[0]!==0){const s=r,a=n.shape[0];r=xe(r,[a,r.shape[0]/a,r.shape[1]]),s.dispose()}return r}const CS=de({irfft_:fye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hye(n,e,t=0){const s={x:te(n,"x","split")},a={numOrSizeSplits:e,axis:t};return ue.runKernel(Kx,s,a)}const ga=de({split_:hye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(n,e){Z(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let s;if(e!=null&&e<t){const x=n.shape.map(b=>0),y=n.shape.map(b=>b);y[n.shape.length-1]=e,s=hn(n,x,y),t=e}else if(e!=null&&e>t){const x=n.shape.map(y=>y);x[n.shape.length-1]=e-t,s=Ir([n,Pr(x)],n.shape.length-1),t=e}else s=n;const a=mn(s),i=xe(Kl(s,a),[r,t]),o=y1(i),l=Math.floor(t/2)+1,c=Dh(o),d=i1(o),h=ga(c,[l,t-l],c.shape.length-1),p=ga(d,[l,t-l],d.shape.length-1),g=s.shape.slice();return g[s.shape.length-1]=l,xe(Kl(h[0],p[0]),g)}const b1=de({rfft_:pye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(n,e){let t=te(n,"a","squaredDifference"),r=te(e,"b","squaredDifference");[t,r]=xr(t,r),Gt(t.shape,r.shape);const s={a:t,b:r},a={};return ue.runKernel(zp,s,a)}const ES=de({squaredDifference_:mye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(n,e){const t=te(n,"x","squeeze","string_or_numeric");return xe(t,tc(t.shape,e).newShape)}const Cu=de({squeeze_:gye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(n,e=0){const t=gg(n,"tensors","stack","string_or_numeric");Z(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&Z(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,s={axis:e};return ue.runKernel(Lx,r,s)}const Sa=de({stack_:xye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(n,e=0){const r={x:te(n,"x","step")},s={alpha:e};return ue.runKernel(Gp,r,s)}const nf=de({step_:yye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bye(n,e,t,r,s=0,a=0,i=0,o=0,l=0){const d={x:te(n,"x","stridedSlice","string_or_numeric")},h={begin:e,end:t,strides:r,beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return ue.runKernel(q2,d,h)}const lA=de({stridedSlice_:bye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(n){const t={x:te(n,"x","tan","float32")};return ue.runKernel(Vp,t)}const cA=de({tan_:vye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zs(n,e){Yd(n);const t=Jo(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vu(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vh(n,e,t){if(Yd(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Jo(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vu(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uA(n,e,t){if(Yd(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Jo(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vu(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bz(n,e,t){if(Yd(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Jo(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vu(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vz(n,e,t){if(Yd(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Jo(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vu(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wz(n,e,t){if(Yd(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Jo(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,vu(n,e,r,t)}function dA(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${s}.`;if(t.rank<s)throw new Error(a+` update.rank < ${s}. `);if(n.length<r+(t.rank-s))throw new Error(a+` Output shape length < ${r+(t.rank-s)}`);if(t.rank!==s+n.length-r)throw new Error(a+` update.rank != ${s+n.length-r}`);for(let i=0;i<s;++i)if(t.shape[i]!==e.shape[i])throw new Error(a+` updates.shape[${i}] (${t.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<t.rank-s;++i)if(t.shape[i+s]!==n[i+r])throw new Error(a+` updates.shape[${i+s}] (${t.shape[i+s]}) != shape[${i+s}] (${n[i+s]})`)}function kS(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}dA(t,e,n)}function Eu(n,e,t){const r=e.shape.length,s=r>1?e.shape[r-1]:1,a=t.length;let i=1;for(let h=s;h<a;++h)i*=t[h];const o=s<1?1:s,l=Fe(e.shape)/o,c=[...$t(t.slice(0,s)),1],d=Fe(t);return{sliceRank:s,numUpdates:l,sliceSize:i,strides:c,outputSize:d}}const wye=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Eu,validateInput:kS,validateUpdateShape:dA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(n,e,t){const r=te(n,"tensor","tensorScatterupdate"),s=te(e,"indices","tensorScatterupdate","int32"),a=te(t,"updates","tensorScatterupdate");if(kS(a,s,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const i={tensor:r,indices:s,updates:a},o={};return ue.runKernel(B2,i,o)}const Sz=de({tensorScatterUpdate_:Sye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(n,e=1,t=!0){const r=te(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const a={x:r},i={k:e,sorted:t},[o,l]=ue.runKernel(Q2,a,i);return{values:o,indices:l}}const fA=de({topk_:Tye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(n,e=0,t=1,r,s){if(za(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new aA(e,t,r,!0,s),i=Yt(n,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const _S=de({truncatedNormal_:Nye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(n,e=0){const t=te(n,"x","unique","string_or_numeric");Z(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},s={axis:e},[a,i]=ue.runKernel(J2,r,s);return{values:a,indices:i}}const hA=de({unique_:Cye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(n,e,t){const r=te(n,"x","unsortedSegmentSum"),s=te(e,"segmentIds","unsortedSegmentSum","int32");Z(_d(t),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:s},i={numSegments:t};return ue.runKernel(Zx,a,i)}const IS=de({unsortedSegmentSum_:Eye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(n,e=0){const t=te(n,"x","unstack","string_or_numeric");Z(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},s={axis:e};return ue.runKernel(Qx,r,s)}const ui=de({unstack_:kye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tz(n,e){return pS(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pA(n,e=!0,t,r){return ue.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AS(n,e){const t=[];for(let a=0;a<e.length;a++)e[a]&&t.push(a);const r=Yt(n,"int32"),s=Yt([t.length,n.length],"int32");for(let a=0;a<t.length;a++){const i=r.indexToLoc(t[a]),o=a*n.length;s.values.set(i,o)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _ye(n){const e=te(n,"condition","whereAsync","bool"),t=await e.data(),r=AS(e.shape,t);return n!==e&&e.dispose(),r}const mA=_ye;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Iye(n,e,t){const r=te(n,"tensor","boolMask"),s=te(e,"mask","boolMask","bool"),a=t??0,i=s.rank,o=r.shape;Z(i>0,()=>"mask cannot be scalar"),ks(o.slice(a,a+i),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=a;y<a+i;y++)l*=o[y];const c=o.slice(0,a).concat([l],o.slice(a+i)),d=xe(r,c),h=xe(s,[-1]),p=await mA(h),g=Cu(p,[1]),x=Zp(d,g,a);return n!==r&&r.dispose(),e!==s&&s.dispose(),g.dispose(),d.dispose(),h.dispose(),p.dispose(),x}const Nz=Iye;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(n,e,t){const r=te(n,"x","transpose");if(e==null&&(e=r.shape.map((i,o)=>o).reverse()),Z(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{Z(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},a={perm:e};return r.dtype==="complex64"?Te(()=>{let i=Dh(r),o=i1(r);return i=ue.runKernel(bd,{x:i},a),o=ue.runKernel(bd,{x:o},a),t&&(o=sr(o)),Kl(i,o)}):ue.runKernel(bd,s,a)}const un=de({transpose_:Aye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ye(n,e,t,r,s=!0){const a=te(n,"v","movingAverage"),i=te(e,"x","movingAverage"),o=te(t,"decay","movingAverage");vj(a,i),Z(on(a.shape,i.shape),()=>"Shape mismatch in v and x");const l=Rt(1),c=bt(l,o);let d=he(bt(i,a),c);if(s){Z(r!=null,()=>"When using zeroDebias: true, step is required.");const h=te(r,"step","movingAverage");d=It(d,bt(l,el(o,h)))}return Ye(a,d)}const Cz=de({movingAverage_:$ye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(n,e,t){za(t);const r=te(n,"indices","scatterND","int32"),s=te(e,"updates","scatterND");kS(s,r,t);const a={indices:r,updates:s},i={shape:t};return ue.runKernel(P2,a,i)}const Ez=de({scatterND_:Rye});function Oye(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const s=n.rank>0?n.shape[0]:1,a=n.rank>1?n.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(n,e,t,r=0){za(t);const s=te(n,"sparseIndices","sparseToDense","int32"),a=te(e,"sparseValues","sparseToDense","string_or_numeric"),i=te(r,"defaultValue","sparseToDense",a.dtype);Oye(s,a,t,i);const o={sparseIndices:s,sparseValues:a,defaultValue:i},l={outputShape:t};return ue.runKernel(H2,o,l)}const kz=de({sparseToDense_:Dye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(n,e){const t=te(e,"indices","gatherND","int32"),s={params:te(n,"x","gatherND","string_or_numeric"),indices:t};return ue.runKernel(b2,s)}const _z=de({gatherND_:Fye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lye(n,e){if(e==null)return n.shape.slice();if(on(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(n,e,t,r){const s=te(n,"x","dropout");if(Z(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),Z(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof kn?s.clone():s;const a=Lye(s,t),i=1-e,o=It(Qp(Ye(Nu(a,0,1,"float32",r),i)),i);return he(s,o)}const gA=de({dropout_:Mye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xA(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function $S(n,e,t){const r=1-n%2,s=new Float32Array(n);for(let a=0;a<n;++a){const i=2*Math.PI*a/(n+r-1);s[a]=e-t*Math.cos(i)}return zs(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Pye(n,e,t=1){const r=te(n,"predictions","inTopK"),s=te(e,"targets","inTopK");Z(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),Z(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),ks(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Z(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);const i=await r.data(),o=await s.data(),[l,c]=[i.length/a,a],d=fs("bool",l);for(let h=0;h<l;h++){const p=h*c,g=i.subarray(p,p+c),x=[];for(let y=0;y<g.length;y++)x.push({value:g[y],index:y});x.sort((y,b)=>b.value-y.value),d[h]=0;for(let y=0;y<t;y++)if(x[y].index===o[h]){d[h]=1;break}}return n!==r&&r.dispose(),e!==s&&s.dispose(),Fi(d,s.shape,"bool")}const Iz=Pye;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(n,e,t,r,s,a="NHWC",i){let o=n;n.rank===3&&(o=xe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=xe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Z(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),Z(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Z(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const c=a==="NHWC"?o.shape[3]:o.shape[1],d=a==="NHWC"?l.shape[3]:l.shape[1];Z(c===t[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${t[2]}.`),Z(d===t[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${t[3]}).`),aa("conv2dDerFilter",s,i);const h={x:o,dy:l},p={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,filterShape:t};return ue.runKernel(r2,h,p)}const yA=de({conv2DBackpropFilter_:Bye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RS(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return he(n,nf(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function OS(n,e){let t=e;const r=Ur(n.shape,e.shape);return r.length>0&&(t=St(t,r)),xe(t,n.shape)}function DS(n,e,t,r){if(e==="linear")return n;if(e==="relu")return bo(n);if(e==="elu")return Xp(n);if(e==="relu6")return xS(n);if(e==="prelu")return p1(n,t);if(e==="leakyrelu")return o1(n,r);if(e==="sigmoid")return uo(n);throw new Error(`Unknown fused activation ${e}.`)}const FS=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye({x:n,filter:e,strides:t,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:d}){if(l=l||"linear",FS(ue.state.gradientDepth,l)===!1){Z(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let F=Xl(n,e,t,r,s,a,i);return o!=null&&(F=Ye(F,o)),DS(F,l,c,d)}const h=te(n,"x","conv2d","float32"),p=te(e,"filter","conv2d","float32");let g=h,x=!1;h.rank===3&&(x=!0,g=xe(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Z(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),Z(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),aa("fused conv2d",r,i);const y=s==="NHWC"?g.shape[3]:g.shape[1];Z(p.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${p.shape[2]}.`),Z(_s(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);const b=ps(g.shape,p.shape,t,a,r,i);let S;o!=null&&(S=te(o,"bias","fused conv2d"),[S]=xr(S,h),s==="NHWC"?Gt(b.outShape,S.shape):(Z(S.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${S.shape.length}.`),Z(S.shape.length===0||S.shape[0]===b.outChannels||S.shape[0]===1,()=>`Error in fused conv2d: bias shape (${S.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let T;if(c!=null){const F=c.shape;if(Z(F.length<=1||F.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${F.length}.`),F.length===1)Z(F[0]===1||F[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${F}) is not compatible with the number of output channels (${b.outChannels}).`);else if(F.length===3)try{Gt(F,b.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${F}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(A)}T=te(c,"prelu weights","fused conv2d")}const N=(F,D)=>{Z(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[A,_,k,O]=D,P=RS(F,k,l);Z(iu(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const W=LI(_.shape,P,A,t,r),K=yA(_,P,A.shape,t,r),q=[W,K];if(O!=null){const V=OS(O,P);q.push(V)}return q},C={x:g,filter:p,bias:S,preluActivationWeights:T},I={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:d};return o==null?tl((D,A,_)=>{let k=ue.runKernel(dg,C,I);return _([A,D,k]),x&&(k=xe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:N}})(g,p):tl((D,A,_,k)=>{let O=ue.runKernel(dg,C,I);return k([A,D,O,_]),x&&(O=xe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:N}})(g,p,S)}const Az=de({fusedConv2d_:jye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(n,e,t,r,s,a=[1,1],i){let o=n;n.rank===3&&(o=xe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=e;l.rank===3&&(l=xe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},d={strides:r,pad:s,dimRoundingMode:i,dilations:a,filterShape:t};return ue.runKernel(u2,c,d)}const $z=de({depthwiseConv2dNativeBackpropFilter_:zye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(n,e,t,r,s,a=[1,1],i){let o=e,l=!1;e.rank===3&&(l=!0,o=xe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:t},d={strides:r,pad:s,dimRoundingMode:i,dilations:a,inputShape:n},h=ue.runKernel(d2,c,d);return l?xe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Rz=de({depthwiseConv2dNativeBackpropInput_:Uye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vye({x:n,filter:e,strides:t,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:d}){if(FS(ue.state.gradientDepth,l)===!1){let I=Kp(n,e,t,r,s,a,i);return o!=null&&(I=Ye(I,o)),DS(I,l,c,d)}const h=te(n,"x","depthwiseConv2d","float32"),p=te(e,"filter","depthwiseConv2d","float32");let g=h,x=!1;h.rank===3&&(x=!0,g=xe(h,[1,h.shape[0],h.shape[1],h.shape[2]])),Z(g.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`),Z(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),Z(g.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${g.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),a==null&&(a=[1,1]),Z(_s(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),aa("fused depthwiseConv2d",r,i);const y=ps(g.shape,p.shape,t,a,r,i,!0);let b;o!=null&&(b=te(o,"bias","fused conv2d"),[b]=xr(b,h),Gt(y.outShape,b.shape));let S;c!=null&&(S=te(c,"prelu weights","fused depthwiseConv2d"));const T=(I,F)=>{Z(iu(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[D,A,_,k]=F,O=RS(I,_,l),P=Rz(A.shape,O,D,t,r,a,i),W=$z(A,O,D.shape,t,r,a,i);if(k!=null){const K=OS(b,O);return[P,W,K]}return[P,W]},N={x:g,filter:p,bias:b,preluActivationWeights:S},C={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:d};return o==null?tl((F,D,A)=>{let _=ue.runKernel(fg,N,C);return A([D,F,_]),x&&(_=xe(_,[_.shape[1],_.shape[2],_.shape[3]])),{value:_,gradFunc:T}})(g,p):tl((F,D,A,_)=>{let k=ue.runKernel(fg,N,C);return _([D,F,k,A]),x&&(k=xe(k,[k.shape[1],k.shape[2],k.shape[3]])),{value:k,gradFunc:T}})(g,p,b)}const Wye=de({fusedDepthwiseConv2d_:Vye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:s,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:o=.2}){if(FS(ue.state.gradientDepth,a)===!1){let O=en(n,e,t,r);return s!=null&&(O=Ye(O,s)),DS(O,a,i,o)}let l=te(n,"a","fused matMul"),c=te(e,"b","fused matMul");[l,c]=xr(l,c);const d=t?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=t?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],x=l.shape.slice(0,-2),y=c.shape.slice(0,-2),b=Fe(x),S=Fe(y);Z(d===h,()=>`Error in fused matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${t} and transposeB=${r} must match.`);const N=Gt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),C=t?xe(l,[b,d,p]):xe(l,[b,p,d]),I=r?xe(c,[S,g,h]):xe(c,[S,h,g]);let F;s!=null&&(F=te(s,"bias","fused matMul"),[F]=xr(F,l),Gt(N,F.shape));let D;i!=null&&(D=te(i,"prelu weights","fused matMul"));const A=(O,P)=>{const[W,K,q,V]=P,X=RS(xe(O,q.shape),q,a);let Q,Y;if(!t&&!r?(Q=en(X,K,!1,!0),Y=en(W,X,!0,!1)):!t&&r?(Q=en(X,K,!1,!1),Y=en(X,W,!0,!1)):t&&!r?(Q=en(K,X,!1,!0),Y=en(W,X,!1,!1)):(Q=en(K,X,!0,!0),Y=en(X,W,!0,!0)),s!=null){const j=OS(V,X);return[Q,Y,j]}else return[Q,Y]},_={a:C,b:I,bias:F,preluActivationWeights:D},k={transposeA:t,transposeB:r,activation:a,leakyreluAlpha:o};return s==null?tl((P,W,K)=>{const q=ue.runKernel(ug,_,k);return K([P,W,q]),{value:xe(q,N),gradFunc:A}})(C,I):tl((P,W,K,q)=>{const V=ue.runKernel(ug,_,k);return q([P,W,V,K]),{value:xe(V,N),gradFunc:A}})(C,I,F)}const lk=de({fusedMatMul_:Hye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oz=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Az,depthwiseConv2d:Wye,matMul:lk},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(n){return $S(n,.54,.46)}const qye=de({hammingWindow_:Gye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(n){return $S(n,.5,.5)}const Dz=de({hannWindow_:Kye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(n,e,t,r=!1,s=0){let a=0;const i=[];for(;a+e<=n.size;)i.push(hn(n,a,e)),a+=t;if(r)for(;a<n.size;){const o=a+e-n.size,l=Ir([hn(n,a,e-o),ef([o],s)]);i.push(l),a+=t}return i.length===0?vh([],[0,e]):xe(Ir(i),[i.length,e])}const Fz=de({frame_:Xye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(n,e,t,r,s=Dz){r==null&&(r=xA(e));const a=Fz(n,e,t),i=he(a,s(e));return b1(i,r)}const Qye=de({stft_:Yye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(n,e,t,r,s="bilinear",a=0){const i=te(n,"image","cropAndResize"),o=te(e,"boxes","cropAndResize","float32"),l=te(t,"boxInd","cropAndResize","int32"),c=o.shape[0];Z(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),Z(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),Z(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),Z(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Z(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),Z(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const d={image:i,boxes:o,boxInd:l},h={method:s,extrapolationValue:a,cropSize:r};return ue.runKernel(o2,d,h)}const Jye=de({cropAndResize_:Zye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(n){const e=te(n,"image","flipLeftRight","float32");Z(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return ue.runKernel(y2,t,{})}const tbe=de({flipLeftRight_:ebe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(n){const e=te(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];Z(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),Z(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,t),s[t]=3,ri(e,s)}const rbe=de({grayscaleToRGB_:nbe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(n){const e=te(n,"image","RGBToGrayscale"),t=e.rank-1,r=e.shape[t];Z(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),Z(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,a=dt(e,"float32"),i=zs([.2989,.587,.114]);let o;switch(e.rank){case 2:o=ld("ij,j->i",a,i);break;case 3:o=ld("ijk,k->ij",a,i);break;case 4:o=ld("ijkl,l->ijk",a,i);break;case 5:o=ld("ijklm,m->ijkl",a,i);break;case 6:o=ld("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return o=Ps(o,-1),dt(o,s)}const abe=de({rgbToGrayscale_:sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(n,e,t=0,r=.5){const s=te(n,"image","rotateWithOffset","float32");Z(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const a={image:s},i={radians:e,fillValue:t,center:r};return ue.runKernel(eS,a,i)}const obe=de({rotateWithOffset_:ibe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jp(n,e,t,r,s,a){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),a==null&&(a=0);const i=n.shape[0];return t=Math.min(t,i),Z(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Z(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),Z(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),Z(e.rank===1,()=>"scores must be a 1D tensor"),Z(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),Z(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:s,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY){const a=te(n,"boxes","nonMaxSuppression","float32"),i=te(e,"scores","nonMaxSuppression","float32"),o=Jp(a,i,t,r,s);t=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:t,iouThreshold:r,scoreThreshold:s};return ue.runKernel(_2,{boxes:a,scores:i},l)}const cbe=de({nonMaxSuppression_:lbe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(n,e,t){const r=dbe(n,e,t),s=r<0?-(r+1):r;n.splice(s,0,e)}function dbe(n,e,t){return hbe(n,e,t||fbe)}function fbe(n,e){return n>e?1:n<e?-1:0}function hbe(n,e,t){let r=0,s=n.length,a=0,i=!1;for(;r<s;){a=r+(s-r>>>1);const o=t(e,n[a]);o>0?r=a+1:(s=a,i=!o)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(n,e,t,r,s){return bA(n,e,t,r,s,0)}function MS(n,e,t,r,s,a){return bA(n,e,t,r,s,0,!1,a,!0)}function PS(n,e,t,r,s,a){return bA(n,e,t,r,s,a,!0)}function bA(n,e,t,r,s,a,i=!1,o=!1,l=!1){const c=[];for(let b=0;b<e.length;b++)e[b]>s&&c.push({score:e[b],boxIndex:b,suppressBeginIndex:0});c.sort(DL);const d=a>0?-.5/a:0,h=[],p=[];for(;h.length<t&&c.length>0;){const b=c.pop(),{score:S,boxIndex:T,suppressBeginIndex:N}=b;if(S<s)break;let C=!1;for(let I=h.length-1;I>=N;--I){const F=pbe(n,T,h[I]);if(F>=r){C=!0;break}if(b.score=b.score*mbe(r,d,F),b.score<=s)break}b.suppressBeginIndex=h.length,C||(b.score===S?(h.push(T),p.push(b.score)):b.score>s&&ube(c,b,DL))}const g=h.length,x=t-g;o&&x>0&&(h.push(...new Array(x).fill(0)),p.push(...new Array(x).fill(0)));const y={selectedIndices:h};return i&&(y.selectedScores=p),l&&(y.validOutputs=g),y}function pbe(n,e,t){const r=n.subarray(e*4,e*4+4),s=n.subarray(t*4,t*4+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),d=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),p=Math.max(s[1],s[3]),g=(o-a)*(l-i),x=(h-c)*(p-d);if(g<=0||x<=0)return 0;const y=Math.max(a,c),b=Math.max(i,d),S=Math.min(o,h),T=Math.min(l,p),N=Math.max(S-y,0)*Math.max(T-b,0);return N/(g+x-N)}function mbe(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function DL(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gbe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY){const a=te(n,"boxes","nonMaxSuppressionAsync"),i=te(e,"scores","nonMaxSuppressionAsync"),o=Jp(a,i,t,r,s);t=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),c=l[0],d=l[1],{selectedIndices:h}=LS(c,d,t,r,s);return a!==n&&a.dispose(),i!==e&&i.dispose(),zs(h,"int32")}const xbe=gbe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const i=te(n,"boxes","nonMaxSuppression"),o=te(e,"scores","nonMaxSuppression"),l=Jp(i,o,t,r,s,a);t=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:i,scores:o},d={maxOutputSize:t,iouThreshold:r,scoreThreshold:s,softNmsSigma:a},h=ue.runKernel(A2,c,d);return{selectedIndices:h[0],selectedScores:h[1]}}const bbe=de({nonMaxSuppressionWithScore_:ybe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function vbe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const i=te(n,"boxes","nonMaxSuppressionAsync"),o=te(e,"scores","nonMaxSuppressionAsync"),l=Jp(i,o,t,r,s,a);t=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([i.data(),o.data()]),d=c[0],h=c[1],{selectedIndices:p,selectedScores:g}=PS(d,h,t,r,s,a);return i!==n&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:zs(p,"int32"),selectedScores:zs(g)}}const wbe=vbe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const i=te(n,"boxes","nonMaxSuppression"),o=te(e,"scores","nonMaxSuppression"),l=Jp(i,o,t,r,s,null),c=l.maxOutputSize,d=l.iouThreshold,h=l.scoreThreshold,p={boxes:i,scores:o},g={maxOutputSize:c,iouThreshold:d,scoreThreshold:h,padToMaxOutputSize:a},x=ue.runKernel(I2,p,g);return{selectedIndices:x[0],validOutputs:x[1]}}const Tbe=de({nonMaxSuppressionPadded_:Sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Nbe(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const i=te(n,"boxes","nonMaxSuppressionAsync"),o=te(e,"scores","nonMaxSuppressionAsync"),l=Jp(i,o,t,r,s,null),c=l.maxOutputSize,d=l.iouThreshold,h=l.scoreThreshold,[p,g]=await Promise.all([i.data(),o.data()]),{selectedIndices:x,validOutputs:y}=MS(p,g,c,d,h,a);return i!==n&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:zs(x,"int32"),validOutputs:Rt(y,"int32")}}const Cbe=Nbe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(n,e,t=!1,r=!1){const s=te(n,"images","resizeBilinear");Z(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),Z(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),Z(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=s,i=!1;s.rank===3&&(i=!0,a=xe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:a},l={alignCorners:t,halfPixelCenters:r,size:e},c=ue.runKernel(Ux,o,l);return i?xe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Lz=de({resizeBilinear_:Ebe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(n,e,t=!1,r=!1){const s=te(n,"images","resizeNearestNeighbor");Z(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),Z(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),Z(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),Z(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=s,i=!1;s.rank===3&&(i=!0,a=xe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:a},l={alignCorners:t,halfPixelCenters:r,size:e},c=ue.runKernel(zx,o,l);return i?xe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Mz=de({resizeNearestNeighbor_:kbe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(n,e="binary",t=!1,r=.5){const s=te(n,"image","threshold"),a=.2989,i=.587,o=.114,l=s.shape[0]*s.shape[1];let c=he(zs([r]),255),d,h,p,g;if(Z(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),Z(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),Z(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),Z(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[d,h,p]=ga(s,[1,1,1],-1);const b=he(d,a),S=he(h,i),T=he(p,o);g=Ye(Ye(b,S),T)}else g=n;if(e==="otsu"){const b=AI(dt(yS(g),"int32"),Fi([]),256);c=Ibe(b,l)}const x=t?Tu(g,c):Na(g,c);return dt(he(x,255),"int32")}function Ibe(n,e){let t=zs([-1]),r=zs([0]),s=zs([0]),a,i,o,l,c,d;for(let h=0;h<n.size-1;h++){a=hn(n,0,h+1),i=hn(n,h+1),c=It(St(a),e),d=It(St(i),e);const p=St(he(a,Ld(0,a.size)));o=It(p,St(a));const g=ef(i.shape,a.size),x=Ye(Ld(0,i.size),g),y=he(i,x);l=It(St(y),St(i));const b=bt(o,l),S=bt(o,l),T=he(c,d);s=he(he(T,b),S);const N=Na(s,r);r=Cs(N,s,r),t=Cs(N,zs([h]),t)}return t}const Abe=de({threshold_:_be});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(n,e,t="nearest",r="constant",s=0,a){const i=te(n,"image","transform","float32"),o=te(e,"transforms","transform","float32");Z(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),Z(o.rank===2&&(o.shape[0]===i.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Z(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:i,transforms:o},c={interpolation:t,fillMode:r,fillValue:s,outputShape:a};return ue.runKernel(Z2,l,c)}const Rbe=de({transform_:$be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(n,e,t){const r=te(n,"a","bandPart");Z(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[a,i]=r.shape.slice(-2);let o,l;typeof e=="number"?(Z(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Z(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),o=te(e<0?a:e,"numLower","bandPart")):(Z(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Cs(Rh(e,0),a,lu(e,a))),typeof t=="number"?(Z(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),Z(t<=i,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${i}).`),l=te(t<0?i:t,"numUpper","bandPart")):(Z(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Cs(Rh(t,0),i,lu(t,i)));const c=xe(Ld(0,a,1,"int32"),[-1,1]),d=Ld(0,i,1,"int32"),h=bt(c,d),p=po(Tu(h,o),ac(h,sr(l))),g=Pr([a,i],r.dtype);return xe(Sa(ui(xe(r,[-1,a,i])).map(x=>Cs(p,x,g))),s)}const Dbe=de({bandPart_:Obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(n){let e;if(Array.isArray(n)){e=!1,Z(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=n[0].shape[0];for(let a=1;a<n.length;++a)Z(n[a].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[a].shape[0]} vs. ${s})`)}else e=!0,n=ga(n,n.shape[0],0).map(s=>Cu(s,[0]));Z(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let s=0;s<n.length;++s)t.push(ue.tidy(()=>{let a=r[s];if(s>0)for(let i=0;i<s;++i){const o=he(St(he(t[i],a)),t[i]);a=bt(a,o)}return It(a,Yp(a,"euclidean"))}));return e?Sa(t,0):t}const Lbe=de({gramSchmidt_:Fbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(n,e=!1){if(Z(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return FL(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((l,c)=>l*c),r=ui(xe(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),s=[],a=[];r.forEach(l=>{const[c,d]=FL(l,e);s.push(c),a.push(d)});const i=xe(Sa(s,0),n.shape),o=xe(Sa(a,0),n.shape);return[i,o]}}function FL(n,e=!1){return ue.tidy(()=>{Z(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let s=uS(t),a=Go(n);const i=vh([[1]],[1,1]);let o=Go(i);const l=t>=r?r:t;for(let c=0;c<l;++c){const d=a,h=o,p=s;[o,a,s]=ue.tidy(()=>{const g=hn(a,[c,c],[t-c,1]),x=Yp(g),y=hn(a,[c,c],[1,1]),b=Cs(Na(y,0),vh([[-1]]),vh([[1]])),S=bt(y,he(b,x)),T=It(g,S);T.shape[0]===1?o=Go(i):o=Ir([i,hn(T,[1,0],[T.shape[0]-1,T.shape[1]])],0);const N=sr(It(en(b,S),x)),C=hn(a,[c,0],[t-c,r]),I=he(N,o),F=un(o);if(c===0)a=bt(C,en(I,en(F,C)));else{const _=bt(C,en(I,en(F,C)));a=Ir([hn(a,[0,0],[c,r]),_],0)}const D=un(I),A=hn(s,[0,c],[t,s.shape[1]-c]);if(c===0)s=bt(A,en(en(A,o),D));else{const _=bt(A,en(en(A,o),D));s=Ir([hn(s,[0,0],[t,c]),_],1)}return[o,a,s]}),tn([d,h,p])}return!e&&t>r&&(s=hn(s,[0,0],[t,r]),a=hn(a,[0,0],[r,r])),[s,a]})}const Pbe=de({qr_:Mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zs;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Zs||(Zs={}));function Bbe(n,e,t=Zs.SUM_BY_NONZERO_WEIGHTS){const r=te(n,"losses","computeWeightedLoss");let s=null;e!=null&&(s=te(e,"weights","computeWeightedLoss"));const a=s==null?r:he(r,s);if(t===Zs.NONE)return a;if(t===Zs.SUM)return St(a);if(t===Zs.MEAN){if(s==null)return pr(a);{const i=r.size/s.size,o=It(St(a),St(s));return i>1?It(o,Rt(i)):o}}if(t===Zs.SUM_BY_NONZERO_WEIGHTS){if(s==null)return It(St(a),Rt(r.size));{const i=he(s,pa(r.shape)),o=dt(St(Fd(i,Rt(0))),"float32");return It(St(a),o)}}throw Error(`Unknown reduction: ${t}`)}const oc=de({computeWeightedLoss_:Bbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(n,e,t,r=Zs.SUM_BY_NONZERO_WEIGHTS){const s=te(n,"labels","absoluteDifference"),a=te(e,"predictions","absoluteDifference");let i=null;t!=null&&(i=te(t,"weights","absoluteDifference")),ks(s.shape,a.shape,"Error in absoluteDifference: ");const o=Mr(bt(s,a));return oc(o,i,r)}const zbe=de({absoluteDifference_:jbe});function Ube(n,e,t,r,s=Zs.SUM_BY_NONZERO_WEIGHTS){const a=te(n,"labels","cosineDistance"),i=te(e,"predictions","cosineDistance");let o=null;r!=null&&(o=te(r,"weights","cosineDistance")),ks(a.shape,i.shape,"Error in cosineDistance: ");const l=Rt(1),c=bt(l,St(he(a,i),t,!0));return oc(c,o,s)}const Vbe=de({cosineDistance_:Ube});function Wbe(n,e,t,r=Zs.SUM_BY_NONZERO_WEIGHTS){let s=te(n,"labels","hingeLoss");const a=te(e,"predictions","hingeLoss");let i=null;t!=null&&(i=te(t,"weights","hingeLoss")),ks(s.shape,a.shape,"Error in hingeLoss: ");const o=Rt(1);s=bt(he(Rt(2),s),o);const l=bo(bt(o,he(s,a)));return oc(l,i,r)}const Hbe=de({hingeLoss_:Wbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(n,e,t,r=1,s=Zs.SUM_BY_NONZERO_WEIGHTS){const a=te(n,"labels","huberLoss"),i=te(e,"predictions","huberLoss");let o=null;t!=null&&(o=te(t,"weights","huberLoss")),ks(a.shape,i.shape,"Error in huberLoss: ");const l=Rt(r),c=Mr(bt(i,a)),d=lu(c,l),h=bt(c,d),p=Ye(he(Rt(.5),jn(d)),he(l,h));return oc(p,o,s)}const qbe=de({huberLoss_:Gbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(n,e,t,r=1e-7,s=Zs.SUM_BY_NONZERO_WEIGHTS){const a=te(n,"labels","logLoss"),i=te(e,"predictions","logLoss");let o=null;t!=null&&(o=te(t,"weights","logLoss")),ks(a.shape,i.shape,"Error in logLoss: ");const l=Rt(1),c=Rt(r),d=sr(he(a,Ma(Ye(i,c)))),h=he(bt(l,a),Ma(Ye(bt(l,i),c))),p=bt(d,h);return oc(p,o,s)}const Xbe=de({logLoss_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(n,e,t,r=Zs.SUM_BY_NONZERO_WEIGHTS){const s=te(n,"labels","meanSquaredError"),a=te(e,"predictions","meanSquaredError");let i=null;t!=null&&(i=te(t,"weights","meanSquaredError")),ks(s.shape,a.shape,"Error in meanSquaredError: ");const o=ES(s,a);return oc(o,i,r)}const Qbe=de({meanSquaredError_:Ybe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(n,e){const t=te(n,"labels","sigmoidCrossEntropyWithLogits"),r=te(e,"logits","sigmoidCrossEntropyWithLogits");ks(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=bo(r),a=he(r,t),i=l1(wa(sr(Mr(r))));return Ye(bt(s,a),i)}function Jbe(n,e,t,r=0,s=Zs.SUM_BY_NONZERO_WEIGHTS){let a=te(n,"multiClassLabels","sigmoidCrossEntropy");const i=te(e,"logits","sigmoidCrossEntropy");let o=null;if(t!=null&&(o=te(t,"weights","sigmoidCrossEntropy")),ks(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=Rt(r),d=Rt(1),h=Rt(.5);a=Ye(he(a,bt(d,c)),he(h,c))}const l=Zbe(a,i);return oc(l,o,s)}const eve=de({sigmoidCrossEntropy_:Jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tve(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return tl((s,a,i)=>{const l=c1(a,[t],!0),c=bt(dt(a,"float32"),l);i([s,c]);const d=sr(he(c,s));return{value:St(d,[t]),gradFunc:(g,x)=>{const[y,b]=x,S=$r(g.shape,[t]);return[he(xe(g,S),bt(dt(y,"float32"),wa(b))),he(xe(g,S),bt(wa(b),dt(y,"float32")))]}}})(n,e)}function nve(n,e,t,r=0,s=Zs.SUM_BY_NONZERO_WEIGHTS){let a=te(n,"onehotLabels","softmaxCrossEntropy");const i=te(e,"logits","softmaxCrossEntropy");let o=null;if(t!=null&&(o=te(t,"weights","softmaxCrossEntropy")),ks(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const c=Rt(r),d=Rt(1),h=Rt(a.shape[1]);a=Ye(he(a,bt(d,c)),It(c,h))}const l=tve(a,i);return oc(l,o,s)}const rve=de({softmaxCrossEntropy_:nve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(n,e,t,r){const s=te(n,"indices","sparseFillEmptyRows","int32"),a=te(e,"values","sparseFillEmptyRows"),i=te(t,"denseShape","sparseFillEmptyRows","int32"),o=te(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:a,denseShape:i,defaultValue:o},c=ue.runKernel(z2,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const ave=de({sparseFillEmptyRows_:sve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ive(n,e,t){const r=te(n,"inputIndices","sparseReshape","int32"),s=te(e,"inputShape","sparseReshape","int32"),a=te(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:r,inputShape:s,newShape:a},o=ue.runKernel(U2,i);return{outputIndices:o[0],outputShape:o[1]}}const ove=de({sparseReshape_:ive});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(n,e,t){const r=te(n,"data","sparseSegmentMean"),s=te(e,"indices","sparseSegmentMean","int32"),a=te(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return ue.runKernel(V2,i)}const cve=de({sparseSegmentMean_:lve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uve(n,e,t){const r=te(n,"data","sparseSegmentSum"),s=te(e,"indices","sparseSegmentSum","int32"),a=te(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return ue.runKernel(W2,i)}const dve=de({sparseSegmentSum_:uve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fve(n,e,t,r,s,a,i,o){const l=te(n,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=te(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const d={separator:t,nGramWidths:r,leftPad:s,rightPad:a,padWidth:i,preserveShortSequences:o},h={data:l,dataSplits:c},p=ue.runKernel(K2,h,d);return{nGrams:p[0],nGramsSplits:p[1]}}const hve=de({stringNGrams_:fve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(n,e,t=!0){const r=te(n,"input","stringSplit","string"),s=te(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a={skipEmpty:t},i={input:r,delimiter:s},o=ue.runKernel(X2,i,a);return{indices:o[0],values:o[1],shape:o[2]}}const mve=de({stringSplit_:pve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gve(n,e){const t=te(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:t};return ue.runKernel(Y2,s,r)}const xve=de({stringToHashBucketFast_:gve});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(n,e,t,r=!0){const s=te(n,"input","staticRegexReplace","string"),a={pattern:e,rewrite:t,replaceGlobal:r};return ue.runKernel(Yx,{x:s},a)}const bve=de({staticRegexReplace_:yve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pz={fft:y1,ifft:Lh,rfft:b1,irfft:CS},Bz={hammingWindow:qye,hannWindow:Dz,frame:Fz,stft:Qye},oo={flipLeftRight:tbe,grayscaleToRGB:rbe,resizeNearestNeighbor:Mz,resizeBilinear:Lz,rgbToGrayscale:abe,rotateWithOffset:obe,cropAndResize:Jye,nonMaxSuppression:cbe,nonMaxSuppressionAsync:xbe,nonMaxSuppressionWithScore:bbe,nonMaxSuppressionWithScoreAsync:wbe,nonMaxSuppressionPadded:Tbe,nonMaxSuppressionPaddedAsync:Cbe,threshold:Abe,transform:Rbe},vA={bandPart:Dbe,gramSchmidt:Lbe,qr:Pbe},jz={absoluteDifference:zbe,computeWeightedLoss:oc,cosineDistance:Vbe,hingeLoss:Hbe,huberLoss:qbe,logLoss:Xbe,meanSquaredError:Qbe,sigmoidCrossEntropy:eve,softmaxCrossEntropy:rve},zz={sparseFillEmptyRows:ave,sparseReshape:ove,sparseSegmentMean:cve,sparseSegmentSum:dve},Uz={stringNGrams:hve,stringSplit:mve,stringToHashBucketFast:xve,staticRegexReplace:bve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vve=new Map,ck=new Map;class rf{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class ni{constructor(){this.classNameMap={}}static getMap(){return ni.instance==null&&(ni.instance=new ni),ni.instance}static register(e){ni.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function et(n,e,t){Z(n.className!=null,()=>"Class being registered does not have the static className property defined."),Z(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),Z(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const r=t,s=e+">"+r;return ni.register(n),vve.set(s,n),ck.set(n,s),n}function wve(n){return ck.has(n)?ck.get(n):n.className}const Sve=Object.freeze(Object.defineProperty({__proto__:null,Serializable:rf,SerializationMap:ni,getRegisteredName:wve,registerClass:et},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lc extends rf{minimize(e,t=!1,r){const{value:s,grads:a}=this.computeGradients(e,r);if(r!=null){const i=r.map(o=>({name:o.name,tensor:a[o.name]}));this.applyGradients(i)}else this.applyGradients(a);return tn(a),t?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Kj(e,t)}dispose(){this.iterations_!=null&&tn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Rt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(lc,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wA extends lc{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:Te(()=>mn(a).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:Te(()=>mn(a).variable(i))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;Te(()=>{const d=Ye(he(l,this.rho),he(jn(o),1-this.rho)),h=he(It(hs(Ye(c,this.epsilon)),hs(Ye(l,this.epsilon))),o),p=Ye(he(c,this.rho),he(jn(h),1-this.rho));l.assign(d),c.assign(p);const g=Ye(he(h,-this.learningRate),a);a.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(tn(this.accumulatedGrads.map(e=>e.variable)),tn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SA extends lc{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:Te(()=>ef(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=this.accumulatedGrads[s].variable;Te(()=>{const l=Ye(o,jn(i));o.assign(l);const c=Ye(he(It(i,hs(Ye(l,ue.backend.epsilon()))),-this.learningRate),a);a.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&tn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TA extends lc{static get className(){return"Adam"}constructor(e,t,r,s=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Te(()=>{this.accBeta1=Rt(t).variable(),this.accBeta2=Rt(r).variable()}),s==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Te(()=>{const r=bt(1,this.accBeta1),s=bt(1,this.accBeta2);t.forEach((a,i)=>{const o=ue.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:Te(()=>mn(o).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${a}/v`,variable:Te(()=>mn(o).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[a];if(c==null)return;const d=this.accumulatedFirstMoment[i].variable,h=this.accumulatedSecondMoment[i].variable,p=Ye(he(d,this.beta1),he(c,1-this.beta1)),g=Ye(he(h,this.beta2),he(jn(c),1-this.beta2)),x=It(p,r),y=It(g,s);d.assign(p),h.assign(g);const b=Ye(he(It(x,Ye(hs(y),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(he(this.accBeta1,this.beta1)),this.accBeta2.assign(he(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&tn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),Te(()=>{this.accBeta1.assign(el(this.beta1,this.iterations_+1)),this.accBeta2.assign(el(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NA extends lc{static get className(){return"Adamax"}constructor(e,t,r,s=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=s,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Te(()=>{this.iteration=Rt(0).variable(),this.accBeta1=Rt(t).variable()}),s==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Te(()=>{const r=bt(1,this.accBeta1),s=It(-this.learningRate,Ye(he(this.iteration,this.decay),1));t.forEach((a,i)=>{const o=ue.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:mn(o).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${a}/v`,variable:mn(o).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[a];if(c==null)return;const d=this.accumulatedFirstMoment[i].variable,h=this.accumulatedWeightedInfNorm[i].variable,p=Ye(he(d,this.beta1),he(c,1-this.beta1)),g=he(h,this.beta2),x=Mr(c),y=ol(g,x);d.assign(p),h.assign(y);const b=Ye(he(It(s,r),It(p,Ye(y,this.epsilon))),o);o.assign(b)}),this.iteration.assign(Ye(this.iteration,1)),this.accBeta1.assign(he(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&tn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BS extends lc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const i=ue.registeredVariables[r];Te(()=>{const o=Ye(he(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Xr(Rt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CA extends BS{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=Rt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:Te(()=>mn(a).variable(!1))});const i=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&Te(()=>{let l;const c=Ye(he(this.m,i),o);this.useNesterov?l=Ye(he(this.c,Ye(o,he(c,this.m))),a):l=Ye(he(this.c,c),a),i.assign(c),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&tn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EA extends lc{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,s=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,s==null&&(this.epsilon=ue.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:Te(()=>mn(a).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:Te(()=>mn(a).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:Te(()=>mn(a).variable(i))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;Te(()=>{const d=Ye(he(l,this.decay),he(jn(o),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,p=Ye(he(h,this.decay),he(o,1-this.decay)),g=It(he(o,this.learningRate),hs(bt(d,Ye(jn(p),this.epsilon)))),x=Ye(he(c,this.momentum),g);l.assign(d),h.assign(p),c.assign(x);const y=bt(a,x);a.assign(y)}else{const h=Ye(he(l,this.decay),he(jn(o),1-this.decay)),p=Ye(he(c,this.momentum),It(he(o,this.learningRate),hs(Ye(h,this.epsilon))));l.assign(h),c.assign(p);const g=bt(a,p);a.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&tn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&tn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&tn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tve=[wA,SA,TA,NA,CA,EA,BS];function Nve(){for(const n of Tve)et(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cve="model",Eve=".json",kve=".weights.bin";function LL(n){return new Promise(e=>setTimeout(e)).then(n)}class Md{constructor(e){if(!Ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Md.URL_SCHEME)&&(e=e.slice(Md.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Cve),this.modelJsonFileName=e+Eve,this.weightDataFileName=e+kve}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=yo.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=Ij(e,s),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await LL(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await LL(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:t1(e)}}}}Md.URL_SCHEME="downloads://";class _ve{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=s=>{const a=JSON.parse(s.target.result),i=a.modelTopology;if(i==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=mI(a,c=>this.loadWeights(c));e(l)},r.onerror=s=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const i of e)t.push(...i.weights),r.push(...i.paths);const s=this.checkManifestAndWeightFiles(e),a=r.map(i=>this.loadWeightsFile(i,s[i]));return Promise.all(a).then(i=>[t,i])}loadWeightsFile(e,t){return new Promise((r,s)=>{const a=new FileReader;a.onload=i=>{const o=i.target.result;r(o)},a.onerror=i=>s(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(a=>CL(a.name)),s={};for(const a of e)a.paths.forEach(i=>{const o=CL(i);if(t.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(t.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);s[i]=this.weightsFiles[r.indexOf(o)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const Ive=n=>Ce().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Md.URL_SCHEME)?Ave(n.slice(Md.URL_SCHEME.length)):null;hr.registerSaveRouter(Ive);function Ave(n="model"){return new Md(n)}function $ve(n){return new _ve(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ML(n,e,t,r){i(n),t=t??0,r=r??1,o(t,r);let s=0;const a=l=>(l.then(c=>{const d=t+ ++s/n.length*(r-t);return e(d),c}),l);function i(l){Z(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){Z(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),Z(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),Z(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(n.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Vz(n,e){e==null&&(e={});const t=e.fetchFunc==null?Ce().platform.fetch:e.fetchFunc,r=n.map(h=>t(h,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await ML(r,e.onProgress,0,.5)).map(h=>h.arrayBuffer());return e.onProgress==null?await Promise.all(o):await ML(o,e.onProgress,.5,1)}function Rve(n,e){var t;const r=e.fetchFunc==null?Ce().platform.fetch:e.fetchFunc;let s=0,a;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async i=>{for(var o;s<n.length;){a||(a=(await r(n[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await a.read();if(l){s++,a=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,s/n.length);continue}i.enqueue(c);return}i.close()}})}async function Ove(n,e="",t,r){return Wz(i=>Vz(i,{requestInit:r}))(n,e,t)}function Wz(n){return async(e,t="",r)=>{const s=e.map(()=>!1),a={},i=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((g,x)=>{let y=0;g.weights.forEach(b=>{const S="quantization"in b?b.quantization.dtype:b.dtype,T=Id[S]*Fe(b.shape),N=()=>{s[x]=!0,a[x]==null&&(a[x]=[]),a[x].push({manifestEntry:b,groupOffset:y,sizeBytes:T})};r!=null?r.forEach((C,I)=>{C===b.name&&(N(),i[I]=!0)}):N(),o.push(b.name),y+=T})}),!i.every(g=>g)){const g=r.filter((x,y)=>!i[y]);throw new Error(`Could not find weights in manifest with names: ${g.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce((g,x,y)=>(x&&g.push(y),g),[]),c=[];l.forEach(g=>{e[g].paths.forEach(x=>{const y=t+(t.endsWith("/")?"":"/")+x;c.push(y)})});const d=await n(c),h={};let p=0;return l.forEach(g=>{const x=e[g].paths.length,y=new yo(d.slice(p,p+x));a[g].forEach(S=>{const T=y.slice(S.groupOffset,S.groupOffset+S.sizeBytes),N=Cj(T,[S.manifestEntry]);for(const C in N)h[C]=N[C]}),p+=x}),h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dve="application/octet-stream",Fve="application/json";class kA{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(Z(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Ce().platform.fetch,Z(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Z(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=Ij(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(s)],{type:Fve}),"model.json"),e.weightData!=null){const i=yo.join(e.weightData);t.body.append("model.weights.bin",new Blob([i],{type:Dve}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:t1(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=t.modelTopology,s=t.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return mI(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),r=Pv(e.weightsManifest),s=()=>Rve(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=Lve(t),a=this.weightPathPrefix||r,i=[],o=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(c)):i.push(a+c+s);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(e){const t=await this.getWeightUrls(e),r=Pv(e),s=await Vz(t,this.loadOptions);return[r,s]}}kA.URL_SCHEME_REGEX=/^https?:\/\//;function Lve(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),s=t>e?n.substring(t):"";return[r+"/",s]}function uk(n){return n.match(kA.URL_SCHEME_REGEX)!=null}const Hz=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>uk(r)):t=uk(n),t)return _A(n,e)}return null};hr.registerSaveRouter(Hz);hr.registerLoadRouter(Hz);function _A(n,e){return new kA(n,e)}function Mve(n,e){return _A(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZC{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Gz{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Pve{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function Bve(n,e,t,r){const s=arguments;return new Pve(jv(...s))}function jv(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new ZC(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ZC({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ZC({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function jve(n){return new Gz(n)}function zve(n){return new Gz(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IA=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:yo,browserFiles:$ve,browserHTTPRequest:Mve,concatenateArrayBuffers:_j,copyModel:x0e,decodeWeights:Cj,decodeWeightsStream:kj,encodeWeights:nk,fromMemory:Bve,fromMemorySync:jv,getLoadHandlers:r0e,getModelArtifactsForJSON:mI,getModelArtifactsForJSONSync:pI,getModelArtifactsInfoForJSON:t1,getSaveHandlers:Aj,getWeightSpecs:Pv,http:_A,isHTTPScheme:uk,listModels:m0e,loadWeights:Ove,moveModel:y0e,registerLoadRouter:n0e,registerSaveRouter:t0e,removeModel:g0e,weightsLoaderFactory:Wz,withSaveHandler:jve,withSaveHandlerSync:zve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(n,e,t){const r=te(n,"labels","confusionMatrix"),s=te(e,"predictions","confusionMatrix");Z(t==null||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),Z(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),Z(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),Z(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),Z(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);const a=Oh(dt(r,"int32"),t),i=Oh(dt(s,"int32"),t),o=un(a),l=en(o,i);return dt(l,"int32")}const Vve=de({confusionMatrix_:Uve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wve=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:Vve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Qu,PL=!1;function qz(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,s=!1,a=!1,i=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else if(n.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(pg(Lv,ue.backendName)!=null){const x={pixels:n},y={numChannels:e};return ue.runKernel(Lv,x,y)}const[c,d]=s?[n.videoWidth,n.videoHeight]:[n.width,n.height];let h;if(i)h=n.getContext("2d").getImageData(0,0,c,d).data;else if(r||t)h=n.data;else if(a||s||o){if(Qu==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Qu=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Qu=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Qu.canvas.width=c,Qu.canvas.height=d,Qu.drawImage(n,0,0,c,d),h=Qu.getImageData(0,0,c,d).data}let p;if(e===4)p=new Int32Array(h);else{const x=c*d;p=new Int32Array(x*e);for(let y=0;y<x;y++)for(let b=0;b<e;++b)p[y*e+b]=h[y*4+b]}return uA(p,[d,c,e],"int32")}function Hve(n){return n!=null&&n.data instanceof Uint8Array}function Gve(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function qve(n){return n!=null&&n.width!==0&&n.height!==0}function Kve(n){return Gve()&&!(n instanceof ImageBitmap)&&qve(n)&&!Hve(n)}async function Xve(n,e=3){let t=null;if(Ce().getBool("WRAP_TO_IMAGEBITMAP")&&Kve(n)){let r;try{r=await createImageBitmap(n,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===n.width&&r.height===n.height?t=r:t=n}else t=n;return qz(t,e)}function Kz(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}function Yve(n){const e=(n==null?void 0:n.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function Qve(n,e){let t=te(n,"img","toPixels");if(!(n instanceof kn)){const c=t;t=dt(c,"int32"),c.dispose()}Kz(t);const[r,s]=t.shape.slice(0,2),a=t.rank===2?1:t.shape[2],i=await t.data(),o=t.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const d=[0,0,0,255];for(let p=0;p<a;p++){const g=i[c*a+p];if(t.dtype==="float32"){if(g<0||g>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${g}.`)}else if(t.dtype==="int32"&&(g<0||g>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${g}.`);a===1?(d[0]=g*o,d[1]=g*o,d[2]=g*o):d[p]=g*o}const h=c*4;l[h+0]=Math.round(d[0]),l[h+1]=Math.round(d[1]),l[h+2]=Math.round(d[2]),l[h+3]=Math.round(d[3])}if(e!=null){PL||pg(h2,ue.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),PL=!0),e.width=s,e.height=r;const c=e.getContext("2d"),d=new ImageData(l,s,r);c.putImageData(d,0,0)}return t!==n&&t.dispose(),l}function Zve(n,e,t){let r=te(n,"img","draw");if(!(n instanceof kn)){const i=r;r=dt(i,"int32"),i.dispose()}Kz(r),Yve(t==null?void 0:t.imageOptions);const s={image:r},a={canvas:e,options:t};ue.runKernel(h2,s,a)}const Jve=de({fromPixels_:qz}),ewe=Object.freeze(Object.defineProperty({__proto__:null,draw:Zve,fromPixels:Jve,fromPixelsAsync:Xve,toPixels:Qve},Symbol.toStringTag,{value:"Module"}));function jS(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(Fe(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const s=e.shape,a=s[s.length-1];let i=1;for(let h=0;h<s.length-1;++h)i*=s[h];const o=n.shape,l=s.slice();l.pop();let c=1;for(let h=a;h<t;++h)c*=o[h],l.push(o[h]);const d=[...$t(n.shape).map(h=>h/c),1].slice(0,a);return[l,i,c,d]}const twe=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:jS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dk=-2,nwe=-1;function AA(n,e,t){const r=n.shape.length;Z(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),Z(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)Z(e[s]+t[s]<=n.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+t[s]}) would overflow input.shape[${s}] (${n.shape[s]})`)}function rwe(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function $A(n,e,t){const r=[];for(let s=0;s<n.length;s++)r[s]=Math.ceil((e[s]-n[s])/t[s]);return r}function Xz(n,e,t,r){const s=[...n];for(let a=s.length;a<r.length;a++)s.push(1);for(let a=0;a<t;a++)a===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Yz(n,e,t){return t<=n?t:t-(e-1)}function Qz(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function swe(n,e,t,r,s,a,i,o,l){const c=n.length;let d=new Array(c),h=new Array(c),p=new Array(c);if(e.length&&t>0){const g=e[0],x=t+1;d=Zz(i,g,x,r,n),h=Jz(o,g,x,s,n),p=Xz(a,g,x,n)}else for(let g=0;g<c;g++)d[g]=t8(i,r,a,n,g,l),h[g]=n8(o,s,a,n,g,l),p[g]=e8(a,g,l);return{begin:d,end:h,strides:p}}function Zz(n,e,t,r,s){const a=[...s],i=Qz(t,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const l=Yz(e,t,o);let c=r[l];n&1<<l&&(c=0),a[o]=c}return a}function Jz(n,e,t,r,s){const a=[...s],i=Qz(t,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const l=Yz(e,t,o);let c=r[l];n&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[o]=c}for(let o=0;o<a.length;o++){const l=s[o];a[o]<0&&(a[o]+=l),a[o]=nu(0,a[o],s[o])}return a}function e8(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function t8(n,e,t,r,s,a){let i=e[s];const o=t[s]||1;(n&1<<s||a&1<<s||i==null)&&(o>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=nu(0,i,l-1),i}function n8(n,e,t,r,s,a){let i=e[s];const o=t[s]||1;(n&1<<s||a&1<<s||i==null)&&(o>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),o>0?i=nu(0,i,l):i=nu(-1,i,l-1),i}function RA(n,e,t){let r=t.length;for(let s=0;s<t.length;s++)if(t[s]>1){r=s;break}for(let s=r+1;s<t.length;s++)if(e[s]>0||t[s]!==n[s])return!1;return!0}function OA(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function zS(n,e,t){let r;const s=n.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(i=>{Z(i!==-1,()=>"slice() does not support negative begin indexing.")});let a;return t==null?a=new Array(s).fill(-1):typeof t=="number"?a=[t,...new Array(s-1).fill(-1)]:t.length<s?a=t.concat(new Array(s-t.length).fill(-1)):a=t,a=a.map((i,o)=>i>=0?i:(Z(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${o}.`),n.shape[o]-r[o])),[r,a]}function DA(n,e,t,r,s,a,i,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let d=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:c.slice(),beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let N=0;N<h.dims;N++)d&&(1<<N&o)!==0&&h.numAddAxisAfterEllipsis++,1<<N&i&&(d=!0);d||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};awe(h,p);let g=!0,x=!0,y=!0;const b=[],S=[];for(let N=0;N<n.length;++N){if(p.strides[N]===0)throw Error(`strides[${N}] must be non-zero`);const C=!!(p.shrinkAxisMask&1<<N),I=n[N];if(I===-1){b.push(C?1:-1);continue}const F=[p.beginMask&1<<N,p.endMask&1<<N],D=[p.strides[N]>0?0:-1,p.strides[N]>0?I:I-1];if(C&&p.strides[N]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&p.strides[N]===1;const A=!!(p.beginMask&1<<N&&p.endMask&1<<N);if(p.beginValid&&p.endValid){if(C){const P=p.begin[N]<0?I+p.begin[N]:p.begin[N];if(p.begin[N]=P,p.end[N]=p.begin[N]+1,P<0||P>=I)throw Error(`slice index ${p.begin[N]} of dimension ${N} out of bounds.`)}else p.begin[N]=BL(p.begin[N],0,p.strides[N],I,F,D),p.end[N]=BL(p.end[N],1,p.strides[N],I,F,D);const O=p.strides[N]===1&&p.begin[N]===0&&p.end[N]===I;g=g&&O,x=x&&(N===0&&p.strides[N]===1||O)}else g=g&&p.strides[N]===1&&A,x=x&&(N===0&&p.strides[N]===1||A);let _,k=!1;if(p.beginValid&&p.endValid?(_=p.end[N]-p.begin[N],k=!0):C?(_=1,k=!0):A&&I>=0&&(p.strides[N]<0?_=-I:_=I,k=!0),k){let O;_===0||_<0!=p.strides[N]<0?O=0:O=Math.trunc(_/p.strides[N])+(_%p.strides[N]!==0?1:0),b.push(O)}else b.push(-1)}for(let N=0;N<p.finalShapeGatherIndices.length;++N){const C=p.finalShapeGatherIndices[N];C>=0?S.push(b[C]):C===dk&&S.push(1)}return{finalShapeSparse:S.filter((N,C)=>p.finalShapeGatherIndices[C]!==dk),finalShape:S,isIdentity:g,sliceDim0:x,isSimpleSlice:y,begin:p.begin,end:p.end,strides:p.strides}}function awe(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const s=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<s;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(dk),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(nwe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function BL(n,e,t,r,s,a){if(s[e])return t>0?a[e]:a[e+1&1];{const i=n<0?r+n:n;return i<a[0]?a[0]:i>a[1]?a[1]:i}}const r8=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:AA,computeFlatOffset:OA,computeOutShape:$A,getNormalizedAxes:swe,isSliceContinous:RA,maskToAxes:rwe,parseSliceParams:zS,sliceInfo:DA,startForAxis:t8,startIndicesWithElidedDims:Zz,stopForAxis:n8,stopIndicesWithElidedDims:Jz,stridesForAxis:e8,stridesWithElidedDims:Xz},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const iwe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s8{static sgd(e){return new BS(e)}static momentum(e,t,r=!1){return new CA(e,t,r)}static rmsprop(e,t=.9,r=0,s=null,a=!1){return new EA(e,t,r,s,a)}static adam(e=.001,t=.9,r=.999,s=null){return new TA(e,t,r,s)}static adadelta(e=.001,t=.95,r=null){return new wA(e,t,r)}static adamax(e=.002,t=.9,r=.999,s=null,a=0){return new NA(e,t,r,s,a)}static adagrad(e,t=.1){return new SA(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ad=s8;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const owe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function FA(){return new Promise(n=>owe(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LA(n,e){const t=n[0].length;n.forEach((s,a)=>{Z(s.length===t,()=>`Error in concat${t}D: rank of tensors[${a}] must be the same as the rank of the rest (${t})`)}),Z(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((s,a)=>{for(let i=0;i<t;i++)Z(i===e||s[i]===r[i],()=>`Error in concat${t}D: Shape of tensors[${a}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function qo(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ro;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(ro||(ro={}));function a8(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let s=1;s<t.length;++s){const a=t[s],i=r[r.length-t.length+s],o=r[i];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+n}] = ${a} but shape[${s+n}] = ${o}`)}else r[i]=a}return r}function i8(n){const e={FIRST_DIM_SIZE:ro.FIRST_DIM_SIZE,VALUE_ROWIDS:ro.VALUE_ROWIDS,ROW_LENGTHS:ro.ROW_LENGTHS,ROW_SPLITS:ro.ROW_SPLITS,ROW_LIMITS:ro.ROW_LIMITS,ROW_STARTS:ro.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function o8(n){return n.length===0?0:n[0]===ro.FIRST_DIM_SIZE?n.length-1:n.length}function l8(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(t,r-1);++s){const a=n[s],i=e[s+1];if(a>=0&&i>=0&&a!==1&&a!==i)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-n.length}] = ${a} but ragged tensor input.flatValues.shape[${s-n.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MA=30;function US(n){return n<=MA?n:Ov(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PA(n,e,t){const r=t*(typeof n=="number"?n:n[0]),s=e*(typeof n=="number"?n:n[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v1(n,e,t,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(n[0]/t),s=s.concat(n.slice(1));else{s=s.concat(n[0]);const a=e.length;for(let i=0;i<a;++i)s=s.concat([n[i+1]/e[i],e[i]]);s=s.concat(n.slice(a+1))}return s}function w1(n,e,t=!0){const r=[];if(t){r.push(e);for(let s=e+1;s<n;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],a=[];for(let i=1;i<n;++i)i>=e*2+1||i%2===1?a.push(i):s.push(i);r.push(...s),r.push(0),r.push(...a)}return r}function S1(n,e,t,r=!0){const s=[];r?s.push(n[0]/t):s.push(n[0]*t);for(let a=1;a<n.length;++a)a<=e.length?r?s.push(e[a-1]*n[a]):s.push(n[a]/e[a-1]):s.push(n[a]);return s}function BA(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function jA(n,e,t){const r=n.slice(0,1);for(let s=0;s<t;++s)r.push(n[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VS=1.7580993408473768,WS=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zA=.3275911,UA=.254829592,VA=-.284496736,WA=1.421413741,HA=-1.453152027,GA=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yl(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function c8(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function u8(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<n.length;s+=4)t[Math.floor(s/4)]=n[s],r[Math.floor(s/4)]=n[s+1];return{real:t,imag:r}}function d8(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<n.length;s+=4)t[Math.floor(s/4)]=n[s],r[Math.floor(s/4)]=n[s+1];return{real:t,imag:r}}function qA(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function f8(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function h8(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let s=0;s<Math.ceil(n/2);s++){const a=(e?2:-2)*Math.PI*(s/n);t[s]=Math.cos(a),r[s]=Math.sin(a)}return{real:t,imag:r}}function p8(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),s=Math.cos(r),a=Math.sin(r);return{real:s,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JC="->",lwe=/->/g,jL=",",zL="...";function KA(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(lwe,"").length)/JC.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${JC}").`);const[r,s]=n.split(JC);Z(r.indexOf(zL)===-1,()=>`The ellipsis notation ("${zL}") is not supported yet.`);const a=r.split(jL),i=a.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let p=0;p<s.length;++p){const g=s[p];if(!a.some(x=>x.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);o.indexOf(g)===-1&&o.push(g)}for(let p=0;p<r.length;++p){const g=r[p];o.indexOf(g)===-1&&g!==jL&&o.push(g)}const l=new Array(a.length);for(let p=0;p<i;++p){if(new Set(a[p].split("")).size!==a[p].length)throw new Error(`Found duplicate axes in input component ${a[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<a[p].length;++g)l[p].push(o.indexOf(a[p][g]))}const c=o.length,d=s.length,h=[];for(let p=d;p<c;++p)h.push(p);return{allDims:o,summedDims:h,idDims:l}}function XA(n,e){let t=new Array(n);t.fill(-1);for(let s=0;s<e.length;++s)t[e[s]]=s;const r=[];for(let s=0;s<n;++s)t[s]===-1&&r.push(s);return t=t.filter(s=>s!==-1),{permutationIndices:t,expandDims:r}}function YA(n,e,t){const r=new Array(n);for(let s=0;s<t.length;++s){const a=t[s].shape;for(let i=0;i<e[s].length;++i)r[e[s][i]]===void 0?r[e[s][i]]=a[i]:Z(r[e[s][i]]===a[i],()=>`Expected dimension ${r[e[s][i]]} at axis ${i} of input shaped ${JSON.stringify(a)}, but got dimension ${a[i]}`)}}function QA(n,e){const t=n,r=[];let s=0;n.length===0&&t.push(-1),s=n.length+1;for(let i=0;i<s;++i)r.push([]);const a=[];for(let i=0;i<t.length;++i){const o=t[i],l=cwe(e,o);for(const c of l)a.indexOf(c)===-1&&(r[i].push(c),a.push(c))}return{path:t,steps:r}}function ZA(n){return n.every((e,t)=>e===t)}function cwe(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function JA(n,e,t=0){let r=[];if(typeof e=="number")Z(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const s=e.reduce((i,o)=>(o===-1&&(i+=1),i),0);Z(s<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const i=e.reduce((o,l)=>l>0?o+l:o);e[a]=n.shape[t]-i}Z(n.shape[t]===e.reduce((i,o)=>i+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function g8(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function x8(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function b8(n,e){return`size ${n} must be non-negative, not ${e}`}function v8(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function w8(n,e){const t=Fe(n),r=Fe(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function S8(n,e){const t=Fe(n),r=Fe(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fk(){return"segment ids must be >= 0"}function T8(){return"segment ids are not increasing"}function N8(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function C8(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(n,e){let t=!1,r;for(n<=MA?(r=n,t=!0):r=Ov(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=Ov(n,r+1);return r}function k8(n,e,t){const r=[],s=n.length;for(let a=0;a<s;a++)a!==e?r.push(n[a]):r.push(t);return r}function e$(n,e,t,r){const s=e.shape.length,a=n.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let h=0;h<r;++h)if(n.shape[h]!==e.shape[h])throw new Error(`x.shape[${h}]: ${n.shape[h]} should be equal to indices.shape[${h}]: ${e.shape[h]}.`);const i=n.shape[t],o=[];let l=1,c=1,d=1;for(let h=0;h<r;++h)o.push(n.shape[h]),l*=n.shape[h];for(let h=r;h<t;h++)o.push(n.shape[h]),c*=n.shape[h];for(let h=r;h<s;h++)o.push(e.shape[h]);for(let h=t+1;h<a;h++)o.push(n.shape[h]),d*=n.shape[h];return{batchSize:l,sliceSize:d,outerSize:c,dimSize:i,outputShape:o}}const uwe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:e$,computeOutShape:k8,segOpComputeOptimalWindowSize:E8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ql(n){try{return n.map(e=>ql(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function _8(n){return n.map(e=>Ho(e))}const I8=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:UA,ERF_A2:VA,ERF_A3:WA,ERF_A4:HA,ERF_A5:GA,ERF_P:zA,PARALLELIZE_THRESHOLD:MA,get RowPartitionType(){return ro},SELU_SCALE:WS,SELU_SCALEALPHA:VS,applyActivation:DS,assertAndGetBroadcastShape:Gt,assertAxesAreInnerMostDims:Is,assertParamsConsistent:LA,assignToTypedArray:f8,axesAreInnerMostDims:VI,calculateShapes:Eu,checkEinsumDimSizes:YA,checkPadOnDimRoundingMode:aa,combineLocations:Hj,combineRaggedTensorToTensorShapes:a8,complexWithEvenIndex:u8,complexWithOddIndex:d8,computeConv2DInfo:ps,computeConv3DInfo:wu,computeDefaultPad:CI,computeDilation2DInfo:n1,computeOptimalWindowSize:US,computeOutAndReduceShapes:ms,computeOutShape:qo,computePool2DInfo:zi,computePool3DInfo:rc,convertConv2DDataFormat:sc,decodeEinsumEquation:KA,eitherStridesOrDilationsAreOne:_s,expandShapeToKeepDim:$r,exponent:p8,exponents:h8,fromStringArrayToUint8:_8,fromUint8ToStringArray:Ql,getAxesPermutation:yr,getBroadcastDims:Dd,getComplexWithIndex:qA,getEinsumComputePath:QA,getEinsumPermutation:XA,getFusedBiasGradient:OS,getFusedDyActivation:RS,getImageCenter:PA,getInnerMostAxes:Rr,getPermuted:w1,getRaggedRank:o8,getReductionAxes:Ur,getReshaped:v1,getReshapedPermuted:S1,getRowPartitionTypesHelper:i8,getSliceBeginCoords:BA,getSliceSize:jA,getSparseFillEmptyRowsIndicesDenseShapeMismatch:m8,getSparseFillEmptyRowsNegativeIndexErrorMessage:g8,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:x8,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:v8,getSparseReshapeInputOutputMismatchErrorMessage:S8,getSparseReshapeInputOutputMultipleErrorMessage:w8,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:y8,getSparseReshapeNegativeOutputDimErrorMessage:b8,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:C8,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:fk,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:T8,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:N8,getUndoAxesPermutation:Su,isIdentityPermutation:ZA,log:eme,mergeRealAndImagArrays:Yl,prepareAndValidate:jS,prepareSplitSize:JA,segment_util:uwe,shouldFuse:FS,slice_util:r8,splitRealAndImagArrays:c8,stridesOrDilationsArePositive:Od,tupleValuesAreOne:iu,upcastType:ya,validateDefaultValueShape:l8,validateInput:kS,validateUpdateShape:dA,warn:ti},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:LS,nonMaxSuppressionV4Impl:MS,nonMaxSuppressionV5Impl:PS,whereImpl:AS},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Nve();const fwe=Object.freeze(Object.defineProperty({__proto__:null,Abs:Qg,Acos:Zh,Acosh:Jh,AdadeltaOptimizer:wA,AdagradOptimizer:SA,AdamOptimizer:TA,AdamaxOptimizer:NA,Add:Jd,AddN:Zg,All:Yw,Any:Qw,ArgMax:Jg,ArgMin:ex,Asin:ep,Asinh:tp,Atan:np,Atan2:sp,Atanh:rp,AvgPool:tx,AvgPool3D:nx,AvgPool3DGrad:Jw,AvgPoolGrad:Zw,BatchMatMul:rx,BatchToSpaceND:sx,Bincount:e2,BitwiseAnd:ax,BroadcastArgs:t2,BroadcastTo:lj,Cast:ap,Ceil:ip,ClipByValue:op,Complex:n2,ComplexAbs:ix,Concat:ox,Conv2D:lx,Conv2DBackpropFilter:r2,Conv2DBackpropInput:cx,Conv3D:ux,Conv3DBackpropFilterV2:s2,Conv3DBackpropInputV2:a2,Cos:lp,Cosh:cp,CropAndResize:o2,Cumprod:i2,Cumsum:dx,DataStorage:J_,DenseBincount:l2,DepthToSpace:c2,DepthwiseConv2dNative:fx,DepthwiseConv2dNativeBackpropFilter:u2,DepthwiseConv2dNativeBackpropInput:d2,Diag:f2,Dilation2D:hx,Dilation2DBackpropFilter:Fv,Dilation2DBackpropInput:Dv,Draw:h2,get ENV(){return sI},Einsum:p2,Elu:dp,EluGrad:m2,Environment:ij,Equal:px,Erf:fp,Exp:hp,ExpandDims:mx,Expm1:pp,FFT:g2,Fill:x2,FlipLeftRight:y2,Floor:mp,FloorDiv:gp,FromPixels:Lv,FusedBatchNorm:gx,FusedConv2D:dg,FusedDepthwiseConv2D:fg,GatherNd:b2,GatherV2:xx,Greater:yx,GreaterEqual:xp,IFFT:v2,Identity:yp,Imag:w2,IsFinite:bp,IsInf:vp,IsNan:wp,KernelBackend:qw,LRN:Cx,LRNGrad:T2,LeakyRelu:bx,Less:vx,LessEqual:wx,LinSpace:S2,Log:Sp,Log1p:Tp,LogSoftmax:cj,LogicalAnd:Sx,LogicalNot:Tx,LogicalOr:Nx,LogicalXor:Xpe,LowerBound:Ype,MatrixBandPart:Qpe,Max:Ex,MaxPool:kx,MaxPool3D:_x,MaxPool3DGrad:C2,MaxPoolGrad:N2,MaxPoolWithArgmax:E2,Maximum:Np,Mean:Ix,Min:Ax,Minimum:Cp,MirrorPad:$x,Mod:Ep,MomentumOptimizer:CA,Multinomial:k2,Multiply:kp,Neg:Rx,NonMaxSuppressionV3:_2,NonMaxSuppressionV4:I2,NonMaxSuppressionV5:A2,NotEqual:Ox,OP_SCOPE_SUFFIX:uI,OneHot:Fx,OnesLike:Dx,Optimizer:lc,OptimizerConstructors:s8,Pack:Lx,PadV2:Mx,Pool:Zpe,Pow:_p,Prelu:Px,Prod:Bx,RMSPropOptimizer:EA,RaggedGather:$2,RaggedRange:R2,RaggedTensorToTensor:O2,Range:D2,get Rank(){return XE},Real:F2,RealDiv:up,Reciprocal:Ip,get Reduction(){return Zs},Relu:Ap,Relu6:$p,Reshape:jx,ResizeBilinear:Ux,ResizeBilinearGrad:M2,ResizeNearestNeighbor:zx,ResizeNearestNeighborGrad:L2,Reverse:Vx,RotateWithOffset:eS,Round:Rp,Rsqrt:Op,SGDOptimizer:BS,ScatterNd:P2,SearchSorted:j2,Select:Wx,Selu:Dp,Sigmoid:Pp,Sign:Mp,Sin:Fp,Sinh:Lp,Slice:Hx,Softmax:Xx,Softplus:Bp,SpaceToBatchND:qx,SparseFillEmptyRows:z2,SparseReshape:U2,SparseSegmentMean:V2,SparseSegmentSum:W2,SparseToDense:H2,SplitV:Kx,Sqrt:jp,Square:G2,SquaredDifference:zp,StaticRegexReplace:Yx,Step:Gp,StridedSlice:q2,StringNGrams:K2,StringSplit:X2,StringToHashBucketFast:Y2,Sub:Up,Sum:Gx,Tan:Vp,Tanh:Wp,Tensor:kn,TensorBuffer:zr,TensorScatterUpdate:B2,Tile:Hp,TopK:Q2,Transform:Z2,Transpose:bd,Unique:J2,Unpack:Qx,UnsortedSegmentSum:Zx,UpperBound:Jpe,Variable:mg,ZerosLike:Jx,_FusedMatMul:ug,abs:Mr,acos:xI,acosh:yI,add:Ye,addN:Pj,all:sS,any:xg,argMax:Rd,argMin:bI,asin:vI,asinh:wI,atan:SI,atan2:TI,atanh:NI,avgPool:r1,avgPool3d:EI,backend:fI,backend_util:I8,basicLSTMCell:Bj,batchNorm:qp,batchNorm2d:kI,batchNorm3d:_I,batchNorm4d:II,batchToSpaceND:s1,bincount:AI,bitwiseAnd:jj,booleanMaskAsync:Nz,broadcastArgs:zj,broadcastTo:vd,broadcast_util:Oge,browser:ewe,buffer:Yt,cast:dt,ceil:$I,clipByValue:va,clone:Go,complex:Kl,concat:Ir,concat1d:RI,concat2d:OI,concat3d:DI,concat4d:FI,conv1d:aS,conv2d:Xl,conv2dTranspose:iS,conv3d:MI,conv3dTranspose:PI,copyRegisteredKernels:rme,cos:a1,cosh:oS,cosineWindow:$S,cumprod:vg,cumsum:lS,customGrad:tl,denseBincount:Bv,deprecationWarn:Lme,depthToSpace:BI,depthwiseConv2d:Kp,device_util:Ame,diag:Vj,dilation2d:jI,disableDeprecationWarnings:Fme,dispose:tn,disposeVariables:Mme,div:It,divNoNan:zI,dot:UI,dropout:gA,einsum:ld,elu:Xp,enableDebugMode:Dme,enableProdMode:Ome,enclosingPowerOfTwo:xA,engine:to,ensureShape:Wj,env:Ce,equal:Mi,erf:cS,euclideanNorm:WI,exp:wa,expandDims:Ps,expm1:HI,eye:uS,fft:y1,fill:ef,findBackend:Vme,findBackendFactory:Wme,floor:Qp,floorDiv:rS,fused:Oz,gather:Zp,gatherND:_z,gather_util:twe,getBackend:Nj,getGradient:qE,getKernel:pg,getKernelsForBackend:Mv,grad:gxe,grads:xxe,greater:Na,greaterEqual:ac,ifft:Lh,imag:i1,image:oo,inTopKAsync:Iz,io:IA,irfft:CS,isFinite:GI,isInf:qI,isNaN:KI,keep:Xr,kernel_impls:dwe,leakyRelu:o1,less:Rh,lessEqual:Tu,linalg:vA,linspace:qj,localResponseNormalization:XI,log:Ma,log1p:l1,logSigmoid:YI,logSoftmax:fS,logSumExp:c1,logicalAnd:po,logicalNot:u1,logicalOr:hS,logicalXor:QI,losses:jz,lowerBound:Xj,matMul:en,math:Wve,max:oi,maxPool:d1,maxPool3d:ZI,maxPoolWithArgmax:Yj,maximum:ol,mean:pr,memory:tk,meshgrid:Qj,min:$h,minimum:lu,mirrorPad:JI,mod:eA,moments:f1,movingAverage:Cz,mul:he,multiRNNCell:Zj,multinomial:Jj,neg:sr,nextFrame:FA,norm:Yp,notEqual:Fd,oneHot:Oh,ones:pa,onesLike:Pa,op:de,outerProduct:ez,pad:ic,pad1d:tz,pad2d:nz,pad3d:rz,pad4d:sz,pool:tA,pow:el,prelu:p1,print:gI,prod:nA,profile:Pme,raggedGather:az,raggedRange:iz,raggedTensorToTensor:oz,rand:lz,randomGamma:dz,randomNormal:gS,randomStandardNormal:fz,randomUniform:Nu,randomUniformInt:hz,range:Ld,ready:zme,real:Dh,reciprocal:iA,registerBackend:dI,registerGradient:uj,registerKernel:tS,relu:bo,relu6:xS,removeBackend:Ume,reshape:xe,reverse:ci,reverse1d:pz,reverse2d:mz,reverse3d:gz,reverse4d:xz,rfft:b1,round:yS,rsqrt:bS,scalar:Rt,scatterND:Ez,scatter_util:wye,searchSorted:pS,selu:vS,separableConv2d:wS,serialization:Sve,setBackend:jme,setPlatform:Hme,setdiff1dAsync:yz,sigmoid:uo,sign:oA,signal:Bz,sin:SS,sinh:TS,slice:hn,slice1d:m1,slice2d:NS,slice3d:g1,slice4d:Fh,slice_util:r8,softmax:x1,softplus:tf,spaceToBatchND:h1,sparse:zz,sparseToDense:kz,spectral:Pz,split:ga,sqrt:hs,square:jn,squaredDifference:ES,squeeze:Cu,stack:Sa,step:nf,stridedSlice:lA,string:Uz,sub:bt,sum:St,sumOutType:nS,tan:cA,tanh:ou,tensor:Fi,tensor1d:zs,tensor2d:vh,tensor3d:uA,tensor4d:bz,tensor5d:vz,tensor6d:wz,tensorScatterUpdate:Sz,tensor_util:Cme,test_util:D1e,tidy:Te,tile:ri,time:Bme,topk:fA,train:ad,transpose:un,truncatedNormal:_S,unique:hA,unregisterGradient:nme,unregisterKernel:tme,unsortedSegmentSum:IS,unstack:ui,upcastType:ya,upperBound:Tz,util:fme,valueAndGrad:yxe,valueAndGrads:bxe,variable:pA,variableGrads:Kj,version_core:iwe,where:Cs,whereAsync:mA,zeros:Pr,zerosLike:mn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe=Ce();hwe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Aa;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(Aa||(Aa={}));var UL;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(UL||(UL={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$={};function pwe(n,e){const t={tfOpName:n,category:"custom",inputs:[],attrs:[],customExecutor:e};t$[n]=t}function A8(n){return t$[n]}function mwe(n){delete t$[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B(n,e,t,r,s){const a=e.inputParams[n];if(a&&a.inputIndexStart!==void 0){const o=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?o+1:a.inputIndexEnd,c=o<0?e.inputNames.length+o:o;if(a.type==="tensor")return ws(e.inputNames[c],t,r,s);if(a.type==="tensors"){const p=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((x,y)=>{var b;return((b=p[y])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(x=>ws(x,t,r,s))}const d=ws(e.inputNames[c],t,r,s),h=d.dataSync();return a.type==="number"?h[0]:ii(d.shape,h)}const i=e.attrParams[n];return i&&i.value}function ws(n,e,t,r){const[s,a]=$a(n,t);if(r!=null){const o=r.getHashTableHandleByName(s);if(o!=null)return o}const i=t.currentContextIds.find(o=>!!e[zv(s,o)]);return i!==void 0?e[zv(s,i)][a]:void 0}function VL(n,e,t){return e[zv(n,t.currentContextId)]}function kl(n,e){const[t,r,s]=$a(n,e);return[zv(t,e&&e.currentContextId),r,s]}function zv(n,e){return e?`${n}-${e}`:n}function $a(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const a=e.parseNodeNameCache.get(n);if(a!=null)return a}const r=n.split(":");let s;if(r.length===1)s=[n,0,void 0];else{const a=r[0],i=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);s=[a,o,i]}return t&&e.parseNodeNameCache.set(n,s),s}function Xb(n,e,t){let r=B("pad",n,e,t);if(r==="explicit"){r=B("explicitPaddings",n,e,t);const s=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)s[a][0]=r[a*2],s[a][1]=r[a*2+1];return s}return r}function _l(n){return n.kept?n:Go(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gwe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],xwe=Object.freeze(Object.defineProperty({__proto__:null,json:gwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ywe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bwe=Object.freeze(Object.defineProperty({__proto__:null,json:ywe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vwe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],wwe=Object.freeze(Object.defineProperty({__proto__:null,json:vwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Swe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Twe=Object.freeze(Object.defineProperty({__proto__:null,json:Swe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Cwe=Object.freeze(Object.defineProperty({__proto__:null,json:Nwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],kwe=Object.freeze(Object.defineProperty({__proto__:null,json:Ewe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _we=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Iwe=Object.freeze(Object.defineProperty({__proto__:null,json:_we},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],$we=Object.freeze(Object.defineProperty({__proto__:null,json:Awe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Owe=Object.freeze(Object.defineProperty({__proto__:null,json:Rwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Fwe=Object.freeze(Object.defineProperty({__proto__:null,json:Dwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Mwe=Object.freeze(Object.defineProperty({__proto__:null,json:Lwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pwe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Bwe=Object.freeze(Object.defineProperty({__proto__:null,json:Pwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],zwe=Object.freeze(Object.defineProperty({__proto__:null,json:jwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uwe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Vwe=Object.freeze(Object.defineProperty({__proto__:null,json:Uwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wwe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Hwe=Object.freeze(Object.defineProperty({__proto__:null,json:Wwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gwe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],qwe=Object.freeze(Object.defineProperty({__proto__:null,json:Gwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Xwe=Object.freeze(Object.defineProperty({__proto__:null,json:Kwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ywe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Qwe=Object.freeze(Object.defineProperty({__proto__:null,json:Ywe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zwe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Jwe=Object.freeze(Object.defineProperty({__proto__:null,json:Zwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WL{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[xwe,bwe,wwe,Twe,Cwe,kwe,Iwe,$we,Owe,Fwe,Mwe,Bwe,zwe,Vwe,Hwe,qwe,Xwe,Qwe,Jwe],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,t={}){const r=e.node,s=[],a=[],i=[],o=r.reduce((y,b)=>(y[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?s.push(y[b.name]):b.op==="Const"?a.push(y[b.name]):(b.input==null||b.input.length===0)&&i.push(y[b.name]),y),{});let l=[];const c=[];let d={},h={};t!=null&&(d=this.mapSignatureEntries(t.inputs),h=this.mapSignatureEntries(t.outputs));const p=Object.keys(o);p.forEach(y=>{const b=o[y];b.inputNames.forEach((S,T)=>{const[N,,C]=kl(S),I=o[N];if(I.outputs!=null){const F=I.outputs.indexOf(C);if(F!==-1){const D=`${N}:${F}`;b.inputNames[T]=D}}b.inputs.push(I),I.children.push(b)})}),Object.keys(h).length===0?p.forEach(y=>{const b=o[y];b.children.length===0&&c.push(b)}):Object.keys(h).forEach(y=>{const[b]=kl(y),S=o[b];S!=null&&(S.signatureKey=h[y],c.push(S))}),Object.keys(d).length>0?Object.keys(d).forEach(y=>{const[b]=kl(y),S=o[b];S&&(S.signatureKey=d[y],l.push(S))}):l=s;let g={};e.library!=null&&e.library.function!=null&&(g=e.library.function.reduce((y,b)=>(y[b.signature.name]=this.mapFunction(b),y),{}));const x={nodes:o,inputs:l,outputs:c,weights:a,placeholders:s,signature:t,functions:g};return i.length>0&&(x.initNodes=i),x}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=A8(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((s,a)=>(s[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},s),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((s,a)=>{const i=a.type;let o;switch(a.type){case"string":o=hk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=hk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":o=vk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=vk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":o=mk(e.attr,a.tfName,a.defaultValue||0),o===void 0&&a.tfDeprecatedName&&(o=mk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":o=bk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=bk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":o=pk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=pk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":o=Sk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=Sk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":o=yk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=yk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":o=wk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=wk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":o=gk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=gk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":o=xk(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=xk(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":o=HL(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=HL(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return s[a.name]={value:o,type:i},s},{})),r}mapFunction(e){const t=e.nodeDef,r=[],s=[];let a={};t!=null&&(a=t.reduce((h,p)=>(h[p.name]=this.mapNode(p),p.op==="Const"&&s.push(h[p.name]),h),{}));const i=[],o=[];e.signature.inputArg.forEach(h=>{const[p]=kl(h.name),g={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:n$(h.type),type:"dtype"}},children:[]};g.signatureKey=h.name,i.push(g),a[p]=g}),Object.keys(a).forEach(h=>{const p=a[h];p.inputNames.forEach((g,x)=>{const[y,,b]=kl(g),S=a[y];if(S.outputs!=null){const T=S.outputs.indexOf(b);if(T!==-1){const N=`${y}:${T}`;p.inputNames[x]=N}}p.inputs.push(S),S.children.push(p)})});const c=e.ret;e.signature.outputArg.forEach(h=>{const[p,g]=kl(c[h.name]),x=a[p];x!=null&&(x.defaultOutput=g,o.push(x))});const d=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:s,placeholders:r,signature:d}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}}function e2e(n){const e=Ce().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function $8(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):e2e(n);return e?t:t.toLowerCase()}function hk(n,e,t,r=!1){const s=n[e];return s!=null?$8(s.s,r):t}function pk(n,e,t){const r=n[e];return r?r.b:t}function mk(n,e,t){const r=n[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:t;return typeof s=="number"?s:parseInt(s,10)}function n$(n){switch(typeof n=="string"&&(n=Aa[n]),n){case Aa.DT_FLOAT:case Aa.DT_HALF:return"float32";case Aa.DT_INT32:case Aa.DT_INT64:case Aa.DT_INT8:case Aa.DT_UINT8:return"int32";case Aa.DT_BOOL:return"bool";case Aa.DT_DOUBLE:return"float32";case Aa.DT_STRING:return"string";case Aa.DT_COMPLEX64:case Aa.DT_COMPLEX128:return"complex64";default:return null}}function HL(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function gk(n,e,t){const r=n[e];return r&&r.type?n$(r.type):t}function xk(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(s=>n$(s)):t}function R8(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function yk(n,e,t){const r=n[e];return r&&r.shape?R8(r.shape):t}function bk(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):t}function vk(n,e,t,r=!1){const s=n[e];return s&&s.list&&s.list.s?s.list.s.map(a=>$8(a,r)):t}function wk(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>R8(s)):t}function Sk(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t2e{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,a)=>(s[a]=this.getAttr(a),s),{}))}getInput(e){return ws(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return ws(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return mk(this.node.rawAttrs,e,t);if(r.s!=null)return hk(this.node.rawAttrs,e,t);if(r.b!=null)return pk(this.node.rawAttrs,e,t);if(r.shape!=null)return yk(this.node.rawAttrs,e,t);if(r.type!=null)return gk(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return bk(this.node.rawAttrs,e,t);if(r.list.s!=null)return vk(this.node.rawAttrs,e,t);if(r.list.shape!=null)return wk(this.node.rawAttrs,e,t);if(r.list.b!=null)return Sk(this.node.rawAttrs,e,t);if(r.list.type!=null)return xk(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const As=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:uI,abs:Mr,acos:xI,acosh:yI,add:Ye,addN:Pj,all:sS,any:xg,argMax:Rd,argMin:bI,asin:vI,asinh:wI,atan:SI,atan2:TI,atanh:NI,avgPool:r1,avgPool3d:EI,basicLSTMCell:Bj,batchNorm:qp,batchNorm2d:kI,batchNorm3d:_I,batchNorm4d:II,batchToSpaceND:s1,bincount:AI,bitwiseAnd:jj,booleanMaskAsync:Nz,broadcastArgs:zj,broadcastTo:vd,buffer:Yt,cast:dt,ceil:$I,clipByValue:va,clone:Go,complex:Kl,concat:Ir,concat1d:RI,concat2d:OI,concat3d:DI,concat4d:FI,conv1d:aS,conv2d:Xl,conv2dTranspose:iS,conv3d:MI,conv3dTranspose:PI,cos:a1,cosh:oS,cosineWindow:$S,cumprod:vg,cumsum:lS,denseBincount:Bv,depthToSpace:BI,depthwiseConv2d:Kp,diag:Vj,dilation2d:jI,div:It,divNoNan:zI,dot:UI,dropout:gA,einsum:ld,elu:Xp,enclosingPowerOfTwo:xA,ensureShape:Wj,equal:Mi,erf:cS,euclideanNorm:WI,exp:wa,expandDims:Ps,expm1:HI,eye:uS,fft:y1,fill:ef,floor:Qp,floorDiv:rS,fused:Oz,gather:Zp,gatherND:_z,greater:Na,greaterEqual:ac,ifft:Lh,imag:i1,image:oo,inTopKAsync:Iz,irfft:CS,isFinite:GI,isInf:qI,isNaN:KI,leakyRelu:o1,less:Rh,lessEqual:Tu,linalg:vA,linspace:qj,localResponseNormalization:XI,log:Ma,log1p:l1,logSigmoid:YI,logSoftmax:fS,logSumExp:c1,logicalAnd:po,logicalNot:u1,logicalOr:hS,logicalXor:QI,losses:jz,lowerBound:Xj,matMul:en,max:oi,maxPool:d1,maxPool3d:ZI,maxPoolWithArgmax:Yj,maximum:ol,mean:pr,meshgrid:Qj,min:$h,minimum:lu,mirrorPad:JI,mod:eA,moments:f1,movingAverage:Cz,mul:he,multiRNNCell:Zj,multinomial:Jj,neg:sr,norm:Yp,notEqual:Fd,oneHot:Oh,ones:pa,onesLike:Pa,op:de,outerProduct:ez,pad:ic,pad1d:tz,pad2d:nz,pad3d:rz,pad4d:sz,pool:tA,pow:el,prelu:p1,print:gI,prod:nA,raggedGather:az,raggedRange:iz,raggedTensorToTensor:oz,rand:lz,randomGamma:dz,randomNormal:gS,randomStandardNormal:fz,randomUniform:Nu,randomUniformInt:hz,range:Ld,real:Dh,reciprocal:iA,relu:bo,relu6:xS,reshape:xe,reverse:ci,reverse1d:pz,reverse2d:mz,reverse3d:gz,reverse4d:xz,rfft:b1,round:yS,rsqrt:bS,scalar:Rt,scatterND:Ez,searchSorted:pS,selu:vS,separableConv2d:wS,setdiff1dAsync:yz,sigmoid:uo,sign:oA,signal:Bz,sin:SS,sinh:TS,slice:hn,slice1d:m1,slice2d:NS,slice3d:g1,slice4d:Fh,softmax:x1,softplus:tf,spaceToBatchND:h1,sparse:zz,sparseToDense:kz,spectral:Pz,split:ga,sqrt:hs,square:jn,squaredDifference:ES,squeeze:Cu,stack:Sa,step:nf,stridedSlice:lA,string:Uz,sub:bt,sum:St,tan:cA,tanh:ou,tensor:Fi,tensor1d:zs,tensor2d:vh,tensor3d:uA,tensor4d:bz,tensor5d:vz,tensor6d:wz,tensorScatterUpdate:Sz,tile:ri,topk:fA,transpose:un,truncatedNormal:_S,unique:hA,unsortedSegmentSum:IS,unstack:ui,upperBound:Tz,variable:pA,where:Cs,whereAsync:mA,zeros:Pr,zerosLike:mn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n2e=(n,e,t,r=As)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(B("a",n,e,t),B("b",n,e,t))];case"AddN":return[r.addN(B("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(B("a",n,e,t),B("b",n,e,t))];case"Mul":return[r.mul(B("a",n,e,t),B("b",n,e,t))];case"RealDiv":case"Div":return[r.div(B("a",n,e,t),B("b",n,e,t))];case"DivNoNan":return[r.divNoNan(B("a",n,e,t),B("b",n,e,t))];case"FloorDiv":return[r.floorDiv(B("a",n,e,t),B("b",n,e,t))];case"Sub":return[r.sub(B("a",n,e,t),B("b",n,e,t))];case"Minimum":return[r.minimum(B("a",n,e,t),B("b",n,e,t))];case"Maximum":return[r.maximum(B("a",n,e,t),B("b",n,e,t))];case"Pow":return[r.pow(B("a",n,e,t),B("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(B("a",n,e,t),B("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2e=(n,e,t,r=As)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(B("x",n,e,t))];case"Acos":return[r.acos(B("x",n,e,t))];case"Acosh":return[r.acosh(B("x",n,e,t))];case"Asin":return[r.asin(B("x",n,e,t))];case"Asinh":return[r.asinh(B("x",n,e,t))];case"Atan":return[r.atan(B("x",n,e,t))];case"Atan2":return[r.atan2(B("x",n,e,t),B("y",n,e,t))];case"Atanh":return[r.atanh(B("x",n,e,t))];case"Ceil":return[r.ceil(B("x",n,e,t))];case"Complex":return[r.complex(B("real",n,e,t),B("imag",n,e,t))];case"Cos":return[r.cos(B("x",n,e,t))];case"Cosh":return[r.cosh(B("x",n,e,t))];case"Elu":return[r.elu(B("x",n,e,t))];case"Erf":return[r.erf(B("x",n,e,t))];case"Exp":return[r.exp(B("x",n,e,t))];case"Expm1":return[r.expm1(B("x",n,e,t))];case"Floor":return[r.floor(B("x",n,e,t))];case"Log":return[r.log(B("x",n,e,t))];case"Log1p":return[r.log1p(B("x",n,e,t))];case"Imag":return[r.imag(B("x",n,e,t))];case"Neg":return[r.neg(B("x",n,e,t))];case"Reciprocal":return[r.reciprocal(B("x",n,e,t))];case"Real":return[r.real(B("x",n,e,t))];case"Relu":return[r.relu(B("x",n,e,t))];case"Round":return[r.round(B("x",n,e,t))];case"Selu":return[r.selu(B("x",n,e,t))];case"Sigmoid":return[r.sigmoid(B("x",n,e,t))];case"Sin":return[r.sin(B("x",n,e,t))];case"Sign":return[r.sign(B("x",n,e,t))];case"Sinh":return[r.sinh(B("x",n,e,t))];case"Softplus":return[r.softplus(B("x",n,e,t))];case"Sqrt":return[r.sqrt(B("x",n,e,t))];case"Square":return[r.square(B("x",n,e,t))];case"Tanh":return[r.tanh(B("x",n,e,t))];case"Tan":return[r.tan(B("x",n,e,t))];case"ClipByValue":return[r.clipByValue(B("x",n,e,t),B("clipValueMin",n,e,t),B("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(B("x",n,e,t))];case"Rsqrt":return[r.rsqrt(ws(n.inputNames[0],e,t))];case"LeakyRelu":return[r.leakyRelu(B("x",n,e,t),B("alpha",n,e,t))];case"Prelu":return[r.prelu(B("x",n,e,t),B("alpha",n,e,t))];case"IsNan":return[r.isNaN(ws(n.inputNames[0],e,t))];case"IsInf":return[r.isInf(ws(n.inputNames[0],e,t))];case"IsFinite":return[r.isFinite(ws(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ai(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){Z(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const s=n[r],a=e[r];Z(s<0||a<0||s===a,()=>t+` Shapes ${n} and ${e} must match`)}}}function GL(n){return!(typeof n=="number"||n.some(e=>e<0))}function x0(n,e,t){let r=Tk(n,t);const s=!GL(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(a=>{r=Tk(a.shape,r)}),!GL(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Tk(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const s=n[r],a=e[r];if(s>=0&&a>=0&&s!==a)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=s>=0?s:a}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s2e{constructor(e,t,r,s,a,i,o){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=Rt(0),Xr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Ai(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,Xr(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,s)=>this.write(r,t[s]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Fi([],[0].concat(this.elementShape));const r=this.readMany(e);return Ai(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Sa(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Fi([],[0].concat(this.elementShape));const t=[];for(let s=0;s<this.size();s++)t.push(s);const r=this.readMany(t);return Ai(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ir(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,ui(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:t.size/r,i=[];Te(()=>{t=xe(t,[1,r,a]);for(let l=0;l<e.length;++l){const d=[0,l===0?0:s[l-1],0],h=[1,e[l],a];i[l]=xe(hn(t,d,h),this.elementShape)}return i});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pd{get id(){return this.idTensor.id}constructor(e,t,r,s=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);Ai(t,a.shape,"TensorList shape mismatch: "),Xr(a)}),this.idTensor=Rt(0),this.maxNumElements=s,Xr(this.idTensor)}copy(){return new Pd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Ai(e,this.elementShape,"TensorList shape mismatch: ");const s=x0(this.elementShape,this.tensors,e);return Te(()=>{const a=this.tensors.map(i=>xe(i,s));return Sa(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=x0(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Ai(s.shape,e,"TensorList shape mismatch: "),xe(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Ai(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Xr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new Pd([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Ai(this.tensors[e].shape,t,"TensorList shape mismatch: ");const s=x0(this.elementShape,this.tensors,t);return xe(this.tensors[e],s)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Ai(this.elementShape,t.shape,"TensorList shape mismatch: "),Xr(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Ai(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=x0(this.elementShape,this.tensors,r);return e.length===0?Fi([],[0].concat(s)):Te(()=>{const a=e.map(i=>xe(this.tensors[i],s));return Sa(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Ai(this.elementShape,t,"TensorList shape mismatch: ");const r=x0(this.elementShape,this.tensors,t);return this.size()===0?Fi([],[0].concat(r)):Te(()=>{const s=this.tensors.map(a=>xe(a,r));return Ir(s,0)})}}function a2e(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const s=n.shape.slice(1);Ai(s,e,"TensorList shape mismatch: ");const a=ui(n);return new Pd(a,e,r)}function i2e(n,e,t,r){return new Pd([],n,e,r)}function o2e(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const a=new Pd([],t,n.dtype,r),i=ui(n,0);return e.forEach((o,l)=>{a.setItem(o,i[l])}),a}function l2e(n,e,t){let r=0;const s=e.map(d=>(r+=d,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),i=Tk(a,t),o=r===0?0:n.size/r,l=Te(()=>{const d=[];n=xe(n,[1,r,o]);for(let h=0;h<e.length;++h){const g=[0,h===0?0:s[h-1],0],x=[1,e[h],o];d[h]=xe(hn(n,g,x),i)}return n.dispose(),d}),c=new Pd([],t,n.dtype,e.length);for(let d=0;d<l.length;d++)c.setItem(d,l[d]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2e=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=B("thenBranch",n,e,t),s=B("elseBranch",n,e,t),a=B("cond",n,e,t),i=B("args",n,e,t);return(await a.data())[0]?t.functionMap[r].executeFunctionAsync(i,t.tensorArrayMap,t.tensorListMap):t.functionMap[s].executeFunctionAsync(i,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=B("body",n,e,t),s=B("cond",n,e,t),a=B("args",n,e,t),i=await t.functionMap[s].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap),o=a.map(d=>d.id);let l=await i[0].data();i.forEach(d=>{!d.kept&&o.indexOf(d.id)===-1&&d.dispose()});let c=a;for(;l[0];){const d=c;c=await t.functionMap[r].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);const h=c.map(g=>g.id);d.forEach(g=>{!g.kept&&o.indexOf(g.id)===-1&&h.indexOf(g.id)===-1&&g.dispose()});const p=await t.functionMap[s].executeFunctionAsync(c,t.tensorArrayMap,t.tensorListMap);l=await p[0].data(),p.forEach(g=>{!g.kept&&o.indexOf(g.id)===-1&&h.indexOf(g.id)===-1&&g.dispose()})}return c}case"LoopCond":{const r=B("pred",n,e,t);return[_l(r)]}case"Switch":{const r=B("pred",n,e,t);let s=B("data",n,e,t);return s.kept||(s=_l(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=n.inputNames.find(s=>ws(s,e,t)!==void 0);if(r){const s=ws(r,e,t);return[_l(s)]}return}case"Enter":{const r=B("frameName",n,e,t),s=B("tensor",n,e,t);return t.enterFrame(r),[_l(s)]}case"Exit":{const r=B("tensor",n,e,t);return t.exitFrame(),[_l(r)]}case"NextIteration":{const r=B("tensor",n,e,t);return t.nextIteration(),[_l(r)]}case"TensorArrayV3":{const r=B("size",n,e,t),s=B("dtype",n,e,t),a=B("elementShape",n,e,t),i=B("dynamicSize",n,e,t),o=B("clearAfterRead",n,e,t),l=B("identicalElementShapes",n,e,t),c=B("name",n,e,t),d=new s2e(c,s,r,a,l,i,o);return t.addTensorArray(d),[d.idTensor,Rt(1)]}case"TensorArrayWriteV3":{const r=B("tensorArrayId",n,e,t),s=B("index",n,e,t),a=B("tensor",n,e,t),i=t.getTensorArray(r.id);return i.write(s,a),[i.idTensor]}case"TensorArrayReadV3":{const r=B("tensorArrayId",n,e,t),s=B("index",n,e,t);return[t.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=B("tensorArrayId",n,e,t),s=B("indices",n,e,t),a=B("dtype",n,e,t);return[t.getTensorArray(r.id).gather(s,a)]}case"TensorArrayScatterV3":{const r=B("tensorArrayId",n,e,t),s=B("indices",n,e,t),a=B("tensor",n,e,t),i=t.getTensorArray(r.id);return i.scatter(s,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=B("tensorArrayId",n,e,t),s=t.getTensorArray(r.id),a=B("dtype",n,e,t);return[s.concat(a)]}case"TensorArraySplitV3":{const r=B("tensorArrayId",n,e,t),s=B("tensor",n,e,t),a=B("lengths",n,e,t),i=t.getTensorArray(r.id);return i.split(a,s),[i.idTensor]}case"TensorArraySizeV3":{const r=B("tensorArrayId",n,e,t),s=t.getTensorArray(r.id);return[Rt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=B("tensorArrayId",n,e,t),s=t.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=B("tensorListId",n,e,t),s=B("index",n,e,t),a=B("tensor",n,e,t),i=t.getTensorList(r.id);return i.setItem(s,a),[i.idTensor]}case"TensorListGetItem":{const r=B("tensorListId",n,e,t),s=B("index",n,e,t),a=B("elementShape",n,e,t),i=B("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(s,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=B("indices",n,e,t),s=B("tensor",n,e,t),a=B("elementShape",n,e,t),i=B("numElements",n,e,t),o=o2e(s,r,a,i);return t.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=B("elementShape",n,e,t),s=B("elementDType",n,e,t);let a;n.op==="TensorListReserve"?a="numElements":a="maxNumElements";const i=B(a,n,e,t),o=n.op==="TensorListReserve"?-1:i,l=i2e(r,s,i,o);return t.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=B("tensorListId",n,e,t),s=B("indices",n,e,t),a=B("elementShape",n,e,t),i=B("elementDType",n,e,t);return[t.getTensorList(r.id).gather(s,i,a)]}case"TensorListStack":{const r=B("tensorListId",n,e,t),s=B("elementShape",n,e,t),a=B("elementDType",n,e,t),i=B("numElements",n,e,t);return[t.getTensorList(r.id).stack(s,a,i)]}case"TensorListFromTensor":{const r=B("tensor",n,e,t),s=B("elementShape",n,e,t),a=B("elementDType",n,e,t),i=a2e(r,s,a);return t.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=B("tensorListId",n,e,t),s=t.getTensorList(r.id),a=B("dtype",n,e,t),i=B("elementShape",n,e,t);return[s.concat(a,i)]}case"TensorListPushBack":{const r=B("tensorListId",n,e,t),s=B("tensor",n,e,t),a=t.getTensorList(r.id);return a.pushBack(s),[a.idTensor]}case"TensorListPopBack":{const r=B("tensorListId",n,e,t),s=B("elementShape",n,e,t),a=B("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(s,a)]}case"TensorListSplit":{const r=B("tensor",n,e,t),s=B("elementShape",n,e,t),a=B("lengths",n,e,t),i=l2e(r,a,s);return t.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=B("tensorListId",n,e,t),s=t.getTensorList(r.id);return[Rt(s.size(),"int32")]}case"TensorListResize":{const r=B("tensorListId",n,e,t),s=B("size",n,e,t),i=t.getTensorList(r.id).resize(s);return t.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qL(n,e,t){const[r,s]=B("fusedOps",n,e,t),a=r==="biasadd",i=!a,o=s==="prelu",l=r==="fusedbatchnorm",c=B("numArgs",n,e,t);if(a){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const d=B("strides",n,e,t),h=Xb(n,e,t),p=B("dataFormat",n,e,t).toUpperCase(),g=B("dilations",n,e,t);let[x,y]=B("args",n,e,t);i&&(y=x,x=void 0);const b=B("leakyreluAlpha",n,e,t);return{stride:d,pad:h,dataFormat:p,dilations:g,biasArg:x,preluArg:y,activationFunc:s,leakyreluAlpha:b}}const u2e=(n,e,t,r=As)=>{switch(n.op){case"Conv1D":{const s=B("stride",n,e,t),a=B("pad",n,e,t),i=B("dataFormat",n,e,t).toUpperCase(),o=B("dilation",n,e,t);return[r.conv1d(B("x",n,e,t),B("filter",n,e,t),s,a,i,o)]}case"Conv2D":{const s=B("strides",n,e,t),a=Xb(n,e,t),i=B("dataFormat",n,e,t).toUpperCase(),o=B("dilations",n,e,t);return[r.conv2d(B("x",n,e,t),B("filter",n,e,t),[s[1],s[2]],a,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:c,activationFunc:d,leakyreluAlpha:h}=qL(n,e,t);return[r.fused.conv2d({x:B("x",n,e,t),filter:B("filter",n,e,t),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:d,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:c,activationFunc:d,leakyreluAlpha:h}=qL(n,e,t);return[r.fused.depthwiseConv2d({x:B("x",n,e,t),filter:B("filter",n,e,t),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:d,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=B("outputShape",n,e,t),a=B("strides",n,e,t),i=Xb(n,e,t);return[r.conv2dTranspose(B("x",n,e,t),B("filter",n,e,t),s,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=B("strides",n,e,t),a=Xb(n,e,t),i=B("dilations",n,e,t),o=B("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(B("input",n,e,t),B("filter",n,e,t),[s[1],s[2]],a,o,[i[1],i[2]])]}case"Conv3D":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("dataFormat",n,e,t).toUpperCase(),o=B("dilations",n,e,t);return[r.conv3d(B("x",n,e,t),B("filter",n,e,t),[s[1],s[2],s[3]],a,i,[o[1],o[2],o[3]])]}case"AvgPool":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("kernelSize",n,e,t);return[r.avgPool(B("x",n,e,t),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPool":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("kernelSize",n,e,t);return[r.maxPool(B("x",n,e,t),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPoolWithArgmax":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("kernelSize",n,e,t),o=B("includeBatchInIndex",n,e,t),{result:l,indexes:c}=r.maxPoolWithArgmax(B("x",n,e,t),[i[1],i[2]],[s[1],s[2]],a,o);return[l,c]}case"AvgPool3D":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("kernelSize",n,e,t);return[r.avgPool3d(B("x",n,e,t),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"MaxPool3D":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("kernelSize",n,e,t);return[r.maxPool3d(B("x",n,e,t),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"Dilation2D":{const s=B("strides",n,e,t),a=B("pad",n,e,t),i=B("dilations",n,e,t),o=s[1],l=s[2],c=i[1],d=i[2];return[r.dilation2d(B("x",n,e,t),B("filter",n,e,t),[o,l],a,[c,d],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2e=(n,e,t,r=As)=>{switch(n.op){case"Fill":{const s=B("shape",n,e,t),a=B("dtype",n,e,t),i=B("value",n,e,t);return[r.fill(s,i,a)]}case"LinSpace":{const s=B("start",n,e,t),a=B("stop",n,e,t),i=B("num",n,e,t);return[r.linspace(s,a,i)]}case"Multinomial":{const s=B("logits",n,e,t),a=B("numSamples",n,e,t),i=B("seed",n,e,t);return[r.multinomial(s,a,i)]}case"OneHot":{const s=B("indices",n,e,t),a=B("depth",n,e,t),i=B("onValue",n,e,t),o=B("offValue",n,e,t),l=B("dtype",n,e,t);return[r.oneHot(s,a,i,o,l)]}case"Ones":return[r.ones(B("shape",n,e,t),B("dtype",n,e,t))];case"OnesLike":return[r.onesLike(B("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(B("shape",n,e,t),B("dtype",n,e,t),B("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(B("shape",n,e,t),B("minval",n,e,t),B("maxval",n,e,t),B("dtype",n,e,t))];case"RandomUniformInt":return[r.randomUniformInt(B("shape",n,e,t),B("minval",n,e,t),B("maxval",n,e,t),B("seed",n,e,t))];case"Range":{const s=B("start",n,e,t),a=B("stop",n,e,t),i=B("step",n,e,t);return[r.range(s,a,i,B("dtype",n,e,t))]}case"TruncatedNormal":{const s=B("shape",n,e,t),a=B("mean",n,e,t),i=B("stdDev",n,e,t),o=B("seed",n,e,t);return[r.truncatedNormal(s,a,i,B("dtype",n,e,t),o)]}case"Zeros":return[r.zeros(B("shape",n,e,t),B("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(B("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eE(n,e,t){const r=B("boxes",n,e,t),s=B("scores",n,e,t),a=B("maxOutputSize",n,e,t),i=B("iouThreshold",n,e,t),o=B("scoreThreshold",n,e,t),l=B("softNmsSigma",n,e,t);return{boxes:r,scores:s,maxOutputSize:a,iouThreshold:i,scoreThreshold:o,softNmsSigma:l}}const f2e=async(n,e,t,r,s=As)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:d}=eE(n,e,t),h=await s.image.nonMaxSuppressionWithScoreAsync(a,i,o,l,c,d);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=eE(n,e,t),d=B("padToMaxOutputSize",n,e,t),h=await s.image.nonMaxSuppressionPaddedAsync(a,i,o,l,c,d);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=eE(n,e,t);return[await s.image.nonMaxSuppressionAsync(a,i,o,l,c)]}case"Where":{const a=s.cast(B("condition",n,e,t),"bool"),i=[await s.whereAsync(a)];return a.dispose(),i}case"ListDiff":return s.setdiff1dAsync(B("x",n,e,t),B("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2e=(n,e,t,r=As)=>{switch(n.op){case"LowerBound":{const s=B("sortedSequence",n,e,t),a=B("values",n,e,t);return[r.lowerBound(s,a)]}case"TopKV2":{const s=B("x",n,e,t),a=B("k",n,e,t),i=B("sorted",n,e,t),o=r.topk(s,a,i);return[o.values,o.indices]}case"UpperBound":{const s=B("sortedSequence",n,e,t),a=B("values",n,e,t);return[r.upperBound(s,a)]}case"Unique":{const s=B("x",n,e,t),a=r.unique(s);return[a.values,a.indices]}case"UniqueV2":{const s=B("x",n,e,t),a=B("axis",n,e,t),i=r.unique(s,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p2e=(n,e,t,r=As)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const s=B("default",n,e,t);return[ws(n.name,e,t)||s];case"Placeholder":return[ws(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const d=B("x",n,e,t);return[_l(d)]}case"IdentityN":return B("x",n,e,t).map(d=>_l(d));case"Snapshot":const a=B("x",n,e,t);return[_l(a)];case"Shape":return[r.tensor1d(B("x",n,e,t).shape,"int32")];case"ShapeN":return B("x",n,e,t).map(d=>r.tensor1d(d.shape));case"Size":return[r.scalar(B("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(B("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=B("x",n,e,t),o=B("data",n,e,t),l=B("message",n,e,t),c=B("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let d=0;d<o.length;d++)console.log(Array.prototype.slice.call(o[d].dataSync()).slice(0,c));return[i];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m2e{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Rt(0),this.tensorMap=new Map,Xr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Rt(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),Te(()=>{const s=ui(t),a=r.length,i=s.length;Z(a===i,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${i} elements.`);for(let o=0;o<a;o++){const l=r[o],c=s[o];Xr(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return Te(()=>{const s=[];for(let a=0;a<r.length;a++){const i=r[a],o=this.findWithDefault(i,t);s.push(o)}return Sa(s)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g2e=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(n.name);if(s!=null)return[s];{const a=B("keyDType",n,e,t),i=B("valueDType",n,e,t),o=new m2e(a,i);return r.addHashTable(n.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=B("tableHandle",n,e,t,r),a=B("keys",n,e,t),i=B("values",n,e,t);return[await r.getHashTableById(s.id).import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const s=B("tableHandle",n,e,t,r),a=B("keys",n,e,t),i=B("defaultValue",n,e,t);return[await r.getHashTableById(s.id).find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=B("tableHandle",n,e,t,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2e=(n,e,t,r=As)=>{switch(n.op){case"ResizeBilinear":{const s=B("images",n,e,t),a=B("size",n,e,t),i=B("alignCorners",n,e,t),o=B("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(s,[a[0],a[1]],i,o)]}case"ResizeNearestNeighbor":{const s=B("images",n,e,t),a=B("size",n,e,t),i=B("alignCorners",n,e,t),o=B("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(s,[a[0],a[1]],i,o)]}case"CropAndResize":{const s=B("image",n,e,t),a=B("boxes",n,e,t),i=B("boxInd",n,e,t),o=B("cropSize",n,e,t),l=B("method",n,e,t),c=B("extrapolationValue",n,e,t);return[r.image.cropAndResize(s,a,i,o,l,c)]}case"ImageProjectiveTransformV3":{const s=B("images",n,e,t),a=B("transforms",n,e,t),i=B("outputShape",n,e,t),o=B("fillValue",n,e,t),l=B("interpolation",n,e,t),c=B("fillMode",n,e,t);return[r.image.transform(s,a,l.toLowerCase(),c.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y2e=(n,e,t,r=As)=>{switch(n.op){case"Equal":return[r.equal(B("a",n,e,t),B("b",n,e,t))];case"NotEqual":return[r.notEqual(B("a",n,e,t),B("b",n,e,t))];case"Greater":return[r.greater(B("a",n,e,t),B("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(B("a",n,e,t),B("b",n,e,t))];case"Less":return[r.less(B("a",n,e,t),B("b",n,e,t))];case"LessEqual":return[r.lessEqual(B("a",n,e,t),B("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(B("a",n,e,t),B("b",n,e,t))];case"LogicalNot":return[r.logicalNot(B("a",n,e,t))];case"LogicalOr":return[r.logicalOr(B("a",n,e,t),B("b",n,e,t))];case"Select":case"SelectV2":return[r.where(B("condition",n,e,t),B("a",n,e,t),B("b",n,e,t))];case"BitwiseAnd":return[r.bitwiseAnd(B("a",n,e,t),B("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e=(n,e,t,r=As)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(B("a",n,e,t),B("b",n,e,t),B("transposeA",n,e,t),B("transposeB",n,e,t))];case"Einsum":return[r.einsum(B("equation",n,e,t),...B("tensors",n,e,t))];case"Transpose":return[r.transpose(B("x",n,e,t),B("perm",n,e,t))];case"_FusedMatMul":const[s,a]=B("fusedOps",n,e,t),i=s==="biasadd",o=a==="prelu",l=B("numArgs",n,e,t),c=B("leakyreluAlpha",n,e,t);if(i){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[d,h]=B("args",n,e,t);return[r.fused.matMul({a:B("a",n,e,t),b:B("b",n,e,t),transposeA:B("transposeA",n,e,t),transposeB:B("transposeB",n,e,t),bias:d,activation:a,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(B("a",n,e,t),B("numLower",n,e,t),B("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v2e=(n,e,t,r=As)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(B("x",n,e,t),B("axis",n,e,t),B("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(B("x",n,e,t),B("mean",n,e,t),B("variance",n,e,t),B("offset",n,e,t),B("scale",n,e,t),B("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(B("x",n,e,t),B("mean",n,e,t),B("variance",n,e,t),B("offset",n,e,t),B("scale",n,e,t),B("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(B("x",n,e,t),B("radius",n,e,t),B("bias",n,e,t),B("alpha",n,e,t),B("beta",n,e,t))];case"Softmax":return[r.softmax(B("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(B("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w2e=(n,e,t,r=As)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:a}=r.raggedGather(B("paramsNestedSplits",n,e,t),B("paramsDenseValues",n,e,t),B("indices",n,e,t),B("outputRaggedRank",n,e,t));return s.concat(a)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:a}=r.raggedRange(B("starts",n,e,t),B("limits",n,e,t),B("splits",n,e,t));return[s,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(B("shape",n,e,t),B("values",n,e,t),B("defaultValue",n,e,t),B("rowPartitionTensors",n,e,t),B("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S2e=(n,e,t,r=As)=>{switch(n.op){case"Max":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.max(B("x",n,e,t),o,l)]}case"Mean":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.mean(B("x",n,e,t),o,l)]}case"Min":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.min(B("x",n,e,t),o,l)]}case"Sum":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.sum(B("x",n,e,t),o,l)]}case"All":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.all(B("x",n,e,t),o,l)]}case"Any":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.any(B("x",n,e,t),o,l)]}case"ArgMax":{const o=B("axis",n,e,t);return[r.argMax(B("x",n,e,t),o)]}case"ArgMin":{const o=B("axis",n,e,t);return[r.argMin(B("x",n,e,t),o)]}case"Prod":{const o=B("axis",n,e,t),l=B("keepDims",n,e,t);return[r.prod(B("x",n,e,t),o,l)]}case"Cumprod":{const o=B("axis",n,e,t),l=B("exclusive",n,e,t),c=B("reverse",n,e,t);return[r.cumprod(B("x",n,e,t),o,l,c)]}case"Cumsum":{const o=B("axis",n,e,t),l=B("exclusive",n,e,t),c=B("reverse",n,e,t);return[r.cumsum(B("x",n,e,t),o,l,c)]}case"Bincount":const s=B("x",n,e,t),a=B("weights",n,e,t),i=B("size",n,e,t);return[r.bincount(s,a,i)];case"DenseBincount":{const o=B("x",n,e,t),l=B("weights",n,e,t),c=B("size",n,e,t),d=B("binaryOutput",n,e,t);return[r.denseBincount(o,l,c,d)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2e=(n,e,t,r=As)=>{switch(n.op){case"ConcatV2":case"Concat":{const s=B("n",n,e,t),a=B("axis",n,e,t);let i=B("tensors",n,e,t);return i=i.slice(0,s),[r.concat(i,a)]}case"Gather":{const s=B("x",n,e,t),a=B("indices",n,e,t);return[r.gather(s,r.cast(a,"int32"),0)]}case"GatherV2":{const s=B("axis",n,e,t),a=B("batchDims",n,e,t),i=B("x",n,e,t),o=B("indices",n,e,t);return[r.gather(i,r.cast(o,"int32"),s,a)]}case"Reverse":{const s=B("dims",n,e,t),a=[];for(let o=0;o<s.length;o++)s[o]&&a.push(o);const i=B("x",n,e,t);return[r.reverse(i,a)]}case"ReverseV2":{const s=B("axis",n,e,t),a=B("x",n,e,t);return[r.reverse(a,s)]}case"Slice":{const s=B("begin",n,e,t),a=B("size",n,e,t);return[r.slice(B("x",n,e,t),s,a)]}case"StridedSlice":{const s=B("begin",n,e,t),a=B("end",n,e,t),i=B("strides",n,e,t),o=B("beginMask",n,e,t),l=B("endMask",n,e,t),c=B("ellipsisMask",n,e,t),d=B("newAxisMask",n,e,t),h=B("shrinkAxisMask",n,e,t),p=B("x",n,e,t);return[r.stridedSlice(p,s,a,i,o,l,c,d,h)]}case"Pack":return Te(()=>{const s=B("axis",n,e,t),a=B("tensors",n,e,t),i=a[0].shape,o=r.squeeze(a[0]).shape,l=a.map(c=>{const d=on(c.shape,i);if(!d&&!on(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return d?c:r.reshape(c,i)});return[r.stack(l,s)]});case"Unpack":{const s=B("axis",n,e,t),a=B("tensor",n,e,t);return r.unstack(a,s)}case"Tile":{const s=B("reps",n,e,t);return[r.tile(B("x",n,e,t),s)]}case"Split":case"SplitV":{const s=B("axis",n,e,t),a=B("numOrSizeSplits",n,e,t),i=B("x",n,e,t);return r.split(i,a,s)}case"ScatterNd":{const s=B("indices",n,e,t),a=B("values",n,e,t),i=B("shape",n,e,t);return[r.scatterND(s,a,i)]}case"GatherNd":{const s=B("x",n,e,t),a=B("indices",n,e,t);return[r.gatherND(s,a)]}case"SparseToDense":{const s=B("sparseIndices",n,e,t),a=B("outputShape",n,e,t),i=B("sparseValues",n,e,t),o=B("defaultValue",n,e,t);return[r.sparseToDense(s,i,a,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{const s=B("indices",n,e,t),a=B("values",n,e,t),i=B("tensor",n,e,t);return[r.tensorScatterUpdate(i,s,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2e=(n,e,t,r=As)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:a,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(B("indices",n,e,t),B("values",n,e,t),B("denseShape",n,e,t),B("defaultValue",n,e,t));return[s,a,i,o]}case"SparseReshape":{const{outputIndices:s,outputShape:a}=r.sparse.sparseReshape(B("inputIndices",n,e,t),B("inputShape",n,e,t),B("newShape",n,e,t));return[s,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(B("data",n,e,t),B("indices",n,e,t),B("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(B("data",n,e,t),B("indices",n,e,t),B("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C2e=(n,e,t,r=As)=>{switch(n.op){case"FFT":return[r.fft(B("x",n,e,t))];case"IFFT":return[r.ifft(B("x",n,e,t))];case"RFFT":return[r.rfft(B("x",n,e,t))];case"IRFFT":return[r.irfft(B("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E2e=(n,e,t,r=As)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(B("input",n,e,t),B("pattern",n,e,t),B("rewrite",n,e,t),B("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:s,nGramsSplits:a}=r.string.stringNGrams(B("data",n,e,t),B("dataSplits",n,e,t),B("separator",n,e,t),B("nGramWidths",n,e,t),B("leftPad",n,e,t),B("rightPad",n,e,t),B("padWidth",n,e,t),B("preserveShortSequences",n,e,t));return[s,a]}case"StringSplit":{const{indices:s,values:a,shape:i}=r.string.stringSplit(B("input",n,e,t),B("delimiter",n,e,t),B("skipEmpty",n,e,t));return[s,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(B("input",n,e,t),B("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2e=(n,e,t,r=As)=>{switch(n.op){case"Cast":return[r.cast(B("x",n,e,t),B("dtype",n,e,t))];case"ExpandDims":{const s=B("axis",n,e,t);return[r.expandDims(B("x",n,e,t),s)]}case"Squeeze":{const s=B("axis",n,e,t);return[r.squeeze(B("x",n,e,t),s)]}case"Reshape":return[r.reshape(B("x",n,e,t),B("shape",n,e,t))];case"EnsureShape":return[r.ensureShape(B("x",n,e,t),B("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(B("x",n,e,t),B("padding",n,e,t),B("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(B("x",n,e,t),B("padding",n,e,t),B("constantValue",n,e,t))];case"SpaceToBatchND":{const s=B("blockShape",n,e,t),a=B("paddings",n,e,t);return[r.spaceToBatchND(B("x",n,e,t),s,a)]}case"BatchToSpaceND":{const s=B("blockShape",n,e,t),a=B("crops",n,e,t);return[r.batchToSpaceND(B("x",n,e,t),s,a)]}case"DepthToSpace":{const s=B("blockSize",n,e,t),a=B("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(B("x",n,e,t),s,a)]}case"BroadcastTo":return[r.broadcastTo(B("x",n,e,t),B("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(B("s0",n,e,t),B("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KL(n,e,t,r,s=Te){const a=((i,o,l)=>{switch(i.category){case"arithmetic":return s(()=>n2e(i,o,l));case"basic_math":return s(()=>r2e(i,o,l));case"control":return c2e(i,o,l);case"convolution":return s(()=>u2e(i,o,l));case"creation":return s(()=>d2e(i,o,l));case"dynamic":return f2e(i,o,l);case"evaluation":return s(()=>h2e(i,o,l));case"image":return s(()=>x2e(i,o,l));case"graph":return s(()=>p2e(i,o,l));case"logical":return s(()=>y2e(i,o,l));case"matrices":return s(()=>b2e(i,o,l));case"normalization":return s(()=>v2e(i,o,l));case"ragged":return s(()=>w2e(i,o,l));case"reduction":return s(()=>S2e(i,o,l));case"slice_join":return s(()=>T2e(i,o,l));case"sparse":return s(()=>N2e(i,o,l));case"spectral":return s(()=>C2e(i,o,l));case"string":return s(()=>E2e(i,o,l));case"transformation":return s(()=>k2e(i,o,l));case"hash_table":return g2e(i,o,l,r);case"custom":const c=A8(i.op);if(c&&c.customExecutor)return c.customExecutor(new t2e(i,o,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return su(a)?a.then(i=>[].concat(i)):[].concat(a)}class XL{constructor(e={},t={},r={},s={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YL(n,e,t,r){const s=new Set,a=[];let i=null,o=null;const l=new Set,c=new Set(Object.keys(n).map(p=>$a(p)[0]));r=r||[];const d=new Set(r.map(p=>$a(p.name)[0])),h=[...e];for(;h.length>0;){const p=h.pop();if((cd(p)||F2e(p)||L2e(p))&&i==null&&(i=p,o=i.children.map(g=>g.name).filter(g=>s.has(g))),s.add(p.name),t[p.name]==null&&!c.has(p.name)&&!d.has(p.name)){if(p.inputs.length===0){a.push(p.name);continue}p.inputs.forEach(g=>{l.has(g.name)||(l.add(g.name),h.push(g))})}}return{inputs:n,outputs:e,usedNodes:s,missingInputs:a,dynamicNode:i,syncInputs:o}}function _2e(n,e){const{usedNodes:t,inputs:r}=e,s=Object.keys(r).map(b=>$a(b)[0]).map(b=>n.nodes[b]),a=n.initNodes||[],i=b=>t.has(typeof b=="string"?b:b.name);function o(b){return[...new Map(b.map(S=>[S.name,S])).values()]}const l=o([...s,...n.weights,...a]).filter(i),c=o([...l,...Object.values(n.nodes)]).filter(i),d=new Map(c.map(b=>[b.name,b])),h={};for(const b of c){h[b.name]=h[b.name]||0;for(const S of b.children)i(S)||(h[S.name]=Number.POSITIVE_INFINITY),h[S.name]=(h[S.name]||0)+1}const p=Object.entries(h).filter(([,b])=>b===0).map(([b])=>b),g=[...p];for(;p.length>0;){const b=p.pop(),S=d.get(b);for(const T of S.children.filter(i))--h[T.name]===0&&(g.push(T.name),p.push(T.name))}const x=g.map(b=>d.get(b)),y=I2e(x,l);return A2e(y,l),y}function I2e(n,e){const t=new Map(n.map(i=>[i.name,i])),r=e.map(i=>i.name),s=new Set(r);for(;r.length>0;){const i=r.pop(),o=t.get(i);for(const l of o.children)!t.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return n.filter(i=>s.has(i.name))}class gb extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function A2e(n,e){const t=new Map(n.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),s=o=>r.has(typeof o=="string"?o:o.name),a=new Set(n.map(o=>o.name)),i=o=>a.has(typeof o=="string"?o:o.name);for(const o of n){for(const l of o.children.filter(i)){if(!t.has(l.name))throw new gb(`Child ${l.name} of node ${o.name} is unreachable.`);if(t.get(o.name)>t.get(l.name))throw new gb(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!s(o))for(const l of o.inputs){if(!t.has(l.name))throw new gb(`Input ${l.name} of node ${o.name} is unreachable.`);if(t.get(l.name)>t.get(o.name))throw new gb(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function $2e(n){const e=new Map(n.map((o,l)=>[o.name,l])),t=Number.MAX_SAFE_INTEGER,r=n.map((o,l)=>cd(o)?t:l),s=o=>{const l=r[e.get(o.name)];return l??-1},a=n.map((o,l)=>o.children.map(s).reduce((c,d)=>Math.max(c,d),r[l])),i=new Map;for(let o=0;o<n.length;++o){const l=a[o];if(l===t)continue;const c=n[o],d=n[l];i.has(d.name)||i.set(d.name,[]),i.get(d.name).push(c)}return i}const R2e=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),O2e=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),D2e=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function cd(n){return R2e.has(n.op)}function F2e(n){return O2e.has(n.op)}function L2e(n){return D2e.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uv{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new Uv(e.functions[r],this)})}getCompilationKey(e,t){const r=e.map(a=>a.name).sort(),s=t.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,t){const r=YL(e,t,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:a,syncInputs:i}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(s.length>0){const c=t.map(h=>h.name),d=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${d}]. Missing the following inputs: [${s}]`)}const o=_2e(this.graph,r),l=$2e(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return Xr(t),t}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const s=r.map(p=>this.graph.nodes[$a(p)[0]]),a=t.map(p=>$a(p)[0]),i=new Set(a);let o=a.map(p=>this.graph.nodes[p]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(s,o);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,o),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Ce().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const d={},h={};return Te(()=>{const p=new XL(this.weightMap,d,h,this.functionExecutorMap,this.parseNodeNameCache),g=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(S=>{const[T,N]=$a(S,p),C=[];C[N]=e[S],g[T]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[T]=this.cloneTensorList(C))});const x=this.getFrozenTensorIds(g),{orderedNodes:y,nodeLiveUntilMap:b}=c;for(const S of y){if(g[S.name])continue;const T=KL(S,g,p,this._resourceManager);if(su(T))throw new Error(`The execution of the op '${S.op}' returned a promise. Please use model.executeAsync() instead.`);g[S.name]=T,this.keepIntermediateTensors&&(this.clonedTensorsMap[S.name]=this.cloneTensorList(T)),this.checkTensorForDisposalWithNodeLiveUntilInfo(S,g,p,x,i,b.get(S.name))}return this.parent==null&&p.dispose(x),t.map(S=>ws(S,g,p))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(t)}checkTensorForDisposal(e,t,r,s,a,i,o){if(!(cd(t)||i.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+t.children.length);for(const l of t.inputs){if(cd(l))continue;const c=VL(l.name,r,s);if(c!=null)for(const d of c){if(!d||d.kept||a.has(d.id))continue;const h=o[d.id];h===1?(d.dispose(),delete o[d.id]):h!=null&&o[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,s,a,i){function o(l){return cd(l)||a.has(l.name)}if(!(cd(e)||i==null))for(const l of i){if(o(l))continue;const c=VL(l.name,t,r);for(const d of c)!d||d.kept||s.has(d.id)||d.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,s={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Ce().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const i=new XL(this.weightMap,s,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,i,t,r),l=t.map(p=>ws(p,o,i)),c=l.map(p=>p.id),d=Object.keys(e).map(p=>e[p].id),h=new Set([...c,...d,...this.weightIds]);return Object.values(o).forEach(p=>{p.forEach(g=>{g&&!g.isDisposed&&!h.has(g.id)&&g.dispose()})}),this.parent==null&&i.dispose(h),l}async executeFunctionAsync(e,t,r){const s=e.reduce((a,i,o)=>(a[this.inputs[o].name]=i,a),{});return this._executeAsync(s,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,s){const a=Object.keys(e),i=a.map(C=>this.graph.nodes[$a(C)[0]]),o=r.map(C=>$a(C)[0]),l=new Set(o);let c=o.map(C=>this.graph.nodes[C]);c.length===0&&(c=this._outputs);const{usedNodes:d,missingInputs:h,dynamicNode:p,syncInputs:g}=YL(e,c,this.weightMap,this._initNodes),x=[...i,...this.graph.weights,...this._initNodes||[]].map(C=>({node:C,contexts:t.currentContext})),y=Object.assign({},this.weightMap);Object.keys(e).forEach(C=>{const[I,F]=$a(C),D=[];D[F]=e[C],y[I]=D});const b={},S=this.getFrozenTensorIds(y),T={};for(;x.length>0;){const C=this.processStack(i,x,t,y,T,S,l,b,d);await Promise.all(C)}p==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const N=c.filter(C=>!cd(C)&&!ws(C.name,y,t)).map(C=>C.name);if(N.length>0){let C="";throw p!=null&&(C=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${g}]`),new Error(`Cannot compute the outputs [${N}] from the provided inputs [${a}]. Consider providing the following inputs: [${h}]. ${C}`)}return y}processStack(e,t,r,s,a,i,o,l,c){const d=[];for(;t.length>0;){const h=t.pop();r.currentContext=h.contexts;let p="";if(h.node.op==="Enter"&&B("isConstant",h.node,s,r)&&([p]=kl(h.node.name,r)),s[h.node.name]==null){const g=KL(h.node,s,r,this._resourceManager);p||([p]=kl(h.node.name,r));const x=r.currentContext;su(g)?d.push(g.then(y=>(s[p]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(y)),r.currentContext=x,this.checkTensorForDisposal(p,h.node,s,r,i,o,l),this.processChildNodes(h.node,t,r,s,a,c),y))):(s[p]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(g)),this.checkTensorForDisposal(p,h.node,s,r,i,o,l),this.processChildNodes(h.node,t,r,s,a,c))}else this.processChildNodes(h.node,t,r,s,a,c)}return d}processChildNodes(e,t,r,s,a,i){e.children.forEach(o=>{const[l]=kl(o.name,r);a[l]||!i.has(o.name)||(o.op==="Merge"?o.inputNames.some(c=>!!ws(c,s,r))&&(a[l]=!0,t.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!ws(c,s,r))&&(a[l]=!0,t.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[s]=$a(t),a=this.graph.nodes[s];if(a.attrParams.shape&&a.attrParams.shape.value){const i=a.attrParams.shape.value,o=i.length===r.shape.length&&r.shape.every((l,c)=>i[c]===-1||i[c]===l);Z(o,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&Z(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;const s={};for(const a in e){const i=(r=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||r===void 0?void 0:r[a];i!=null?s[i.name]=e[a]:s[a]=e[a]}return s}checkInputs(e){const t=Object.keys(e).filter(r=>{const[s]=$a(r);return this.graph.nodes[s]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var r,s;const a=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{const[r]=$a(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}}class M2e{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2e="?tfjs-format=file",B2e="model.json";class r${get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=IA){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new M2e}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return su(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await kj(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(s=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Uv(WL.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=WL.Instance.transformGraph(e.modelInitializer);this.initializer=new Uv(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof kn?[e]:e,r={};return t.forEach((s,a)=>r[this.structuredOutputKeys[a]]=s),r}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof kn)&&!Array.isArray(e)){const a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(const i in a){const o=a[i];o.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((a,i)=>{var o,l,c;const d=(c=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[i])===null||c===void 0?void 0:c.resourceId;return d!=null?a[i]=this.resourceIdToCapturedInput[d]:a[i]=e[s++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let s=0;s<r.length;s++){const a=r[s],i=t[a];this.resourceIdToCapturedInput[i.resourceId]=e[s]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&tn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function j2e(n,e={},t=IA){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=U2e(n));const r=new r$(n,e,t);return await r.load(),r}function z2e(n){if(n==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(n instanceof Array){const[r,s]=n;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const a=Pv(r.weightsManifest),i=pI(r,a,s);e=jv(i)}else if("load"in n)e=n;else if("modelTopology"in n&&"weightSpecs"in n&&"weightData"in n)e=jv(n);else throw new Error("Unknown model format");const t=new r$(e);return t.load(),t}function U2e(n){return n.endsWith("/")||(n=n+"/"),`${n}${B2e}${P2e}`}/** @license See the LICENSE file. */const V2e="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2e=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:r$,deregisterOp:mwe,loadGraphModel:j2e,loadGraphModelSync:z2e,registerOp:pwe,version_converter:V2e},Symbol.toStringTag,{value:"Module"})),H2e=jk(W2e),G2e=jk(fwe);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var q2e=k0.exports,QL;function K2e(){return QL||(QL=1,function(n,e){(function(t,r){r(e,H2e,G2e)})(q2e,function(t,r,s){const a={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class i{constructor(l,c){this.modelPath=c||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=s.zeros([1,300,300,3],"int32"),c=await this.model.executeAsync(l);await Promise.all(c.map(d=>d.data())),c.map(d=>d.dispose()),l.dispose()}async infer(l,c,d){const h=s.tidy(()=>(l instanceof s.Tensor||(l=s.browser.fromPixels(l)),s.expandDims(l))),p=h.shape[1],g=h.shape[2],x=await this.model.executeAsync(h),y=x[0].dataSync(),b=x[1].dataSync();h.dispose(),s.dispose(x);const[S,T]=this.calculateMaxScores(y,x[0].shape[1],x[0].shape[2]),N=s.getBackend();s.getBackend()==="webgl"&&s.setBackend("cpu");const C=s.tidy(()=>{const F=s.tensor2d(b,[x[1].shape[1],x[1].shape[3]]);return s.image.nonMaxSuppression(F,S,c,d,d)}),I=C.dataSync();return C.dispose(),N!==s.getBackend()&&s.setBackend(N),this.buildDetectedObjects(g,p,b,S,I,T)}buildDetectedObjects(l,c,d,h,p,g){const x=p.length,y=[];for(let b=0;b<x;b++){const S=[];for(let F=0;F<4;F++)S[F]=d[4*p[b]+F];const T=S[0]*c,N=S[1]*l,C=S[2]*c,I=S[3]*l;S[0]=N,S[1]=T,S[2]=I-N,S[3]=C-T,y.push({bbox:S,class:a[g[p[b]]+1].displayName,score:h[p[b]]})}return y}calculateMaxScores(l,c,d){const h=[],p=[];for(let g=0;g<c;g++){let x=Number.MIN_VALUE,y=-1;for(let b=0;b<d;b++)l[g*d+b]>x&&(x=l[g*d+b],y=b);h[g]=x,p[g]=y}return[h,p]}async detect(l,c=20,d=.5){return this.infer(l,c,d)}dispose(){this.model!=null&&this.model.dispose()}}t.ObjectDetection=i,t.load=async function(o={}){if(s==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=o.base||"lite_mobilenet_v2",c=o.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const d=new i(l,c);return await d.load(),d},t.version="2.2.3",Object.defineProperty(t,"__esModule",{value:!0})})}(k0,k0.exports)),k0.exports}var O8=K2e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D8={kernelName:Qg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,nf(dt(t,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X2e={kernelName:Zh,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=jn(dt(t,"float32")),s=hs(bt(Rt(1),r));return sr(It(n,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y2e={kernelName:Jh,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=hs(bt(jn(dt(t,"float32")),1));return It(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q2e={kernelName:Jd,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{let o=n;const l=Ur(t.shape,s);return l.length>0&&(o=St(o,l)),xe(o,t.shape)},b:()=>{let o=n;const l=Ur(r.shape,s);return l.length>0&&(o=St(o,l)),xe(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z2e={kernelName:Zg,saveAllInputs:!0,gradFunc:(n,e)=>{const t={};return e.forEach((r,s)=>{t[s]=()=>n.clone()}),t}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J2e={kernelName:Jg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(t)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eSe={kernelName:ex,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>mn(t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tSe={kernelName:ep,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,hs(bt(Rt(1),jn(dt(t,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nSe={kernelName:tp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=hs(Ye(Rt(1),jn(dt(t,"float32"))));return It(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSe={kernelName:sp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{const o=Ye(jn(t),jn(r));let l=he(n,It(r,o));const c=Ur(t.shape,s);return c.length>0&&(l=St(l,c)),xe(l,t.shape)},b:()=>{const o=Ye(jn(t),jn(r));let l=sr(he(n,It(t,o)));const c=Ur(r.shape,s);return c.length>0&&(l=St(l,c)),xe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sSe={kernelName:np,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,Ye(jn(dt(t,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aSe={kernelName:rp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,bt(Rt(1),jn(dt(t,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSe(n,e,t,r,s,a){const i=te(n,"dy","avgPool3dGrad"),o=te(e,"input","avgPool3dGrad");let l=i,c=o,d=!1;o.rank===4&&(d=!0,l=xe(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=xe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Z(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Z(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),aa("avgPool3dGrad",s,a);const h={dy:l,input:c},p={filterSize:t,strides:r,pad:s,dimRoundingMode:a},g=ue.runKernel(Jw,h,p);return d?xe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const oSe=de({avgPool3dGrad_:iSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lSe={kernelName:nx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:s,strides:a,pad:i,dimRoundingMode:o}=t;return{x:()=>oSe(n,r,s,a,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(n,e,t,r,s){const a=te(n,"dy","avgPoolGrad"),i=te(e,"input","avgPoolGrad");Z(i.rank===a.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`);let o=i,l=a,c=!1;i.rank===3&&(c=!0,o=xe(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=xe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Z(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Z(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const d={dy:l,input:o},h={filterSize:t,strides:r,pad:s},p=ue.runKernel(Zw,d,h);return c?xe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const uSe=de({avgPoolGrad_:cSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dSe={kernelName:tx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:s,strides:a,pad:i}=t;return{x:()=>uSe(n,r,s,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fSe={kernelName:rx,inputsToSave:["a","b"],gradFunc:(n,e,t)=>{const[r,s]=e,{transposeA:a,transposeB:i}=t;return!a&&!i?{a:()=>en(n,s,!1,!0),b:()=>en(r,n,!0,!1)}:!a&&i?{a:()=>en(n,s,!1,!1),b:()=>en(n,r,!0,!1)}:a&&!i?{a:()=>en(s,n,!1,!0),b:()=>en(r,n,!1,!1)}:{a:()=>en(s,n,!0,!0),b:()=>en(n,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hSe={kernelName:sx,gradFunc:(n,e,t)=>{const{blockShape:r,crops:s}=t;return{x:()=>h1(n,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pSe={kernelName:lj,gradFunc:(n,e,t)=>{const r=t,s=r.inputShape,a=r.shape,i=Array.from(a);for(let l=s.length-1;l>=0;l--)if(s[l]===a[l])i[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${a}].`);const o=[];for(let l=0;l<i.length;l++)i[l]>1&&o.push(l);return{x:()=>St(n,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mSe={kernelName:ap,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gSe={kernelName:ip,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xSe={kernelName:op,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{clipValueMin:s,clipValueMax:a}=t;return{x:()=>Cs(po(ac(r,s),Tu(r,a)),n,mn(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ySe={kernelName:ix,inputsToSave:["x"],gradFunc:D8.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe={kernelName:ox,saveAllInputs:!0,gradFunc:(n,e,t)=>{const r=e.map(l=>l.shape),{axis:s}=t,a=nn(s,e[0].shape)[0],i=r.map(l=>l[a]);return ga(n,i,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe={kernelName:lx,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,{dilations:a,strides:i,pad:o,dataFormat:l}=t;return Z(iu(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>LI(r.shape,n,s,i,o,l),filter:()=>yA(r,n,s.shape,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wSe={kernelName:cx,inputsToSave:["dy","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,{strides:a,pad:i,dataFormat:o,dimRoundingMode:l}=t;return{dy:()=>Xl(n,s,a,i,o,1,l),filter:()=>yA(n,r,s.shape,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(n,e,t,r,s){let a=n;n.rank===4&&(a=xe(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let i=e;i.rank===4&&(i=xe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),Z(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),Z(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),Z(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),Z(a.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${t[3]}.`),Z(i.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${t[4]}).`);const o={x:a,dy:i},l={strides:r,pad:s,filterShape:t};return ue.runKernel(s2,o,l)}const TSe=de({conv3DBackpropFilter_:SSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSe={kernelName:ux,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:s,pad:a}=t;Z(iu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,o]=e;return{x:()=>Uj(i.shape,n,o,s,a),filter:()=>TSe(i,n,o.shape,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CSe={kernelName:lp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(sr(SS(dt(t,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe={kernelName:cp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(TS(dt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kSe={kernelName:dx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s,exclusive:a,reverse:i}=t;return{x:()=>{const o=yr([s],r.rank);let l=lS(n,s,a,!i);return o!=null&&(l=un(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se={kernelName:fx,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:s,pad:a,dimRoundingMode:i}=t,o=r??[1,1];Z(iu(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return Z(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Z(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),Z(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),Z(_s(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),aa("depthwiseConv2d",a,i),{x:()=>Rz(l.shape,n,c,s,a,o,i),filter:()=>$z(l,n,c.shape,s,a,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ISe={kernelName:hx,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,a={x:r,filter:s,dy:n},i={x:r,filter:s,dy:n};return{x:()=>ue.runKernel(Dv,a,t),filter:()=>ue.runKernel(Fv,i,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASe={kernelName:dp,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e,r={dy:n,y:t};return{x:()=>ue.runKernel(m2,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Se={kernelName:fp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=he(wa(sr(jn(t))),2/Math.sqrt(Math.PI));return{x:()=>he(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSe={kernelName:hp,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OSe={kernelName:mx,inputsToSave:["input"],gradFunc:(n,e)=>{const[t]=e;return{input:()=>xe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DSe={kernelName:pp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,wa(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSe={kernelName:mp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LSe={kernelName:gp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{const o=It(n,dt(r,"float32")),l=Ur(t.shape,s);return l.length>0?xe(St(o,l),t.shape):o},b:()=>{let o=he(n,dt(t,"float32"));const l=Ur(r.shape,s);l.length>0&&(o=xe(St(o,l),r.shape));const c=jn(r);return sr(It(o,dt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MSe={kernelName:gx,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{const{varianceEpsilon:r}=t,[s,a,i,o]=e,l=o??Rt(1),c=Ur(a.shape,s.shape),d=[];if(a.rank===1){for(let C=0;C<s.shape.length-1;++C)d.push(s.shape[C]);d.push(1)}const h=bt(s,a),p=he(n,l),g=bS(Ye(i,Rt(r))),x=he(he(he(g,g),g),Rt(-.5));return{x:()=>a.rank===1?xe(he(he(n,ri(xe(g,[1,1,1,a.shape[0]]),d)),l),s.shape):xe(he(he(n,g),l),s.shape),mean:()=>{let C=he(he(g,Rt(-1)),p);return a.rank===1&&(C=St(C,c)),xe(C,a.shape)},variance:()=>{let C=he(he(x,h),p);return a.rank===1&&(C=St(C,c)),xe(C,a.shape)},scale:()=>{const C=he(h,g);let I=he(n,C);return a.rank===1&&(I=St(I,c)),xe(I,a.shape)},offset:()=>{let C=n;return a.rank===1&&(C=St(C,c)),xe(C,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PSe={kernelName:xx,inputsToSave:["x","indices"],gradFunc:(n,e,t)=>{const[r,s]=e,{axis:a,batchDims:i}=t,o=nn(a,r.shape)[0],l=(c,d,h)=>()=>{const p=c.shape,g=d.size,x=p.slice(0,o),y=x.length,b=p.slice(a,p.length).slice(1),S=b.length,T=ZL(0,y),N=ZL(y+1,y+1+S),C=JL([x,[g],b]),I=xe(h,C),F=xe(d,[g]),D=JL([[y],T,N]),A=un(I,D);let _=IS(A,F,c.shape[o]);const k=Su(D);return _=un(_,k),_};if(i===1){const c=r.shape[0],d=r.split(c,0);return{x:()=>Sa(d.map((g,x)=>l(g,s.slice(x,1),n.slice(x,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,n),indices:()=>s}}};function ZL(n,e){const t=[];for(let r=n;r<e;++r)t.push(r);return t}function JL(n){const e=[];for(let t=0;t<n.length;++t)for(let r=0;r<n[t].length;++r)e.push(n[t][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe={kernelName:xp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>mn(t),b:()=>mn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jSe={kernelName:yp,gradFunc:n=>({x:()=>dt(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zSe={kernelName:bp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const USe={kernelName:vp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VSe={kernelName:wp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WSe={kernelName:bx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{alpha:s}=t,a=Na(r,0);return{x:()=>Cs(a,n,he(n,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe={kernelName:Tp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,Ye(t,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GSe={kernelName:Sp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,dt(t,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qSe={kernelName:cj,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t;return{logits:()=>{const i=wa(r);return bt(n,he(St(n,s,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(n,e,t,r=5,s=1,a=1,i=.5){const o={x:n,y:e,dy:t},l={depthRadius:r,bias:s,alpha:a,beta:i};return ue.runKernel(T2,o,l)}const XSe=de({localResponseNormalizationBackprop_:KSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YSe={kernelName:Cx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{depthRadius:a,bias:i,alpha:o,beta:l}=t;return{x:()=>XSe(r,s,n,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(n,e,t,r){return e.rank<t.rank&&(e=xe(e,$r(e.shape,r))),n.rank<t.rank&&(n=xe(n,$r(n.shape,r))),{x:()=>he(n,dt(Mi(t,e),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eM={kernelName:Ex,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{reductionIndices:s}=r,a=e[0],i=e[1],o=nn(s,a.shape),l=F8(n,i,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QSe={kernelName:Np,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>he(n,dt(ac(t,r),"float32")),b:()=>he(n,dt(Rh(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(n,e,t,r,s,a,i){const o=te(n,"dy","maxPool3dGrad"),l=te(e,"input","maxPool3dGrad"),c=te(t,"output","maxPool3dGrad");let d=o,h=l,p=c,g=!1;l.rank===4&&(g=!0,d=xe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=xe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=xe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Z(d.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${d.rank}.`),Z(h.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),Z(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),aa("maxPool3dGrad",a,i);const x={dy:d,input:h,output:p},y={filterSize:r,strides:s,pad:a,dimRoundingMode:i},b=ue.runKernel(C2,x,y);return g?xe(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const JSe=de({maxPool3dGrad_:ZSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTe={kernelName:_x,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=t;return{x:()=>JSe(n,r,s,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(n,e,t,r,s,a,i){const o=te(n,"dy","maxPoolGrad"),l=te(e,"input","maxPoolGrad"),c=te(t,"output","maxPoolGrad");Z(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),Z(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),Z(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),aa("maxPoolGrad",a,i);const d={dy:o,input:l,output:c},h={filterSize:r,strides:s,pad:a,dimRoundingMode:i};return ue.runKernel(N2,d,h)}const nTe=de({maxPoolGrad_:tTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTe={kernelName:kx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{filterSize:a,strides:i,pad:o}=t;return{x:()=>nTe(n,r,s,a,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sTe={kernelName:Ix,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t,a=nn(s,r.shape),o=ms(r.shape,a)[1],l=Fe(o);return{x:()=>{const d=r.shape.slice();a.forEach(g=>{d[g]=1});const h=xe(n,d);return It(he(h,pa(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aTe={kernelName:Ax,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{axis:s}=r,[a,i]=e,o=nn(s,a.shape),l=F8(n,i,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iTe={kernelName:Cp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>he(n,dt(Tu(t,r),"float32")),b:()=>he(n,dt(Na(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTe={kernelName:$x,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:s}=t,a=s.map(i=>i[0]);return{x:()=>hn(n,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe={kernelName:Ep,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{const o=Ur(t.shape,s);return o.length>0?xe(St(n,o),t.shape):n},b:()=>{const o=he(n,sr(Qp(It(t,r)))),l=Ur(r.shape,s);return l.length>0?xe(St(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe={kernelName:kp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{const o=he(n,dt(r,"float32")),l=Ur(t.shape,s);return l.length>0?xe(St(o,l),t.shape):o},b:()=>{const o=he(n,dt(t,"float32")),l=Ur(r.shape,s);return l.length>0?xe(St(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTe={kernelName:Rx,gradFunc:n=>({x:()=>sr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe={kernelName:Fx,inputsToSave:["indices"],gradFunc:(n,e)=>{const t=e[0];return{indices:()=>Pr(t.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fTe={kernelName:Dx,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hTe={kernelName:Lx,saveAllInputs:!0,gradFunc:(n,e,t)=>{const{axis:r}=t;return ui(n,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tM={kernelName:Mx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:s}=t,a=s.map(i=>i[0]);return{x:()=>hn(n,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTe={kernelName:_p,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,r,s]=e,a=t,i=r,o=Gt(a.shape,i.shape);return{a:()=>{const d=dt(i,"float32");let h=he(n,he(d,el(a,bt(d,Rt(1)))));const p=Ur(a.shape,o);return p.length>0&&(h=St(h,p)),xe(h,a.shape)},b:()=>{const d=Na(a,0),h=Cs(d,Ma(a),mn(a));let p=he(n,he(s,h));const g=Ur(i.shape,o);return g.length>0&&(p=St(p,g)),xe(p,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mTe={kernelName:Px,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[t,r]=e,s=Na(t,0);return{x:()=>Cs(s,n,he(n,r)),alpha:()=>{let a=Cs(s,mn(n),he(n,t));const i=Ur(r.shape,n.shape);return i.length>0&&(a=St(a,i)),xe(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(n,e,t){const r=n.shape.slice();r[t]=1;const s=xe(e,r),a=vg(n,t,!0,!1),i=vg(n,t,!0,!0),o=he(a,i);return he(s,o)}function xTe(n,e,t){const r=n.shape.length,s=r-t.length,a=yr(t,r);let i=n;a!=null&&(i=un(n,a));const o=i.shape.slice(),c=o.splice(r-t.length,t.length).reduce((p,g)=>p*g,1);o.push(c);const d=i.reshape(o);let h=gTe(d,e,s);if(h=h.reshape(i.shape),a!=null){const p=Su(a);h=un(h,p)}return h}const yTe={kernelName:Bx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t;let a=[];return s==null?a=r.shape.map((i,o)=>o):typeof s=="number"?a=[s]:a=s,{x:()=>xTe(r,n,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bTe={kernelName:up,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{const o=It(n,dt(r,"float32")),l=Ur(t.shape,s);return l.length>0?xe(St(o,l),t.shape):o},b:()=>{let o=he(n,dt(t,"float32"));const l=Ur(r.shape,s);l.length>0&&(o=xe(St(o,l),r.shape));const c=jn(r);return sr(It(o,dt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vTe={kernelName:Ip,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,sr(jn(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wTe={kernelName:$p,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=he(Tu(t,6),nf(t));return{x:()=>he(n,dt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const STe={kernelName:Ap,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,dt(nf(t),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TTe={kernelName:jx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>xe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NTe={kernelName:Ux,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,s={dy:n,images:r};return{images:()=>ue.runKernel(M2,s,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CTe={kernelName:zx,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,s={dy:n,images:r};return{images:()=>ue.runKernel(L2,s,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ETe={kernelName:Vx,gradFunc:(n,e,t)=>{const{dims:r}=t,s=nn(r,n.shape);return{x:()=>ci(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kTe={kernelName:Rp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Te={kernelName:Op,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>sr(It(n,he(el(t,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ITe={kernelName:Wx,inputsToSave:["condition"],gradFunc:(n,e)=>{const[t]=e;return{condition:()=>dt(mn(t),"float32"),t:()=>he(n,dt(t,n.dtype)),e:()=>he(n,dt(u1(t),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe={kernelName:Dp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Na(t,Rt(0)),s=Rt(VS),a=Rt(WS),i=he(n,a),o=he(he(n,s),wa(dt(t,"float32")));return Cs(r,i,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Te={kernelName:Pp,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,he(t,bt(Rt(1),t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RTe={kernelName:Mp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OTe={kernelName:Fp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(a1(dt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DTe={kernelName:Lp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(oS(dt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FTe={kernelName:Hx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{begin:s,size:a}=t,i=r.shape,[o,l]=zS(r,s,a),c=[];for(let d=0;d<n.rank;d++)c.push([o[d],i[d]-o[d]-l[d]]);return{x:()=>ic(n,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTe={kernelName:Xx,outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{dim:s}=t,a=!0,i=he(n,r);return{logits:()=>bt(i,he(St(i,[s],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MTe={kernelName:Bp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,uo(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nM={kernelName:qx,gradFunc:(n,e,t)=>{const{blockShape:r,paddings:s}=t;return{x:()=>s1(n,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rM={kernelName:Kx,gradFunc:(n,e,t)=>{const{axis:r}=t;return{x:()=>Ir(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PTe={kernelName:jp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,he(hs(dt(t,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BTe={kernelName:G2,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(n,he(dt(t,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jTe={kernelName:zp,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Rt(2);return{a:()=>he(n,he(s,bt(t,r))),b:()=>he(n,he(s,bt(r,t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zTe={kernelName:Gp,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UTe={kernelName:Up,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Gt(t.shape,r.shape);return{a:()=>{let o=n;const l=Ur(t.shape,s);return l.length>0&&(o=St(o,l)),xe(o,t.shape)},b:()=>{let o=n;const l=Ur(r.shape,s);return l.length>0&&(o=St(o,l)),xe(sr(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VTe={kernelName:Gx,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,s=r.shape.slice(),{axis:a}=t;nn(a,r.shape).forEach(c=>{s[c]=1});const o=xe(n,s),l=he(o,pa(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WTe={kernelName:Vp,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,jn(a1(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HTe={kernelName:Wp,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>he(bt(Rt(1),jn(t)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GTe={kernelName:Hp,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{reps:s}=t;return{x:()=>{let i=mn(r);if(r.rank===1)for(let o=0;o<s[0];++o)i=Ye(i,hn(n,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)i=Ye(i,hn(n,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)i=Ye(i,hn(n,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let d=0;d<s[3];++d)i=Ye(i,hn(n,[o*r.shape[0],l*r.shape[1],c*r.shape[2],d*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qTe={kernelName:bd,gradFunc:(n,e,t)=>{const r=t,{perm:s}=r,a=Su(s);return{x:()=>un(n,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe={kernelName:Qx,gradFunc:(n,e,t)=>{const r=t,{axis:s}=r;return{value:()=>Sa(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XTe={kernelName:Zx,inputsToSave:["segmentIds"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>YTe(n,t)}}};function YTe(n,e){const t=ol(e,mn(e)),r=Zp(n,t);let s=ac(e,Rt(0,"int32"));const a=r.rank-s.rank;for(let o=0;o<a;++o)s=Ps(s,o+1);s=po(s,pa(r.shape,"bool"));const i=mn(r);return Cs(s,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QTe={kernelName:Jx,gradFunc:n=>({x:()=>mn(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZTe=[D8,X2e,Y2e,Q2e,Z2e,J2e,eSe,tSe,nSe,rSe,sSe,aSe,lSe,dSe,fSe,hSe,pSe,mSe,gSe,xSe,ySe,bSe,wSe,vSe,NSe,CSe,ESe,kSe,_Se,ISe,bTe,ASe,$Se,RSe,OSe,DSe,LSe,FSe,MSe,PSe,BSe,jSe,zSe,USe,VSe,WSe,HSe,GSe,qSe,YSe,eM,eM,QSe,eTe,rTe,sTe,aTe,iTe,oTe,lTe,cTe,uTe,dTe,fTe,hTe,tM,tM,pTe,mTe,yTe,vTe,wTe,STe,TTe,NTe,CTe,ETe,kTe,_Te,ITe,ATe,$Te,RTe,OTe,DTe,FTe,LTe,MTe,nM,nM,rM,rM,PTe,jTe,BTe,zTe,UTe,VTe,WTe,HTe,GTe,qTe,KTe,XTe,QTe];for(const n of ZTe)uj(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.abs=function(){return this.throwIfDisposed(),Mr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.acos=function(){return this.throwIfDisposed(),xI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.acosh=function(){return this.throwIfDisposed(),yI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.add=function(n){return this.throwIfDisposed(),Ye(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.all=function(n,e){return this.throwIfDisposed(),sS(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.any=function(n,e){return this.throwIfDisposed(),xg(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.argMax=function(n){return this.throwIfDisposed(),Rd(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.argMin=function(n){return this.throwIfDisposed(),bI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asScalar=function(){return this.throwIfDisposed(),Z(this.size===1,()=>"The array must have only 1 element."),xe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asType=function(n){return this.throwIfDisposed(),dt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as1D=function(){return this.throwIfDisposed(),xe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as2D=function(n,e){return this.throwIfDisposed(),xe(this,[n,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as3D=function(n,e,t){return this.throwIfDisposed(),xe(this,[n,e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as4D=function(n,e,t,r){return this.throwIfDisposed(),xe(this,[n,e,t,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.as5D=function(n,e,t,r,s){return this.throwIfDisposed(),xe(this,[n,e,t,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asin=function(){return this.throwIfDisposed(),vI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.asinh=function(){return this.throwIfDisposed(),wI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.atan=function(){return this.throwIfDisposed(),SI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.atan2=function(n){return this.throwIfDisposed(),TI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.atanh=function(){return this.throwIfDisposed(),NI(this)};Pe().prototype.avgPool=function(n,e,t,r){return this.throwIfDisposed(),r1(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),s1(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.batchNorm=function(n,e,t,r,s){return this.throwIfDisposed(),qp(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.broadcastTo=function(n){return this.throwIfDisposed(),vd(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cast=function(n){return this.throwIfDisposed(),dt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.ceil=function(){return this.throwIfDisposed(),$I(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.clipByValue=function(n,e){return this.throwIfDisposed(),va(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.concat=function(n,e){return this.throwIfDisposed(),n instanceof kn&&(n=[n]),Ir([this,...n],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.conv1d=function(n,e,t,r,s,a){return this.throwIfDisposed(),aS(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.conv2dTranspose=function(n,e,t,r,s){return this.throwIfDisposed(),iS(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.conv2d=function(n,e,t,r,s,a){return this.throwIfDisposed(),Xl(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cos=function(){return this.throwIfDisposed(),a1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cosh=function(){return this.throwIfDisposed(),oS(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cumprod=function(n,e,t){return this.throwIfDisposed(),vg(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.cumsum=function(n,e,t){return this.throwIfDisposed(),lS(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),BI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.depthwiseConv2d=function(n,e,t,r,s,a){return this.throwIfDisposed(),Kp(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.dilation2d=function(n,e,t,r,s){return this.throwIfDisposed(),jI(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.divNoNan=function(n){return this.throwIfDisposed(),zI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.div=function(n){return this.throwIfDisposed(),It(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.dot=function(n){return this.throwIfDisposed(),UI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.elu=function(){return this.throwIfDisposed(),Xp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.equal=function(n){return this.throwIfDisposed(),Mi(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.erf=function(){return this.throwIfDisposed(),cS(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.euclideanNorm=function(n,e){return this.throwIfDisposed(),WI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.exp=function(){return this.throwIfDisposed(),wa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.expandDims=function(n){return this.throwIfDisposed(),Ps(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.expm1=function(){return this.throwIfDisposed(),HI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.fft=function(){return this.throwIfDisposed(),y1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.flatten=function(){return this.throwIfDisposed(),xe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.floor=function(){return this.throwIfDisposed(),Qp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.floorDiv=function(n){return this.throwIfDisposed(),rS(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.gather=function(n,e,t){return this.throwIfDisposed(),Zp(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.greaterEqual=function(n){return this.throwIfDisposed(),ac(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.greater=function(n){return this.throwIfDisposed(),Na(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.ifft=function(){return this.throwIfDisposed(),Lh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.irfft=function(){return this.throwIfDisposed(),CS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.isFinite=function(){return this.throwIfDisposed(),GI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.isInf=function(){return this.throwIfDisposed(),qI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.isNaN=function(){return this.throwIfDisposed(),KI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.leakyRelu=function(n){return this.throwIfDisposed(),o1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.lessEqual=function(n){return this.throwIfDisposed(),Tu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.less=function(n){return this.throwIfDisposed(),Rh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.localResponseNormalization=function(n,e,t,r){return this.throwIfDisposed(),XI(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logSigmoid=function(){return this.throwIfDisposed(),YI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logSoftmax=function(n){return this.throwIfDisposed(),fS(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logSumExp=function(n,e){return this.throwIfDisposed(),c1(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.log=function(){return this.throwIfDisposed(),Ma(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.log1p=function(){return this.throwIfDisposed(),l1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalAnd=function(n){return this.throwIfDisposed(),po(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalNot=function(){return this.throwIfDisposed(),u1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalOr=function(n){return this.throwIfDisposed(),hS(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.logicalXor=function(n){return this.throwIfDisposed(),QI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.matMul=function(n,e,t){return this.throwIfDisposed(),en(this,n,e,t)};Pe().prototype.maxPool=function(n,e,t,r){return this.throwIfDisposed(),d1(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.max=function(n,e){return this.throwIfDisposed(),oi(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.maximum=function(n){return this.throwIfDisposed(),ol(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mean=function(n,e){return this.throwIfDisposed(),pr(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.min=function(n,e){return this.throwIfDisposed(),$h(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.minimum=function(n){return this.throwIfDisposed(),lu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mirrorPad=function(n,e){return this.throwIfDisposed(),JI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mod=function(n){return this.throwIfDisposed(),eA(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.mul=function(n){return this.throwIfDisposed(),he(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.neg=function(){return this.throwIfDisposed(),sr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.norm=function(n,e,t){return this.throwIfDisposed(),Yp(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.notEqual=function(n){return this.throwIfDisposed(),Fd(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.oneHot=function(n,e=1,t=0){return this.throwIfDisposed(),Oh(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.onesLike=function(){return this.throwIfDisposed(),Pa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.pad=function(n,e){return this.throwIfDisposed(),ic(this,n,e)};Pe().prototype.pool=function(n,e,t,r,s,a){return this.throwIfDisposed(),tA(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.pow=function(n){return this.throwIfDisposed(),el(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.prelu=function(n){return this.throwIfDisposed(),p1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.prod=function(n,e){return this.throwIfDisposed(),nA(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reciprocal=function(){return this.throwIfDisposed(),iA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.relu=function(){return this.throwIfDisposed(),bo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.relu6=function(){return this.throwIfDisposed(),xS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reshapeAs=function(n){return this.throwIfDisposed(),xe(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reshape=function(n){return this.throwIfDisposed(),xe(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.resizeBilinear=function(n,e,t){return this.throwIfDisposed(),Lz(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.resizeNearestNeighbor=function(n,e,t){return this.throwIfDisposed(),Mz(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.reverse=function(n){return this.throwIfDisposed(),ci(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.rfft=function(){return this.throwIfDisposed(),b1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.round=function(){return this.throwIfDisposed(),yS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.rsqrt=function(){return this.throwIfDisposed(),bS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.selu=function(){return this.throwIfDisposed(),vS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.separableConv2d=function(n,e,t,r,s,a){return this.throwIfDisposed(),wS(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sigmoid=function(){return this.throwIfDisposed(),uo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sign=function(){return this.throwIfDisposed(),oA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sin=function(){return this.throwIfDisposed(),SS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sinh=function(){return this.throwIfDisposed(),TS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.slice=function(n,e){return this.throwIfDisposed(),hn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.softmax=function(n){return this.throwIfDisposed(),x1(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.softplus=function(){return this.throwIfDisposed(),tf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),h1(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.split=function(n,e){return this.throwIfDisposed(),ga(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sqrt=function(){return this.throwIfDisposed(),hs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.square=function(){return this.throwIfDisposed(),jn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.squaredDifference=function(n){return this.throwIfDisposed(),ES(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.squeeze=function(n){return this.throwIfDisposed(),Cu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.stack=function(n,e){this.throwIfDisposed();const t=n instanceof kn?[this,n]:[this,...n];return Sa(t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.step=function(n){return this.throwIfDisposed(),nf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.stridedSlice=function(n,e,t,r,s,a,i,o){return this.throwIfDisposed(),lA(this,n,e,t,r,s,a,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sub=function(n){return this.throwIfDisposed(),bt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.sum=function(n,e){return this.throwIfDisposed(),St(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.tan=function(){return this.throwIfDisposed(),cA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.tanh=function(){return this.throwIfDisposed(),ou(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.tile=function(n){return this.throwIfDisposed(),ri(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.toBool=function(){return this.throwIfDisposed(),dt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.toFloat=function(){return this.throwIfDisposed(),dt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.toInt=function(){return this.throwIfDisposed(),dt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.topk=function(n,e){return this.throwIfDisposed(),fA(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.transpose=function(n){return this.throwIfDisposed(),un(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.unique=function(n){return this.throwIfDisposed(),hA(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),IS(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.unstack=function(n){return this.throwIfDisposed(),ui(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.where=function(n,e){return this.throwIfDisposed(),Cs(n,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Pe().prototype.zerosLike=function(){return this.throwIfDisposed(),mn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Do extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Do.prototype)}}class Oi extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Oi.prototype)}}class ye extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ye.prototype)}}class Zt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Zt.prototype)}}class s$ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s$.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class L8{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bd(n,e){if(Array.isArray(n)){let t=[];for(let r=0;r<e;r++)t=t.concat(n);return t}else{const t=new Array(e);return t.fill(n),t}}function Fo(n,e){if(!n)throw new s$(e)}function sM(n,e){let t=0;for(const r of n)r===e&&t++;return t}function ha(n){return n.length===1?n[0]:n}function An(n){return Array.isArray(n)?n:[n]}function Il(n){const t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function ud(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let Ni={};function a$(n){if(n==null)return null;const e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function Nk(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(e=>Nk(e));else{const e=Object.keys(n);for(const t of e){const r=n[t];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[t]=r.value:Nk(r))}}}function T1(n,e={},t={},r="object",s=!1){if(typeof n=="string"){const a=n;let i;if(a in t)i=t[a];else if(a in Ni)i=Ni[a];else if(i=e[a],i==null)throw new ye(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const a=n;if(a.className==null||a.config==null)throw new ye(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const i=a.className;let o,l;if(i in t?[o,l]=t[i]:i in Ni?[o,l]=Ni.className:i in e&&([o,l]=e[i]),o==null)throw new ye(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(Ni))c[g]=Ni[g];for(const g of Object.keys(t))c[g]=t[g];const d=a.config;d.customObjects=c;const h=Object.assign({},Ni);for(const g of Object.keys(t))Ni[g]=t[g];Nk(a.config);const p=l(o,a.config,t,s);return Ni=Object.assign({},h),p}else{const c=Object.assign({},Ni);for(const h of Object.keys(t))Ni[h]=t[h];const d=new o(a.config);return Ni=Object.assign({},c),d}}}function JTe(n,e){return n<e?-1:n>e?1:0}function xb(n,e){return-1*JTe(n,e)}function Xc(n){if(n==null)return n;const e=[];for(const t of n)e.indexOf(t)===-1&&e.push(t);return e}function eNe(n){if(n==null)throw new ye(`Invalid value in obj: ${JSON.stringify(n)}`);for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}function sf(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new ye(`${t} is not a valid ${e}.  Valid values are ${n} or null/undefined.`)}function i$(n,e,t=0,r=1/0){return Fo(t>=0),Fo(r>=t),Array.isArray(n)&&n.length>=t&&n.length<=r&&n.every(s=>typeof s===e)}function ds(n,e){Array.isArray(n)?(Z(n.length>0,()=>`${e} is unexpectedly an empty array.`),n.forEach((t,r)=>ds(t,`element ${r+1} of ${e}`))):Z(Number.isInteger(n)&&n>0,()=>`Expected ${e} to be a positive integer, but got ${M8(n)}.`)}function M8(n){return n===null?"null":Array.isArray(n)?"["+n.map(e=>M8(e)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function tNe(n,e,t){let r=t!=null?t():Xs(),s;return(...i)=>{const o=t!=null?t():Xs();return o-r<e||(r=o,s=n(...i)),s}}function P8(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let nNe=0;function B8(){return nNe++}const yb={};function HS(n=""){return n in yb||(yb[n]=0),yb[n]+=1,n+yb[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rNe=["channelsFirst","channelsLast"],sNe=["nearest","bilinear"],aNe=["valid","same","causal"],iNe=["max","avg"],oNe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sh=new Map;function Or(n){sf(rNe,"DataFormat",n)}function lNe(n){sf(sNe,"InterpolationFormat",n)}function di(n){sf(aNe,"PaddingMode",n)}function j8(n){sf(iNe,"PoolMode",n)}const G0=[],aM="/";function wd(n,e){G0.push(n);try{const t=e();return G0.pop(),t}catch(t){throw G0.pop(),t}}function cNe(){return G0.length===0?"":G0.join(aM)+aM}function z8(n){if(!V8(n))throw new Error("Not a valid tensor name: '"+n+"'");return cNe()+n}function U8(n){if(!V8(n))throw new Error("Not a valid tensor name: '"+n+"'");sh.has(n)||sh.set(n,0);const e=sh.get(n);if(sh.set(n,sh.get(n)+1),e>0){const t=`${n}_${e}`;return sh.set(t,1),t}else return n}const uNe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function V8(n){return!!n.match(uNe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dNe(n){return n===parseInt(n.toString(),10)}function Yc(n,e,t){e==null&&(e=0),t==null&&(t=n.length);let r=1;for(let s=e;s<t;++s)r*=n[s];return r}function Mh(n){if(n.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r<e&&(e=r)}return e}function cu(n){if(n.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r>e&&(e=r)}return e}function mo(n,e){if(e<n)throw new ye(`end (${e}) < begin (${n}) is forbidden.`);const t=[];for(let r=n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let tE;function Yr(){return tE==null&&(tE=fI().epsilon()),tE}function go(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ko(n,e){return dt(n,e)}function N1(n,e=-1){const t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),xe(n,t)}function fNe(n,e){return Te(()=>{if(n.shape.length!==2)throw new ye(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const t=N1(n,1);return Ck(t,[1,e,1])})}function hNe(n){const e=[Yc(n.shape)];return xe(n,e)}function pNe(n){if(n.rank<=1)throw new ye(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const e=[n.shape[0],Yc(n.shape,1)];return xe(n,e)}function Sd(n,e,t){return Te(()=>{switch(n.rank){case 1:return m1(n,e,t);case 2:return NS(n,[e,0],[t,n.shape[1]]);case 3:return g1(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return Fh(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return hn(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return hn(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new ye(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function nE(n,e,t){return Te(()=>{switch(n.rank){case 1:return m1(n,e,t);case 2:return NS(n,[0,e],[n.shape[0],t]);case 3:return g1(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return Fh(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new ye(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function bb(n,e,t,r){return Te(()=>{switch(n.rank){case 1:return m1(n,e,t);case 2:switch(r){case 1:return Sd(n,e,t);case 2:return nE(n,e,t);default:throw new ye(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Sd(n,e,t);case 2:return g1(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return nE(n,e,t);default:throw new ye(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Sd(n,e,t);case 2:return Fh(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return Fh(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return nE(n,e,t);default:throw new ye(`The axis is not within the rank of the tensor ${r}`)}default:throw new ye(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function o$(n,e=-1){let t;return e<0&&(t=n[0].rank,t!==0?e=t:e=0),e===n[0].rank&&(e=-1),Ir(n,e)}function iM(n,e){switch(n.rank){case 1:return RI([n,e]);case 2:return OI([n,e],0);case 3:return DI([n,e],0);case 4:return FI([n,e],0);default:throw new ye(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function Ck(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new ye(`The length of input n (${e.length}) does not match the number of dimensions in input x (${n.rank})`);return ri(n,e)}function GS(n,e=0,t=1,r,s){return gS(n,e,t,r,s)}function Xo(n,e,t,r){if(n.rank<2||e.rank<2)throw new Zt(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=n.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(s!==a)throw new Zt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${e.shape}`)}if(n.rank===2&&e.rank===2)return lk({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?Ek(n.rank,r,go()):null,activation:t});{const s=n.shape.slice(),a=s.pop();n=xe(n,[-1,a]);const i=e.shape.slice(),o=i.pop(),l=i.pop(),c=[...i,o],d=Array.from({length:e.rank},(x,y)=>y===0?e.rank-2:y<=e.rank-2?y-1:y);e=xe(un(e,d),[l,-1]);const h=[...s,...c];return xe(lk({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?Ek(n.rank,r,go()):null,activation:t}),h)}}function W8(n,e,t){return Te(()=>(Array.isArray(e)?e=zs(e,"int32"):e=dt(e,"int32"),Zp(n,e,t)))}function C1(n){return he(n,n)}function Ek(n,e,t){const r=e.shape;if(e.rank!==1&&e.rank!==n)throw new ye(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${n}`);if(n===5){if(t==="channelsFirst")return r.length===1?xe(e,[1,r[0],1,1,1]):xe(e,[1,r[3],r[0],r[1],r[2]]);if(t==="channelsLast")return r.length===1?xe(e,[1,1,1,1,r[0]]):xe(e,[1].concat(r))}else if(n===4){if(t==="channelsFirst")return r.length===1?xe(e,[1,r[0],1,1]):xe(e,[1,r[2],r[0],r[1]]);if(t==="channelsLast")return r.length===1?xe(e,[1,1,1,r[0]]):xe(e,[1].concat(r))}else if(n===3){if(t==="channelsFirst")return r.length===1?xe(e,[1,r[0],1]):xe(e,[1,r[1],r[0]]);if(t==="channelsLast")return r.length===1?xe(e,[1,1,r[0]]):xe(e,[1].concat(r))}else if(n<3)return e;throw new ye(`Unsupported input rank by biasAdd: ${e.rank}`)}function vo(n,e,t){return Te(()=>(t==null&&(t=go()),Or(t),Ye(n,Ek(n.rank,e,t))))}function mNe(n,e=1){if(e!==1)throw new Zt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Xp(n)}function gNe(n){return Te(()=>It(n,Ye(Mr(n),1)))}function H8(n,e,t,r){return Te(()=>gA(n,e,t,r))}function xNe(n){return Te(()=>{const e=Ye(.5,he(.2,n));return va(e,0,1)})}function E1(n,e,t=!1){return t?n():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const yNe=["fanIn","fanOut","fanAvg"],bNe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vNe(n){sf(yNe,"FanMode",n)}function wNe(n){sf(bNe,"Distribution",n)}class Ui extends rf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class G8 extends Ui{apply(e,t){return Pr(e,t)}}G8.className="Zeros";et(G8);class l$ extends Ui{apply(e,t){return pa(e,t)}}l$.className="Ones";et(l$);class q8 extends Ui{constructor(e){if(super(),typeof e!="object")throw new ye(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ye(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return Te(()=>he(Rt(this.value),pa(e,t)))}getConfig(){return{value:this.value}}}q8.className="Constant";et(q8);class K8 extends Ui{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Nu(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}K8.className="RandomUniform";et(K8);class X8 extends Ui{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Zt(`randomNormal does not support dType ${t}.`);return GS(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}X8.className="RandomNormal";et(X8);class Y8 extends Ui{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Zt(`truncatedNormal does not support dType ${t}.`);return _S(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Y8.className="TruncatedNormal";et(Y8);class Q8 extends Ui{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return Te(()=>{if(e.length!==2||e[0]!==e[1])throw new ye("Identity matrix initializer can only be used for 2D square matrices.");return he(this.gain,uS(e[0]))})}getConfig(){return{gain:this.gain}}}Q8.className="Identity";et(Q8);function SNe(n,e="channelsLast"){let t,r;if(Or(e),n.length===2)t=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(e==="channelsFirst"){const s=Yc(n,2);t=n[1]*s,r=n[0]*s}else if(e==="channelsLast"){const s=Yc(n,0,n.length-2);t=n[n.length-2]*s,r=n[n.length-1]*s}}else{const s=Yc(n);t=Math.sqrt(s),r=Math.sqrt(s)}return[t,r]}class Ba extends Ui{constructor(e){if(super(),e.scale<0)throw new ye(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,vNe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,wNe(this.distribution),this.seed=e.seed}apply(e,t){const r=SNe(e),s=r[0],a=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,a):i/=Math.max(1,(s+a)/2),this.distribution==="normal"){const o=Math.sqrt(i);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new Zt(`${this.getClassName()} does not support dType ${t}.`);return _S(e,0,o,t,this.seed)}else{const o=Math.sqrt(3*i);return Nu(e,-o,o,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ba.className="VarianceScaling";et(Ba);class c$ extends Ba{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ba.className}}c$.className="GlorotUniform";et(c$);class u$ extends Ba{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ba.className}}u$.className="GlorotNormal";et(u$);class d$ extends Ba{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ba.className}}d$.className="HeNormal";et(d$);class f$ extends Ba{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ba.className}}f$.className="HeUniform";et(f$);class h$ extends Ba{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ba.className}}h$.className="LeCunNormal";et(h$);class p$ extends Ba{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ba.className}}p$.className="LeCunUniform";et(p$);class Z8 extends Ui{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return Te(()=>{if(e.length<2)throw new Zt("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;const r=Fe(e.slice(0,-1)),s=e[e.length-1],a=r*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const i=[Math.max(s,r),Math.min(s,r)],o=GS(i,0,1,t,this.seed),l=vA.qr(o,!1);let c=l[0];const h=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=he(c,h.sign()),r<s&&(c=c.transpose()),he(Rt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Z8.className="Orthogonal";et(Z8);const oM={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function lM(n,e={}){return T1(n,ni.getMap().classNameMap,e,"initializer")}function mr(n){return a$(n)}function lr(n){if(typeof n=="string"){const e=n in oM?oM[n]:n;if(e==="GlorotNormal")return new u$;if(e==="GlorotUniform")return new c$;if(e==="HeNormal")return new d$;if(e==="HeUniform")return new f$;if(e==="LeCunNormal")return new h$;if(e==="LeCunUniform")return new p$;{const t={};return t.className=e,t.config={},lM(t)}}else return n instanceof Ui?n:lM(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kk(n){return Array.isArray(n)&&Array.isArray(n[0])}function Vv(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function zt(n){let e;if(Array.isArray(n)){if(n.length!==1)throw new ye(`Expected Tensor length to be 1; got ${n.length}`);e=n[0]}else e=n;return e}function bn(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new ye(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wv(n){let e=0;for(const t of n)t.shape.length===0?e+=1:e+=t.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const cM="Variable";class TNe{constructor(e,t="float32",r=cM,s=!0,a=null){this.dtype=t??"float32",this.shape=e.shape,this.id=B8(),r=r??cM,this.originalName=z8(r),this.name=U8(this.originalName),this.trainable_=s,this.constraint=a,this.val=pA(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),NNe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function NNe(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function _k(n){return n.map(e=>e.read())}function m$(n){n.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Qr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class nl{constructor(e,t,r,s,a,i,o){this.dtype=e,this.shape=t,this.sourceLayer=r,this.inputs=s,this.callArgs=a,this.outputTensorIndex=o,this.id=B8(),i!=null&&(this.originalName=z8(i),this.name=U8(this.originalName)),this.rank=t.length}}let CNe=0;class qS{constructor(e,t){this.callArgs=t,this.id=CNe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let ENe=0;class sn extends rf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=ENe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const r=this.getClassName();t=Il(r)+"_"+HS(r)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Oi(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new ye(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ha(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ha(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Do(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Do(`Layer ${this.name} is not connected, no input to return.`);return ha(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Do(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Do(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ha(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=An(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=An(this.inputSpec);if(t.length!==r.length)throw new ye(`Layer ${this.name} expects ${r.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let s=0;s<t.length;s++){const a=t[s],i=r[s];if(i==null)continue;const o=a.rank;if(i.ndim!=null&&o!==i.ndim)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(i.maxNDim!=null&&o>i.maxNDim)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(i.minNDim!=null&&o<i.minNDim)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(i.dtype!=null&&a.dtype!==i.dtype)throw new ye(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${a.dtype}.`);if(i.axes){const l=a.shape;for(const c in i.axes){const d=Number(c),h=i.axes[c],p=d>=0?l[d]:l[l.length+d];if(h!=null&&[h,null].indexOf(p)===-1)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected axis ${d} of input shape to have value ${h} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const c=i.shape[l],d=a.shape[l];if(c!=null&&d!=null&&c!==d)throw new ye(`Input ${s} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${a.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const r=An(e),s=INe(e),a=ANe(e);if(s===a)throw new ye("Arguments to apply() must be all SymbolicTensors or all Tensors");return wd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const o of An(e))i.push(o.shape);this.build(ha(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let i=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,i);const o=An(i),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=ha(l),this.activityRegularizer!=null)throw new Zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=kNe(e),o=this.computeOutputShape(i);let l;const c=_Ne(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((d,h)=>new nl(c,d,this,An(e),t,this.name,h)):l=new nl(c,o,this,An(e),t,this.name),this.addInboundNode(e,l,null,null,i,o,t),this._refCount++,this.activityRegularizer!=null)throw new Zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Do(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const r=JSON.stringify(t.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Do(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Oi(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Wv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return _k(e?this.trainableWeights:this.weights)}setWeights(e){Te(()=>{const t=this.weights;if(t.length!==e.length)throw new ye(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;const r=[],s=_k(t);for(let a=0;a<s.length;++a){const i=s[a],o=t[a],l=e[a];if(!on(i.shape,l.shape))throw new ye(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}m$(r)})}addWeight(e,t,r,s,a,i,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ye(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():lr("zeros"));const c=s.apply(t,r),d=new TNe(c,r,e,i,o);return c.dispose(),a!=null&&this.addLoss(()=>a.apply(d.read())),i==null&&(i=!0),i?this._trainableWeights.push(d):this._nonTrainableWeights.push(d),d}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=An(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),a=An(t),i=An(s);if(a.length!==i.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let o=0;o<a.length;o++)a[o].kerasMask=i[o]}addInboundNode(e,t,r,s,a,i,o=null){const l=An(e);t=An(t),r=An(r),s=An(s),a=Vv(a),i=Vv(i);const c=[],d=[],h=[];for(const p of l)c.push(p.sourceLayer),d.push(p.nodeIndex),h.push(p.tensorIndex);new qS({outboundLayer:this,inboundLayers:c,nodeIndices:d,tensorIndices:h,inputTensors:l,outputTensors:t,inputMasks:r,outputMasks:s,inputShapes:a,outputShapes:i},o);for(let p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function kNe(n){n=An(n);const e=[];for(const t of n)e.push(t.shape);return ha(e)}function _Ne(n){return"float32"}function J8(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];{const r=e.inboundNodes[t];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let a=0;a<r.inboundLayers.length;a++){const i=r.inputTensors[a],o=r.inboundLayers[a],l=r.nodeIndices[a],c=J8(i,o,l);for(const d of c)s.indexOf(d)===-1&&s.push(d)}return s}}}function INe(n){let e=!0;for(const t of An(n))if(!(t instanceof nl)){e=!1;break}return e}function ANe(n){let e=!0;for(const t of An(n))if(t instanceof nl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class k1 extends sn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:HS("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ye("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new ye("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ye("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=t,this.dtype=r,this.inputSpec=[{shape:t}];const s=new nl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new qS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new ye(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}k1.className="InputLayer";et(k1);function $Ne(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new ye("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));let t=n.dtype;return t==null&&(t="float32"),new k1({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RNe(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return dt(e,n.dtype)}catch{throw new ye(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class Hc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Hc)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=RNe(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ye(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof nl){if(this.id2Value[e.id]==null)throw new ye(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const t=this.name2Id[e];if(t==null)throw new ye(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof nl){if(this.id2Value[e.id]==null)throw new ye(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const t=this.name2Id[e];if(t==null)throw new ye(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&tn(this.id2Mask)}}const Hv=new L8,Gv=new L8;function ONe(n){Hv!=null&&Hv.setMaxEntries(n),Gv!=null&&Gv.setMaxEntries(n)}function A0(n,e,t,r){const s=t==null?!1:t.training,a=Array.isArray(n),i=a?n:[n],o=i.map(x=>x.name),l=[],c=e.names();for(const x of o)c.indexOf(x)!==-1?l.push(e.getValue(x)):l.push(null);const d=o.join(",")+"|"+e.names().sort().join(",");let h=Hv.get(d),p;if(h==null){const x=DNe(i,e);h=x.sorted,p=x.recipientCounts,Hv.put(d,h),Gv.put(d,p)}p={},s||Object.assign(p,Gv.get(d));const g=new Hc(e);for(let x=0;x<h.length;++x){const y=h[x],b=y.sourceLayer;if(b instanceof k1)continue;const S=[],T=[],N=[];let C=!1;for(const _ of y.inputs){const k=g.getValue(_),O=g.getMask(_);S.push(k),T.push(O),O!=null&&(C=!0),s||(p[_.name]--,p[_.name]===0&&!e.hasKey(_)&&o.indexOf(_.name)===-1&&!k.isDisposed&&_.sourceLayer.stateful!==!0&&N.push(k))}C&&(t=t||{},t.mask=T[0]);const I=An(b.apply(S,t));let F=null;b.supportsMasking&&(F=b.computeMask(S,T));const D=LNe(y),A=Array.isArray(D)?D:[D];for(let _=0;_<A.length;++_){g.hasKey(A[_])||g.add(A[_],I[_],Array.isArray(F)?F[0]:F);const k=o.indexOf(A[_].name);k!==-1&&(l[k]=I[_])}s||tn(N)}return g.disposeMasks(),a?l:l[0]}function DNe(n,e){Z(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let t=[],r={};if(n.length===1){const s=uM(n[0],e);t=s.sorted,r=s.recipientMap}else{const s=new Set;for(const a of n){const{sorted:i,recipientMap:o}=uM(a,e);for(const l of i)s.has(l.name)||(t.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:t,recipientCounts:FNe(r)}}function FNe(n){const e={};for(const t in n)e[t]=n[t].size;return e}function uM(n,e){const t=new Set,r=[],s={};for(const o of e.names())t.add(o);const a=[],i=[];for(a.push(n);a.length>0;){const o=a[a.length-1];if(t.has(o.name)){a.pop();continue}const l=i[i.length-1]===a.length-1;if(o.inputs.length===0||l)a.pop(),r.push(o),t.add(o.name),l&&i.pop();else{i.push(a.length-1);for(const c of o.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(o.name),!t.has(c.name)&&a.push(c)}}return{sorted:r,recipientMap:s}}function LNe(n){let e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{let t=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(const s of n.sourceLayer.inboundNodes[r].outputTensors)if(s.id===n.id){t=r;break}e=n.sourceLayer.getOutputAt(t)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe=Ce();MNe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,ONe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g$(n,e){return Te(()=>hs(St(he(n,n),e,!0)))}class _1 extends rf{getConfig(){return{}}}class eU extends _1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>{const t=g$(e,this.axis),r=va(t,0,this.maxValue);return he(e,It(r,Ye(Yr(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}eU.className="MaxNorm";et(eU);class tU extends _1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>It(e,Ye(Yr(),g$(e,this.axis))))}getConfig(){return{axis:this.axis}}}tU.className="UnitNorm";et(tU);class nU extends _1{apply(e){return bo(e)}}nU.className="NonNeg";et(nU);class rU extends _1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Te(()=>{const t=g$(e,this.axis),r=Ye(he(this.rate,va(t,this.minValue,this.maxValue)),he(1-this.rate,t));return he(e,It(r,Ye(Yr(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}rU.className="MinMaxNorm";et(rU);const dM={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Jr(n){return a$(n)}function fM(n,e={}){return T1(n,ni.getMap().classNameMap,e,"constraint")}function es(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in dM?dM[n]:n,config:{}};return fM(t)}else return n instanceof _1?n:fM(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Zu(n){if(n==null)return;const e=[],t=[],r=[];for(const s in n){const a=n[s];if(typeof a!="number"){const i=a;e.push(i.data()),t.push(s),r.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let a=0;a<s.length;++a)n[t[a]]=s[a][0];tn(r)}}function sU(n){if(n!=null)for(const e in n){const t=n[e];typeof t!="number"&&t.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var hM;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(hM||(hM={}));const PNe=125;class wg{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class BNe{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class jNe extends wg{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});const r=t.size==null?0:t.size;this.seen+=r;for(const s in t){const a=t[s];if(typeof a=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+a*r;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const o=Te(()=>Ye(this.totals[s],he(a,r)));this.totals[s]=o,i!=null&&i.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?t[r]=this.totals[r]/this.seen:Te(()=>{const s=he(It(1,this.seen),this.totals[r]);t[r]=s,this.totals[r].dispose(),Xr(t[r])}))}}class zNe extends wg{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(const r in t)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(t[r])}async syncData(){const e=[],t=[],r=[];for(const a in this.history){const i=this.history[a];for(let o=0;o<i.length;++o)if(typeof i[o]!="number"){const l=i[o];e.push(l.data()),t.push(a),r.push(o)}}const s=await Promise.all(e);for(let a=0;a<s.length;++a)this.history[t[a]][r[a]].dispose(),this.history[t[a]][r[a]]=s[a][0]}}class UNe extends wg{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||FA,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=PNe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Rv(this.yieldEvery)&&(this.maybeWait=tNe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,r){const s=[];this.yield!=null&&(await Zu(r),s.push(this.yield(e,t,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await Zu(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const r=[];this.epochEnd!=null&&(await Zu(t),r.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,t){this.batchBegin!=null&&(await Zu(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const r=[];this.batchEnd!=null&&(await Zu(t),r.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):Rv(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Zu(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Zu(e),await this.trainEnd(e))}}function aU(n,e){return n==null&&(n={}),n instanceof wg?[n]:Array.isArray(n)&&n[0]instanceof wg?n:An(n).map(r=>new UNe(r,e))}class _i{constructor(){}static registerCallbackConstructor(e,t){Z(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),_i.checkForDuplicate(t),_i.constructors[e]==null&&(_i.constructors[e]=[]),_i.constructors[e].push(t)}static checkForDuplicate(e){for(const t in _i.constructors)_i.constructors[+t].forEach(s=>{if(s===e)throw new ye("Duplicate callback constructor.")})}static clear(){_i.constructors={}}static createCallbacks(e){const t=[];for(const r in _i.constructors){const s=+r;e>=s&&t.push(..._i.constructors[s])}return t.map(r=>new r)}}_i.constructors={};function iU(n,e,t,r,s,a,i,o,l){const c=new zNe,d=[new jNe,..._i.createCallbacks(e)];n!=null&&d.push(...n),d.push(c);const h=new BNe(d);return h.setParams({epochs:t,initialEpoch:r,samples:s,steps:a,batchSize:i,verbose:e,doValidation:o,metrics:l}),{callbackList:h,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ml(n,e={},t=!1){return T1(n,ni.getMap().classNameMap,e,"layer",t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qv(n,e){return Te(()=>{n.dtype!=="float32"&&(n=dt(n,"float32"));const t=St(C1(n),e,!0),r=ef(t.shape,Yr()),s=hs(ol(t,r));return It(n,s)})}function KS(n,e){return Te(()=>pr(C1(bt(e,n)),-1))}function x$(n,e){return Te(()=>pr(Mr(bt(e,n)),-1))}function y$(n,e){return Te(()=>{const t=bt(n,e),r=va(Mr(n),Yr(),Number.MAX_VALUE),s=Mr(It(t,r));return he(100,pr(s,-1))})}function VNe(n,e){return Te(()=>{const t=va(e,Yr(),Number.MAX_VALUE),r=Ma(Ye(1,t)),s=va(n,Yr(),Number.MAX_VALUE),a=Ma(Ye(1,s));return pr(C1(bt(r,a)),-1)})}function WNe(n,e){return Te(()=>{const t=ol(0,bt(1,he(n,e)));return pr(C1(t),-1)})}function HNe(n,e){return Te(()=>{const t=ol(0,bt(1,he(n,e)));return pr(t,-1)})}function GNe(n,e){return Te(()=>{const t=St(he(n,e),-1),r=oi(he(bt(1,n),e),-1);return ol(0,Ye(1,bt(r,t)))})}function qNe(n,e){return Te(()=>{const t=Math.log(2),r=bt(e,n),s=bt(Ye(r,tf(he(-2,r))),t);return pr(s,-1)})}function Sg(n,e,t=!1){return Te(()=>{if(t)e=x1(e);else{const r=St(e,e.shape.length-1,!0);e=It(e,r)}return e=va(e,Yr(),1-Yr()),sr(St(he(dt(n,"float32"),Ma(e)),e.shape.length-1))})}function Kv(n,e,t=!1){return Te(()=>{const r=dt(Qp(hNe(n)),"int32");e=va(e,Yr(),1-Yr());const s=e.shape,a=xe(Oh(r,s[s.length-1]),s);return Sg(a,e,t)})}function KNe(n,e){if(!on(n.shape,e.shape))throw new ye(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(e.shape)}`);return Te(()=>{const t=bo(e),r=sr(Mr(e));return Ye(bt(t,he(e,n)),l1(wa(r)))})}function XS(n,e){return Te(()=>{let t;return t=va(e,Yr(),1-Yr()),t=Ma(It(t,bt(1,t))),pr(KNe(n,t),-1)})}function XNe(n,e){return Te(()=>{const t=va(n,Yr(),1),r=va(e,Yr(),1);return St(he(n,Ma(It(t,r))),-1)})}function YNe(n,e){return Te(()=>{const t=Ma(Ye(Yr(),e));return pr(bt(e,he(n,t)),-1)})}function oU(n,e){return Te(()=>{const t=qv(n,-1),r=qv(e,-1),s=he(t,r);return sr(St(s,-1))})}const Xv={meanSquaredError:KS,meanAbsoluteError:x$,meanAbsolutePercentageError:y$,meanSquaredLogarithmicError:VNe,squaredHinge:WNe,hinge:HNe,categoricalHinge:GNe,logcosh:qNe,categoricalCrossentropy:Sg,sparseCategoricalCrossentropy:Kv,binaryCrossentropy:XS,kullbackLeiblerDivergence:XNe,poisson:YNe,cosineProximity:oU};function rE(n){if(typeof n=="string"){if(n in Xv)return Xv[n];let e=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ye(e)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lU(n,e){return Te(()=>{const t=he(.5,Pa(e)),r=Ko(Na(e,t),n.dtype);return pr(Mi(n,r),-1)})}function cU(n,e){return Te(()=>Ko(Mi(Rd(n,-1),Rd(e,-1)),"float32"))}function QNe(n,e){return Te(()=>dt(St(po(Mi(n,1),Mi(e,1))),"float32"))}function ZNe(n,e){return Te(()=>dt(St(po(Mi(n,0),Mi(e,1))),"float32"))}function JNe(n,e){return Te(()=>{const t=QNe(n,e),r=ZNe(n,e),s=Ye(t,r);return dt(Cs(Na(s,0),It(t,s),0),"float32")})}function eCe(n,e){return XS(n,e)}function tCe(n,e){return n.rank===e.rank&&(n=Cu(n,[n.rank-1])),e=Rd(e,-1),e.dtype!==n.dtype&&(e=dt(e,n.dtype)),dt(Mi(n,e),"float32")}const nCe=KS,rCe=KS,sCe=x$,aCe=x$,iCe=y$,oCe=y$,uU=Sg,lCe=oU,dU=Kv,Yv={binaryAccuracy:lU,categoricalAccuracy:cU,precision:JNe,categoricalCrossentropy:uU,sparseCategoricalCrossentropy:dU,mse:nCe,MSE:rCe,mae:sCe,MAE:aCe,mape:iCe,MAPE:oCe,cosine:lCe};function cCe(n){if(typeof n=="string"&&n in Yv)return Yv[n];if(typeof n!="string"&&n!=null)return n;throw new ye(`Unknown metric ${n}`)}function vb(n){if(Fo(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let e;for(const t of Object.keys(Xv))if(Xv[t]===n){e=t;break}if(e!==void 0)return e;for(const t of Object.keys(Yv))if(Yv[t]===n){e=t;break}return e!==void 0?e:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uCe(n){const e={Adagrad:()=>ad.adagrad(.01),Adadelta:()=>ad.adadelta(1,.95,Yr()),Adam:()=>ad.adam(.001,.9,.999,Yr()),Adamax:()=>ad.adamax(.002,.9,.999,Yr(),0),RMSProp:()=>ad.rmsprop(.001,.9,0,Yr()),SGD:()=>ad.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new ye(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pM=1*1024*1024;function mM(n,e,t=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!Ik(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){const r=JSON.stringify(n);r.length>pM&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${pM}.`)}}function Ik(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);for(const t of e)if(typeof t!="string"||!Ik(n[t]))return!1;return!0}else if(Array.isArray(n)){for(const e of n)if(!Ik(e))return!1;return!0}else return!1;else{const e=typeof n;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dCe(n,e,t,r=console.log){const s=hCe(n),a=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(d=>Math.floor(e*d)));let i;if(!s){a.push("Receives inputs"),i=[];for(const d in n.nodesByDepth)i.push(...n.nodesByDepth[d])}r("_".repeat(e)),Qv(a,t,r),r("=".repeat(e));const o=n.layers;for(let d=0;d<o.length;++d)s?pCe(o[d],t,r):mCe(o[d],t,i,r),r((d===o.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();const l=fCe(n),c=Wv(n.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function fCe(n){let e;return n.collectedTrainableWeights!=null?e=Wv(n.collectedTrainableWeights):e=Wv(n.trainableWeights),e}function hCe(n){let e=!0;const t=[],r=[];for(const s in n.nodesByDepth)t.push(n.nodesByDepth[s]);for(const s of t){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of n.layers){let a=!1;for(const i of s.inboundNodes)if(r.indexOf(i)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function Qv(n,e,t=console.log){let r="";for(let s=0;s<n.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=n[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);t(r)}function pCe(n,e,t){let r,s;try{s=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const a=n.name,i=n.getClassName(),o=[`${a} (${i})`,s,r,n.countParams().toString()];Qv(o,e,t)}function mCe(n,e,t,r){let s,a;try{a=n.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{a="multiple"}try{s=JSON.stringify(n.outputShape)}catch{s="multiple"}const i=[];for(const h of n.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(h)===-1))for(let p=0;p<h.inboundLayers.length;++p){const g=h.inboundLayers[p].name,x=h.nodeIndices[p],y=h.tensorIndices[p];i.push(`${g}[${x}][${y}]`)}const o=n.name,l=n.getClassName(),c=i.length===0?"":i[0],d=[`${o} (${l})`,a,s,n.countParams().toString(),c];Qv(d,e,r);for(let h=1;h<i.length;++h)Qv(["","","","",i[h]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fU(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function Ak(n,e){if(n===null)return null;if(typeof n=="string")return ud(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let s=0;s<r;++s){const a=n[s];fU(e,s,a)?t.push(a):t.push(Ak(a,e))}return t}else{const t={};for(const r of Object.keys(n)){const s=n[r];if(r==="name"&&typeof s=="string")t[r]=s;else{const a=ud(r);t[a]=Ak(s,a)}}return t}}function $k(n,e){if(n==null)return null;if(typeof n=="string")return Il(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let s=0;s<r;++s){const a=n[s];fU(e,s,a)?t.push(a):t.push($k(a,e))}return t}else{const t={};for(const r of Object.keys(n)){const s=n[r],a=Il(r);(r==="name"||r==="className")&&typeof s=="string"?t[a]=s:t[a]=$k(s,r)}return t}}/** @license See the LICENSE file. */const hU="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gCe=n=>{const e=Object.keys(n);if(e.length===0)return!1;const t=e[0].split("/");return!isNaN(parseInt(t[t.length-1],10))};class eo extends sn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const T=this.getClassName().toLowerCase();this.name=HS(T)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xc(this.inputs).length!==this.inputs.length)throw new ye(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(T=>T.name)}`);Xc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(T=>T.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const T of this.outputs){const N=T.sourceLayer,C=T.nodeIndex,I=T.tensorIndex;this.outputLayers.push(N),this.outputLayersNodeIndices.push(C),this.outputLayersTensorIndices.push(I)}for(const T of this.inputs){const N=T.sourceLayer,C=T.nodeIndex,I=T.tensorIndex;Fo(C===0,"input layer has >1 nodes"),Fo(I===0,"input layer has >1 tensors"),this.inputLayers.push(N),this.inputLayersNodeIndices.push(C),this.inputLayersTensorIndices.push(I)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let T=0;T<this.inputLayers.length;T++){const N=this.inputLayers[T];if(!(N instanceof k1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${T} (0-based) originates from layer type ${N.getClassName()}.`);this.inputNames.push(N.name),this.feedInputShapes.push(N.batchInputShape),this.feedInputNames.push(N.name)}for(const T of this.outputLayers)this.outputNames.push(T.name);this.internalInputShapes=this.inputs.map(T=>T.shape),this.internalOutputShapes=this.outputs.map(T=>T.shape);const t={},r={},s={},a={},i={},o=[],l=(T,N,C,I,F,D)=>{(I==null||F==null||D==null)&&(I=T.sourceLayer,F=T.nodeIndex,D=T.tensorIndex);const A=I.inboundNodes[F];if(C.indexOf(A)!==-1)throw new Oi(`The tensor ${T.name} at layer "${I.name}" is part of a cycle.`);if(N.indexOf(A)!==-1)return;this.containerNodes.add(eo.nodeKey(I,F)),I.id in i||(i[I.id]=Object.keys(i).length),C.indexOf(A)===-1&&C.push(A);const _=A.inboundLayers.length;for(let k=0;k<_;k++){const O=A.inputTensors[k],P=A.inboundLayers[k],W=A.nodeIndices[k],K=A.tensorIndices[k];l(O,N,C,P,W,K)}for(N.push(A);C.indexOf(A)>=0;)C.splice(C.indexOf(A),1);o.push(A)},c=[],d=[];for(const T of this.outputs)l(T,c,d);const h=o.slice().reverse();for(const T of h){r[T.id]=T,T.id in t||(t[T.id]=0);let N=t[T.id];const C=s[T.outboundLayer.id]==null?0:s[T.outboundLayer.id];N=Math.max(N,C),s[T.outboundLayer.id]=N,a[T.outboundLayer.id]=T.outboundLayer,t[T.id]=N;for(let I=0;I<T.inboundLayers.length;I++){const F=T.inboundLayers[I],D=T.nodeIndices[I],A=F.inboundNodes[D],_=t[A.id]==null?0:t[A.id];t[A.id]=Math.max(N+1,_),r[A.id]=A}}const p={};for(const T in t){const N=t[T];N in p||(p[N]=[]),p[N].push(r[T])}const g={};for(const T in s){const N=s[T];N in g||(g[N]=[]),g[N].push(a[T])}let x=Object.keys(g).map(T=>parseInt(T,10)).sort(xb);this.layers=[];for(const T of x){const N=g[T];N.sort((C,I)=>{const F=i[C.id],D=i[I.id];return F<D?-1:F>D?1:0});for(const C of N)C instanceof eo&&this.internalContainerRefs.push(C),this.layers.push(C)}this.layersByDepth=g,x=Object.keys(p).map(T=>parseInt(T,10)).sort(xb);const y=this.inputs.slice(),b=[];for(const T of x)for(const N of p[T]){const C=N.outboundLayer;if(C!=null){for(const I of N.inputTensors)if(y.indexOf(I)===-1)throw new Oi(`Graph disconnected: cannot obtain value for tensor ${I} at layer "${C.name}". The following previous layers were accessed without issue: ${b}`);for(const I of N.outputTensors)y.push(I);b.push(C.name)}}this.nodesByDepth=p;const S=this.layers.map(T=>T.name);for(const T of S){const N=S.filter(C=>C===T).length;if(N!==1)throw new Oi(`The name "${T}" is used ${N} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(S))}this.outboundNodes=[],this.inboundNodes=[],new qS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(T=>null),outputMasks:this.outputs.map(T=>null),inputShapes:this.inputs.map(T=>T.shape),outputShapes:this.outputs.map(T=>T.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ye("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.layers)t.push(...r.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const r={};let s=0;const a=gCe(e);a&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const d=a?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[d]!=null)throw new ye(`Duplicate weight name: ${d}`);r[d]=c,s++}const i=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[o]]);else if(t)throw new ye(`Provided weight data has no target variable: ${o}`);delete r[l]}if(t){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new ye(`${o.length} of ${s} weights are not set: ${o}`)}m$(i)}parseWeights(e){for(const t in Object.keys(e)){const r=t.split("/"),s=["vars","layer_checkpoint_dependencies"],a=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!s.includes(i)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${hU}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const r=$k(this.updatedConfig());return t?JSON.stringify(r):r}call(e,t){return Te(()=>{e=An(e);const r=new Hc;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return A0(this.outputs,r,t)})}computeMask(e,t){return Te(()=>{e=An(e);let r;return t==null?r=Bd(null,e.length):r=An(t),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const t=Vv(e);if(t.length!==this.inputLayers.length)throw new ye(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<t.length;o++){const l=this.inputLayers[o],c=t[o],d=l.name+"_0_0";r[d]=c}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(xb);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const c of l){const d=c.outboundLayer;if(this.inputLayers.map(y=>y.id).indexOf(d.id)!==-1)continue;const h=[];for(let y=0;y<c.inboundLayers.length;y++){const b=c.inboundLayers[y],S=c.nodeIndices[y],T=c.tensorIndices[y],N=`${b.name}_${S}_${T}`,C=r[N];h.push(C)}const p=d.computeOutputShape(ha(h)),g=Vv(p),x=d.inboundNodes.indexOf(c);for(let y=0;y<g.length;y++){const b=`${d.name}_${x}_${y}`;r[b]=g[y]}}}const a=[],i=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],d=this.outputLayersTensorIndices[o],h=`${l.name}_${c}_${d}`;i.push(h)}for(let o=0;o<i.length;o++){const l=i[o];Fo(l in r),a.push(r[l])}return ha(a)}runInternalGraph(e,t){t==null&&(t=Bd(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],d=e[l],h=t[l];r[c.id]=[d,h]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(xb);for(const l of s){const c=this.nodesByDepth[l];for(const d of c){const h=d.outboundLayer,p=d.inputTensors,g=d.outputTensors,x=new Array;for(const y of p)y.id in r&&x.push(r[y.id]);if(x.length===p.length){let y={},b,S,T,N;if(d.callArgs!=null&&(y=d.callArgs),x.length===1){const[C,I]=x[0];y.mask==null&&(y.mask=I),T=An(h.call(C,y)),N=An(h.computeMask(C,I)),b=[C],S=[I]}else b=x.map(C=>C[0]),S=x.map(C=>C[1]),y.mask==null&&(y.mask=S),T=An(h.call(b,y)),N=An(h.computeMask(b,S));if(h.activityRegularizer)throw new Zt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let C=0;C<g.length;++C){const I=g[C],F=T[C],D=N[C];r[I.id]=[F,D]}}}}const a=[],i=[],o=[];for(const l of this.outputs){Fo(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,d]=r[l.id];o.push(c.shape),a.push(c),i.push(d)}return[a,i,o]}buildNodeConversionMap(e){const t={};let r;for(const s of this.layers){r=s instanceof eo?1:0;for(let a=0;a<s.inboundNodes.length;a++){const i=eo.nodeKey(s,a);this.containerNodes.has(i)&&(t[i]=r,r+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new ye("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ye(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ye(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Te(()=>{const e=[];for(const t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){const s=eo.nodeKey(t,r);this.containerNodes.has(s)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const o=i.getClassName(),l=i.getConfig(),c=[];for(let h=0;h<i.inboundNodes.length;h++){const p=i.inboundNodes[h],g=eo.nodeKey(i,h);let x={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),x=p.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),x={}}if(p.inboundLayers.length>0){const y=[];for(let b=0;b<p.inboundLayers.length;b++){const S=p.inboundLayers[b],T=p.nodeIndices[b],N=p.tensorIndices[b],C=eo.nodeKey(S,T);let I=t[C];I==null&&(I=0),y.push([S.name,I,N,x])}c.push(y)}}}const d={};d.name=i.name,d.className=o,d.config=l,d.inboundNodes=c,r.push(d)}e.layers=r;const s=[];for(let i=0;i<this.inputLayers.length;i++){const o=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=eo.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let d=t[c];d==null&&(d=0);const h=this.inputLayersTensorIndices[i];s.push([o.name,d,h])}e.inputLayers=s;const a=[];for(let i=0;i<this.outputLayers.length;i++){const o=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=eo.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let d=t[c];d==null&&(d=0);const h=this.outputLayersTensorIndices[i];a.push([o.name,d,h])}return e.outputLayers=a,e}static fromConfig(e,t,r={},s=!1){const a={},i={};function o(b,S){b.name in i?i[b.name].push(S):i[b.name]=[S]}function l(b,S){const T=[];let N;for(const C of S){const I=C[0],F=C[1],D=C[2];if(N=C[3]==null?{}:C[3],!(I in a)){o(b,S);return}const A=a[I];if(A.inboundNodes.length<=F){o(b,S);return}const _=A.inboundNodes[F];T.push(_.outputTensors[D])}T.length>0&&b.apply(ha(T),N)}function c(b){const S=b.name,T=Ml(b,t.customObjects!=null?t.customObjects:{});T.setFastWeightInitDuringBuild(s),a[S]=T,b.inboundNodes.forEach(C=>{if(!(C instanceof Array))throw new ye(`Corrupted configuration, expected array for nodeData: ${C}`);o(T,C)})}const d=t.name,h=t.layers;for(const b of h)c(b);for(;!eNe(i);)for(const b of h){const S=a[b.name];if(S.name in i){const T=i[S.name];delete i[S.name];for(const N of T)l(S,N)}}const p=[],g=[],x=t.inputLayers;for(const b of x){const S=b[0],T=b[1],N=b[2];Fo(S in a);const I=a[S].inboundNodes[T].outputTensors;p.push(I[N])}const y=t.outputLayers;for(const b of y){const S=b[0],T=b[1],N=b[2];Fo(S in a);const I=a[S].inboundNodes[T].outputTensors;g.push(I[N])}return new e({inputs:p,outputs:g,name:d})}get stateful(){if(this._stateful)throw new ye("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Te(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xCe(n,e,t){const r=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(s=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${t} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const s=[];return e.forEach(a=>{a in n?s.push(n[a]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${t} must be either an array with ${r} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(n)}`)}function pU(n,e){return xCe(n,e,"classWeight")}async function mU(n,e,t,r){if(t!=null){const s=Te(()=>{if(n.shape.length===1)return Go(n);if(n.shape.length===2){if(n.shape[1]>1)return Rd(n,1);if(n.shape[1]===1)return xe(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await s.data());tn(s);const i=[];return a.forEach(o=>{if(t[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);i.push(t[o])}),zs(i,"float32")}else return null}function yCe(n,e){return he(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bCe=32;function gU(n,e){let t,r;const s=e;t=s.xs,r=s.ys,Z(t!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=gM("input",n.inputNames,t),i=gM("output",n.outputNames,r),o=a[0].shape[0];Z(a.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),Z(i.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<a.length;l++)Z(a[l].shape[0]===o,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);for(let l=0;l<i.length;l++)Z(i[l].shape[0]===o,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${n.inputNames[0]}.`);return{xs:a,ys:i}}function gM(n,e,t){if(t instanceof kn)return[t];if(Array.isArray(t))return Z(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${n} keys ${e}.`),t;{const r=[];for(const s of e){if(t[s]==null)throw new ye(`The feature data generated by the dataset lacks the required ${n} key '${s}'.`);r.push(t[s])}return r}}function vCe(n){if(n.length===3)throw new Zt("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function wCe(n,e,t){const r=t.batchesPerEpoch!=null;if(Z(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Z(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Z(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),Z(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),Z(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const s=t.validationData!=null;let a,i;if(s)if(xM(t.validationData))Z(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{const b=vCe(t.validationData);a=b.xs,i=b.ys}const o=n.makeTrainFunction(),l=n.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(b=>"val_"+b)):c=l.slice();const d=aU(t.callbacks,t.yieldEvery),h=t.verbose==null?1:t.verbose,{callbackList:p,history:g}=iU(d,h,t.epochs,null,null,SCe(e,t),null,s,c);p.setModel(n),n.history=g,await p.onTrainBegin(),n.stopTraining_=!1;let x=t.initialEpoch==null?0:t.initialEpoch,y=await e.iterator();for(;x<t.epochs;){const b={};await p.onEpochBegin(x);let S=0,T=0;for(r||(y=await e.iterator());!r||S<t.batchesPerEpoch;){const N=await y.next();if(r&&N.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${S} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(N.value!=null){const{xs:C,ys:I}=gU(n,N.value),F={};F.batch=T,F.size=C[0].shape[0],await p.onBatchBegin(T,F);const D=[];if(t.classWeight!=null){const k=pU(t.classWeight,n.outputNames);for(let O=0;O<k.length;++O)D.push(await mU(I[O],null,k[O]))}const A=C.concat(I).concat(D),_=o(A);tn(A);for(let k=0;k<l.length;++k){const O=l[k],P=_[k];F[O]=P,Xr(P)}await p.onBatchEnd(T,F),sU(F),T++,S++}if(r?S>=t.batchesPerEpoch:N.done){if(s){let C;xM(t.validationData)?C=An(await n.evaluateDataset(t.validationData,{batches:t.validationBatches})):C=An(n.evaluate(a,i,{batchSize:t.validationBatchSize==null?bCe:t.validationBatchSize,verbose:0}));for(let I=0;I<n.metricsNames.length;++I)b[`val_${n.metricsNames[I]}`]=C[I]}break}if(n.stopTraining_)break}if(await p.onEpochEnd(x,b),x++,n.stopTraining_)break}return await p.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function SCe(n,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function xM(n){return typeof n.iterator=="function"}function TCe(n){return typeof n.next=="function"}async function NCe(n,e,t){t=t||{};const r=t.batches!=null,s=n.testFunction;let a=[];if(t.verbose>0)throw new Zt("Verbose mode is not implemented yet.");Z(!r||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);const i=TCe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<t.batches;){const c=await i.next();if(a=Te(()=>{if(c.value){const{xs:d,ys:h}=gU(n,c.value),p=d.concat(h),g=Te(()=>s(p));if(tn(p),l===0)for(let y=0;y<g.length;++y)a.push(Rt(0));const x=p[0].shape[0];for(let y=0;y<g.length;++y){const b=g[y],S=a[y];a[y]=Te(()=>Ye(a[y],he(x,b))),l>0&&tn(S)}tn(g),o+=x,++l}return a}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const d=a[c];a[c]=It(a[c],o),tn(d)}return ha(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sE(n){Z(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function y0(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(r=>Sd(r,e,t-e)):Sd(n,e,t-e)}function Rk(n,e){return Te(()=>n==null?null:Array.isArray(n)?n.map(t=>Rk(t,e)):W8(n,e.dtype==="int32"?e:dt(e,"int32")))}function aE(n,e){const t=[];let r=0,s=null;for(;r<n;)s=r+e,s>=n&&(s=n),t.push([r,s]),r=s;return t}function xU(n){const e=[];n instanceof kn&&(n=[n]);for(let t=0;t<n.length;++t){const r=n[t];if(r.rank===1)e.push(N1(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Ji(n,e){if(n==null)return;const t=[];if(e instanceof kn)t.push(e.id);else if(Array.isArray(e))e.forEach(s=>t.push(s.id));else if(e!=null)for(const s in e){const a=e[s];t.push(a.id)}const r=[];if(n instanceof kn)t.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(s=>{t.indexOf(s.id)===-1&&r.push(s)});else if(n!=null)for(const s in n){const a=n[s];t.indexOf(a.id)===-1&&r.push(a)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function CCe(n){return n instanceof kn}function Ok(n){return Array.isArray(n)}function yM(n){return!CCe(n)&&!Ok(n)}function bM(n,e,t,r=!0,s=""){if(e==null||e.length===0){if(n!=null){let i=!1;if(Ok(n)&&n.length>0)i=!0;else if(yM(n)){for(const o in n)if(n.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new ye(`Error when checking model ${s} expected no data, but got ${n}`)}return[]}if(n==null)return e.map(i=>null);let a;if(yM(n)){n=n,a=[];for(const i of e){if(n[i]==null)throw new ye(`No data provided for "${i}". Need data for each key in: ${e}`);a.push(n[i])}}else if(Ok(n)){if(n=n,n.length!==e.length)throw new ye(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);a=n}else{if(n=n,e.length>1)throw new ye(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);a=[n]}if(a=xU(a),t!=null)for(let i=0;i<e.length;++i){if(t[i]==null)continue;const o=a[i];if(o.shape.length!==t[i].length)throw new ye(`Error when checking ${s}: expected ${e[i]} to have ${t[i].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<t[i].length;++l){if(l===0&&!r)continue;const c=o.shape[l],d=t[i][l];if(d!=null&&d>=0&&c!==d)throw new ye(`${s} expected a batch of elements where each example has shape [${t[i].slice(1,t[i].length)}] (i.e.,tensor shape [*,${t[i].slice(1,t[i].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function ECe(n,e,t){const r=Xc(n.map(a=>a.shape[0]));r.sort();const s=Xc(e.map(a=>a.shape[0]));if(s.sort(),r.length>1)throw new ye(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(a=>a.shape))}`);if(s.length>1)throw new ye(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&s.length>0&&!on(r,s))throw new ye(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function kCe(n,e,t){const r=[KS,XS,Sg];for(let s=0;s<n.length;++s){const a=n[s],i=e[s],o=t[s];if(i!=null){if(i===Sg&&a.shape[a.shape.length-1]===1)throw new ye(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=a.shape.slice(1),c=o.slice(1);for(let d=0;d<l.length;++d){const h=l[d],p=c[d];if(p!=null&&h!==p)throw new ye(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function vM(n,e,t,r=!0,s=""){let a;if(Array.isArray(n)){if(n.length!==e.length)throw new ye(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${n.length} Tensors(s).`);a=n}else{if(e.length>1)throw new ye(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);a=[n]}if(t!=null)for(let i=0;i<e.length;++i){if(t[i]==null)continue;const o=a[i];if(o.shape.length!==t[i].length)throw new ye(`Error when checking ${s}: expected ${e[i]} to have ${t[i].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<t[i].length;++l){if(l===0&&!r)continue;const c=o.shape[l],d=t[i][l];if(d!=null&&d!==c)throw new ye(`Error when checking ${s}: expected ${e[i]} to have shape ${JSON.stringify(t[i])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function _Ce(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(r=>[]);let t;if(typeof n=="string"||typeof n=="function")t=[n];else if(Array.isArray(n)||typeof n=="object")t=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(t))return e.map(r=>t);{const r=[];for(const s of e){let a=t.hasOwnProperty(s)?t[s]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const ICe="layers-model";class wh extends eo{constructor(e){super(e),this.isTraining=!1}summary(e,t,r=console.log){if(!this.built)throw new ye("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");dCe(this,e,t,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=uCe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof lc))throw new ye("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new ye(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),t.push(rE(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ye(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(o=>rE(o))}else{const i=rE(e.loss);this.outputs.forEach(o=>{t.push(i)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const o=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],wd("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([o,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=_Ce(e.metrics,this.outputNames),a=(i,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[i]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,i])};wd("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=s[i];(c=>{let h,p,g;for(const x of c){if(typeof x=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(x)!==-1){const b=this.internalOutputShapes[i];b[b.length-1]===1||this.lossFunctions[i]===XS?["accuracy","acc"].indexOf(x)!==-1?p=lU:["crossentropy","ce"].indexOf(x)!==-1&&(p=eCe):this.lossFunctions[i]===Kv?["accuracy","acc"].indexOf(x)!==-1?p=tCe:["crossentropy","ce"].indexOf(x)!==-1&&(p=dU):["accuracy","acc"].indexOf(x)!==-1?p=cU:["crossentropy","ce"].indexOf(x)!==-1&&(p=uU);let S;["accuracy","acc"].indexOf(x)!==-1?S="acc":["crossentropy","ce"].indexOf(x)!==-1&&(S="ce"),g=p,h=""+S}else g=cCe(x),h=""+vb(x);let y;wd(h,()=>{y=g}),a(i,h,y)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,r={}){const s=r.batchSize==null?32:r.batchSize;sE(s);const i=this.standardizeUserDataXY(e,t,!0,s);try{const o=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,s,r.verbose,r.steps);return ha(c)}finally{Ji(i[0],e),Ji(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),NCe(this,e,t)}checkNumSamples(e,t,r,s="steps"){let a;if(r!=null){if(a=null,t!=null)throw new ye(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new ye(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new ye("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(t),s=r?t:[t],a=this.retrieveSymbolicTensors(s),i=new Hc;if(e instanceof kn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ye(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ye(`No value is provided for the model's input ${l.name}`);i.add(l,c)}const o=A0(a,i);return r?o:o[0]}retrieveSymbolicTensors(e){const t=Bd(null,e.length);let r=e.length;for(const s of this.layers){const a=Array.isArray(s.output)?s.output:[s.output],i=a.map(o=>o.name);for(let o=0;o<e.length;++o){const l=i.indexOf(e[o]);if(l!==-1&&(t[o]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw t.forEach((a,i)=>{a==null&&s.push(e[i])}),new ye(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return t}predictLoop(e,t=32,r=!1){return Te(()=>{const s=this.checkNumSamples(e);if(r)throw new Zt("Verbose predictLoop() is not implemented yet.");const a=aE(s,t),i=this.outputs.map(o=>[]);for(let o=0;o<a.length;++o)Te(()=>{const c=a[o][0],d=a[o][1],h=y0(e,c,d),p=[];if(Array.isArray(h))for(let x=0;x<h.length;++x)p.push({key:this.inputs[x],value:h[x]});else p.push({key:this.inputs[0],value:h});const g=new Hc(p);return A0(this.outputs,g)}).forEach((c,d)=>i[d].push(c));return ha(i.map(o=>Ir(o,0)))})}predict(e,t={}){const r=xU(e);vM(r,this.inputNames,this.feedInputShapes,!1);try{const s=t.batchSize==null?32:t.batchSize;return sE(s),this.predictLoop(r,s)}finally{Ji(r,e)}}predictOnBatch(e){vM(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,r=!0,s){if(this.optimizer_==null)throw new Oi("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let i=0;i<this.feedOutputShapes.length;++i){const o=this.feedOutputShapes[i];this.feedLossFns[i]===Kv?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(e=bM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=bM(t,this.feedOutputNames,a,!1,"target"),ECe(e,t),kCe(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ye(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,r,s,a=!0,i){const[o,l]=this.standardizeUserDataXY(e,t,a,i);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const d=pU(s,this.outputNames);c=[];for(let h=0;h<d.length;++h)c.push(await mU(l[h],null,d[h]))}return[o,l,c]}testLoop(e,t,r,s=0,a){return Te(()=>{const i=this.checkNumSamples(t,r,a,"steps"),o=[];if(s>0)throw new Zt("Verbose mode is not implemented yet.");if(a!=null)throw new Zt("steps mode in testLoop() is not implemented yet");{const l=aE(i,r),c=zs(mo(0,i));for(let d=0;d<l.length;++d){const h=l[d][0],p=l[d][1],g=Sd(c,h,p-h),x=Rk(t,g),y=e(x);if(d===0)for(let b=0;b<y.length;++b)o.push(Rt(0));for(let b=0;b<y.length;++b){const S=y[b];o[b]=Ye(o[b],he(p-h,S))}}for(let d=0;d<o.length;++d)o[d]=It(o[d],i)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let r=0;r<e.length;++r){const s=e[r];let a=s;if(sM(e,s)>1){const i=sM(e.slice(0,r),s);a+=`_${i}`}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],o=()=>{const h=[];for(let y=0;y<this.inputs.length;++y)h.push({key:this.inputs[y],value:r[y]});const p=new Hc(h),g=A0(this.outputs,p,{training:!0});let x;for(let y=0;y<this.lossFunctions.length;++y){const b=this.lossFunctions[y];let S=b(s[y],g[y]);a[y]!=null&&(S=yCe(S,a[y]));const T=pr(S);t.push(T),y===0?x=S:x=Ye(x,S)}for(let y=0;y<this.metricsTensors.length;++y){let b;if(this.outputs.length>1&&y<this.outputs.length)b=t[y];else{const S=this.metricsTensors[y][0],T=this.metricsTensors[y][1];b=pr(S(s[T],g[T]))}Xr(b),i.push(b)}return x=pr(x),this.calculateLosses().forEach(y=>{x=Ye(x,y)}),x},l=this.collectedTrainableWeights.map(h=>h.read());return[this.optimizer_.minimize(o,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>Te(()=>{const t=[];let r;const s=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:s[c]});const o=new Hc(i),l=A0(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const d=this.lossFunctions[c],h=pr(d(a[c],l[c]));c===0?r=h:r=Ye(r,h),t.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const d=this.metricsTensors[c][0],h=this.metricsTensors[c][1],p=pr(d(a[h],l[h]));t.push(p)}return t})}async fit(e,t,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,a,i,o,l,c,d,h,p;try{const g=r.batchSize==null?32:r.batchSize;sE(g);const y=await this.standardizeUserData(e,t,r.sampleWeight,r.classWeight,!1,g);s=y[0],a=y[1],p=y[2];let b=!1,S;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Zt("validationData including sample weights is not supported yet."):new ye(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const k=await this.standardizeUserData(l,c,null,null,!0,g);d=k[0],h=k[1],S=d.concat(h)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const _=Math.floor(s[0].shape[0]*(1-r.validationSplit)),k=s[0].shape[0];d=y0(s,_,k),i=s,s=y0(s,0,_),h=y0(a,_,k),o=a,a=y0(a,0,_),S=d.concat(h)}else r.validationSteps!=null&&(b=!0);const T=s.concat(a).concat(p);this.checkTrainableWeightsConsistency();const N=this.makeTrainFunction(),C=this.getDedupedMetricsNames();let I,F;b?(this.makeTestFunction(),I=this.testFunction,F=C.slice().concat(C.map(_=>"val_"+_))):(I=null,S=[],F=C.slice());const D=aU(r.callbacks,r.yieldEvery);return await this.fitLoop(N,T,C,g,r.epochs,r.verbose,D,I,S,r.shuffle,F,r.initialEpoch,null,null)}finally{this.isTraining=!1,Ji(s,e),Ji(a,t),Ji(i,e),Ji(o,t),Ji(d,l),Ji(h,c),p!=null&&tn(p)}}async fitLoop(e,t,r,s,a,i,o,l,c,d,h,p,g,x){s==null&&(s=32),a==null&&(a=1),d==null&&(d=!0),p==null&&(p=0);let y=!1;if(l!=null&&c!=null&&(y=!0),x!=null&&(y=!0,g==null))throw new ye("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(t,s,g,"steps_per_epoch");let S;b!=null&&(S=mo(0,b)),i==null&&(i=1);const{callbackList:T,history:N}=iU(o,i,a,p,b,g,s,y,h);T.setModel(this),this.history=N,await T.onTrainBegin(),this.stopTraining_=!1;for(let C=p;C<a;++C){await T.onEpochBegin(C);const I={};if(g!=null)throw new Zt("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new Zt("batch shuffling is not implemneted yet");d&&eI(S);const F=zs(S),D=aE(b,s);for(let A=0;A<D.length;++A){const _={};if(await T.onBatchBegin(A,_),Te(()=>{const k=D[A][0],O=D[A][1],P=Sd(F,k,O-k);_.batch=A,_.size=O-k;const W=Rk(t,P),K=e(W);for(let q=0;q<r.length;++q){const V=r[q],X=K[q];_[V]=X,Xr(X)}if(A===D.length-1&&y){const q=this.testLoop(l,c,s);for(let V=0;V<r.length;++V){const X=r[V],Q=q[V];Xr(Q),I["val_"+X]=Q}}}),await T.onBatchEnd(A,_),sU(_),this.stopTraining_)break}F.dispose()}if(await T.onEpochEnd(C,I),this.stopTraining_)break}return await T.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return wCe(this,e,t)}async trainOnBatch(e,t){const r=await this.standardizeUserData(e,t),s=r[0],a=r[1],o=this.makeTrainFunction()(s.concat(a)),l=[];for(const c of o){const d=await c.data();l.push(d[0])}return tn(o),Ji(r[0],e),Ji(r[1],t),ha(l)}getNamedWeights(e){const t=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let i=0;i<s.length;++i)r&&!s[i].trainable||t.push({name:s[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const t=tk().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-tk().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Il(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Il(t))}else{const t=Object.keys(this.loss);e={};const r=this.loss;for(const s of t)if(typeof r[s]=="string")e[s]=Il(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Il(vb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Il(vb(e)));{const e={};for(const t in this.metrics)e[t]=Il(vb(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const t=Ak(e.optimizer_config),r=Ml(t);let s;if(typeof e.loss=="string")s=ud(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>ud(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=ud(e.loss[i])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(i=>ud(i));else if(e.metrics!=null){a={};for(const i in e.metrics)a[i]=ud(e.metrics[i])}this.compile({loss:s,metrics:a,optimizer:r})}async save(e,t){if(typeof e=="string"){const c=Aj(e);if(c.length===0)throw new ye(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ye(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ye("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await nk(this.getNamedWeights(t)),o={modelTopology:this.toJSON(null,!1),format:ICe,generatedBy:`TensorFlow.js tfjs-layers v${hU}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:d,specs:h}=await nk(await this.optimizer.getWeights(),c);r.specs.push(...h),r.data=_j([r.data,d])}return this.userDefinedMetadata!=null&&(mM(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){mM(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}wh.className="Model";et(wh);class yU extends wh{}yU.className="Functional";et(yU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tg extends wh{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:HS("sequential_"),e.layers!=null)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ye(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof Tg||e instanceof wh;let r;if(t){if(r=e,r.outputs.length!==1)throw new ye("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ye("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ye("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=$Ne({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ye(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ye("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=J8(this.outputs[0])}this.inboundNodes=[],new qS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Bd(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(bn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new wh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,r=console.log){this.built||this.build(),super.summary(e,t,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,r={}){if(!this.built)throw new Oi("The model needs to be compiled before being used.");return this.model.evaluate(e,t,r)}async evaluateDataset(e,t){if(!this.built)throw new Oi("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,r={}){if(!this.built)throw new Oi("The model needs to be compiled before being used.");return this.model.fit(e,t,r)}async fitDataset(e,t){if(!this.built)throw new Oi("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,r={},s=!1){let a,i={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new ye("Legacy serialization format not supported yet.");a=t}else Z(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,i=t;const o=new e(i);if(!(o instanceof Tg))throw new Zt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of a){const d=Ml(l,void 0,s);s&&d.setFastWeightInitDuringBuild(!0),o.add(d)}return o}set stopTraining(e){if(this.model==null)throw new ye("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ye("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const r={};r.className=t.getClassName(),r.config=t.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Tg.className="Sequential";et(Tg);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ws=class extends rf{getConfig(){return{}}};class bU extends Ws{apply(e,t=1){return mNe(e,t)}}bU.className="elu";et(bU);class vU extends Ws{apply(e){return vS(e)}}vU.className="selu";et(vU);class wU extends Ws{apply(e){return bo(e)}}wU.className="relu";et(wU);class SU extends Ws{apply(e){return Te(()=>lu(6,bo(e)))}}SU.className="relu6";et(SU);class TU extends Ws{apply(e){return e}}TU.className="linear";et(TU);class NU extends Ws{apply(e){return uo(e)}}NU.className="sigmoid";et(NU);class CU extends Ws{apply(e){return xNe(e)}}CU.className="hardSigmoid";et(CU);class EU extends Ws{apply(e){return tf(e)}}EU.className="softplus";et(EU);class kU extends Ws{apply(e){return gNe(e)}}kU.className="softsign";et(kU);class _U extends Ws{apply(e){return ou(e)}}_U.className="tanh";et(_U);let b$=class extends Ws{apply(e,t=-1){return x1(e,t)}};b$.className="softmax";et(b$);class IU extends Ws{apply(e,t=-1){return fS(e,t)}}IU.className="logSoftmax";et(IU);class AU extends Ws{apply(e){return Te(()=>Te(()=>{const t=Math.sqrt(2),r=he(.5,Ye(1,cS(It(e,t))));return he(e,r)}))}}AU.className="gelu";et(AU);class $U extends Ws{apply(e){return Te(()=>he(.5,he(e,Ye(1,ou(he(hs(It(2,Math.PI)),Ye(e,he(.044715,el(e,3)))))))))}}$U.className="gelu_new";et($U);class RU extends Ws{apply(e){return Te(()=>he(e,ou(tf(e))))}}RU.className="mish";et(RU);class OU extends Ws{apply(e,t=1){return Te(()=>he(uo(he(e,t)),e))}}OU.className="swish";et(OU);function uu(n){return n.getClassName()}function iE(n,e={}){return T1(n,ni.getMap().classNameMap,e,"activation")}function du(n){if(n==null){const e={};return e.className="linear",e.config={},iE(e)}if(typeof n=="string"){const e={};return e.className=n,e.config={},iE(e)}else return n instanceof Ws?n:iE(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ACe(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class DU extends rf{}class FU extends DU{constructor(e){super(),ACe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Te(()=>{let t=Pr([1]);return this.hasL1&&(t=Ye(t,St(he(this.l1,Mr(e))))),this.hasL2&&(t=Ye(t,St(he(this.l2,C1(e))))),xe(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}FU.className="L1L2";et(FU);const wM={l1l2:"L1L2"};function Qn(n){return a$(n)}function SM(n,e={}){return T1(n,ni.getMap().classNameMap,e,"regularizer")}function cr(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in wM?wM[n]:n,config:{}};return SM(t)}else return n instanceof DU?n:SM(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class LU extends sn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=zt(e);let r=bo(e);return this.maxValue!=null&&(r=va(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}LU.className="ReLU";et(LU);class MU extends sn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=zt(e);return o1(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}MU.className="LeakyReLU";et(MU);class PU extends sn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=lr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=cr(e.alphaRegularizer),this.alphaConstraint=es(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ye(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=bn(e);const t=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)t[s-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Qr({ndim:e.length,axes:r})],this.built=!0}call(e,t){return e=zt(e),p1(e,this.alpha.read())}getConfig(){const e={alphaInitializer:mr(this.alphaInitializer),alphaRegularizer:Qn(this.alphaRegularizer),alphaConstraint:Jr(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}PU.className="PReLU";et(PU);let BU=class extends sn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Zt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=zt(e);return Xp(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};BU.className="ELU";et(BU);class jU extends sn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){const r=zt(e);return he(r,dt(Na(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}jU.className="ThresholdedReLU";et(jU);class zU extends sn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new b$().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return Te(()=>{let r=zt(e);const s=t.mask;if(s!=null){const a=he(bt(pa(r.shape),dt(s,r.dtype)),Rt(-1e9));r=Ye(r,a)}return this.axis instanceof Array?this.axis.length>1?wa(bt(r,c1(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}zU.className="Softmax";et(zU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sh(n,e,t){if(typeof n=="number")return Bd(n,e);if(n.length!==e)throw new ye(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${n.length} elements.`);for(let r=0;r<e;++r){const s=n[r];if(!dNe(s))throw new ye(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(n)} including a non-integer number ${s}`)}return n}function fo(n,e,t,r,s=1){if(n==null)return n;const a=e+(e-1)*(s-1);let i;return t==="same"?i=n:i=n-a+1,Math.floor((i+r-1)/r)}function Lo(n,e,t,r){if(n==null)return null;if(r==="valid")n=n*e+cu([t-e,0]);else if(r==="same")n=n*e;else throw new ye(`Unsupport padding mode: ${r}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function v$(n,e){return Te(()=>(Or(e),e==="channelsFirst"?un(n,[0,2,3,1]):n))}function UU(n,e){return Te(()=>(Or(e),e==="channelsFirst"?un(n,[0,2,3,4,1]):n))}function $Ce(n,e,t,r=1,s="valid",a,i=1){return Te(()=>{if(a==null&&(a=go()),Or(a),n.shape.length!==3)throw new ye(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(e.shape.length!==3)throw new ye(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new ye(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(a==="channelsFirst"&&(n=un(n,[0,2,1])),s==="causal")throw new Zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=aS(n,e,r,s==="same"?"same":"valid","NWC",i);return t!=null&&(o=vo(o,t)),o})}function TM(n,e,t,r=[1,1],s="valid",a,i,o=null){return Te(()=>{if(a==null&&(a=go()),Or(a),n.rank!==3&&n.rank!==4)throw new ye(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ye(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=v$(n,a);if(s==="causal")throw new Zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Az({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:t,activation:o}),a==="channelsFirst"&&(l=un(l,[0,3,1,2])),l})}function RCe(n,e,t,r=[1,1,1],s="valid",a,i){return Te(()=>{if(a==null&&(a=go()),Or(a),n.rank!==4&&n.rank!==5)throw new ye(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ye(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let o=UU(n,a);if(s==="causal")throw new Zt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=MI(o,e,r,s==="same"?"same":"valid","NDHWC",i),t!=null&&(o=vo(o,t)),a==="channelsFirst"&&(o=un(o,[0,4,1,2,3])),o})}class YS extends sn{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",YS.verifyArgs(t),this.rank=e,ds(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Zt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Sh(t.kernelSize,e,"kernelSize"),this.strides=Sh(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,di(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Or(this.dataFormat),this.activation=du(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=lr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=es(t.biasConstraint),this.biasRegularizer=cr(t.biasRegularizer),this.activityRegularizer=cr(t.activityRegularizer),this.dilationRate=Sh(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ye(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ye(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ye(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Fo("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!i$(e.kernelSize,"number",1,3))throw new ye(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:uu(this.activation),useBias:this.useBias,biasInitializer:mr(this.biasInitializer),biasRegularizer:Qn(this.biasRegularizer),activityRegularizer:Qn(this.activityRegularizer),biasConstraint:Jr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class em extends YS{constructor(e,t){super(e,t),this.kernel=null,em.verifyArgs(t),this.filters=t.filters,ds(this.filters,"filters"),this.kernelInitializer=lr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=es(t.kernelConstraint),this.kernelRegularizer=cr(t.kernelRegularizer)}build(e){e=bn(e);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ye(`The channel dimension of the input should be defined. Found ${e[t]}`);const r=e[t],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(e,t){return Te(()=>{e=zt(e);let r;const s=this.bias==null?null:this.bias.read(),a=P8(this.activation.getClassName());if(a!=null&&this.rank===2)r=TM(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=$Ce(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=TM(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=RCe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Zt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=bn(e);const t=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const i=fo(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);t.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(t),s.push(this.filters)):(s.push(this.filters),s=s.concat(t)),s}getConfig(){const e={filters:this.filters,kernelInitializer:mr(this.kernelInitializer),kernelRegularizer:Qn(this.kernelRegularizer),kernelConstraint:Jr(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ye(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class I1 extends em{constructor(e){super(2,e),I1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!i$(e.kernelSize,"number",1,2))throw new ye(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}I1.className="Conv2D";et(I1);class A1 extends em{constructor(e){super(3,e),A1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ye(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}A1.className="Conv3D";et(A1);class VU extends I1{constructor(e){if(super(e),this.inputSpec=[new Qr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ye(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bn(e),e.length!==4)throw new ye("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ye("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Qr({ndim:4,axes:{[t]:r}})],this.built=!0}call(e,t){return Te(()=>{let r=zt(e);if(r.shape.length!==4)throw new ye(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let i,o;this.dataFormat==="channelsFirst"?(i=2,o=3):(i=1,o=2);const l=s[i],c=s[o],d=this.kernelSize[0],h=this.kernelSize[1],p=this.strides[0],g=this.strides[1],x=Lo(l,p,d,this.padding),y=Lo(c,g,h,this.padding),b=[a,x,y,this.filters];this.dataFormat!=="channelsLast"&&(r=un(r,[0,2,3,1]));let S=iS(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=un(S,[0,3,1,2])),this.bias!=null&&(S=vo(S,this.bias.read(),this.dataFormat)),this.activation!=null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=bn(e);const t=e.slice();let r,s,a;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3):(r=3,s=1,a=2);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return t[r]=this.filters,t[s]=Lo(t[s],l,i,this.padding),t[a]=Lo(t[a],c,o,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}VU.className="Conv2DTranspose";et(VU);class WU extends A1{constructor(e){if(super(e),this.inputSpec=[new Qr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ye(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=bn(e),e.length!==5)throw new ye("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new ye("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Qr({ndim:5,axes:{[t]:r}})],this.built=!0}call(e,t){return Te(()=>{let r=zt(e);if(r.shape.length!==5)throw new ye(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let i,o,l;this.dataFormat==="channelsFirst"?(l=2,i=3,o=4):(l=1,i=2,o=3);const c=s[l],d=s[i],h=s[o],p=this.kernelSize[0],g=this.kernelSize[1],x=this.kernelSize[2],y=this.strides[0],b=this.strides[1],S=this.strides[2],T=Lo(c,y,p,this.padding),N=Lo(d,b,g,this.padding),C=Lo(h,S,x,this.padding),I=[a,T,N,C,this.filters];this.dataFormat!=="channelsLast"&&(r=un(r,[0,2,3,4,1]));let F=PI(r,this.kernel.read(),I,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(F=un(F,[0,4,1,2,3])),this.bias!==null&&(F=vo(F,this.bias.read(),this.dataFormat)),this.activation!==null&&(F=this.activation.apply(F)),F})}computeOutputShape(e){e=bn(e);const t=e.slice();let r,s,a,i;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3,i=4):(r=4,s=1,a=2,i=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],d=this.strides[0],h=this.strides[1],p=this.strides[2];return t[r]=this.filters,t[s]=Lo(t[s],d,o,this.padding),t[a]=Lo(t[a],h,l,this.padding),t[i]=Lo(t[i],p,c,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}WU.className="Conv3DTranspose";et(WU);class HU extends em{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new ye("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new ye("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new ye(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=lr(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=cr(t.depthwiseRegularizer),this.depthwiseConstraint=es(t.depthwiseConstraint),this.pointwiseInitializer=lr(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=cr(t.pointwiseRegularizer),this.pointwiseConstraint=es(t.pointwiseConstraint)}build(e){if(e=bn(e),e.length<this.rank+2)throw new ye(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new ye(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const r=e[t],s=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Qr({ndim:this.rank+2,axes:{[t]:r}})],this.built=!0}call(e,t){return Te(()=>{e=zt(e);let r;if(this.rank===1)throw new Zt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=un(e,[0,2,3,1])),r=wS(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=vo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=un(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=mr(this.depthwiseInitializer),e.pointwiseInitializer=mr(this.pointwiseInitializer),e.depthwiseRegularizer=Qn(this.depthwiseRegularizer),e.pointwiseRegularizer=Qn(this.pointwiseRegularizer),e.depthwiseConstraint=Jr(this.depthwiseConstraint),e.pointwiseConstraint=Jr(this.pointwiseConstraint),e}}HU.className="SeparableConv";class GU extends HU{constructor(e){super(2,e)}}GU.className="SeparableConv2D";et(GU);class QS extends em{constructor(e){super(1,e),QS.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!i$(e.kernelSize,"number",1,1))throw new ye(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}QS.className="Conv1D";et(QS);class qU extends sn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Te(()=>{if(e=zt(e),this.dataFormat==="channelsLast"){const r=bb(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return bb(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=bb(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return bb(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}qU.className="Cropping2D";et(qU);class KU extends sn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,lNe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const t=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,r]}else{const t=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],t,r,e[3]]}}call(e,t){return Te(()=>{let r=zt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=un(r,[0,2,3,1]);const a=this.size[0]*s[2],i=this.size[1]*s[3],o=this.interpolation==="nearest"?oo.resizeNearestNeighbor(r,[a,i]):oo.resizeBilinear(r,[a,i]);return un(o,[0,3,1,2])}else{const a=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?oo.resizeNearestNeighbor(r,[a,i]):oo.resizeBilinear(r,[a,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}KU.className="UpSampling2D";et(KU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function OCe(n,e,t=[1,1],r="valid",s,a){return Te(()=>{s==null&&(s=go()),Or(s);let i=v$(n,s);if(n.rank!==4)throw new ye(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(e.rank!==4)throw new ye(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=Kp(i,e,t,r==="same"?"same":"valid","NHWC",a),s==="channelsFirst"&&(i=un(i,[0,3,1,2])),i})}class XU extends YS{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=lr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=es(e.depthwiseConstraint),this.depthwiseRegularizer=cr(e.depthwiseRegularizer)}build(e){if(e=bn(e),e.length<4)throw new ye(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new ye(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const r=e[t],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Te(()=>{e=zt(e);let r=OCe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=vo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=bn(e);const t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=fo(t,this.kernelSize[0],this.padding,this.strides[0]),i=fo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,a,i]:[e[0],a,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=mr(this.depthwiseInitializer),e.depthwiseRegularizer=Qn(this.depthwiseRegularizer),e.depthwiseConstraint=Jr(this.depthwiseRegularizer),e}}XU.className="DepthwiseConv2D";et(XU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YU(n,e,t,r){if(Array.isArray(n)){if(e!=null||t!=null)throw new ye("When inputs is an array, neither initialState or constants should be provided");r!=null&&(t=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function s(a){return a==null||Array.isArray(a)?a:[a]}return e=s(e),t=s(t),{inputs:n,initialState:e,constants:t}}function QU(n,e,t,r=!1,s,a,i=!1,o=!1){return Te(()=>{const l=e.shape.length;if(l<3)throw new ye(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(mo(2,l));e=un(e,c),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=dt(dt(s,"bool"),"float32"),s.rank===l-1&&(s=Ps(s,-1)),s=un(s,c)),r&&(e=ci(e,0),s!=null&&(s=ci(s,0)));const d=[];let h,p=t;const g=e.shape[0],x=ui(e);let y;s!=null&&(y=ui(s));for(let S=0;S<g;++S){const T=x[S],N=Te(()=>n(T,p));if(s==null)h=N[0],p=N[1];else{const C=Te(()=>{const I=y[S],F=bt(Pa(I),I),D=Ye(he(N[0],I),he(p[0],F)),A=p.map((_,k)=>Ye(he(N[1][k],I),he(_,F)));return{output:D,newStates:A}});h=C.output,p=C.newStates}o&&d.push(h)}let b;return o&&(b=Sa(d,1)),[h,b,p]})}class ku extends sn{constructor(e){super(e);let t;if(e.cell==null)throw new ye("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new T$({cells:e.cell}):t=e.cell,t.stateSize==null)throw new ye("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Qr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return mo(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){kk(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const r=t[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const a=[];for(const i of t)a.push([e[0],i]);return[s].concat(a)}else return s}computeMask(e,t){return Te(()=>{Array.isArray(t)&&(t=t[0]);const r=this.returnSequences?t:null;if(this.returnState){const s=this.states.map(a=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<e;++r)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Zt("Constants support is not implemented in RNN yet.");kk(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Qr({shape:[t,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!on(this.stateSpec.map(i=>i.shape[i.shape.length-1]),a))throw new ye(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(i=>new Qr({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){Te(()=>{if(!this.stateful)throw new Do("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ye("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Pr([r,s])):this.states_=[Pr([r,this.cell.stateSize])];else if(e==null)tn(this.states_),this.keptStates!=null&&(tn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Pr([r,s])):this.states_[0]=Pr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ye(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):tn(this.states_);for(let s=0;s<this.states_.length;++s){const a=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,i];if(!on(a.shape,o))throw new ye(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>Xr(s.clone()))})}apply(e,t){let r=t==null?null:t.initialState,s=t==null?null:t.constants;t==null&&(t={});const a=YU(e,r,s,this.numConstants);e=a.inputs,r=a.initialState,s=a.constants;let i=[],o=[];if(r!=null){t.initialState=r,i=i.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Qr({shape:c.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(t.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof nl){const c=[e].concat(i),d=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=d;const p=super.apply(c,t);return this.inputSpec=h,p}else return super.apply(e,t)}call(e,t){return Te(()=>{const r=t==null?null:t.mask,s=t==null?null:t.training;let a=t==null?null:t.initialState;e=zt(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new ye(`RNN Layer has ${i} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},c=QU((x,y)=>{const b=this.cell.call([x].concat(y),o);return[b[0],b.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),d=c[0],h=c[1],p=c[2];this.stateful&&this.resetStates(p,s);const g=this.returnSequences?h:d;return this.returnState?[g].concat(p):g})}getInitialState(e){return Te(()=>{let t=Pr(e.shape);return t=St(t,[1,2]),t=N1(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?Ck(t,[1,r]):t):this.cell.stateSize>1?[Ck(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===ku.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}static fromConfig(e,t,r={}){const s=t.cell,a=Ml(s,r);return new e(Object.assign(t,{cell:a}))}}ku.className="RNN";et(ku);class ZS extends sn{}class w$ extends ZS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ds(this.units,"units"),this.activation=du(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=lr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=cr(e.kernelRegularizer),this.recurrentRegularizer=cr(e.recurrentRegularizer),this.biasRegularizer=cr(e.biasRegularizer),this.kernelConstraint=es(e.kernelConstraint),this.recurrentConstraint=es(e.recurrentConstraint),this.biasConstraint=es(e.biasConstraint),this.dropout=Mh([1,cu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Mh([1,cu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Te(()=>{if(e=e,e.length!==2)throw new ye(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>Pa(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>Pa(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a;const i=this.dropoutMask,o=this.recurrentDropoutMask;i!=null?a=Xo(he(e,i),this.kernel.read()):a=Xo(e,this.kernel.read()),this.bias!=null&&(a=vo(a,this.bias.read())),o!=null&&(r=he(r,o));let l=Ye(a,Xo(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:uu(this.activation),useBias:this.useBias,kernelInitializer:mr(this.kernelInitializer),recurrentInitializer:mr(this.recurrentInitializer),biasInitializer:mr(this.biasInitializer),kernelRegularizer:Qn(this.kernelRegularizer),recurrentRegularizer:Qn(this.recurrentRegularizer),biasRegularizer:Qn(this.biasRegularizer),activityRegularizer:Qn(this.activityRegularizer),kernelConstraint:Jr(this.kernelConstraint),recurrentConstraint:Jr(this.recurrentConstraint),biasConstraint:Jr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}w$.className="SimpleRNNCell";et(w$);class ZU extends ku{constructor(e){e.cell=new w$(e),super(e)}call(e,t){return Te(()=>{this.cell.dropoutMask!=null&&(tn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(tn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,t){return new e(t)}}ZU.className="SimpleRNN";et(ZU);class S$ extends ZS{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ye("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ds(this.units,"units"),this.activation=du(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=du(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=lr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=cr(e.kernelRegularizer),this.recurrentRegularizer=cr(e.recurrentRegularizer),this.biasRegularizer=cr(e.biasRegularizer),this.kernelConstraint=es(e.kernelConstraint),this.recurrentConstraint=es(e.recurrentConstraint),this.biasConstraint=es(e.biasConstraint),this.dropout=Mh([1,cu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Mh([1,cu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=bn(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Te(()=>{if(e=e,e.length!==2)throw new ye(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training==null?!1:t.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>Pa(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>Pa(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=he(e,a[0]));let d=Xo(e,this.kernel.read());this.useBias&&(d=vo(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=he(s,i[0]));const h=this.recurrentKernel.read(),[p,g]=ga(h,[2*this.units,this.units],h.rank-1),x=Xo(s,p),[y,b,S]=ga(d,3,d.rank-1),[T,N]=ga(x,2,x.rank-1);o=this.recurrentActivation.apply(Ye(y,T)),l=this.recurrentActivation.apply(Ye(b,N));const C=Xo(he(l,s),g);c=this.activation.apply(Ye(S,C));const I=Ye(he(o,s),he(Ye(1,sr(o)),c));return[I,I]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:uu(this.activation),recurrentActivation:uu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mr(this.kernelInitializer),recurrentInitializer:mr(this.recurrentInitializer),biasInitializer:mr(this.biasInitializer),kernelRegularizer:Qn(this.kernelRegularizer),recurrentRegularizer:Qn(this.recurrentRegularizer),biasRegularizer:Qn(this.biasRegularizer),activityRegularizer:Qn(this.activityRegularizer),kernelConstraint:Jr(this.kernelConstraint),recurrentConstraint:Jr(this.recurrentConstraint),biasConstraint:Jr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}S$.className="GRUCell";et(S$);class JU extends ku{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new S$(e),super(e)}call(e,t){return Te(()=>{this.cell.dropoutMask!=null&&(tn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(tn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}JU.className="GRU";et(JU);class JS extends ZS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ds(this.units,"units"),this.activation=du(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=du(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=lr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=cr(e.kernelRegularizer),this.recurrentRegularizer=cr(e.recurrentRegularizer),this.biasRegularizer=cr(e.biasRegularizer),this.kernelConstraint=es(e.kernelConstraint),this.recurrentConstraint=es(e.recurrentConstraint),this.biasConstraint=es(e.biasConstraint),this.dropout=Mh([1,cu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Mh([1,cu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=bn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,i=this.units;s=new(t=class extends Ui{apply(l,c){const d=a.apply([i]),h=new l$().apply([i]),p=a.apply([i*2]);return iM(iM(d,h),p)}},t.className="CustomInit",t)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Te(()=>{const r=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new ye(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>Pa(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>Pa(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,d,h;0<this.dropout&&this.dropout<1&&(e=he(e,i[0]));let p=Xo(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=he(s,o[0])),p=Ye(p,Xo(s,this.recurrentKernel.read())),this.useBias&&(p=vo(p,this.bias.read()));const[g,x,y,b]=ga(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(x),d=Ye(he(c,a),he(l,this.activation.apply(y))),h=this.recurrentActivation.apply(b);const S=he(h,this.activation.apply(d));return[S,S,d]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:uu(this.activation),recurrentActivation:uu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mr(this.kernelInitializer),recurrentInitializer:mr(this.recurrentInitializer),biasInitializer:mr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Qn(this.kernelRegularizer),recurrentRegularizer:Qn(this.recurrentRegularizer),biasRegularizer:Qn(this.biasRegularizer),activityRegularizer:Qn(this.activityRegularizer),kernelConstraint:Jr(this.kernelConstraint),recurrentConstraint:Jr(this.recurrentConstraint),biasConstraint:Jr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}JS.className="LSTMCell";et(JS);class eV extends ku{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new JS(e),super(e)}call(e,t){return Te(()=>{this.cell.dropoutMask!=null&&(tn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(tn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}eV.className="LSTM";et(eV);class T$ extends ZS{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Te(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const a=[];let i;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,t),a.push(i.slice(1))}r=[];for(const o of a.slice().reverse())r.push(...o);return[i[0]].concat(r)})}build(e){kk(e)&&(e=e[0]),e=e;let t;this.cells.forEach((r,s)=>{wd(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?t=r.stateSize[0]:t=r.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,t,r={}){const s=[];for(const a of t.cells)s.push(Ml(a,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.cells)t.push(...r.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return _k(e)}setWeights(e){const t=[];for(const r of this.cells){const s=r.weights.length,a=e.splice(s);for(let i=0;i<r.weights.length;++i)t.push([r.weights[i],a[i]])}m$(t)}}T$.className="StackedRNNCells";et(T$);function fu(n){const{ones:e,rate:t,training:r=!1,count:s=1,dropoutFunc:a}=n,i=()=>a!=null?a(e(),t):H8(e(),t),o=()=>E1(i,e,r);return!s||s<=1?Xr(o().clone()):Array(s).fill(void 0).map(o).map(c=>Xr(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var DCe=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class tV extends ku{constructor(e){if(e.unroll)throw new Zt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Zt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Qr({ndim:5})]}call(e,t){return Te(()=>{if(this.cell.dropoutMask!=null&&(tn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(tn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ye("ConvRNN2D cell does not support constants");const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Te(()=>{const{stateSize:t}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)],i=Pr(a);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){Te(()=>{if(!this.stateful)throw new Do("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)];if(r[0]==null)throw new ye("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Pr(a)):this.states_=[Pr(a)];else if(e==null)tn(this.states_),this.keptStates!=null&&(tn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Pr(a)):this.states_[0]=Pr(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ye(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):tn(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=a;if(!on(l.shape,c))throw new ye(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>Xr(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:r,kernelSize:s,padding:a,strides:i,dilationRate:o}=this.cell,l=t==="channelsFirst",c=e[l?3:2],d=e[l?4:3],h=fo(c,s[0],a,i[0],o[0]),p=fo(d,s[1],a,i[1],o[1]);return[...e.slice(0,2),...l?[r,h,p]:[h,p,r]]}}tV.className="ConvRNN2D";class N$ extends JS{constructor(e){const{filters:t,kernelSize:r,strides:s,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,ds(this.filters,"filters"),this.kernelSize=Sh(r,2,"kernelSize"),this.kernelSize.forEach(l=>ds(l,"kernelSize")),this.strides=Sh(s||1,2,"strides"),this.strides.forEach(l=>ds(l,"strides")),this.padding=a||"valid",di(this.padding),this.dataFormat=i||"channelsLast",Or(this.dataFormat),this.dilationRate=Sh(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>ds(l,"dilationRate"))}build(e){var t;e=bn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ye(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],a=4,i=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,d=this.filters;l=new(t=class extends Ui{apply(p,g){const x=c.apply([d]),y=pa([d]),b=c.apply([d*2]);return o$([x,y,b])}},t.className="CustomInit",t)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Te(()=>{if(e.length!==3)throw new ye(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training||!1,s=e[0],a=e[1],i=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=fu({ones:()=>Pa(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(j,J,M)=>!J||!J[M]?j:he(J[M],j);let d=c(s,l,0),h=c(s,l,1),p=c(s,l,2),g=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=fu({ones:()=>Pa(a),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const x=this.recurrentDropoutMask;let y=c(a,x,0),b=c(a,x,1),S=c(a,x,2),T=c(a,x,3);const N=3,[C,I,F,D]=ga(this.kernel.read(),o,N),[A,_,k,O]=this.useBias?ga(this.bias.read(),o):[null,null,null,null];d=this.inputConv(d,C,A,this.padding),h=this.inputConv(h,I,_,this.padding),p=this.inputConv(p,F,k,this.padding),g=this.inputConv(g,D,O,this.padding);const[P,W,K,q]=ga(this.recurrentKernel.read(),o,N);y=this.recurrentConv(y,P),b=this.recurrentConv(b,W),S=this.recurrentConv(S,K),T=this.recurrentConv(T,q);const V=this.recurrentActivation.apply(Ye(d,y)),X=this.recurrentActivation.apply(Ye(h,b)),Q=Ye(he(X,i),he(V,this.activation.apply(Ye(p,S)))),Y=he(this.recurrentActivation.apply(Ye(g,T)),this.activation.apply(Q));return[Y,Y,Q]})}getConfig(){const e=super.getConfig(),{units:t}=e,r=DCe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,t,r,s){const a=Xl(e,t,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?vo(a,r,this.dataFormat):a}recurrentConv(e,t){return Xl(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}N$.className="ConvLSTM2DCell";et(N$);class nV extends tV{constructor(e){const t=new N$(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}nV.className="ConvLSTM2D";et(nV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class C$ extends sn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const t=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?t[s]:this.noiseShape[s]);return r}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e);if(0<this.rate&&this.rate<1){const s=t.training==null?!1:t.training,a=this.getNoiseShape(r);return E1(()=>H8(r,this.rate,a,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}C$.className="Dropout";et(C$);class rV extends C${constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}rV.className="SpatialDropout1D";et(rV);class sV extends sn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,ds(this.units,"units"),this.activation=du(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=lr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=lr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=es(e.kernelConstraint),this.biasConstraint=es(e.biasConstraint),this.kernelRegularizer=cr(e.kernelRegularizer),this.biasRegularizer=cr(e.biasRegularizer),this.activityRegularizer=cr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=bn(e);const t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=bn(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e),s=P8(this.activation.getClassName());let a;return s!=null?a=Xo(r,this.kernel.read(),s,this.bias?this.bias.read():null):(a=Xo(r,this.kernel.read()),this.bias!=null&&(a=vo(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:uu(this.activation),useBias:this.useBias,kernelInitializer:mr(this.kernelInitializer),biasInitializer:mr(this.biasInitializer),kernelRegularizer:Qn(this.kernelRegularizer),biasRegularizer:Qn(this.biasRegularizer),activityRegularizer:Qn(this.activityRegularizer),kernelConstraint:Jr(this.kernelConstraint),biasConstraint:Jr(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}sV.className="Dense";et(sV);class aV extends sn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=bn(e);for(const t of e.slice(1))if(t==null)throw new ye(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Yc(e,1)]}call(e,t){return Te(()=>{this.invokeCallHook(e,t);let r=zt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let a=2;a<r.rank;++a)s.push(a);s.push(1),r=un(r,s)}return pNe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}aV.className="Flatten";et(aV);class iV extends sn{constructor(e){super(e),this.supportsMasking=!0,this.activation=du(e.activation)}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e);return this.activation.apply(r)})}getConfig(){const e={activation:uu(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}iV.className="Activation";et(iV);class oV extends sn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Te(()=>(e=zt(e),fNe(e,this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}oV.className="RepeatVector";et(oV);class lV extends sn{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){const r="Total size of new array must be unchanged.",s=t.slice();let a=1,i=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(i===null)i=l;else throw new ye("Can only specifiy one unknown dimension.");else a*=c}const o=Yc(e);if(i!==null){if(a===0||o%a!==0)throw new ye(r);s[i]=o/a}else if(o!==a)throw new ye(r);return s}computeOutputShape(e){let t=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e),s=r.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return xe(r,a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}lV.className="Reshape";et(lV);class cV extends sn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=mo(1,e.dims.length+1);if(!on(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Qr({ndim:this.dims.length+1})]}computeOutputShape(e){e=bn(e);const t=e.slice();return this.dims.forEach((r,s)=>{t[s+1]=e[r]}),t}call(e,t){return un(zt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}cV.className="Permute";et(cV);class uV extends sn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const r=zt(e);return xg(Fd(r,this.maskValue),-1)}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e),i=xg(Fd(r,this.maskValue),-1,!0);return he(r,dt(i,r.dtype))})}}uV.className="Masking";et(uV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dV extends sn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(An(e.inputLength))}this.inputDim=e.inputDim,ds(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ds(this.outputDim,"outputDim"),this.embeddingsInitializer=lr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=cr(e.embeddingsRegularizer),this.activityRegularizer=cr(e.activityRegularizer),this.embeddingsConstraint=es(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Te(()=>this.maskZero?(e=zt(e),Fd(e,mn(e))):null)}computeOutputShape(e){if(e=bn(e),this.inputLength==null)return[...e,this.outputDim];const t=An(this.inputLength);if(t.length!==e.length-1)throw new ye(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<t.length;++s){const a=t[s],i=e[s+1];if(a!=null&&i!=null&&a!==i)throw new ye(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(t[r]=i),r++}}return[e[0],...t,this.outputDim]}call(e,t){return Te(()=>{this.invokeCallHook(e,t);let r=zt(e);r.dtype!=="int32"&&(r=Ko(r,"int32"));const s=W8(this.embeddings.read(),xe(r,[r.size]));return xe(s,bn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:mr(this.embeddingsInitializer),embeddingsRegularizer:Qn(this.embeddingsRegularizer),activityRegularizer:Qn(this.activityRegularizer),embeddingsConstraint:Jr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}dV.className="Embedding";et(dV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class af extends sn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Zt}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;const r=e.slice(0,e.length-t.length);for(let s=0;s<t.length;++s){const a=e[e.length-t.length+s],i=t[s];if(a==null||i==null||a<0||i<0)r.push(null);else if(a===1)r.push(i);else if(i===1)r.push(a);else{if(a!==i)throw new ye("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[bn(e)]),e=e,e.length<2)throw new ye(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const a of e)a!=null&&a[0]!==null&&t.push(a[0]);if(t=Xc(t),t.length>1)throw new ye(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const s=e.map(a=>a.length);e.indexOf(null)===-1&&Xc(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Te(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(a=>a.rank);if(s.indexOf(null)===-1){const a=cu(s);for(let i of e){const o=i.rank;for(let l=0;l<a-o;++l)i=N1(i,1);r.push(i)}return this.mergeFunction(r)}else{let a=!1;for(const l of e){const c=l.rank;if(c==null){const d=l.shape,h=d[0],p=d.slice(1).concat([h]);let g=xe(l,[h].concat(Yc(d.slice(1))));g=un(g,[1,0]),g=xe(g,p),r.push(g),a=!0}else if(c>1){const d=mo(1,c).concat([0]);r.push(un(l,d)),a=!0}else r.push(l)}let i=this.mergeFunction(r);const o=i.rank;if(a){if(o==null){const l=i.shape,c=l.length,d=l[c-1],h=[d].concat(l.slice(0,l.length-1));i=xe(un(xe(i,[-1,d]),[1,0]),h)}else if(o>1){const l=[o-1].concat(mo(0,o-1));i=un(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Xc(r),r.length===1?t=r.concat(t):t=[null].concat(t),t}computeMask(e,t){return Te(()=>{if(t==null)return null;if(!Array.isArray(t))throw new ye("`mask` should be an Array");if(!Array.isArray(e))throw new ye("`inputs` should be an Array");if(t.length!==e.length)throw new ye(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(s=>s==null))return null;t=t.map(s=>s==null?s:Ps(s,0));let r=t[0];for(let s=1;s<t.length-1;++s)r=po(r,t[s]);return r})}}class fV extends af{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Ye(t,e[r]);return t})}}fV.className="Add";et(fV);class hV extends af{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=he(t,e[r]);return t})}}hV.className="Multiply";et(hV);class pV extends af{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Ye(t,e[r]);return he(1/e.length,t)})}}pV.className="Average";et(pV);class mV extends af{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=ol(t,e[r]);return t})}}mV.className="Maximum";et(mV);class gV extends af{constructor(e){super(e)}mergeFunction(e){return Te(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=lu(t,e[r]);return t})}}gV.className="Minimum";et(gV);class xV extends af{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ye("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const s of e)if(s!=null){t=!1;break}if(t)return;const r=[];for(let s=0;s<e.length;++s){const a=e[s].slice();a.splice(this.axis,1);let i=!1;for(const o of r)if(on(o,a)){i=!0;break}i||r.push(a)}if(r.length>1)throw new ye("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Te(()=>o$(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ye("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const a of t.slice(1)){if(r[s]==null||a[s]==null){r[s]=null;break}r[s]+=a[s]}return r}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new ye("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ye("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ye(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Te(()=>{let r=!0;if(t.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const s=[];for(let i=0;i<e.length;++i)t[i]==null?s.push(dt(Pa(e[i]),"bool")):t[i].rank<e[i].rank?s.push(Ps(t[i],-1)):s.push(t[i]);const a=Ir(s,this.axis);return sS(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}xV.className="Concatenate";et(xV);function b0(n,e){for(;n<0;)n+=e;return n}function FCe(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new Zt("batchDot is not implemented for tensors of 4D or higher rank yet");if(Z(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),Z(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new Zt("batchDot is not implemented for complex64-type Tensors yet.");const r=n.shape.length,s=e.shape.length;t==null&&(t=[r-1,s-2]);const a=t;return Te(()=>{let i;if(r>s){i=r-s;const l=[];for(let c=0;c<i;++c)l.push(1);e=xe(e,e.shape.concat(l))}else if(s>r){i=s-r;const l=[];for(let c=0;c<i;++c)l.push(1);n=xe(n,n.shape.concat(l))}else i=0;let o;if(n.shape.length===2&&e.shape.length===2)a[0]===a[1]?o=St(he(n,e),a[0]):o=St(he(un(n,[1,0]),e),a[1]);else{const l=a[0]!==n.shape.length-1,c=a[1]===e.shape.length-1;o=en(n,e,l,c)}if(i>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let d=l;d<l+i;++d)c.push(d);o=Cu(o,c)}return o.shape.length===1&&(o=Ps(o,1)),o})}class yV extends af{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Z(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],r=e[1];if(t.length>3||r.length>3)throw new Zt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(t,r);if(t[s[0]]!==r[s[1]])throw new ye(`Dimension incompatibility: ${t[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ye(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,i)=>b0(a,e[i].shape.length)):s=[b0(this.axes,t.shape.length),b0(this.axes,r.shape.length)],this.normalize&&(t=qv(t,s[0]),r=qv(r,s[1])),FCe(t,r,s)}interpretAxes(e,t){let r;return Array.isArray(this.axes)?r=this.axes:r=[b0(this.axes,e.length),b0(this.axes,t.length)],r}computeOutputShape(e){Z(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),r=e[1].slice();if(t.length>3||r.length>3)throw new Zt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(t,r);t.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const a=t.concat(r);return a.length===1&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}yV.className="Dot";et(yV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bV extends sn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e);return E1(()=>Ye(GS(r.shape,0,this.stddev),r),()=>r,t.training||!1)})}}bV.className="GaussianNoise";et(bV);class vV extends sn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Te(()=>{this.invokeCallHook(e,t);const r=zt(e);return this.rate>0&&this.rate<1?E1(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return he(r,GS(r.shape,1,a))},()=>r,t.training||!1):r})}}vV.className="GaussianDropout";et(vV);class wV extends sn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||zt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Te(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return E1(()=>{const a=zt(e),o=-1.6732632423543772*1.0507009873554805;let l=ac(Nu(r),this.rate);l=Ko(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,d=-c*o*this.rate,h=Ye(he(a,l),he(Ye(l,-1),o));return Ye(he(h,c),d)},()=>zt(e),t.training||!1)}return e})}}wV.className="AlphaDropout";et(wV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ng(n,e,t,r,s,a=.001){let i;if(n.rank===2)i=kI(n,e,t,r,s,a);else if(n.rank===3)i=_I(n,e,t,r,s,a);else if(n.rank===4)i=II(n,e,t,r,s,a);else throw new Zt(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return i}function LCe(n,e,t,r,s=.001){return Te(()=>{const a=f1(n,r),i=a.mean,o=a.variance;return[Ng(n,i,o,t,e,s),i,o]})}function MCe(n,e,t,r,s=.001){return Te(()=>{const a=f1(n,r),i=a.mean,o=a.variance,l=[];for(const x of mo(0,n.rank))r.indexOf(x)!==-1?l.push(1):l.push(n.shape[x]);const c=xe(i,l),d=xe(o,l),h=e==null?null:xe(e,l),p=t==null?null:xe(t,l);return[Ng(n,c,d,p,h,s),i,o]})}function PCe(n,e,t,r,s=.001){return on(r.slice().sort(),mo(0,n.rank-1))?LCe(n,e,t,r,s):MCe(n,e,t,r,s)}class SV extends sn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=lr(e.betaInitializer||"zeros"),this.gammaInitializer=lr(e.gammaInitializer||"ones"),this.movingMeanInitializer=lr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=lr(e.movingVarianceInitializer||"ones"),this.betaConstraint=es(e.betaConstraint),this.gammaConstraint=es(e.gammaConstraint),this.betaRegularizer=cr(e.betaRegularizer),this.gammaRegularizer=cr(e.gammaRegularizer)}build(e){e=bn(e);const t=this.axis>=0?this.axis:this.axis+e.length,r=e[t];if(r==null)throw new ye(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Qr({ndim:e.length,axes:{[t]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Te(()=>{const r=t.training==null?!1:t.training,s=zt(e),a=s.shape,i=a.length,o=mo(0,i),l=this.axis>=0?this.axis:this.axis+i;o.splice(l,1);const c=Bd(1,i);c[l]=a[l];const d=o.slice();d.sort();const h=!on(d,mo(0,i).slice(0,i-1)),p=()=>{if(h){const T=xe(this.movingMean.read(),c),N=xe(this.movingVariance.read(),c),C=this.center?xe(this.beta.read(),c):null,I=this.scale?xe(this.gamma.read(),c):null;return Ng(s,T,N,C,I,this.epsilon)}else return Ng(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,x,y]=PCe(s,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(T,N,C)=>{Te(()=>{const I=1-C,F=T.read(),D=he(bt(F,N),I);T.write(bt(F,D))})};return(()=>{b(this.movingMean,x,this.momentum),b(this.movingVariance,y,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mr(this.betaInitializer),gammaInitializer:mr(this.gammaInitializer),movingMeanInitializer:mr(this.movingMeanInitializer),movingVarianceInitializer:mr(this.movingVarianceInitializer),betaRegularizer:Qn(this.betaRegularizer),gammaRegularizer:Qn(this.gammaRegularizer),betaConstraint:Jr(this.betaConstraint),gammaConstraint:Jr(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}SV.className="BatchNormalization";et(SV);class TV extends sn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=lr(e.betaInitializer||"zeros"),this.gammaInitializer=lr(e.gammaInitializer||"ones"),this.betaRegularizer=cr(e.betaRegularizer),this.gammaRegularizer=cr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=bn(e);const t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(const a of this.axis)if(a<0||a>=t)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==Xc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,t){const r=zt(e),s=r.shape,a=s.length;return Te(()=>{let{mean:o,variance:l}=f1(r,this.axis,!0);const c=Bd(1,a);for(const y of this.axis)c[y]=s[y];const d=y=>y!=null&&y.shape.length!==a?xe(y,c):y;let h=this.scale?d(this.gamma.read()):null,p=this.center?d(this.beta.read()):null;const g=[],x=[];for(let y=0;y<a;++y)this.axis.indexOf(y)!==-1?(g.push(s[y]),x.push(1)):(g.push(1),x.push(s[y]));return o=ri(o,g),l=ri(l,g),h!=null&&(h=ri(h,x)),p!=null&&(p=ri(p,x)),Ng(r,o,l,p,h,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mr(this.betaInitializer),gammaInitializer:mr(this.gammaInitializer),betaRegularizer:Qn(this.betaRegularizer),gammaRegularizer:Qn(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}TV.className="LayerNormalization";et(TV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BCe(n,e,t){return Te(()=>{if(n.rank!==4)throw new ye(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ye("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=go()),t!=="channelsLast"&&t!=="channelsFirst")throw new ye(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return t==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],ic(n,r)})}class NV extends sn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?go():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ye(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,r;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ye(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new ye(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[t,r]}this.inputSpec=[new Qr({ndim:4})]}computeOutputShape(e){e=bn(e);let t,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],t,r]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],t,r,e[3]])}call(e,t){return Te(()=>BCe(zt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}NV.className="ZeroPadding2D";et(NV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eT(n,e,t,r,s,a){return Te(()=>{Or(s),j8(a),di(r),t==null&&(t=[1,1]),r==null&&(r="valid"),s==null&&(s=go()),a==null&&(a="max"),n=v$(n,s);let i;const o=r==="same"?"same":"valid";return a==="max"?i=d1(n,e,t,o):i=r1(n,e,t,o),s==="channelsFirst"&&(i=un(i,[0,3,1,2])),i})}function CV(n,e,t,r,s,a){return Te(()=>{Or(s),j8(a),di(r),t==null&&(t=[1,1,1]),r==null&&(r="valid"),s==null&&(s=go()),a==null&&(a="max"),n=UU(n,s);let i;const o=r==="same"?"same":"valid";return a==="max"?i=ZI(n,e,t,o):i=EI(n,e,t,o),s==="channelsFirst"&&(i=un(i,[0,4,1,2,3])),i})}class EV extends sn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ye(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(ds(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ye(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);ds(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,di(this.padding),this.inputSpec=[new Qr({ndim:3})]}computeOutputShape(e){e=bn(e);const t=fo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Te(()=>{this.invokeCallHook(e,t),e=N1(zt(e),2);const r=this.poolingFunction(zt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Cu(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class kV extends EV{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return Or(a),di(s),eT(e,t,r,s,a,"max")}}kV.className="MaxPooling1D";et(kV);class _V extends EV{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return Or(a),di(s),eT(e,t,r,s,a,"avg")}}_V.className="AveragePooling1D";et(_V);class IV extends sn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ye(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];ds(this.poolSize,"poolSize"),ds(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),di(this.padding),this.inputSpec=[new Qr({ndim:4})]}computeOutputShape(e){e=bn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=fo(t,this.poolSize[0],this.padding,this.strides[0]),r=fo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r]:[e[0],t,r,e[3]]}call(e,t){return Te(()=>(this.invokeCallHook(e,t),this.poolingFunction(zt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class AV extends IV{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return Or(a),di(s),eT(e,t,r,s,a,"max")}}AV.className="MaxPooling2D";et(AV);class $V extends IV{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return Or(a),di(s),eT(e,t,r,s,a,"avg")}}$V.className="AveragePooling2D";et($V);class RV extends sn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ye(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];ds(this.poolSize,"poolSize"),ds(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),di(this.padding),this.inputSpec=[new Qr({ndim:5})]}computeOutputShape(e){e=bn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=fo(t,this.poolSize[0],this.padding,this.strides[0]),r=fo(r,this.poolSize[1],this.padding,this.strides[1]),s=fo(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r,s]:[e[0],t,r,s,e[4]]}call(e,t){return Te(()=>(this.invokeCallHook(e,t),this.poolingFunction(zt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class OV extends RV{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return Or(a),di(s),CV(e,t,r,s,a,"max")}}OV.className="MaxPooling3D";et(OV);class DV extends RV{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return Or(a),di(s),CV(e,t,r,s,a,"avg")}}DV.className="AveragePooling3D";et(DV);class FV extends sn{constructor(e){super(e),this.inputSpec=[new Qr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Zt}}class LV extends FV{constructor(e){super(e||{})}call(e,t){return Te(()=>{const r=zt(e);return pr(r,1)})}}LV.className="GlobalAveragePooling1D";et(LV);class MV extends FV{constructor(e){super(e||{})}call(e,t){return Te(()=>{const r=zt(e);return oi(r,1)})}}MV.className="GlobalMaxPooling1D";et(MV);class PV extends sn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Or(this.dataFormat),this.inputSpec=[new Qr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Zt}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class BV extends PV{call(e,t){return Te(()=>{const r=zt(e);return this.dataFormat==="channelsLast"?pr(r,[1,2]):pr(r,[2,3])})}}BV.className="GlobalAveragePooling2D";et(BV);class jV extends PV{call(e,t){return Te(()=>{const r=zt(e);return this.dataFormat==="channelsLast"?oi(r,[1,2]):oi(r,[2,3])})}}jV.className="GlobalMaxPooling2D";et(jV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zV extends sn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const s=t.layer,a=Ml(s,r);delete t.layer;const i={layer:a};return Object.assign(i,t),new e(i)}}class UV extends zV{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=bn(e),e.length<3)throw new ye(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=bn(e);const t=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,t){return Te(()=>(e=zt(e),QU((i,o)=>[zt(this.layer.call(i,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}UV.className="TimeDistributed";et(UV);function jCe(n){sf(oNe,"BidirectionalMergeMode",n)}const zCe="concat";class VV extends zV{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=Ml(r),t.goBackwards=t.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=t,this.backwardLayer=Ml(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?zCe:e.mergeMode,jCe(this.mergeMode),e.weights)throw new Zt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let r,s,a;return this.returnState&&(a=t.slice(1)),r=t[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):ha(s)}apply(e,t){let r=t==null?null:t.initialState,s=t==null?null:t.constants;t==null&&(t={});const a=YU(e,r,s,this.numConstants);if(e=a.inputs,r=a.initialState,s=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,t);const i=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new ye("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,i.push(...r);const d=r.map(h=>new Qr({shape:h.shape}));this.forwardLayer.stateSpec=d.slice(0,c/2),this.backwardLayer.stateSpec=d.slice(c/2),o.push(...d)}if(s!=null)throw new Zt("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof nl;for(const c of i)if(c instanceof nl!==l)throw new ye("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),d=this.inputSpec.concat(o),h=this.inputSpec;this.inputSpec=d;const p=super.apply(c,t);return this.inputSpec=h,p}else return super.apply(e,t)}call(e,t){return Te(()=>{const r=t.initialState;let s,a;if(r==null)s=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(t,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:c}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=ci(a,1));let o;return this.mergeMode==="concat"?o=o$([s,a]):this.mergeMode==="sum"?o=Ye(s,a):this.mergeMode==="ave"?o=he(.5,Ye(s,a)):this.mergeMode==="mul"?o=he(s,a):this.mergeMode==null&&(o=[s,a]),this.returnState?this.mergeMode==null?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){wd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),wd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[t,t]:r=t:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=Ml(t.layer);if(delete t.layer,t.numConstants!=null)throw new Zt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=t;return s.layer=r,new e(s)}}VV.className="Bidirectional";et(VV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class WV extends sn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Te(()=>(e=zt(e),e.dtype!=="float32"&&(e=Ko(e,"float32")),Ye(he(e,this.scale),this.offset)))}}WV.className="Rescaling";et(WV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:UCe,cropAndResize:VCe}=oo;class HV extends sn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,r,s,a,i,o,l){return Te(()=>{let c,d=!1;const h=t/i,p=r/o,g=(s+t)/i,x=(a+r)/o,y=[h,p,g,x],b=[];e.rank===3?(d=!0,c=Sa([e])):c=e;for(let I=0;I<c.shape[0];I++)b.push(y);const S=Fi(b,[b.length,4]),T=Ld(0,b.length,1,"int32"),C=VCe(c,S,T,[s,a],"nearest");return Ko(d?zt(ui(C)):C,l)})}upsize(e,t,r,s){return Te(()=>{const a=UCe(e,[t,r]);return Ko(a,s)})}call(e,t){return Te(()=>{const r=zt(e),s=r.dtype,a=r.shape,i=a[a.length-3],o=a[a.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,i,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=bn(e);const t=e.length-3,r=e.length-2;return e[t]=this.height,e[r]=this.width,e}}HV.className="CenterCrop";et(HV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WCe(n,e,t,r){let s=zt(n);if(s.dtype!=="int32"&&(s=Ko(s,"int32")),e==="int")return s;const a=s.shape;if(s.rank===0&&(s=Ps(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Ps(s,-1)),s.rank>2)throw new ye(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=Bv(o,r,t,i):l=Bv(o,[],t,i),e!=="tfIdf")return l;if(r)return he(l,r);throw new ye("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GV extends sn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=bn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return Te(()=>{e=zt(e),e.dtype!=="int32"&&(e=Ko(e,"int32"));let r;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new ye(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);r=zt(t.countWeights)}const s=oi(e),a=$h(e),i=Na(this.numTokens,s).bufferSync().get(0),o=ac(a,0).bufferSync().get(0);if(!(i&&o))throw new ye(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return WCe(e,this.outputMode,this.numTokens,r)})}}GV.className="CategoryEncoding";et(GV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const HCe=["bilinear","nearest"],NM=new Set(HCe);class qV extends sn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(NM.has(e.interpolation))this.interpolation=e.interpolation;else throw new ye(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=bn(e);const t=e[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Te(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return oo.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return oo.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...NM]} are supported`)})}}qV.className="Resizing";et(qV);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KV{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}KV.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class XV extends sn{constructor(e){super(e),this.randomGenerator=new KV(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}XV.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const GCe=["bilinear","nearest"],CM=new Set(GCe);class YV extends XV{constructor(e){super(e);const{factor:t,interpolation:r="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ye(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ye(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ye(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(CM.has(r))this.interpolation=r;else throw new ye(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=bn(e);const t=e[2];return[this.imgHeight,-1,t]}call(e,t){return Te(()=>{const r=zt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Nu([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);const i=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return oo.resizeBilinear(e,i);case"nearest":return oo.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...CM]} are supported`)}})}}YV.className="RandomWidth";et(YV);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var EM;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(EM||(EM={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tt(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&Z(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qCe=AS;class tT extends qw{nextDataId(){return tT.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new J_(this,to())}write(e,t,r){this.firstUse&&(this.firstUse=!1,Ce().get("IS_NODE")&&ti(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,t,r){let s;if(t==="string"&&r!=null&&r.length>0&&zo(r[0])){const a=r.map(i=>Ho(i));s=this.write(a,e,t)}else s=this.write(r,e,t);return{dataId:s,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,r,s,a){this.data.set(e,{values:t,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:r}=this.data.get(e);if(t==="complex64"){const s=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return Yl(s,a)}return aj(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(s=>ql(s));return Yt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Yt(e.shape,e.dtype,t)}makeOutput(e,t,r){return to().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Xs();return e(),{kernelMs:Xs()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Tt([e],"where");const t=this.readSync(e.dataId);return qCe(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}tT.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QV(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}const KCe=n=>{const{x:e}=n.inputs,t=n.backend;Tt(e,"abs");let r=new Float32Array(Fe(e.shape));const s=t.data.get(e.dataId).values;return r=QV(s),t.makeOutput(r,e.shape,e.dtype)},XCe={kernelName:Qg,backendName:"cpu",kernelFunc:KCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dr(n){return(e,t,r,s,a)=>{const i=Gt(e,t),o=i.length,l=$t(i),c=Fe(i),d=fs(a,c),h=e.length,p=t.length,g=$t(e),x=$t(t),y=Dd(e,i),b=Dd(t,i);if(y.length+b.length===0)for(let S=0;S<d.length;++S)d[S]=n(r[S%r.length],s[S%s.length]);else for(let S=0;S<d.length;++S){const T=Zd(S,o,l),N=T.slice(-h);y.forEach(D=>N[D]=0);const C=co(N,h,g),I=T.slice(-p);b.forEach(D=>I[D]=0);const F=co(I,p,x);d[S]=n(r[C],s[F])}return[d,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ra(n){const{inputs:e,backend:t}=n,{real:r,imag:s}=e,a=t.data.get(r.dataId).values,i=t.data.get(s.dataId).values,o=t.makeTensorInfo(r.shape,"complex64"),l=t.data.get(o.dataId);return l.complexTensorInfos={real:t.makeTensorInfo(r.shape,"float32",a),imag:t.makeTensorInfo(s.shape,"float32",i)},o}const YCe={kernelName:n2,backendName:"cpu",kernelFunc:Ra};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zv(n,e,t="float32"){if(t==="complex64"){const s=Zv(n,e,"float32"),a=Zv(n,e,"float32");return Ra({inputs:{real:s,imag:a},backend:n})}const r=Es(Fe(e),t);return n.makeTensorInfo(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rl(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const QCe={kernelName:yp,backendName:"cpu",kernelFunc:rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.data.get(r.dataId).complexTensorInfos.real,a=t.data.get(s.dataId).values;return t.makeTensorInfo(s.shape,s.dtype,a)}const ZCe={kernelName:F2,backendName:"cpu",kernelFunc:jd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZV(n,e,t,r){if(r==="int32"){const s=Int32Array.from(n);return[e,"int32",s]}if(r==="bool"){const s=bu([0],t),[a,i]=Dr((o,l)=>o!==l?1:0)(e,[],n,s,"bool");return[i,"bool",a]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}function hu(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return rl({inputs:{x:s},backend:t});const d=Zv(t,s.shape,s.dtype),h=hu({inputs:{x:s},backend:t,attrs:{dtype:"float32"}}),p=Ra({inputs:{real:h,imag:d},backend:t});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(h),p}if(s.dtype==="complex64"){const d=jd({inputs:{input:s},backend:t}),h=hu({inputs:{x:d},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(d),h}if(!nI(s.dtype,a)){const d=rl({inputs:{x:s},backend:t});return{dataId:d.dataId,shape:d.shape,dtype:a}}const i=t.data.get(s.dataId).values,[o,l,c]=ZV(i,s.shape,s.dtype,a);return t.makeTensorInfo(o,l,c)}const JCe={kernelName:ap,backendName:"cpu",kernelFunc:hu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ns(n,e,t,r){return t==null?({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;Tt([i,o],n);const c=l.data.get(i.dataId).values,d=l.data.get(o.dataId).values,h=i.dtype==="string"?Ql(c):c,p=i.dtype==="string"?Ql(d):d,g=r||i.dtype,[x,y]=e(i.shape,o.shape,h,p,g);return l.makeTensorInfo(y,g,x)}:({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;if(i.dtype==="complex64"||o.dtype==="complex64"){const c=hu({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(c.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,g=l.data.get(h.dataId).values,x=l.data.get(p.dataId).values,y=hu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(y.dataId),S=b.complexTensorInfos.real,T=b.complexTensorInfos.imag,N=l.data.get(S.dataId).values,C=l.data.get(T.dataId).values,[I,F,D]=t(i.shape,o.shape,g,x,N,C),A=l.makeTensorInfo(D,"float32",I),_=l.makeTensorInfo(D,"float32",F),k=Ra({inputs:{real:A,imag:_},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(_),k}else{const c=l.data.get(i.dataId).values,d=l.data.get(o.dataId).values,h=r||i.dtype,[p,g]=e(i.shape,o.shape,c,d,h);return l.makeTensorInfo(g,h,p)}}}function E$(n){return(e,t,r,s,a,i)=>{const o=Gt(e,t),l=Fe(o),c=o.length,d=$t(o),h=fs("float32",l),p=fs("float32",l),g=Dd(e,o),x=Dd(t,o),y=Yl(r,s),b=Yl(a,i),S=e.length,T=$t(e),N=t.length,C=$t(t);if(g.length+x.length===0)for(let I=0;I<h.length;I++){const F=I%y.length,D=I%b.length,A=n(y[F*2],y[F*2+1],b[D*2],b[D*2+1]);h[I]=A.real,p[I]=A.imag}else for(let I=0;I<h.length;I++){const F=Zd(I,c,d),D=F.slice(-S);g.forEach(P=>D[P]=0);const A=co(D,S,T),_=F.slice(-N);x.forEach(P=>_[P]=0);const k=co(_,N,C),O=n(y[A*2],y[A*2+1],b[k*2],b[k*2+1]);h[I]=O.real,p[I]=O.imag}return[h,p,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV=Dr((n,e)=>n+e),eEe=E$((n,e,t,r)=>({real:n+t,imag:e+r})),Ph=ns(Jd,JV,eEe),tEe={kernelName:Jd,backendName:"cpu",kernelFunc:Ph};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k$(n,e,t,r,s){const a=Fe(r),i=Es(s,t);for(let o=0;o<n.length;o++){const l=n[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(a>0?i[l]+=e[o]:i[l]+=1)}return i}function eW(n,e,t,r=!1){const s=n.shape[0],a=n.shape[1],i=Yt([s,t],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<a;l++){const c=n.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=t||(r?i.set(1,o,c):e.size>0?i.set(i.get(o,c)+e.get(o,l),o,c):i.set(i.get(o,c)+1,o,c))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW=Dr((n,e)=>n&e),nEe=ns(ax,tW),rEe={kernelName:ax,backendName:"cpu",kernelFunc:nEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ll(n){return(e,t,r)=>{const s=wr(t,e.length);for(let a=0;a<e.length;++a)s[a]=n(e[a],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(n,e,t){const r=ll(e);return _u(n,r,t)}function _u(n,e,t){return({inputs:r,attrs:s,backend:a})=>{const{x:i}=r;Tt(i,n);const o=a,l=o.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Ql(l)}else c=l;const d=t||i.dtype,h=e(c,d,s);return o.makeTensorInfo(i.shape,d,h)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW=ll(n=>Math.ceil(n)),sEe=_u(ip,nW),aEe={kernelName:ip,backendName:"cpu",kernelFunc:sEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(n,e,t,r){const s=wr(t,Fe(e));if(r&&t!=="string"){let a=0;n.forEach(i=>{const o=Fe(i.shape);s.set(i.vals,a),a+=o})}else{let a=0;n.forEach(i=>{const o=t==="string"?Ql(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const d=c*e[1]+a;for(let h=0;h<i.shape[1];++h)s[d+h]=o[l++]}a+=i.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sW=Dr((n,e)=>n===e?1:0),aW=ns(px,sW,null,"bool"),iEe={kernelName:px,backendName:"cpu",kernelFunc:aW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iW=ll(n=>Math.exp(n)),oW=_u(hp,iW,"float32"),oEe={kernelName:hp,backendName:"cpu",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW=ll(n=>Math.expm1(n)),lEe=_u(pp,lW),cEe={kernelName:pp,backendName:"cpu",kernelFunc:lEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cW=ll(n=>Math.floor(n)),uEe=_u(mp,cW),dEe={kernelName:mp,backendName:"cpu",kernelFunc:uEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uW=Dr((n,e)=>Math.floor(n/e)),fEe=ns(gp,uW,null,"int32"),hEe={kernelName:gp,backendName:"cpu",kernelFunc:fEe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(n,e,t,r,s,a,i,o,l){const c=Yt([r,a],t);for(let d=0;d<r;d++){const h=[];let p=0;for(let g=0;g<s;g++){const x=n[d*s+g];p+=x*i[g],h.push(x)}if(p<0||p>=l/a)throw new Error(`Invalid indices: ${h} does not index into ${o}`);for(let g=0;g<a;g++)c.values[d*a+g]=e.get(...e.indexToLoc(p*a+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fW(n,e,t){const r=Yt(t,n.dtype);for(let s=0;s<r.size;++s){const i=r.indexToLoc(s).slice(),o=i[0],l=i[2],c=e.locToIndex([o,l]);i[2]=e.values[c];const d=n.locToIndex(i);0<=d&&d<n.values.length&&(r.values[s]=n.values[d])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hW=Dr((n,e)=>n>e?1:0),pEe=ns(yx,hW,null,"bool"),mEe={kernelName:yx,backendName:"cpu",kernelFunc:pEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pW=Dr((n,e)=>n>=e?1:0),gEe=ns(xp,pW,null,"bool"),xEe={kernelName:xp,backendName:"cpu",kernelFunc:gEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mW=Dr((n,e)=>n<e?1:0),yEe=ns(vx,mW,null,"bool"),bEe={kernelName:vx,backendName:"cpu",kernelFunc:yEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gW=Dr((n,e)=>n<=e?1:0),vEe=ns(wx,gW,null,"bool"),wEe={kernelName:wx,backendName:"cpu",kernelFunc:vEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(n,e,t){const r=(e-n)/(t-1),s=Es(t,"float32");s[0]=n;for(let a=1;a<s.length;a++)s[a]=s[a-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yW=ll(n=>Math.log(n)),SEe=_u(Sp,yW),TEe={kernelName:Sp,backendName:"cpu",kernelFunc:SEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bW(n,e,t,r){const s=fs(r,Fe(t));for(let a=0;a<s.length;++a){const i=a*e;let o=n[i];for(let l=0;l<e;++l){const c=n[i+l];(Number.isNaN(c)||c>o)&&(o=c)}s[a]=o}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vW=Dr((n,e)=>Math.max(n,e)),NEe=ns(Np,vW),CEe={kernelName:Np,backendName:"cpu",kernelFunc:NEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wW=Dr((n,e)=>Math.min(n,e)),EEe=ns(Cp,wW),kEe={kernelName:Cp,backendName:"cpu",kernelFunc:EEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$=Dr((n,e)=>n*e),_Ee=E$((n,e,t,r)=>({real:n*t-e*r,imag:n*r+e*t})),nT=ns(kp,_$,_Ee),IEe={kernelName:kp,backendName:"cpu",kernelFunc:nT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SW(n,e,t){const r=nc(-1,t);return _$([],e,r,n,t)}function AEe(n){const{inputs:e,backend:t}=n,{x:r}=e;Tt(r,"neg");const s=t.data.get(r.dataId).values,[a,i]=SW(s,r.shape,r.dtype);return t.makeTensorInfo(i,r.dtype,a)}const $Ee={kernelName:Rx,backendName:"cpu",kernelFunc:AEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TW=Dr((n,e)=>n!==e?1:0),REe=ns(Ox,TW,null,"bool"),OEe={kernelName:Ox,backendName:"cpu",kernelFunc:REe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$(n,e,t,r,s){const a=e.length,i=Fe(e),o=$t(e),l=$t(s),c=fs(t,Fe(s));for(let d=0;d<i;++d){const h=Zd(d,a,o),p=new Array(h.length);for(let x=0;x<p.length;x++)p[x]=h[r[x]];const g=co(p,a,l);c[g]=n[d]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(n){const{inputs:e,attrs:t,backend:r}=n,{x:s}=e,{perm:a}=t;Tt(s,"transpose");const i=s.shape.length,o=new Array(i);for(let h=0;h<o.length;h++)o[h]=s.shape[a[h]];const l=r.data.get(s.dataId).values,c=I$(l,s.shape,s.dtype,a,o);return{dataId:r.write(c,o,s.dtype),shape:o,dtype:s.dtype}}const DEe={kernelName:bd,backendName:"cpu",kernelFunc:Ta};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NW(n,e,t,r){const[s,a]=ms(n,r),i=ya(e,"int32"),o=Es(Fe(s),i),l=Fe(a);for(let c=0;c<o.length;++c){const d=c*l;let h=1;for(let p=0;p<l;++p)h*=t[d+p];o[c]=h}return{outVals:o,outShape:s,outDtype:i}}function FEe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r;Tt(s,"prod");const o=s.shape.length,l=nn(a,s.shape),c=yr(l,o);let d=l,h=s;const p=[];c!=null&&(h=Ta({inputs:{x:s},backend:t,attrs:{perm:c}}),p.push(h),d=Rr(d.length,o));const g=t.data.get(h.dataId).values,{outVals:x,outShape:y,outDtype:b}=NW(h.shape,h.dtype,g,d);let S=y;return i&&(S=$r(y,l)),p.forEach(T=>t.disposeIntermediateTensorInfo(T)),t.makeTensorInfo(S,b,x)}const LEe={kernelName:Bx,backendName:"cpu",kernelFunc:FEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(n,e,t){n.forEach((r,s)=>{if(r<0||r>=t){const a=Zd(s,e.length,$t(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${t})`)}})}function PEe(n,e){for(let t=0;t<n.length;++t){const r=n[t],s=t===n.length-1?e:n[t+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function BEe(n,e,t,r){const s=[];let a=0;const i=e.length-1+t.length,o=new Array(i).fill(null).map(()=>[0]);PEe(t,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const d=e[c+1];for(let h=1;h<l+1;++h)o[c].push(h*d)}for(let c=0;c<n.length;++c){let d=n[c],h=n[c]+1;for(let p=0;p<t.length;++p){const g=t[p],x=p+e.length-1;if(x>=0){const y=o[x],b=y[y.length-1]-g[d];for(let S=d;S<h;++S)o[x].push(g[S+1]+b)}d=g[d],h=g[h]}h!==d&&(s.push([d,h]),a+=h-d)}return{outSplits:o,valueSlices:s,numValues:a}}function jEe(n){const e=[];for(let t=0;t<n.length;++t){const r=n[t].length,s=wr("int32",r);e.push(s),n[t].forEach((a,i)=>s[i]=a)}return e}function kM(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let r=e;r<n.length;r++)t[e-1]*=n[r];return t}function zEe(n,e,t,r,s,a){const i=kM(e,2)[1],o=kM(a,2)[1];let l=0;for(const c of t)for(let d=c[0];d<c[1];++d){for(let h=0;h<r;++h)s[l*o+h]=n[d*i+h];++l}}function UEe(n,e,t,r,s){const a=e.slice();a[0]=s;const i=wr(t,Fe(a)),o=n.length,l=o===0?0:o/e[0];return zEe(n,e,r,l,i,a),[i,a]}function CW(n,e,t,r,s,a,i,o){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(MEe(a,i,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:d,valueSlices:h,numValues:p}=BEe(a,i,n,c),g=jEe(d),x=UEe(t,r,s,h,p);return[g,x[0],x[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _M=2147483647;function EW(n,e,t,r,s,a,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,c=i.length===0,d=[];o||d.push(e[0]),l||d.push(s[0]),c||d.push(i[0]);for(let b=1;b<d.length;++b)if(d[b]!==d[b-1])throw new Error("starts, limits, and deltas must have the same shape");const h=d.length===0?1:d[0],p=wr("int32",h+1);p[0]=0;for(let b=0;b<h;++b){const S=o?n[0]:n[b],T=l?r[0]:r[b],N=c?a[0]:a[b];if(N===0)throw new Error("Requires delta != 0");let C;if(N>0&&T<S||N<0&&T>S)C=0;else if(C=Math.ceil(Math.abs((T-S)/N)),C>_M)throw new Error(`Requires ((limit - start) / delta) <= ${_M}`);p[b+1]=p[b]+C}const g=p[h],x=wr(t,g);let y=0;for(let b=0;b<h;++b){const S=p[b+1]-p[b];let T=o?n[0]:n[b];const N=c?a[0]:a[b];for(let C=0;C<S;++C)x[y++]=T,T+=N}return[p,x]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ci=ro;class Jv{constructor(e,t,r,s,a,i,o,l,c,d){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=s,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=i8(d),this.raggedRank=o8(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Ci.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Ci.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Ci.VALUE_ROWIDS:return Jv.getMaxWidthValueRowID(t);case Ci.ROW_SPLITS:return Jv.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Ci[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let r=0;for(let s=0;s<t-1;++s){const a=e[s+1]-e[s];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let r=0,s=e[0],a=0;for(let i=1;i<t;++i){const o=e[i];o!==s&&(s=o,a=Math.max(i-r,a),r=i)}return Math.max(t-r,a)}tensorShapeFromTensor(e,t,r=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return AM(e,r)}calculateOutputSize(e){const t=this.valuesShape,r=this.defaultValueShape;l8(r,t);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=a8(this.raggedRank,s,t);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,t,r){const s=Math.min(e,r),a=[];let i=0;for(let o=0;o<s;++o,i+=t)a.push(i);for(let o=s;o<e;++o)a.push(-1);return Z(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,r,s){const a=e.length,i=[];for(let o=0;o<a-1;++o){const l=e[o+1]-e[o];let c=Math.min(s,l),d=t[o];d===-1&&(c=0);for(let h=0;h<c;++h)i.push(d),d+=r;for(let h=0;h<l-c;++h)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,r,s){const a=e.length,i=[];if(a===0)return[];let o=0,l=e[0];if(l>=t.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${t.length}`);let c=t[l];i.push(c);for(let d=1;d<a;++d){const h=e[d];if(h===l)c>=0&&(++o,o<s?c+=r:c=-1);else{if(o=0,l=h,h>=t.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${t.length}`);c=t[h]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,r,s){const a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Ci.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,r,s);case Ci.ROW_SPLITS:if(a.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,r,s);default:throw new Error(`Unsupported partition type: ${Ci[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Ci.FIRST_DIM_SIZE:return e[0];case Ci.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ci.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ci[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),r=this.calculateOutputSize(t),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const a=AM(r,!1),i=wr(this.valuesDType,Fe(a));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(t,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,i,a)}return[a,i]}setOutput(e,t,r,s){if(r.length===0)return;const a=this.values,i=r;let o=s.slice();o=o.slice(e+1);const l=Fe(o),c=t.length;let d=this.defaultValue;if(d.length!==l&&d.length!==1){const x=this.defaultValueShape;Te(()=>{const y=xe(d,x);d=vd(y,o).dataSync()})}let h=0,p=0,g=0;for(let x=0;x<=c;++x){let y=x<c?t[x]:-1;if(y===g){++g;continue}if(p<g){const b=a.subarray(h*l),S=i.subarray(p*l),T=(g-p)*l;IM(S,b,T)}if(x>=c){const b=r.length;y=Math.floor(b/l)}if(y>g)if(this.defaultValue.length===1)i.subarray(g*l,y*l).fill(this.defaultValue[0]),g=y;else for(;y>g;){const b=i.slice(g*l);IM(b,d,l),++g}y<0?(h=x+1,p=g):(h=x,p=g,g=p+1)}}}function IM(n,e,t){for(let r=0;r<t;r++)n[r]=e[r]}function AM(n,e){const t=[];for(let r of n){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function kW(n,e,t,r,s,a,i,o,l,c){return new Jv(n,e,t,r,s,a,i,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _W(n,e,t,r){const s=n===e,a=n<e&&t<0,i=e<n&&t>1;if(s||a||i)return Es(0,r);const o=Math.abs(Math.ceil((e-n)/t)),l=Es(o,r);e<n&&t===1&&(t=-1),l[0]=n;for(let c=1;c<l.length;c++)l[c]=l[c-1]+t;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW=ll(n=>1/Math.sqrt(n)),VEe=_u(Op,IW),WEe={kernelName:Op,backendName:"cpu",kernelFunc:VEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gd(n,e,t,r,s,a,i,o,l,c){const d=[r/s,s],h=n.values,p=e.values;if(r===0)return Yt(t,e.dtype);const g=l instanceof zr?l:Yt(d,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let x=0;x<a;x++){const y=[];let b=0;for(let S=0;S<i;S++){const T=h[x*i+S];y.push(T),b+=T*o[S]}if(b<0||b>=r/s)throw new Error(`Invalid indices: ${y} does not index into ${t}`);for(let S=0;S<s;S++)c?g.values[b*s+S]+=p[x*s+S]:g.values[b*s+S]=e.rank===0?p[0]:p[x*s+S]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe=ll(n=>1/(1+Math.exp(-n))),AW=On(Pp,n=>1/(1+Math.exp(-n))),GEe={kernelName:Pp,backendName:"cpu",kernelFunc:AW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $W(n,e,t,r,s){const a=RA(r,e,t),i=Fe(t),o=$t(r);if(a){const h=OA(e,o);return s==="string"?n.slice(h,h+i):n.subarray(h,h+i)}const l=s==="string"?Ql(n):n,c=Yt(r,s,l),d=Yt(t,s);for(let h=0;h<d.size;++h){const p=d.indexToLoc(h),g=p.map((x,y)=>x+e[y]);d.set(c.get(...g),...p)}return s==="string"?_8(d.values):d.values}function zd(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,size:i}=r;Tt(s,"slice");const[o,l]=zS(s,a,i);AA(s,o,l);const c=t.data.get(s.dataId).values,d=$W(c,o,l,s.shape,s.dtype);return t.makeTensorInfo(l,s.dtype,d)}const qEe={kernelName:Hx,backendName:"cpu",kernelFunc:zd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RW(n,e,t,r,s,a,i){const o=e[0],l=a[0],c=new Array(l),d=new Array(o),h=e[1];if(l===0){if(o!==0)throw new Error(m8(o));const b=wr(t,0),S=wr(s,0);return[b,[0,h],S,c,d]}let p=!0,g=0;const x=new Array(l).fill(0);for(let b=0;b<o;++b){const S=n[b*h];if(S<0)throw new Error(g8(b,S));if(S>=l)throw new Error(x8(b,S,l));++x[S],p=p&&S>=g,g=S}let y=!0;for(let b=0;b<l;++b){const S=x[b]===0;c[b]=S,y=y&&!S,x[b]=Math.max(x[b],1),b>0&&(x[b]+=x[b-1])}if(y&&p){const b=n,S=r;for(let T=0;T<o;++T)d[T]=T;return[b,[o,h],S,c,d]}else{const b=x[l-1],S=wr(t,b*h),T=wr(s,b),N=new Array(l).fill(0);for(let C=0;C<o;++C){const I=n[C*h],F=N[I],D=(I===0?0:x[I-1])+F;N[I]++;for(let A=0;A<h;++A)S[D*h+A]=n[C*h+A];T[D]=r[C],d[C]=D}for(let C=0;C<l;++C)if(N[C]===0){const F=C===0?0:x[C-1];S[F*h+0]=C;for(let D=1;D<h;++D)S[F*h+D]=0;T[F]=i}return[S,[b,h],T,c,d]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(n,e,t,r,s){const a=Fe(r),i=e[0],o=s.length,l=[];let c=1,d=-1;for(let b=0;b<o;++b){const S=s[b];if(S===-1){if(d!==-1)throw new Error(y8(d,b));d=b,l.push(1)}else{if(S<0)throw new Error(b8(b,S));c*=S,l.push(S)}}if(d!==-1){if(c<=0)throw new Error(v8());const b=Math.trunc(a/c);if(c*b!==a)throw new Error(w8(r,l));l[d]=b}if(Fe(l)!==a)throw new Error(S8(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let b=p-2;b>=0;--b)g[b]=g[b+1]*r[b+1]}const x=[];if(o>0){x[o-1]=1;for(let b=o-2;b>=0;--b)x[b]=x[b+1]*l[b+1]}const y=wr(t,i*o);for(let b=0;b<i;++b){let S=0;for(let T=0;T<p;++T)S+=n[b*p+T]*g[T];for(let T=0;T<o;++T)y[b*o+T]=Math.trunc(S/x[T]),S%=x[T]}return[y,[i,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$(n,e,t,r,s,a=!1,i=0){const o=r.length,l=[e[0],n.length/e[0]],c=l[1],h=o>0?s[o-1]+1:0;if(h<0)throw new Error(fk());const p=e.slice();p[0]=h;const g=p.reduce((N,C)=>N*C,1),x=wr(t,g);if(o===0)return h>0&&x.fill(i),[x,p];if(h<=0)throw new Error(fk());let y=0,b=1,S=0,T=s[y];for(;;){let N=0;if(b<o){if(N=s[b],T===N){++b;continue}if(T>=N)throw new Error(T8())}if(T<0||T>=h)throw new Error(N8(T,h));T>S&&x.fill(i,S*c,T*c);for(let C=y;C<b;++C){const I=r[C];if(I<0||I>=l[0])throw new Error(C8(C,r[C],l[0]));for(let F=0;F<c;F++)x[T*c+F]+=n[I*c+F]}if(a)for(let C=0;C<c;C++)x[T*c+C]/=b-y;if(y=b,++b,S=T+1,T=N,b>o)break}return S<h&&x.fill(i,S*c,h*c),[x,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe=ll(n=>Math.sqrt(n)),XEe=On(jp,n=>Math.sqrt(n)),YEe={kernelName:jp,backendName:"cpu",kernelFunc:XEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DW=Dr((n,e)=>{const t=n-e;return t*t}),QEe=ns(zp,DW),ZEe={kernelName:zp,backendName:"cpu",kernelFunc:QEe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FW=ll((n,e)=>{const{pattern:t,replaceGlobal:r,rewrite:s}=e;return n.replace(new RegExp(t,r?"g":""),s)}),JEe=_u(Yx,FW),eke={kernelName:Yx,backendName:"cpu",kernelFunc:JEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LW(n,e,t,r){const s=Yt(n,e.dtype);for(let a=0;a<s.size;a++){const i=s.indexToLoc(a),o=new Array(i.length);for(let l=0;l<o.length;l++)o[l]=i[l]*t[l]+r[l];s.set(e.get(...o),...i)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tke{constructor(e,t,r,s,a,i){this.separator=Ho(e),this.nGramWidths=t,this.leftPad=Ho(r),this.rightPad=Ho(s),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,s,a,i){for(let o=0;o<a;++o){const l=this.getPadWidth(i),c=Math.max(0,l-o),d=Math.max(0,l-(a-(o+1))),h=i-(c+d),p=t+(c>0?0:o-l);let g=0;g+=c*this.leftPad.length;for(let T=0;T<h;++T)g+=e[p+T].length;g+=d*this.rightPad.length;const x=c+d+h-1;g+=x*this.separator.length,r[s+o]=new Uint8Array(g);const y=r[s+o];let b=0;const S=T=>T.forEach(N=>y[b++]=N);for(let T=0;T<c;++T)S(this.leftPad),S(this.separator);for(let T=0;T<h-1;++T)S(e[p+T]),S(this.separator);if(h>0){S(e[p+h-1]);for(let T=0;T<d;++T)S(this.separator),S(this.rightPad)}else{for(let T=0;T<d-1;++T)S(this.rightPad),S(this.separator);S(this.rightPad)}}}compute(e,t){const r=e.length,s=t.length;if(s>0){let l=t[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let d=t[c]>=l;if(d=d&&t[c]<=r,!d)throw new Error(`Invalid split value ${t[c]}, must be in [${l}, ${r}]`);l=t[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=s-1,i=wr("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=a;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=a;++l){const c=t[l]-t[l-1];let d=0;this.nGramWidths.forEach(h=>{d+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&d===0&&(d=1),i[l]=i[l-1]+d}const o=new Array(i[a]);for(let l=0;l<a;++l){const c=t[l];let d=i[l];if(this.nGramWidths.forEach(h=>{const p=t[l+1]-t[l],g=this.getNumNGrams(p,h);this.createNGrams(e,c,o,d,g,h),d+=g}),this.preserveShort&&d===i[l]){const h=t[l+1]-t[l];if(h===0)continue;const p=h+2*this.padWidth;this.createNGrams(e,c,o,d,1,p)}}return[o,i]}}function MW(n,e,t,r,s,a,i,o){return new tke(t,r,s,a,i,o).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(n,e,t,r){if(!n.length)return;if(e.length===0){for(let a=0;a<n.length;++a)r.push(n.subarray(a,a+1));return}if(e.length===1){const a=e[0];let i=n.indexOf(a);for(;i!==-1;){const o=n.subarray(0,i);(!t||o.length!==0)&&r.push(o),n=n.subarray(i+1),i=n.indexOf(a)}(!t||n.length!==0)&&r.push(n);return}let s=0;for(let a=0;a<n.length+1;a++)if(a===n.length||e.indexOf(n[a])!==-1){const i=n.subarray(s,a);(!t||i.length!==0)&&r.push(i),s=a+1}}function PW(n,e,t){const r=n.length,s=[];let a=0,i=0;const o=new Array(r);for(let p=0;p<r;++p){const g=s.length;nke(n[p],e,t,s);const x=s.length-g;o[p]=x,a+=x,i=Math.max(i,x)}const l=wr("int32",a*2),c=new Array(a),d=[r,i];let h=0;for(let p=0;p<r;++p)for(let g=0;g<o[p];++g)l[h*2]=p,l[h*2+1]=g,c[h]=s[h],++h;return[l,c,d]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(n,e){const t=wr("int32",n.length);for(let r=0;r<n.length;++r)t[r]=gj(n[r]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jW=Dr((n,e)=>n-e),rke=E$((n,e,t,r)=>({real:n-t,imag:e-r})),$$=ns(Up,jW,rke),ske={kernelName:Up,backendName:"cpu",kernelFunc:$$};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zW(n,e){const t=new Array(n.rank);for(let s=0;s<t.length;s++)t[s]=n.shape[s]*e[s];const r=Yt(t,n.dtype);for(let s=0;s<r.values.length;++s){const a=r.indexToLoc(s),i=new Array(n.rank);for(let l=0;l<i.length;l++)i[l]=a[l]%n.shape[l];const o=n.locToIndex(i);r.values[s]=n.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function UW(n,e,t=0,r=n.length-1){for(;r>t;){if(r-t>600){const o=r-t+1,l=e-t+1,c=Math.log(o),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(o-d)/o)*Math.sign(l-o/2),p=Math.max(t,Math.floor(e-l*d/o+h)),g=Math.min(r,Math.floor(e+(o-l)*d/o+h));UW(n,e,p,g)}const s=n[e];let a=t,i=r;for(Al(n,t,e),$0(n[r],s)>0&&Al(n,t,r);a<i;){for(Al(n,a,i),a++,i--;$0(n[a],s)<0;)a=a+1;for(;$0(n[i],s)>0;)i=i-1}$0(n[t],s)===0?Al(n,t,i):(i=i+1,Al(n,i,r)),i<=e&&(t=i+1),e<=i&&(r=i-1)}}function VW(n,e,t,r,s){const a=e[e.length-1],[i,o]=[n.length/a,a],l=fs(t,i*r),c=fs("int32",i*r);for(let h=0;h<i;h++){const p=h*o,g=n.subarray(p,p+o);let x=new Array(g.length);g.forEach((T,N)=>x[N]={value:T,index:N}),r<x.length&&(UW(x,r),x=x.slice(0,r)),s&&x.sort($0);const y=h*r,b=l.subarray(y,y+r),S=c.subarray(y,y+r);for(let T=0;T<r;T++)b[T]=x[T].value,S[T]=x[T].index}const d=e.slice();return d[d.length-1]=r,[Yt(d,t,l),Yt(d,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WW(n,e,t,r){const s=nn(e,t)[0],a=[1,t[0],1];for(let x=0;x<s;x++)a[0]*=t[x];a[1]=t[s];for(let x=s+1;x<t.length;x++)a[2]*=t[x];const i=new Map,o=new Int32Array(t[s]),l=new zr(a,r,n),c=[],d=a[0]===1&&a[2]===1;for(let x=0;x<t[s];x++){let y;if(d)y=n[x].toString();else{const S=[];for(let T=0;T<a[0];T++)for(let N=0;N<a[2];N++)S.push(l.get(T,x,N));y=S.join(",")}const b=i.get(y);if(b!=null)o[x]=b;else{const S=i.size;i.set(y,S),o[x]=S,c.push(x)}}const h=a.slice();h[1]=i.size;const p=new zr(h,r);c.forEach((x,y)=>{for(let b=0;b<a[0];b++)for(let S=0;S<a[2];S++)p.set(l.get(b,x,S),b,y,S)});const g=t.slice();return g[s]=h[1],{outputValues:p.values,outputShape:g,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ake=Object.freeze(Object.defineProperty({__proto__:null,addImpl:JV,bincountImpl:k$,bincountReduceImpl:eW,bitwiseAndImpl:tW,castImpl:ZV,ceilImpl:nW,concatImpl:rW,equalImpl:sW,expImpl:iW,expm1Impl:lW,floorDivImpl:uW,floorImpl:cW,gatherNdImpl:dW,gatherV2Impl:fW,greaterEqualImpl:pW,greaterImpl:hW,lessEqualImpl:gW,lessImpl:mW,linSpaceImpl:xW,logImpl:yW,maxImpl:bW,maximumImpl:vW,minimumImpl:wW,multiplyImpl:_$,negImpl:SW,notEqualImpl:TW,prodImpl:NW,raggedGatherImpl:CW,raggedRangeImpl:EW,raggedTensorToTensorImpl:kW,rangeImpl:_W,rsqrtImpl:IW,scatterImpl:gd,sigmoidImpl:HEe,simpleAbsImpl:QV,sliceImpl:$W,sparseFillEmptyRowsImpl:RW,sparseReshapeImpl:OW,sparseSegmentReductionImpl:A$,sqrtImpl:KEe,squaredDifferenceImpl:DW,staticRegexReplaceImpl:FW,stridedSliceImpl:LW,stringNGramsImpl:MW,stringSplitImpl:PW,stringToHashBucketFastImpl:BW,subImpl:jW,tileImpl:zW,topKImpl:VW,transposeImpl:I$,uniqueImpl:WW},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dI("cpu",()=>new tT,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HW=On(dp,n=>n>=0?n:Math.exp(n)-1),ike={kernelName:dp,backendName:"cpu",kernelFunc:HW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{alpha:a}=r;Tt([s],"leakyRelu");const i=Fe(s.shape),o=t.data.get(s.dataId).values,l=fs("float32",i);for(let c=0;c<o.length;c++)l[c]=o[c]<0?a*o[c]:o[c];return t.makeTensorInfo(s.shape,"float32",l)}const oke={kernelName:bx,backendName:"cpu",kernelFunc:GW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lke=Dr((n,e)=>n<0?e*n:n);function qW(n){const{inputs:e,backend:t}=n,{x:r,alpha:s}=e;Tt([r,s],"prelu");const a=t.data.get(r.dataId).values,i=t.data.get(s.dataId).values,[o,l]=lke(r.shape,s.shape,a,i,"float32");return t.makeTensorInfo(l,"float32",o)}const cke={kernelName:Px,backendName:"cpu",kernelFunc:qW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KW=On(Ap,n=>Math.max(0,n)),uke={kernelName:Ap,backendName:"cpu",kernelFunc:KW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XW=On($p,n=>Math.min(Math.max(0,n),6)),dke={kernelName:$p,backendName:"cpu",kernelFunc:XW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ew(n,e,t,r,s){if(t==="linear")return rl({inputs:{x:e},backend:n});if(t==="relu")return KW({inputs:{x:e},backend:n});if(t==="elu")return HW({inputs:{x:e},backend:n});if(t==="relu6")return XW({inputs:{x:e},backend:n});if(t==="prelu")return qW({inputs:{x:e,alpha:r},backend:n});if(t==="leakyrelu")return GW({inputs:{x:e},backend:n,attrs:{alpha:s}});if(t==="sigmoid")return AW({inputs:{x:e},backend:n});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{shape:a}=r,i=Fe(s.shape),o=tI(a,i),l=Fe(o);Z(i===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),t.incRef(s.dataId);const c=t.data.get(s.dataId);if(c.complexTensorInfos!=null){const d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag;d.shape=o,h.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const fke={kernelName:jx,backendName:"cpu",kernelFunc:ar};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YW(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;Tt([s,a],"matMul");const l=s.shape.length,c=a.shape.length,d=i?s.shape[l-2]:s.shape[l-1],h=o?a.shape[c-1]:a.shape[c-2],p=i?s.shape[l-1]:s.shape[l-2],g=o?a.shape[c-2]:a.shape[c-1],x=s.shape.slice(0,-2),y=a.shape.slice(0,-2),b=Fe(x),S=Fe(y),N=Gt(s.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,g]);Z(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${s.shape} and ${a.shape} and transposeA=${i} and transposeB=${o} must match.`);const C=i?[b,d,p]:[b,p,d],I=o?[S,g,h]:[S,h,g],F=ar({inputs:{x:s},backend:t,attrs:{shape:C}}),D=ar({inputs:{x:a},backend:t,attrs:{shape:I}}),A=i?F.shape[1]:F.shape[2],_=i?F.shape[2]:F.shape[1],k=o?D.shape[1]:D.shape[2],O=Math.max(b,S),P=t.data.get(F.dataId).values,W=t.data.get(D.dataId).values,K=$t(F.shape),q=$t(D.shape),[V,X,Q]=i?[K[0],1,K[1]]:[K[0],K[1],1],[Y,j,J]=o?[1,q[1],q[0]]:[q[1],1,q[0]],M=_*k,z=Yt([O,_,k],F.dtype),G=z.values,U=t.blockSize;for(let se=0;se<O;se++){const pe=se%b,me=se%S;for(let be=0;be<_;be+=U){const ge=Math.min(be+U,_);for(let ke=0;ke<k;ke+=U){const Le=Math.min(ke+U,k);for(let rt=0;rt<A;rt+=U){const Be=Math.min(rt+U,A);for(let Ze=be;Ze<ge;Ze++)for(let He=ke;He<Le;He++){let ne=0;for(let Ae=rt;Ae<Be;Ae++){const Me=P[pe*V+Ze*X+Ae*Q],Ve=W[Ae*Y+He*j+me*J];ne+=Me*Ve}G[se*M+(Ze*k+He)]+=ne}}}}}return t.disposeIntermediateTensorInfo(F),t.disposeIntermediateTensorInfo(D),t.makeTensorInfo(N,z.dtype,z.values)}const hke={kernelName:rx,backendName:"cpu",kernelFunc:YW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:d,leakyreluAlpha:h}=r;let p,g,x;const y=[];p=YW({inputs:{a:s,b:a},attrs:{transposeA:l,transposeB:c},backend:t}),i&&(g=Ph({inputs:{a:p,b:i},backend:t}),y.push(p),p=g),d&&(x=ew(t,p,d,o,h),y.push(p),p=x);for(const S of y)t.disposeIntermediateTensorInfo(S);return p}const mke={kernelName:ug,backendName:"cpu",kernelFunc:pke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gke=On(Zh,n=>Math.acos(n)),xke={kernelName:Zh,backendName:"cpu",kernelFunc:gke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yke=On(Jh,n=>Math.acosh(n)),bke={kernelName:Jh,backendName:"cpu",kernelFunc:yke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(n){const{inputs:e,backend:t}=n,r=e;Tt(e,"addN");const s=r.map(o=>t.data.get(o.dataId).values),a=Yt(r[0].shape,r[0].dtype),i=a.values;for(let o=0;o<r.length;o++){const l=s[o];for(let c=0;c<i.length;c++)i[c]+=l[c]}return t.makeTensorInfo(a.shape,a.dtype,a.values)}const wke={kernelName:Zg,backendName:"cpu",kernelFunc:vke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ske(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r;Tt(s,"all");const o=nn(a,s.shape);let l=o;const c=yr(l,s.shape.length);let d=s;c!=null&&(d=Ta({inputs:{x:s},backend:t,attrs:{perm:c}}),l=Rr(l.length,s.shape.length)),Is("all",l,d.shape.length);const[h,p]=ms(d.shape,l),g=Fe(p),x=Es(Fe(h),d.dtype),y=t.data.get(d.dataId).values;for(let S=0;S<x.length;++S){const T=S*g;let N=y[T];for(let C=0;C<g;++C){const I=y[T+C];N=N&&I}x[S]=N}c!=null&&t.disposeIntermediateTensorInfo(d);const b=t.makeTensorInfo(h,d.dtype,x);if(i){const S=$r(h,o),T=ar({inputs:{x:b},backend:t,attrs:{shape:S}});return t.disposeIntermediateTensorInfo(b),T}return b}const Tke={kernelName:Yw,backendName:"cpu",kernelFunc:Ske};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r;Tt(s,"any");const o=nn(a,s.shape);let l=o;const c=yr(l,s.shape.length);let d=s;c!=null&&(d=Ta({inputs:{x:s},backend:t,attrs:{perm:c}}),l=Rr(l.length,s.shape.length)),Is("any",l,d.shape.length);const[h,p]=ms(d.shape,l),g=Fe(p),x=Es(Fe(h),d.dtype),y=t.data.get(d.dataId).values;for(let S=0;S<x.length;++S){const T=S*g;let N=y[T];for(let C=0;C<g;++C){const I=y[T+C];N=N||I}x[S]=N}c!=null&&t.disposeIntermediateTensorInfo(d);const b=t.makeTensorInfo(h,d.dtype,x);if(i){const S=$r(h,o),T=ar({inputs:{x:b},backend:t,attrs:{shape:S}});return t.disposeIntermediateTensorInfo(b),T}return b}const Cke={kernelName:Qw,backendName:"cpu",kernelFunc:Nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;Tt(s,"argMax");let i=nn(a,s.shape);const o=yr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=Ta({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),i=Rr(i.length,l.shape.length)),i=[i[0]],Is("argMax",i,l.shape.length);const[d,h]=ms(l.shape,i),p=Fe(d),g=Es(p,"int32"),x=Fe(h),y=t.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const S=b*x;let T=y[S],N=0;for(let C=0;C<x;++C){const I=y[S+C];I>T&&(T=I,N=C)}g[b]=N}return c.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(d,"int32",g)}const kke={kernelName:Jg,backendName:"cpu",kernelFunc:Eke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;Tt(s,"argMin");let i=nn(a,s.shape);const o=yr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=Ta({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),i=Rr(i.length,l.shape.length)),i=[i[0]],Is("argMin",i,l.shape.length);const[d,h]=ms(l.shape,i),p=Fe(d),g=Es(p,"int32"),x=Fe(h),y=t.data.get(l.dataId).values;for(let b=0;b<g.length;++b){const S=b*x;let T=y[S],N=0;for(let C=0;C<x;++C){const I=y[S+C];I<T&&(T=I,N=C)}g[b]=N}return c.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(d,"int32",g)}const Ike={kernelName:ex,backendName:"cpu",kernelFunc:_ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ake=On(ep,n=>Math.asin(n)),$ke={kernelName:ep,backendName:"cpu",kernelFunc:Ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rke=On(tp,n=>Math.asinh(n)),Oke={kernelName:tp,backendName:"cpu",kernelFunc:Rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dke=On(np,n=>Math.atan(n)),Fke={kernelName:np,backendName:"cpu",kernelFunc:Dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke=Dr((n,e)=>Math.atan2(n,e)),Mke=ns(sp,Lke),Pke={kernelName:sp,backendName:"cpu",kernelFunc:Mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke=On(rp,n=>Math.atanh(n)),jke={kernelName:rp,backendName:"cpu",kernelFunc:Bke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$(n,e,t,r,s,a){const i=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,h=s.effectiveFilterWidth,p=s.padInfo.top,g=s.padInfo.left,x=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Yt(s.outShape,t),b=y.values,S=s.outShape[1]*s.outShape[2]*s.outShape[3],T=s.outShape[2]*s.outShape[3],N=s.outShape[3];for(let C=0;C<s.batchSize;++C){const I=C*S,F=C*r[0];for(let D=0;D<s.inChannels;++D)for(let A=0;A<s.outHeight;++A){const _=A*i-p,k=Math.max(0,_),O=Math.min(s.inHeight,d+_),P=I+A*T;for(let W=0;W<s.outWidth;++W){const K=W*o-g,q=Math.max(0,K),V=Math.min(s.inWidth,h+K);let X=x,Q=0,Y=0;for(let J=k;J<O;J+=l){const M=F+J*r[1];for(let z=q;z<V;z+=c){const G=M+z*r[2],U=n[G+D];a==="max"&&U>X?X=U:a==="avg"&&(Q+=U,Y++)}if(isNaN(X))break}const j=P+W*N+D;b[j]=a==="avg"?Q/Y:X}}}return y}function QW(n,e,t,r,s=!1,a=!1){const i=Yt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,d=r.dilationWidth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,x=r.padInfo.left,y=Yt(e,t,n);for(let b=0;b<r.batchSize;++b)for(let S=0;S<r.inChannels;++S)for(let T=0;T<r.outHeight;++T){const N=T*o-g;let C=N;for(;C<0;)C+=c;const I=Math.min(r.inHeight,h+N);for(let F=0;F<r.outWidth;++F){const D=F*l-x;let A=D;for(;A<0;)A+=d;const _=Math.min(r.inWidth,p+D);let k=Number.NEGATIVE_INFINITY,O=-1;for(let P=C;P<I;P+=c){const W=P-N;for(let K=A;K<_;K+=d){const q=K-D,V=y.get(b,P,K,S);V>k&&(k=V,s?O=a?((b*r.inHeight+P)*r.inWidth+K)*r.inChannels+S:(P*r.inWidth+K)*r.inChannels+S:O=W*p+q)}}i.set(O,b,T,F,S)}}return i}function ZW(n,e,t,r,s,a){const i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,d=s.dilationHeight,h=s.dilationWidth,p=s.effectiveFilterDepth,g=s.effectiveFilterHeight,x=s.effectiveFilterWidth,y=s.padInfo.front,b=s.padInfo.top,S=s.padInfo.left,T=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,N=Yt(s.outShape,t),C=N.values,I=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],F=s.outShape[2]*s.outShape[3]*s.outShape[4],D=s.outShape[3]*s.outShape[4],A=s.outShape[4];for(let _=0;_<s.batchSize;++_){const k=_*I,O=_*r[0];for(let P=0;P<s.inChannels;++P)for(let W=0;W<s.outDepth;++W){const K=W*i-y;let q=K;for(;q<0;)q+=c;const V=Math.min(s.inDepth,p+K),X=k+W*F;for(let Q=0;Q<s.outHeight;++Q){const Y=Q*o-b;let j=Y;for(;j<0;)j+=d;const J=Math.min(s.inHeight,g+Y),M=X+Q*D;for(let z=0;z<s.outWidth;++z){const G=z*l-S;let U=G;for(;U<0;)U+=h;const se=Math.min(s.inWidth,x+G),pe=M+z*A;let me=T,be=0,ge=0;for(let Le=q;Le<V;Le+=c){const rt=O+Le*r[1];for(let Be=j;Be<J;Be+=d){const Ze=rt+Be*r[2];for(let He=U;He<se;He+=h){const ne=Ze+He*r[3],Ae=n[ne+P];if(a==="max"&&Ae>me?me=Ae:a==="avg"&&(be+=Ae,ge++),isNaN(me))break}if(isNaN(me))break}if(isNaN(me))break}const ke=pe+P;C[ke]=a==="avg"?be/Math.max(ge,1):me}}}}return N}function zke(n,e){const t=Yt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,x=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let b=0;b<e.inChannels;++b)for(let S=0;S<e.outDepth;++S){const T=S*r-p;let N=T;for(;N<0;)N+=i;const C=Math.min(e.inDepth,c+T);for(let I=0;I<e.outHeight;++I){const F=I*s-g;let D=F;for(;D<0;)D+=o;const A=Math.min(e.inHeight,d+F);for(let _=0;_<e.outWidth;++_){const k=_*a-x;let O=k;for(;O<0;)O+=l;const P=Math.min(e.inWidth,h+k);let W=Number.NEGATIVE_INFINITY,K=-1;for(let q=N;q<C;q+=i){const V=q-T;for(let X=D;X<A;X+=o){const Q=X-F;for(let Y=O;Y<P;Y+=l){const j=Y-k,J=n.get(y,q,X,Y,b);J>=W&&(W=J,K=V*d*h+Q*d+j)}}}t.set(K,y,S,I,_,b)}}}return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;Tt(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;Z(_s(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=zi(s.shape,a,i,c,o,l);let h;if(d.filterWidth===1&&d.filterHeight===1&&on(d.inShape,d.outShape))h=rl({inputs:{x:s},backend:t});else{const p=t.data.get(s.dataId).values,g=$t(s.shape),x=R$(p,s.shape,s.dtype,g,d,"avg");h=t.makeTensorInfo(d.outShape,s.dtype,x.values)}return h}const Vke={kernelName:tx,backendName:"cpu",kernelFunc:Uke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r;Tt(s,"avgPool3d");const d=rc(s.shape,a,i,1,o,l,c),h=t.data.get(s.dataId).values,p=ZW(h,s.shape,s.dtype,$t(s.shape),d,"avg");return t.makeTensorInfo(p.shape,"float32",p.values)}const Hke={kernelName:nx,backendName:"cpu",kernelFunc:Wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=r;Tt([s,a],"avgPool3DGrad");const d=rc(a.shape,i,o,1,l,c),h=d.strideDepth,p=d.strideHeight,g=d.strideWidth,x=d.filterDepth,y=d.filterHeight,b=d.filterWidth,S=d.dilationDepth,T=d.dilationHeight,N=d.dilationWidth,C=d.effectiveFilterDepth,I=d.effectiveFilterHeight,F=d.effectiveFilterWidth,D=C-1-d.padInfo.front,A=F-1-d.padInfo.left,_=I-1-d.padInfo.top,k=Yt(a.shape,"float32"),O=1/(x*y*b),P=t.bufferSync(s);for(let W=0;W<d.batchSize;++W)for(let K=0;K<d.inChannels;++K)for(let q=0;q<d.inDepth;++q)for(let V=0;V<d.inHeight;++V)for(let X=0;X<d.inWidth;++X){const Q=q-D,Y=V-_,j=X-A;let J=0;for(let M=0;M<C;M+=S){const z=(Q+M)/h;if(!(z<0||z>=d.outDepth||Math.floor(z)!==z))for(let G=0;G<I;G+=T){const U=(Y+G)/p;if(!(U<0||U>=d.outHeight||Math.floor(U)!==U))for(let se=0;se<F;se+=N){const pe=(j+se)/g;if(pe<0||pe>=d.outWidth||Math.floor(pe)!==pe)continue;const me=P.get(W,z,U,pe,K);J+=me}}}k.set(J*O,W,q,V,X,K)}return t.makeTensorInfo(k.shape,k.dtype,k.values)}const qke={kernelName:Jw,backendName:"cpu",kernelFunc:Gke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kke(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,i=a;Tt([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,d=zi(i.shape,o,l,1,c),h=d.strideHeight,p=d.strideWidth,g=d.filterHeight,x=d.filterWidth,y=d.dilationHeight,b=d.dilationWidth,S=d.effectiveFilterHeight,T=d.effectiveFilterWidth,N=T-1-d.padInfo.left,C=S-1-d.padInfo.top,I=Yt(i.shape,"float32"),F=1/(g*x),D=t.data.get(s.dataId).values,A=Yt(s.shape,"float32",D);for(let _=0;_<d.batchSize;++_)for(let k=0;k<d.inChannels;++k)for(let O=0;O<d.inHeight;++O)for(let P=0;P<d.inWidth;++P){const W=O-C,K=P-N;let q=0;for(let V=0;V<S;V+=y){const X=(W+V)/h;if(!(X<0||X>=d.outHeight||Math.floor(X)!==X))for(let Q=0;Q<T;Q+=b){const Y=(K+Q)/p;if(Y<0||Y>=d.outWidth||Math.floor(Y)!==Y)continue;const j=A.get(_,X,Y,k);q+=j}}I.set(q*F,_,O,P,k)}return t.makeTensorInfo(I.shape,I.dtype,I.values)}const Xke={kernelName:Zw,backendName:"cpu",kernelFunc:Kke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,scale:a,offset:i,mean:o,variance:l}=e;Z(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Tt([s,o,l,a,i],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const d=t.data.get(s.dataId).values,h=t.data.get(o.dataId).values,p=t.data.get(l.dataId).values,g=a?t.data.get(a.dataId).values:new Float32Array([1]),x=i?t.data.get(i.dataId).values:new Float32Array([0]),y=new Float32Array(d.length),b=x.length,S=g.length,T=p.length,N=h.length;let C=0,I=0,F=0,D=0;for(let A=0;A<d.length;++A)y[A]=x[C++]+(d[A]-h[I++])*g[F++]/Math.sqrt(p[D++]+c),C>=b&&(C=0),I>=N&&(I=0),F>=S&&(F=0),D>=T&&(D=0);return t.makeTensorInfo(s.shape,s.dtype,y)}const Qke={kernelName:gx,backendName:"cpu",kernelFunc:Yke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,crops:i}=r;Tt([s],"batchToSpaceND");const o=a.reduce((S,T)=>S*T),l=v1(s.shape,a,o),c=w1(l.length,a.length),d=S1(s.shape,a,o),h=BA(i,a.length),p=jA(d,i,a.length),g=ar({inputs:{x:s},backend:t,attrs:{shape:l}}),x=Ta({inputs:{x:g},backend:t,attrs:{perm:c}}),y=ar({inputs:{x},backend:t,attrs:{shape:d}}),b=zd({inputs:{x:y},backend:t,attrs:{begin:h,size:p}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(y),b}const Jke={kernelName:sx,backendName:"cpu",kernelFunc:Zke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:i}=r,o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values,c=k$(o,l,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,c)}const t_e={kernelName:e2,backendName:"cpu",kernelFunc:e_e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(n){const{inputs:e,backend:t}=n,{s0:r,s1:s}=e,a=t.data.get(r.dataId).values,i=t.data.get(s.dataId).values,o=Gt(Array.from(a),Array.from(i));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const r_e={kernelName:t2,backendName:"cpu",kernelFunc:n_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s_e=On(op,(n,e)=>{const t=e;return n>t.clipValueMax?t.clipValueMax:n<t.clipValueMin?t.clipValueMin:n}),a_e={kernelName:op,backendName:"cpu",kernelFunc:s_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i_e=n=>{const{x:e}=n.inputs,t=n.backend,r=new Float32Array(Fe(e.shape)),s=t.data.get(e.dataId),a=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,o=t.data.get(a.dataId).values,l=t.data.get(i.dataId).values;for(let c=0;c<o.length;c++){const d=o[c],h=l[c];r[c]=Math.hypot(d,h)}return t.makeOutput(r,e.shape,"float32")},o_e={kernelName:ix,backendName:"cpu",kernelFunc:i_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bh(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.data.get(r.dataId).complexTensorInfos.imag,a=t.data.get(s.dataId).values;return t.makeTensorInfo(s.shape,s.dtype,a)}const l_e={kernelName:w2,backendName:"cpu",kernelFunc:Bh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jh(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r,a=nn(s,e[0].shape)[0],i=e.map(y=>y.shape);LA(i,a);let o=qo(e.map(y=>y.shape),a);if(Fe(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(y=>Fe(y.shape)>0);if(l.length===1)return rl({inputs:{x:l[0]},backend:t});if(l[0].dtype==="complex64"){const y=l.map(C=>jd({inputs:{input:C},backend:t})),b=l.map(C=>Bh({inputs:{input:C},backend:t})),S=jh({inputs:y,backend:t,attrs:{axis:a}}),T=jh({inputs:b,backend:t,attrs:{axis:a}}),N=Ra({inputs:{real:S,imag:T},backend:t});return y.forEach(C=>t.disposeIntermediateTensorInfo(C)),b.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(T),N}const c=l.map(y=>{const S=[-1,Fe(y.shape.slice(a))];return ar({inputs:{x:y},backend:t,attrs:{shape:S}})}),d=c.map(y=>({vals:t.data.get(y.dataId).values,shape:y.shape}));o=qo(c.map(y=>y.shape),1);const h=c[0].shape[0]===1,p=rW(d,o,e[0].dtype,h),g=qo(l.map(y=>y.shape),a),x=t.makeTensorInfo(g,e[0].dtype,p);return c.forEach(y=>t.disposeIntermediateTensorInfo(y)),x}const c_e={kernelName:ox,backendName:"cpu",kernelFunc:jh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JW(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:d}=r;Tt([s,a],"conv2d");const h=sc(l),p=ps(s.shape,a.shape,i,c,o,d,!1,h),g=p.filterHeight,x=p.filterWidth,y=p.dilationHeight,b=p.dilationWidth,S=p.padInfo.left,T=p.padInfo.top,N=p.dataFormat==="channelsLast",C=new zr(p.outShape,s.dtype),I=$t(s.shape),F=$t(a.shape),D=I[0],A=N?I[1]:I[2],_=N?I[2]:1,k=N?1:I[1],O=C.strides[0],P=N?C.strides[1]:C.strides[2],W=N?C.strides[2]:1,K=N?1:C.strides[1],q=t.data.get(s.dataId).values,V=t.data.get(a.dataId).values,X=C.values;for(let Q=0;Q<p.batchSize;++Q){const Y=Q*D,j=Q*O;for(let J=0;J<p.outHeight;++J){const M=j+J*P,z=J*p.strideHeight-T;for(let G=0;G<g;++G){const U=z+G*y;if(U<0||U>=p.inHeight)continue;const se=G*F[0],pe=Y+U*A;for(let me=0;me<p.outWidth;++me){const be=M+me*W,ge=me*p.strideWidth-S;for(let ke=0;ke<x;++ke){const Le=ge+ke*b;if(Le<0||Le>=p.inWidth)continue;const rt=se+ke*F[1],Be=pe+Le*_;let Ze=rt;for(let He=0;He<p.inChannels;++He){const ne=q[Be+He*k];for(let Ae=0;Ae<p.outChannels;++Ae)X[be+Ae*K]+=ne*V[Ze+Ae];Ze+=p.outChannels}}}}}}return t.makeTensorInfo(C.shape,C.dtype,X)}const u_e={kernelName:lx,backendName:"cpu",kernelFunc:JW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:d}=r;Tt([s,a],"conv2dBackpropFilter");const h=sc(l),p=ps(s.shape,d,i,1,o,c,!1,h),{strideHeight:g,strideWidth:x,filterHeight:y,filterWidth:b}=p,S=p.dataFormat==="channelsLast",T=new zr(p.filterShape,"float32"),N=p.padInfo.left,C=p.padInfo.top,I=t.data.get(s.dataId).values,F=t.data.get(a.dataId).values,D=new zr(s.shape,s.dtype,I),A=new zr(a.shape,a.dtype,F);for(let _=0;_<y;++_){const k=Math.max(0,Math.ceil((C-_)/g)),O=Math.min(p.outHeight,(p.inHeight+C-_)/g);for(let P=0;P<b;++P){const W=Math.max(0,Math.ceil((N-P)/x)),K=Math.min(p.outWidth,(p.inWidth+N-P)/x);for(let q=0;q<p.inChannels;++q)for(let V=0;V<p.outChannels;++V){let X=0;for(let Q=0;Q<p.batchSize;++Q)for(let Y=k;Y<O;++Y){const j=_+Y*g-C;for(let J=W;J<K;++J){const M=P+J*x-N;S?X+=D.get(Q,j,M,q)*A.get(Q,Y,J,V):X+=D.get(Q,q,j,M)*A.get(Q,V,Y,J)}}T.set(X,_,P,q,V)}}}return t.makeTensorInfo(T.shape,T.dtype,T.values)}const f_e={kernelName:r2,backendName:"cpu",kernelFunc:d_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:d}=r;Tt([s,a],"conv2dBackpropInput");const h=$t(a.shape),p=$t(s.shape);let g=sc(c);const x=ps(i,a.shape,o,1,l,d,!1,g),y=new zr(x.inShape,"float32"),b=y.values,S=t.data.get(s.dataId).values,T=t.data.get(a.dataId).values,[N,C,I]=h,{batchSize:F,filterHeight:D,filterWidth:A,inChannels:_,inHeight:k,inWidth:O,outChannels:P,outHeight:W,outWidth:K,strideHeight:q,strideWidth:V}=x;g=x.dataFormat;const X=D-1-x.padInfo.top,Q=A-1-x.padInfo.left,Y=g==="channelsLast",j=y.strides[0],J=Y?y.strides[1]:y.strides[2],M=Y?y.strides[2]:1,z=Y?1:y.strides[1],G=p[0],U=Y?p[1]:p[2],se=Y?p[2]:1,pe=Y?1:p[1];for(let me=0;me<F;++me)for(let be=0;be<_;++be)for(let ge=0;ge<k;++ge){const ke=ge-X,Le=Math.max(0,Math.ceil(ke/q)),rt=Math.min(W,(D+ke)/q);for(let Be=0;Be<O;++Be){const Ze=Be-Q,He=Math.max(0,Math.ceil(Ze/V)),ne=Math.min(K,(A+Ze)/V);let Ae=0;for(let Ve=Le;Ve<rt;++Ve){const ot=Ve*q-ke;for(let st=He;st<ne;++st){const Ge=st*V-Ze,at=G*me+U*Ve+se*st,Qt=N*(D-1-ot)+C*(A-1-Ge)+I*be;for(let Vt=0;Vt<P;++Vt){const Mt=S[at+pe*Vt],Ut=T[Qt+Vt];Ae+=Mt*Ut}}}const Me=j*me+J*ge+M*Be+z*be;b[Me]=Ae}}return t.makeTensorInfo(y.shape,y.dtype,y.values)}const p_e={kernelName:cx,backendName:"cpu",kernelFunc:h_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r;Tt([s,a],"conv3d");const c=wu(s.shape,a.shape,i,l,o),{filterDepth:d,filterHeight:h,filterWidth:p,dilationDepth:g,dilationHeight:x,dilationWidth:y,padInfo:b}=c,S=b.front,T=b.left,N=b.top,C=new zr(c.outShape,s.dtype),I=t.data.get(s.dataId).values,F=t.data.get(a.dataId).values,D=C.values,A=$t(s.shape),_=$t(a.shape);for(let k=0;k<c.batchSize;++k){const O=k*A[0],P=k*C.strides[0];for(let W=0;W<c.outDepth;++W){const K=P+W*C.strides[1],q=W*c.strideDepth-S;for(let V=0;V<d;++V){const X=q+V*g;if(X<0||X>=c.inDepth)continue;const Q=V*_[0],Y=O+X*A[1];for(let j=0;j<c.outHeight;++j){const J=K+j*C.strides[2],M=j*c.strideHeight-N;for(let z=0;z<h;++z){const G=M+z*x;if(G<0||G>=c.inHeight)continue;const U=Q+z*_[1],se=Y+G*A[2];for(let pe=0;pe<c.outWidth;++pe){const me=J+pe*c.outChannels,be=pe*c.strideWidth-T;for(let ge=0;ge<p;++ge){const ke=be+ge*y;if(ke<0||ke>=c.inWidth)continue;const Le=U+ge*_[2],rt=se+ke*c.inChannels;let Be=Le;for(let Ze=0;Ze<c.inChannels;++Ze){const He=I[rt+Ze];for(let ne=0;ne<c.outChannels;++ne)D[me+ne]+=He*F[Be+ne];Be+=c.outChannels}}}}}}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const g_e={kernelName:ux,backendName:"cpu",kernelFunc:m_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r;Tt([s,a],"conv3dBackpropFilterV2");const c=$t(s.shape),d=$t(a.shape),h=wu(s.shape,l,i,1,o),p=h.strideDepth,g=h.strideHeight,x=h.strideWidth,y=h.filterDepth,b=h.filterHeight,S=h.filterWidth,T=new zr(h.filterShape,"float32"),N=T.values,[C,I,F,D]=T.strides,A=t.data.get(a.dataId).values,[_,k,O,P]=d,W=t.data.get(s.dataId).values,[K,q,V,X]=c,Q=h.padInfo.front,Y=h.padInfo.left,j=h.padInfo.top;for(let J=0;J<y;++J){const M=Math.max(0,Math.ceil((Q-J)/p)),z=Math.min(h.outDepth,(h.inDepth+Q-J)/p),G=J*C;for(let U=0;U<b;++U){const se=Math.max(0,Math.ceil((j-U)/g)),pe=Math.min(h.outHeight,(h.inHeight+j-U)/g),me=U*I+G;for(let be=0;be<S;++be){const ge=Math.max(0,Math.ceil((Y-be)/x)),ke=Math.min(h.outWidth,(h.inWidth+Y-be)/x),Le=be*F+me;for(let rt=0;rt<h.inChannels;++rt){const Be=rt*D+Le;for(let Ze=0;Ze<h.outChannels;++Ze){let He=0;for(let ne=0;ne<h.batchSize;++ne){const Ae=ne*K,Me=ne*_;for(let Ve=M;Ve<z;++Ve){const st=(J+Ve*p-Q)*q+Ae,Ge=Ve*k+Me;for(let at=se;at<pe;++at){const Vt=(U+at*g-j)*V+st,Mt=at*O+Ge;for(let Ut=ge;Ut<ke;++Ut){const kt=(be+Ut*x-Y)*X+Vt,lt=Ut*P+Mt;He+=W[kt+rt]*A[lt+Ze]}}}}N[Be+Ze]=He}}}}}return t.makeTensorInfo(T.shape,T.dtype,T.values)}const y_e={kernelName:s2,backendName:"cpu",kernelFunc:x_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{pad:i,strides:o,inputShape:l}=r;Tt([s],"conv3dBackpropInputV2");const c=$t(s.shape),d=$t(a.shape),h=wu(l,a.shape,o,1,i),p=new zr(h.inShape,"float32"),g=p.values,[x,y,b,S]=p.strides,T=t.data.get(s.dataId).values,[N,C,I,F]=c,D=t.data.get(a.dataId).values,[A,_,k,O]=d,{batchSize:P,filterDepth:W,filterHeight:K,filterWidth:q,inChannels:V,inDepth:X,inHeight:Q,inWidth:Y,outChannels:j,outDepth:J,outHeight:M,outWidth:z,strideDepth:G,strideHeight:U,strideWidth:se}=h,pe=W-1-h.padInfo.front,me=K-1-h.padInfo.top,be=q-1-h.padInfo.left;for(let ge=0;ge<P;++ge)for(let ke=0;ke<V;++ke)for(let Le=0;Le<X;++Le){const rt=Le-pe,Be=Math.max(0,Math.ceil(rt/G)),Ze=Math.min(J,(W+rt)/G);for(let He=0;He<Q;++He){const ne=He-me,Ae=Math.max(0,Math.ceil(ne/U)),Me=Math.min(M,(K+ne)/U);for(let Ve=0;Ve<Y;++Ve){const ot=Ve-be,st=Math.max(0,Math.ceil(ot/se)),Ge=Math.min(z,(q+ot)/se);let at=0;for(let Qt=Be;Qt<Ze;++Qt){const Vt=Qt*G-rt;for(let Mt=Ae;Mt<Me;++Mt){const Ut=Mt*U-ne;for(let we=st;we<Ge;++we){const kt=we*se-ot,lt=N*ge+C*Qt+I*Mt+F*we,Xe=A*(W-1-Vt)+_*(K-1-Ut)+k*(q-1-kt)+O*ke;for(let pt=0;pt<j;++pt){const Xt=T[lt+pt],_t=D[Xe+pt];at+=Xt*_t}}}}g[x*ge+y*Le+b*He+S*Ve+ke]=at}}}return t.makeTensorInfo(p.shape,p.dtype,p.values)}const v_e={kernelName:a2,backendName:"cpu",kernelFunc:b_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w_e=On(lp,n=>Math.cos(n)),S_e={kernelName:lp,backendName:"cpu",kernelFunc:w_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T_e=On(cp,n=>Math.cosh(n)),N_e={kernelName:cp,backendName:"cpu",kernelFunc:T_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(n){const{inputs:e,backend:t,attrs:r}=n,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[d,h,p,g]=s.shape,x=a.shape[0],[y,b]=o,S=Yt([x,y,b,g],"float32"),T=t.data.get(a.dataId).values,N=t.data.get(i.dataId).values,C=t.data.get(s.dataId).values,I=$t(s.shape),F=$t(S.shape);for(let D=0;D<x;D++){const A=D*4,_=T[A],k=T[A+1],O=T[A+2],P=T[A+3],W=N[D];if(W>=d)continue;const K=y>1?(O-_)*(h-1)/(y-1):0,q=b>1?(P-k)*(p-1)/(b-1):0;for(let V=0;V<y;V++){const X=y>1?_*(h-1)+V*K:.5*(_+O)*(h-1);if(X<0||X>h-1){for(let Q=0;Q<b;Q++)for(let Y=0;Y<g;Y++){const j=Y+Q*F[2]+V*F[1]+D*F[0];S.values[j]=c}continue}if(l==="bilinear"){const Q=Math.floor(X),Y=Math.ceil(X),j=X-Q;for(let J=0;J<b;J++){const M=b>1?k*(p-1)+J*q:.5*(k+P)*(p-1);if(M<0||M>p-1){for(let se=0;se<g;se++){const pe=se+J*F[2]+V*F[1]+D*F[0];S.values[pe]=c}continue}const z=Math.floor(M),G=Math.ceil(M),U=M-z;for(let se=0;se<g;se++){let pe=se+z*I[2]+Q*I[1]+W*I[0];const me=C[pe];pe=se+G*I[2]+Q*I[1]+W*I[0];const be=C[pe];pe=se+z*I[2]+Y*I[1]+W*I[0];const ge=C[pe];pe=se+G*I[2]+Y*I[1]+W*I[0];const ke=C[pe],Le=me+(be-me)*U,rt=ge+(ke-ge)*U;pe=se+J*F[2]+V*F[1]+D*F[0],S.values[pe]=Le+(rt-Le)*j}}}else for(let Q=0;Q<b;++Q){const Y=b>1?k*(p-1)+Q*q:.5*(k+P)*(p-1);if(Y<0||Y>p-1){for(let M=0;M<g;M++){const z=M+Q*F[2]+V*F[1]+D*F[0];S.values[z]=c}continue}const j=Math.round(Y),J=Math.round(X);for(let M=0;M<g;M++){const z=M+j*I[2]+J*I[1]+W*I[0],G=M+Q*F[2]+V*F[1]+D*F[0];S.values[G]=C[z]}}}}return t.makeTensorInfo(S.shape,S.dtype,S.values)}const E_e={kernelName:o2,backendName:"cpu",kernelFunc:C_e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;Tt(s,"cumprod");const l=yr([a],s.shape.length);let c=s;l!=null&&(c=Ta({inputs:{x:s},backend:t,attrs:{perm:l}}));const d=Rr(1,s.shape.length)[0];if(d!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${d}`);const h=ya(c.dtype,"int32"),p=Xw(Fe(c.shape),h),g=t.data.get(c.dataId).values,x=c.shape[c.shape.length-1],y=o?(S,T)=>S+x-T-1:(S,T)=>S+T;for(let S=0;S<g.length;S+=x)for(let T=0;T<x;T++){const N=y(S,T);if(T===0)p[N]=i?1:g[N];else{const C=y(S,T-1);p[N]=i?g[C]*p[C]:g[N]*p[C]}}const b=t.makeTensorInfo(c.shape,h,p);if(l!=null){const S=Su(l),T=Ta({inputs:{x:b},backend:t,attrs:{perm:S}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(c),T}return b}const __e={kernelName:i2,backendName:"cpu",kernelFunc:k_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;Tt(s,"cumsum");const l=yr([a],s.shape.length);let c=s;l!=null&&(c=Ta({inputs:{x:s},backend:t,attrs:{perm:l}}));const d=Rr(1,s.shape.length)[0];if(d!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${d}`);const h=ya(c.dtype,"int32"),p=Es(Fe(c.shape),h),g=t.data.get(c.dataId).values,x=c.shape[c.shape.length-1],y=o?(S,T)=>S+x-T-1:(S,T)=>S+T;for(let S=0;S<g.length;S+=x)for(let T=0;T<x;T++){const N=y(S,T);if(T===0)p[N]=i?0:g[N];else{const C=y(S,T-1);p[N]=i?g[C]+p[C]:g[N]+p[C]}}const b=t.makeTensorInfo(c.shape,h,p);if(l!=null){const S=Su(l),T=Ta({inputs:{x:b},backend:t,attrs:{perm:S}});return t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(c),T}return b}const A_e={kernelName:dx,backendName:"cpu",kernelFunc:I_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r;if(s.shape.length===1){const l=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,d=k$(l,c,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,d)}else if(s.shape.length===2){const l=t.bufferSync(s),c=t.bufferSync(a),d=eW(l,c,i,o);return t.makeTensorInfo(d.shape,a.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const R_e={kernelName:l2,backendName:"cpu",kernelFunc:$_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockSize:a,dataFormat:i}=r;Z(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const o=s.shape[0],l=s.shape[1],c=s.shape[2],d=s.shape[3],h=l*a,p=c*a,g=d/(a*a),x=t.data.get(s.dataId).values,y=new Float32Array(o*h*p*g);let b=0;for(let S=0;S<o;++S)for(let T=0;T<h;++T){const N=Math.floor(T/a),C=T%a;for(let I=0;I<p;++I){const F=Math.floor(I/a),D=I%a,A=(C*a+D)*g;for(let _=0;_<g;++_){const O=_+A+d*(F+c*(N+l*S));y[b++]=x[O]}}}return t.makeTensorInfo([o,h,p,g],s.dtype,y)}const D_e={kernelName:c2,backendName:"cpu",kernelFunc:O_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=r;Tt([s,a],"depthwiseConv2DNative");const d=$t(s.shape),h=$t(a.shape);let p=l;p==null&&(p=[1,1]),Z(_s(i,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${p}'`);const g=ps(s.shape,a.shape,i,p,o,c,!0),{filterHeight:x,filterWidth:y,dilationHeight:b,dilationWidth:S,padInfo:T}=g,N=T.left,C=T.top,I=g.outChannels/g.inChannels,F=new zr(g.outShape,s.dtype),D=t.data.get(s.dataId).values,A=t.data.get(a.dataId).values,_=F.values;for(let k=0;k<g.batchSize;++k){const O=k*d[0],P=k*F.strides[0];for(let W=0;W<g.outHeight;++W){const K=P+W*F.strides[1],q=W*g.strideHeight-C;for(let V=0;V<x;++V){const X=q+V*b;if(X<0||X>=g.inHeight)continue;const Q=V*h[0],Y=O+X*d[1];for(let j=0;j<g.outWidth;++j){const J=K+j*F.strides[2],M=j*g.strideWidth-N;for(let z=0;z<y;++z){const G=M+z*S;if(G<0||G>=g.inWidth)continue;const U=Q+z*h[1],se=Y+G*g.inChannels;let pe=J,me=U;for(let be=0;be<g.inChannels;++be){const ge=D[se+be];for(let ke=0;ke<I;++ke)_[pe+ke]+=ge*A[me+ke];pe+=I,me+=I}}}}}}return t.makeTensorInfo(F.shape,F.dtype,F.values)}const F_e={kernelName:fx,backendName:"cpu",kernelFunc:e7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L_e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:d}=r;Tt([s,a],"depthwiseConv2dNativeBackpropFilter");const h=ps(s.shape,d,i,o,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:x,filterWidth:y}=h,b=new zr(h.filterShape,"float32"),S=h.padInfo.left,T=h.padInfo.top,N=h.outChannels/h.inChannels,C=t.data.get(s.dataId).values,I=new zr(s.shape,s.dtype,C),F=t.data.get(a.dataId).values,D=new zr(a.shape,a.dtype,F);for(let A=0;A<x;++A){const _=Math.max(0,Math.ceil((T-A)/p)),k=Math.min(h.outHeight,(h.inHeight+T-A)/p);for(let O=0;O<y;++O){const P=Math.max(0,Math.ceil((S-O)/g)),W=Math.min(h.outWidth,(h.inWidth+S-O)/g);for(let K=0;K<h.outChannels;++K){const q=Math.trunc(K/N),V=K%N;let X=0;for(let Q=0;Q<h.batchSize;++Q)for(let Y=_;Y<k;++Y){const j=A+Y*p-T;for(let J=P;J<W;++J){const M=O+J*g-S;X+=I.get(Q,j,M,q)*D.get(Q,Y,J,K)}}b.set(X,A,O,q,V)}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}const M_e={kernelName:u2,backendName:"cpu",kernelFunc:L_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:d}=r;Tt([s,a],"depthwiseConv2DNativeBackpropInput");const h=$t(s.shape),p=$t(a.shape),g=ps(d,a.shape,i,o,l,c,!0),x=new zr(g.inShape,"float32"),y=x.values,[b,S,T]=x.strides,N=t.data.get(s.dataId).values,[C,I,F]=h,D=t.data.get(a.dataId).values,[A,_,k]=p,{batchSize:O,filterHeight:P,filterWidth:W,inChannels:K,inHeight:q,inWidth:V,outChannels:X,outHeight:Q,outWidth:Y,strideHeight:j,strideWidth:J}=g,M=P-1-g.padInfo.top,z=W-1-g.padInfo.left,G=X/K;for(let U=0;U<O;++U)for(let se=0;se<K;++se)for(let pe=0;pe<q;++pe){const me=pe-M,be=Math.max(0,Math.ceil(me/j)),ge=Math.min(Q,(P+me)/j);for(let ke=0;ke<V;++ke){const Le=ke-z,rt=Math.max(0,Math.ceil(Le/J)),Be=Math.min(Y,(W+Le)/J);let Ze=0;for(let He=be;He<ge;++He){const ne=He*j-me;for(let Ae=rt;Ae<Be;++Ae){const Me=Ae*J-Le,Ve=C*U+I*He+F*Ae,ot=A*(P-1-ne)+_*(W-1-Me)+k*se;for(let st=0;st<G;++st){const Ge=se*G+st,at=N[Ve+Ge],Qt=D[ot+st];Ze+=at*Qt}}}y[b*U+S*pe+T*ke+se]=Ze}}return t.makeTensorInfo(x.shape,x.dtype,x.values)}const B_e={kernelName:d2,backendName:"cpu",kernelFunc:P_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_e(n){const{inputs:e,backend:t}=n,{x:r}=e,s=Fe(r.shape),a=t.data.get(r.dataId).values,i=Yt([s,s],r.dtype),o=i.values;for(let c=0;c<a.length;c++)o[c*s+c]=a[c];const l=[...r.shape,...r.shape];return t.makeTensorInfo(l,i.dtype,i.values)}const z_e={kernelName:f2,backendName:"cpu",kernelFunc:j_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_e={kernelName:hx,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s}=n,{strides:a,pad:i,dilations:o}=t,l=e,c=l.data.get(r.dataId).values,d=r.shape.length,h=l.data.get(s.dataId).values,p=s.shape.length,{batchSize:g,inHeight:x,inWidth:y,inChannels:b,outHeight:S,outWidth:T,padInfo:N,strideHeight:C,strideWidth:I,filterHeight:F,filterWidth:D,dilationHeight:A,dilationWidth:_,outShape:k}=n1(r.shape,s.shape,a,i,"NHWC",o),O=Fe(k),P=k.length,W=wr(r.dtype,O);for(let q=0;q<g;++q)for(let V=0;V<S;++V){const X=V*C-N.top;for(let Q=0;Q<T;++Q){const Y=Q*I-N.left;for(let j=0;j<b;++j){let J=Number.MIN_SAFE_INTEGER;for(let z=0;z<F;++z){const G=X+z*A;if(G>=0&&G<x)for(let U=0;U<D;++U){const se=Y+U*_;if(se>=0&&se<y){const pe=co([q,G,se,j],d,$t(r.shape)),me=co([z,U,j],p,$t(s.shape)),be=c[pe]+h[me];be>J&&(J=be)}}}const M=co([q,V,Q,j],P,$t(k));W[M]=J}}}return{dataId:l.write(bu(W,r.dtype),k,r.dtype),shape:k,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V_e={kernelName:Fv,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s,dy:a}=n,{strides:i,pad:o,dilations:l}=t,c=e,d=ii(r.shape,c.data.get(r.dataId).values),h=ii(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:g,inWidth:x,inChannels:y,outHeight:b,outWidth:S,padInfo:T,strideHeight:N,strideWidth:C,filterHeight:I,filterWidth:F,dilationHeight:D,dilationWidth:A,outShape:_}=n1(r.shape,s.shape,i,o,"NHWC",l);Z(a.rank===_.length,()=>`Error in ${Fv}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const k=ii(_,c.data.get(a.dataId).values),O=rI(s.shape,s.dtype);for(let W=0;W<p;++W)for(let K=0;K<b;++K){const q=K*N-T.top;for(let V=0;V<S;++V){const X=V*C-T.left;for(let Q=0;Q<y;++Q){let Y=Number.MIN_SAFE_INTEGER,j=0,J=0;for(let M=0;M<I;++M){const z=q+M*D;if(z>=0&&z<g)for(let G=0;G<F;++G){const U=X+G*A;if(U>=0&&U<x){const se=d[W][z][U][Q]+h[M][G][Q];se>Y&&(Y=se,j=M,J=G)}}}O[j][J][Q]+=k[W][K][V][Q]}}}return{dataId:c.write(bu(O,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_e={kernelName:Dv,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s,dy:a}=n,{strides:i,pad:o,dilations:l}=t,c=e,d=ii(r.shape,c.data.get(r.dataId).values),h=ii(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:g,inWidth:x,inChannels:y,outHeight:b,outWidth:S,padInfo:T,strideHeight:N,strideWidth:C,filterHeight:I,filterWidth:F,dilationHeight:D,dilationWidth:A,outShape:_}=n1(r.shape,s.shape,i,o,"NHWC",l);Z(a.rank===_.length,()=>`Error in ${Dv}, dy must have the same rank as output ${_.length}, but got ${a.rank}`);const k=ii(_,c.data.get(a.dataId).values),O=rI(r.shape,r.dtype);for(let W=0;W<p;++W)for(let K=0;K<b;++K){const q=K*N-T.top;for(let V=0;V<S;++V){const X=V*C-T.left;for(let Q=0;Q<y;++Q){let Y=Number.MIN_SAFE_INTEGER,j=q<0?0:q,J=X<0?0:X;for(let M=0;M<I;++M){const z=q+M*D;if(z>=0&&z<g)for(let G=0;G<F;++G){const U=X+G*A;if(U>=0&&U<x){const se=d[W][z][U][Q]+h[M][G][Q];se>Y&&(Y=se,j=z,J=U)}}}O[W][j][J][Q]+=k[W][K][V][Q]}}}return{dataId:c.write(bu(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(n){const{inputs:e,backend:t,attrs:r}=n,{image:s}=e,{canvas:a,options:i}=r,{contextOptions:o,imageOptions:l}=i||{},c=(l==null?void 0:l.alpha)||1,d=(o==null?void 0:o.contextType)||"2d";if(d!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const h=a.getContext(d,(o==null?void 0:o.contextAttributes)||{});if(h==null)throw new Error(`Could not get the context with ${d} type.`);const[p,g]=s.shape.slice(0,2),x=s.shape.length===2?1:s.shape[2],y=t.data.get(s.dataId).values,b=s.dtype==="float32"?255:1,S=new Uint8ClampedArray(g*p*4);for(let N=0;N<p*g;++N){const C=[0,0,0,255*c];for(let F=0;F<x;F++){const D=y[N*x+F];if(s.dtype==="float32"){if(D<0||D>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${D}.`)}else if(s.dtype==="int32"&&(D<0||D>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${D}.`);x===1?(C[0]=D*b,C[1]=D*b,C[2]=D*b):C[F]=D*b}const I=N*4;S[I+0]=Math.round(C[0]),S[I+1]=Math.round(C[1]),S[I+2]=Math.round(C[2]),S[I+3]=Math.round(C[3])}a.width=g,a.height=p;const T=new ImageData(S,g,p);return h.putImageData(T,0,0),s}const G_e={kernelName:h2,backendName:"cpu",kernelFunc:H_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r;Tt(s,"sum");let o;s.dtype==="bool"?o=hu({inputs:{x:s},backend:t,attrs:{dtype:"int32"}}):o=rl({inputs:{x:s},backend:t});const l=o.shape.length,c=nn(a,o.shape),d=yr(c,l);let h=c,p=o;d!=null&&(p=Ta({inputs:{x:o},backend:t,attrs:{perm:d}}),h=Rr(h.length,l)),Is("sum",h,p.shape.length);const[g,x]=ms(p.shape,h),y=ya(p.dtype,"int32");let b=Zv(t,g,y);const S=Fe(x),T=t.data.get(b.dataId).values,N=t.data.get(p.dataId).values;for(let C=0;C<T.length;++C){const I=C*S;let F=0;for(let D=0;D<S;++D)F+=N[I+D];T[C]=F}if(i){const C=$r(b.shape,c),I=b;b=ar({inputs:{x:b},backend:t,attrs:{shape:C}}),t.disposeIntermediateTensorInfo(I)}return t.disposeIntermediateTensorInfo(o),d!=null&&t.disposeIntermediateTensorInfo(p),b}const q_e={kernelName:Gx,backendName:"cpu",kernelFunc:$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K_e(n){const{inputs:e,backend:t,attrs:r}=n,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=KA(s,a.length);YA(i.length,l,a);const{path:c,steps:d}=QA(o,l),h=d.length;let p=null,g=i.length;const x=[];for(let y=0;y<h;++y){for(const b of d[y]){const{permutationIndices:S,expandDims:T}=XA(g,l[b]);let N;ZA(S)?N=a[b]:(N=Ta({inputs:{x:a[b]},backend:t,attrs:{perm:S}}),x.push(N));const C=N.shape.slice();for(let I=0;I<T.length;++I)C.splice(T[I],0,1);on(N.shape,C)||(N=ar({inputs:{x:N},backend:t,attrs:{shape:C}}),x.push(N)),p===null?p=N:(p=nT({inputs:{a:N,b:p},backend:t}),x.push(p))}y<h-1&&(c[y]>=0&&(p=$1({inputs:{x:p},backend:t,attrs:{axis:c[y]-(i.length-g),keepDims:!1}}),x.push(p)),g--)}for(const y of x)y!==p&&t.disposeIntermediateTensorInfo(y);return p}const X_e={kernelName:p2,backendName:"cpu",kernelFunc:K_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(n){const{inputs:e,backend:t}=n,{dy:r,y:s}=e;Tt([r,s],"eluGrad");const a=new Float32Array(Fe(s.shape)),i=t.data.get(s.dataId).values,o=t.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?a[l]=o[l]:a[l]=o[l]*(c+1)}return t.makeTensorInfo(s.shape,"float32",a)}const Q_e={kernelName:m2,backendName:"cpu",kernelFunc:Y_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_e=zA,J_e=UA,eIe=VA,tIe=WA,nIe=HA,rIe=GA,sIe=On(fp,n=>{const e=Math.sign(n),t=Math.abs(n),r=1/(1+Z_e*t);return e*(1-((((rIe*r+nIe)*r+tIe)*r+eIe)*r+J_e)*r*Math.exp(-t*t))}),aIe={kernelName:fp,backendName:"cpu",kernelFunc:sIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tw(n){const{inputs:e,backend:t,attrs:r}=n,{input:s}=e,{dim:a}=r,i=s.shape.length,o=s.shape.slice();let l=a;return a<0&&(Z(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+a+1),o.splice(l,0,1),ar({inputs:{x:s},backend:t,attrs:{shape:o}})}const iIe={kernelName:mx,backendName:"cpu",kernelFunc:tw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe=Dr((n,e)=>n/e),O$=ns(up,oIe),Dk={kernelName:up,backendName:"cpu",kernelFunc:O$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7(n,e,t){const r=n.shape,s=r[0],a=r[1],i=t.data.get(n.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[s,a],d=Fe(c),h=fs("float32",d),p=fs("float32",d);for(let b=0;b<s;b++){const S=zd({inputs:{x:o},backend:t,attrs:{begin:[b,0],size:[1,a]}}),T=zd({inputs:{x:l},backend:t,attrs:{begin:[b,0],size:[1,a]}}),N=Ra({inputs:{real:S,imag:T},backend:t}),{real:C,imag:I}=lIe(N,e,t),F=Yl(C,I);for(let D=0;D<a;D++){const A=qA(F,D);h[b*a+D]=A.real,p[b*a+D]=A.imag}t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(T),t.disposeIntermediateTensorInfo(N)}const g=t.makeTensorInfo(c,"float32",h),x=t.makeTensorInfo(c,"float32",p),y=Ra({inputs:{real:g,imag:x},backend:t});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),y}function lIe(n,e,t){const r=Fe(n.shape),s=t.data.get(n.dataId),a=t.data.get(s.complexTensorInfos.real.dataId).values,i=t.data.get(s.complexTensorInfos.imag.dataId).values;if(cIe(r)){const o=Fk(a,i,r,e,t),l=[n.shape[0],n.shape[1]];if(e){const c=t.makeTensorInfo(l,"float32",o.real),d=t.makeTensorInfo(l,"float32",o.imag),h=t.makeTensorInfo([],"float32",nc(r,"float32")),p=rl({inputs:{x:h},backend:t}),g=Dk.kernelFunc({inputs:{a:c,b:h},backend:t}),x=Dk.kernelFunc({inputs:{a:d,b:p},backend:t}),y=t.data.get(g.dataId).values,b=t.data.get(x.dataId).values;return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),{real:y,imag:b}}return o}else{const o=Yl(a,i),l=uIe(o,r,e);return c8(l)}}function cIe(n){return(n&n-1)===0}function Fk(n,e,t,r,s){if(t===1)return{real:n,imag:e};const a=Yl(n,e),i=t/2,o=u8(a),l=o.real,c=o.imag,d=[l.length],h=s.makeTensorInfo(d,"float32",l),p=s.makeTensorInfo(d,"float32",c),g=Ra({inputs:{real:h,imag:p},backend:s}),x=d8(a),y=x.real,b=x.imag,S=[y.length],T=s.makeTensorInfo(S,"float32",y),N=s.makeTensorInfo(S,"float32",b),C=Ra({inputs:{real:T,imag:N},backend:s}),I=Fk(l,c,i,r,s),F=I.real,D=I.imag,A=[F.length],_=s.makeTensorInfo(A,"float32",F),k=s.makeTensorInfo(A,"float32",D),O=Ra({inputs:{real:_,imag:k},backend:s}),P=Fk(y,b,i,r,s),W=P.real,K=P.imag,q=[W.length],V=s.makeTensorInfo(q,"float32",W),X=s.makeTensorInfo(q,"float32",K),Q=Ra({inputs:{real:V,imag:X},backend:s}),Y=h8(t,r),j=[Y.real.length],J=s.makeTensorInfo(j,"float32",Y.real),M=s.makeTensorInfo(j,"float32",Y.imag),z=Ra({inputs:{real:J,imag:M},backend:s}),G=nT({inputs:{a:z,b:Q},backend:s}),U=Ph({inputs:{a:O,b:G},backend:s}),se=$$({inputs:{a:O,b:G},backend:s}),pe=jd({inputs:{input:U},backend:s}),me=jd({inputs:{input:se},backend:s}),be=Bh({inputs:{input:U},backend:s}),ge=Bh({inputs:{input:se},backend:s}),ke=jh({inputs:[pe,me],backend:s,attrs:{axis:0}}),Le=jh({inputs:[be,ge],backend:s,attrs:{axis:0}}),rt=s.data.get(ke.dataId).values,Be=s.data.get(Le.dataId).values;return s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(se),s.disposeIntermediateTensorInfo(pe),s.disposeIntermediateTensorInfo(be),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(ke),s.disposeIntermediateTensorInfo(Le),{real:rt,imag:Be}}function uIe(n,e,t){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let a=0,i=0;for(let o=0;o<e;o++){const l=p8(s*o,e,t),c=qA(n,o);a+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}t&&(a/=e,i/=e),f8(r,a,i,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dIe(n){const{inputs:e,backend:t}=n,{input:r}=e,s=Fe(r.shape),a=r.shape[r.shape.length-1],i=s/a,o=ar({inputs:{x:r},backend:t,attrs:{shape:[i,a]}}),l=t7(o,!1,t),c=ar({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const fIe={kernelName:g2,backendName:"cpu",kernelFunc:dIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$(n){const{backend:e,attrs:t}=n,{shape:r,value:s,dtype:a}=t,i=a||Qd(s),o=wr(i,Fe(r));return pIe(o,s,i),e.makeTensorInfo(r,i,o)}const hIe={kernelName:x2,backendName:"cpu",kernelFunc:D$};function pIe(n,e,t){n.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe={kernelName:y2,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,s=t,a=fs(r.dtype,Fe(r.shape)),[i,o,l,c]=r.shape,d=s.data.get(r.dataId).values;for(let p=0;p<i;p++){const g=p*l*o*c;for(let x=0;x<o;x++){const y=x*(l*c);for(let b=0;b<l;b++){const S=b*c;for(let T=0;T<c;T++){const N=Math.round(l-b-1),C=g+y+S+T;let I=d[C];if(N>=0&&N<l){const F=N*c,D=g+y+F+T;I=d[D]}a[C]=I}}}}return{dataId:s.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=r;let y=JW({inputs:{x:s,filter:a},backend:t,attrs:{strides:l,pad:c,dataFormat:d,dilations:h,dimRoundingMode:p}});if(i){const b=y;if(d==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const S=ar({inputs:{x:i},backend:t,attrs:{shape:[i.shape[0],1,1]}});y=Ph({inputs:{a:y,b:S},backend:t}),t.disposeIntermediateTensorInfo(S)}else y=Ph({inputs:{a:y,b:i},backend:t});t.disposeIntermediateTensorInfo(b)}if(g){const b=y;if(d==="NCHW"&&g==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const S=ar({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});y=ew(t,y,g,S,x),t.disposeIntermediateTensorInfo(S)}else y=ew(t,y,g,o,x);t.disposeIntermediateTensorInfo(b)}return y}const xIe={kernelName:dg,backendName:"cpu",kernelFunc:gIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=r;let y=e7({inputs:{x:s,filter:a},backend:t,attrs:{strides:l,pad:c,dataFormat:d,dilations:h,dimRoundingMode:p}});if(i){const b=y;y=Ph({inputs:{a:y,b:i},backend:t}),t.disposeIntermediateTensorInfo(b)}if(g){const b=y;y=ew(t,y,g,o,x),t.disposeIntermediateTensorInfo(b)}return y}const bIe={kernelName:fg,backendName:"cpu",kernelFunc:yIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(n){const{inputs:e,backend:t}=n,{params:r,indices:s}=e,a=Fe(r.shape),i=s.shape,o=i[i.length-1],[l,c,d,h]=jS(r,s);if(c===0)return t.makeTensorInfo(l,r.dtype,[]);const p=t.data.get(s.dataId).values,g=t.bufferSync(r),x=dW(p,g,r.dtype,c,o,d,h,r.shape,a);return t.makeTensorInfo(l,r.dtype,x.values)}const wIe={kernelName:b2,backendName:"cpu",kernelFunc:vIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,indices:a}=e,{axis:i,batchDims:o}=r;Tt([s,a],"gatherV2");const l=nn(i,s.shape)[0],c=t.data.get(a.dataId).values,d=s.shape[l];for(let C=0;C<c.length;++C){const I=c[C];Z(I<=d-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${d-1}]`)}let h=o;o==null&&(h=0);const p=Fe(a.shape),g=e$(s,a,l,h),x=ar({inputs:{x:s},backend:t,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),y=ar({inputs:{x:a},backend:t,attrs:{shape:[g.batchSize,p/g.batchSize]}}),b=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],S=t.bufferSync(y),T=t.bufferSync(x),N=fW(T,S,b);return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(y),t.makeTensorInfo(g.outputShape,N.dtype,N.values)}const TIe={kernelName:xx,backendName:"cpu",kernelFunc:SIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(n){const{inputs:e,backend:t}=n,{input:r}=e,s=Fe(r.shape),a=r.shape[r.shape.length-1],i=s/a,o=ar({inputs:{x:r},backend:t,attrs:{shape:[i,a]}}),l=t7(o,!0,t),c=ar({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}const CIe={kernelName:v2,backendName:"cpu",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIe=On(bp,n=>Number.isFinite(n)?1:0,"bool"),kIe={kernelName:bp,backendName:"cpu",kernelFunc:EIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ie=On(vp,n=>Math.abs(n)===1/0?1:0,"bool"),IIe={kernelName:vp,backendName:"cpu",kernelFunc:_Ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AIe=On(wp,n=>Number.isNaN(n)?1:0,"bool"),$Ie={kernelName:wp,backendName:"cpu",kernelFunc:AIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RIe(n){const{backend:e,attrs:t}=n,{start:r,stop:s,num:a}=t,i=xW(r,s,a);return e.makeTensorInfo([i.length],"float32",i)}const OIe={kernelName:S2,backendName:"cpu",kernelFunc:RIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIe=On(Tp,n=>Math.log1p(n)),FIe={kernelName:Tp,backendName:"cpu",kernelFunc:DIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe=Dr((n,e)=>n&&e),MIe=ns(Sx,LIe,null,"bool"),PIe={kernelName:Sx,backendName:"cpu",kernelFunc:MIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BIe=On(Tx,n=>n?0:1,"bool"),jIe={kernelName:Tx,backendName:"cpu",kernelFunc:BIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe=Dr((n,e)=>n||e),UIe=ns(Nx,zIe,null,"bool"),VIe={kernelName:Nx,backendName:"cpu",kernelFunc:UIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r;Tt(s,"LRN");const c=s.shape[3],d=c-1,h=t.data.get(s.dataId).values,p=Fe(s.shape),g=new Float32Array(p);function x(y){const b=y%c;let S=y-b+Math.max(0,b-a);const T=y-b+Math.min(b+a,d);let N=0;for(;S<=T;S++){const C=h[S];N+=C*C}return N}for(let y=0;y<p;y++){const b=x(y),S=h[y]*Math.pow(i+o*b,-l);g[y]=S}return t.makeTensorInfo(s.shape,s.dtype,g)}const HIe={kernelName:Cx,backendName:"cpu",kernelFunc:WIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:c,beta:d}=r;Tt(i,"LRNGrad");const h=Fe(i.shape),p=i.shape[3],g=t.data.get(i.dataId).values,x=t.data.get(s.dataId).values,y=t.data.get(a.dataId).values,b=new Float32Array(h),S=h;for(let T=0;T<S;T++){const N=T%p,C=T-N+Math.max(0,N-o),I=T-N+Math.min(p,N+o+1);let F=0;for(let D=C;D<I;D++)F+=Math.pow(x[D],2);F=c*F+l;for(let D=C;D<I;D++){let A=-2*c*d*x[D]*y[T]/F;T===D&&(A+=Math.pow(F,-d)),A*=g[T],b[D]+=A}}return t.makeTensorInfo(i.shape,s.dtype,b)}const qIe={kernelName:T2,backendName:"cpu",kernelFunc:GIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reductionIndices:a,keepDims:i}=r,o=t;let l=s.shape;const c=l.length,d=nn(a,l);let h=d;const p=yr(h,c);let g=o.data.get(s.dataId).values;if(p!=null){const C=new Array(c);for(let I=0;I<C.length;I++)C[I]=l[p[I]];g=I$(g,l,s.dtype,p,C),h=Rr(h.length,c),l=C}Tt(s,"max"),Is("max",h,c);const[x,y]=ms(l,h),b=Fe(y),S=bW(g,b,x,s.dtype),T=o.write(S,x,s.dtype);let N=x;return i&&(N=$r(x,d)),{dataId:T,shape:N,dtype:s.dtype}}const KIe={kernelName:Ex,backendName:"cpu",kernelFunc:n7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;Tt(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;Z(_s(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=zi(s.shape,a,i,c,o,l);let h;if(d.filterWidth===1&&d.filterHeight===1&&on(d.inShape,d.outShape))h=rl({inputs:{x:s},backend:t});else{const p=t.data.get(s.dataId).values,g=$t(s.shape),x=R$(p,s.shape,s.dtype,g,d,"max");h=t.makeTensorInfo(d.outShape,s.dtype,x.values)}return h}const YIe={kernelName:kx,backendName:"cpu",kernelFunc:XIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QIe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r;Tt(s,"maxPool3d");const d=rc(s.shape,a,i,1,o,l,c),h=t.data.get(s.dataId).values,p=ZW(h,s.shape,s.dtype,$t(s.shape),d,"max");return t.makeTensorInfo(p.shape,"float32",p.values)}const ZIe={kernelName:_x,backendName:"cpu",kernelFunc:QIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JIe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:c}=r;Tt([s,a],"maxPool3DGrad");const d=rc(a.shape,i,o,1,l,c),h=t.bufferSync(a),p=zke(h,d),g=d.strideDepth,x=d.strideHeight,y=d.strideWidth,b=d.dilationDepth,S=d.dilationHeight,T=d.dilationWidth,N=d.effectiveFilterDepth,C=d.effectiveFilterHeight,I=d.effectiveFilterWidth,F=N-1-d.padInfo.front,D=I-1-d.padInfo.left,A=C-1-d.padInfo.top,_=Yt(a.shape,"float32"),k=t.bufferSync(s);for(let O=0;O<d.batchSize;++O)for(let P=0;P<d.inChannels;++P)for(let W=0;W<d.inDepth;++W)for(let K=0;K<d.inHeight;++K)for(let q=0;q<d.inWidth;++q){const V=W-F,X=K-A,Q=q-D;let Y=0;for(let j=0;j<N;j+=b){const J=(V+j)/g;if(!(J<0||J>=d.outDepth||Math.floor(J)!==J))for(let M=0;M<C;M+=S){const z=(X+M)/x;if(!(z<0||z>=d.outHeight||Math.floor(z)!==z))for(let G=0;G<I;G+=T){const U=(Q+G)/y;if(U<0||U>=d.outWidth||Math.floor(U)!==U)continue;const se=N*C*I-1-p.get(O,J,z,U,P),pe=j*C*I+M*I+G,me=se===pe?1:0;if(me===0)continue;const be=k.get(O,J,z,U,P);Y+=be*me}}}_.set(Y,O,W,K,q,P)}return t.makeTensorInfo(_.shape,_.dtype,_.values)}const eAe={kernelName:C2,backendName:"cpu",kernelFunc:JIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a,output:i}=e,o=a;Tt([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:d,dimRoundingMode:h}=r,p=zi(o.shape,l,c,1,d,h),g=t.data.get(o.dataId).values,x=Yt(p.outShape,o.dtype,QW(g,o.shape,o.dtype,p).values),y=p.strideHeight,b=p.strideWidth,S=p.dilationHeight,T=p.dilationWidth,N=p.effectiveFilterHeight,C=p.effectiveFilterWidth,I=C-1-p.padInfo.left,F=N-1-p.padInfo.top,D=Yt(o.shape,"float32"),A=t.data.get(s.dataId).values,_=Yt(s.shape,"float32",A);for(let k=0;k<p.batchSize;++k)for(let O=0;O<p.inChannels;++O)for(let P=0;P<p.inHeight;++P)for(let W=0;W<p.inWidth;++W){const K=P-F,q=W-I;let V=0;for(let X=0;X<N;X+=S){const Q=(K+X)/y;if(!(Q<0||Q>=p.outHeight||Math.floor(Q)!==Q))for(let Y=0;Y<C;Y+=T){const j=(q+Y)/b;if(j<0||j>=p.outWidth||Math.floor(j)!==j)continue;const J=N*C-1-x.get(k,Q,j,O),M=X*C+Y,z=J===M?1:0;if(z===0)continue;const G=_.get(k,Q,j,O);V+=G*z}}D.set(V,k,P,W,O)}return t.makeTensorInfo(D.shape,D.dtype,D.values)}const nAe={kernelName:N2,backendName:"cpu",kernelFunc:tAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rAe(n,e,t,r,s){const a=$t(e),i=R$(n,e,t,a,s,"max"),o=QW(n,e,t,s,!0,r);return[i.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe={kernelName:E2,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=e,l=t;Tt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,d=zi(r.shape,s,a,[1,1],i),[h,p]=rAe(c,r.shape,r.dtype,o,d),g=l.write(h,d.outShape,r.dtype),x=l.write(p,d.outShape,r.dtype);return[{dataId:g,shape:d.outShape,dtype:r.dtype},{dataId:x,shape:d.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aAe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r,o=nn(a,s.shape),c=ms(s.shape,o)[1],d=Fe(c),h=[],p=t.makeTensorInfo([],"float32",new Float32Array([d]));h.push(p);const g=hu({inputs:{x:s},backend:t,attrs:{dtype:"float32"}});h.push(g);const x=O$({inputs:{a:g,b:p},backend:t});h.push(x);const y=$1({inputs:{x},backend:t,attrs:{axis:a,keepDims:i}});return h.forEach(b=>t.disposeIntermediateTensorInfo(b)),y}const iAe={kernelName:Ix,backendName:"cpu",kernelFunc:aAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r;Tt(s,"min");const o=nn(a,s.shape);let l=o;const c=yr(l,s.shape.length);let d=s;c!=null&&(d=Ta({inputs:{x:s},backend:t,attrs:{perm:c}}),l=Rr(l.length,s.shape.length)),Is("min",l,d.shape.length);const[h,p]=ms(d.shape,l),g=Fe(p),x=Es(Fe(h),d.dtype),y=t.data.get(d.dataId).values;for(let S=0;S<x.length;++S){const T=S*g;let N=y[T];for(let C=0;C<g;++C){const I=y[T+C];(Number.isNaN(I)||I<N)&&(N=I)}x[S]=N}c!=null&&t.disposeIntermediateTensorInfo(d);const b=t.makeTensorInfo(h,d.dtype,x);if(i){const S=$r(h,o),T=ar({inputs:{x:b},backend:t,attrs:{shape:S}});return t.disposeIntermediateTensorInfo(b),T}return b}const lAe={kernelName:Ax,backendName:"cpu",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cAe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:a,mode:i}=r;Tt(s,"mirrorPad");const o=a.map((N,C)=>N[0]+s.shape[C]+N[1]),l=a.map(N=>N[0]),c=a.map((N,C)=>N[0]+s.shape[C]),d=i==="reflect"?0:1,h=t.data.get(s.dataId).values,p=s.shape.length,g=$t(s.shape),x=Fe(o),y=o.length,b=$t(o),S=fs(s.dtype,x);for(let N=0;N<x;N++){let C=Zd(N,y,b);for(let F=0;F<y;F++)C[F]<l[F]?C[F]=l[F]*2-C[F]-d:C[F]>=c[F]&&(C[F]=(c[F]-1)*2-C[F]+d);C=C.map((F,D)=>F-l[D]);const I=co(C,p,g);S[N]=h[I]}return{dataId:t.write(S,o,s.dtype),shape:o,dtype:s.dtype}}const uAe={kernelName:$x,backendName:"cpu",kernelFunc:cAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dAe=Dr((n,e)=>{const t=n%e;return n<0&&e<0||n>=0&&e>=0?t:(t+e)%e}),fAe=ns(Ep,dAe),hAe={kernelName:Ep,backendName:"cpu",kernelFunc:fAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{dim:a}=r,i=s.shape.length;let o=a;if(o===-1&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=nn([o],s.shape),c=n7({inputs:{x:s},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),d=$r(c.shape,l),h=ar({inputs:{x:c},backend:t,attrs:{shape:d}}),p=$$({inputs:{a:s,b:h},backend:t}),g=oW({inputs:{x:p},backend:t}),x=$1({inputs:{x:g},backend:t,attrs:{axis:l,keepDims:!1}}),y=ar({inputs:{x},backend:t,attrs:{shape:d}}),b=O$({inputs:{a:g,b:y},backend:t});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(y),b}const pAe={kernelName:Xx,backendName:"cpu",kernelFunc:r7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mAe(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r;Tt(s,"multinomial");const l=o?s:r7({inputs:{logits:s},backend:t,attrs:{dim:-1}}),c=l.shape[0],d=l.shape[1],h=t.data.get(l.dataId).values,p=[c,a],g=Es(Fe(p),"int32");for(let x=0;x<c;++x){const y=x*d,b=new Float32Array(d-1);b[0]=h[y];for(let N=1;N<b.length;++N)b[N]=b[N-1]+h[y+N];const S=mS.alea(i.toString()),T=x*a;for(let N=0;N<a;++N){const C=S();g[T+N]=b.length;for(let I=0;I<b.length;I++)if(C<b[I]){g[T+N]=I;break}}}return o||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(p,"int32",g)}const gAe={kernelName:k2,backendName:"cpu",kernelFunc:mAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xAe=LS;function yAe(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;Tt(s,"NonMaxSuppression");const c=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,{selectedIndices:h}=xAe(c,d,i,o,l);return t.makeTensorInfo([h.length],"int32",new Int32Array(h))}const bAe={kernelName:_2,backendName:"cpu",kernelFunc:yAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe=MS;function wAe(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Tt(s,"NonMaxSuppressionPadded");const d=t.data.get(s.dataId).values,h=t.data.get(a.dataId).values,{selectedIndices:p,validOutputs:g}=vAe(d,h,i,o,l,c);return[t.makeTensorInfo([p.length],"int32",new Int32Array(p)),t.makeTensorInfo([],"int32",new Int32Array([g]))]}const SAe={kernelName:I2,backendName:"cpu",kernelFunc:wAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe=PS;function NAe(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Tt(s,"NonMaxSuppressionWithScore");const d=t.data.get(s.dataId).values,h=t.data.get(a.dataId).values,p=i,g=o,x=l,y=c,{selectedIndices:b,selectedScores:S}=TAe(d,h,p,g,x,y);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const CAe={kernelName:A2,backendName:"cpu",kernelFunc:NAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EAe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r;Tt(s,"oneHot");const c=Fe(s.shape),d=new Float32Array(c*i);d.fill(l);const h=t.data.get(s.dataId).values;for(let p=0;p<c;++p)h[p]>=0&&h[p]<i&&(d[p*i+h[p]]=o);return t.makeTensorInfo([...s.shape,i],a,d)}const kAe={kernelName:Fx,backendName:"cpu",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nw(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=jd({inputs:{input:r},backend:t}),a=nw({inputs:{x:s},backend:t}),i=Bh({inputs:{input:r},backend:t}),o=nw({inputs:{x:i},backend:t}),l=Ra({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return D$({backend:t,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const _Ae={kernelName:Jx,backendName:"cpu",kernelFunc:nw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=jd({inputs:{input:r},backend:t}),a=s7({inputs:{x:s},backend:t}),i=Bh({inputs:{input:r},backend:t}),o=nw({inputs:{x:i},backend:t}),l=Ra({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return D$({backend:t,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const IAe={kernelName:Dx,backendName:"cpu",kernelFunc:s7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r;if(e.length===1)return tw({inputs:{input:e[0]},backend:t,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(d=>{ks(a,d.shape,"All tensors passed to stack must have matching shapes"),Z(i===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(d=>{const h=tw({inputs:{input:d},backend:t,attrs:{dim:s}});return o.push(h),h}),c=jh({inputs:l,backend:t,attrs:{axis:s}});return o.forEach(d=>t.disposeIntermediateTensorInfo(d)),c}const AAe={kernelName:Lx,backendName:"cpu",kernelFunc:a7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:a,constantValue:i}=r;Tt(s,"pad");const o=a.map((T,N)=>T[0]+s.shape[N]+T[1]),l=a.map(T=>T[0]),c=t.data.get(s.dataId).values,d=Fe(s.shape),h=s.shape.length,p=$t(s.shape),g=Fe(o),x=o.length,y=$t(o),b=fs(s.dtype,g);i!==0&&b.fill(i);for(let T=0;T<d;T++){const C=Zd(T,h,p).map((F,D)=>F+l[D]),I=co(C,x,y);b[I]=c[T]}return{dataId:t.write(b,o,s.dtype),shape:o,dtype:s.dtype}}const i7={kernelName:Mx,backendName:"cpu",kernelFunc:$Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe=Dr((n,e)=>Math.pow(n,e)),OAe=ns(_p,RAe),DAe={kernelName:_p,backendName:"cpu",kernelFunc:OAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=r,l=s.map(S=>t.data.get(S.dataId).values),c=s.map(S=>S.shape),d=t.data.get(a.dataId).values,h=t.data.get(i.dataId).values,[p,g,x]=CW(l,c,d,a.shape,a.dtype,h,i.shape),y=p.map(S=>t.makeTensorInfo([S.length],"int32",S)),b=t.makeTensorInfo(x,a.dtype,g);return y.concat([b])}const LAe={kernelName:$2,backendName:"cpu",kernelFunc:FAe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(n){const{inputs:e,backend:t}=n,{starts:r,limits:s,deltas:a}=e,i=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values,[c,d]=EW(i,r.shape,r.dtype,o,s.shape,l,a.shape),h=t.makeTensorInfo([c.length],"int32",c),p=t.makeTensorInfo([d.length],r.dtype,d);return[h,p]}const PAe={kernelName:R2,backendName:"cpu",kernelFunc:MAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,h=t.data.get(i.dataId).values,p=o.map(b=>t.data.get(b.dataId).values),g=o.map(b=>b.shape),[x,y]=kW(c,s.shape,d,a.shape,a.dtype,h,i.shape,p,g,l);return t.makeTensorInfo(x,a.dtype,y)}const jAe={kernelName:O2,backendName:"cpu",kernelFunc:BAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(n){const{backend:e,attrs:t}=n,{start:r,stop:s,dtype:a,step:i}=t,o=_W(r,s,i,a);return e.makeTensorInfo([o.length],a,o)}const UAe={kernelName:D2,backendName:"cpu",kernelFunc:zAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe=On(Ip,n=>1/n),WAe={kernelName:Ip,backendName:"cpu",kernelFunc:VAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HAe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r;Tt(s,"resizeBilinear");const l=$t(s.shape),[c,d]=o,[h,p,g,x]=s.shape,y=t.data.get(s.dataId).values,b=new Float32Array(Fe([h,c,d,x])),S=[a&&c>1?p-1:p,a&&d>1?g-1:g],T=[a&&c>1?c-1:c,a&&d>1?d-1:d];let N=0;const C=S[0]/T[0],I=S[1]/T[1];for(let F=0;F<h;F++)for(let D=0;D<c;D++){let A;i?A=C*(D+.5)-.5:A=C*D;const _=Math.max(0,Math.floor(A)),k=A-_,O=Math.min(p-1,Math.ceil(A)),P=F*l[0]+_*l[1],W=F*l[0]+O*l[1];for(let K=0;K<d;K++){let q;i?q=I*(K+.5)-.5:q=I*K;const V=Math.max(0,Math.floor(q)),X=q-V,Q=Math.min(g-1,Math.ceil(q)),Y=P+V*l[2],j=W+V*l[2],J=P+Q*l[2],M=W+Q*l[2];for(let z=0;z<x;z++){const G=y[Y+z],U=y[j+z],se=y[J+z],pe=y[M+z],me=G+(se-G)*X,be=U+(pe-U)*X,ge=me+(be-me)*k;b[N++]=ge}}}return t.makeTensorInfo([h,c,d,x],"float32",b)}const GAe={kernelName:Ux,backendName:"cpu",kernelFunc:HAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qAe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:i}=r;Tt([a,s],"resizeBilinearGrad");const o=$t(s.shape),[l,c,d,h]=s.shape,[,p,g]=a.shape,x=new Float32Array(l*c*d*h),y=[i&&p>1?c-1:c,i&&g>1?d-1:d],b=[i&&p>1?p-1:p,i&&g>1?g-1:g],S=y[0]/b[0],T=y[1]/b[1],N=t.data.get(a.dataId).values;let C=0;for(let I=0;I<l;I++){const F=I*o[0];for(let D=0;D<p;D++){const A=D*S,_=Math.floor(A),k=Math.min(Math.ceil(A),c-1),O=F+_*o[1],P=F+k*o[1],W=A-_,K=1-W;for(let q=0;q<g;q++){const V=q*T,X=Math.floor(V),Q=Math.min(Math.ceil(V),d-1),Y=V-X,j=1-Y,J=O+X*o[2],M=O+Q*o[2],z=P+X*o[2],G=P+Q*o[2],U=K*j,se=K*Y,pe=W*j,me=W*Y;for(let be=0;be<h;be++){const ge=N[C++];x[J+be]+=ge*U,x[M+be]+=ge*se,x[z+be]+=ge*pe,x[G+be]+=ge*me}}}}return t.makeTensorInfo([l,d,c,h],"float32",x)}const KAe={kernelName:M2,backendName:"cpu",kernelFunc:qAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XAe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r;Tt(s,"resizeNearestNeighbor");const l=$t(s.shape),[c,d]=o,[h,p,g,x]=s.shape,y=t.data.get(s.dataId).values,b=new Float32Array(h*c*d*x),S=[a&&c>1?p-1:p,a&&d>1?g-1:g],T=[a&&c>1?c-1:c,a&&d>1?d-1:d],N=S[0]/T[0],C=S[1]/T[1];let I=0;for(let F=0;F<h;F++){const D=F*l[0];for(let A=0;A<c;A++){const _=i?N*(A+.5):N*A;let k=Math.min(p-1,a?Math.round(_):Math.floor(_));i&&(k=Math.max(0,k));const O=D+k*l[1];for(let P=0;P<d;P++){const W=i?C*(P+.5):C*P;let K=Math.min(g-1,a?Math.round(W):Math.floor(W));i&&(K=Math.max(0,K));const q=O+K*l[2];for(let V=0;V<x;V++){const X=y[q+V];b[I++]=X}}}}return t.makeTensorInfo([h,c,d,x],s.dtype,b)}const YAe={kernelName:zx,backendName:"cpu",kernelFunc:XAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QAe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:i}=r;Tt([a,s],"resizeNearestNeighborGrad");const o=$t(s.shape),l=$t(a.shape),[c,d,h,p]=s.shape,[,g,x]=a.shape,y=new Float32Array(c*d*h*p),b=t.data.get(a.dataId).values,S=[i&&g>1?d-1:d,i&&x>1?h-1:h],T=[i&&g>1?g-1:g,i&&x>1?x-1:x],N=S[0]/T[0],C=S[1]/T[1],I=1/N,F=1/C,D=Math.ceil(I)*2+2,A=Math.ceil(F)*2+2;for(let _=0;_<c;_++){const k=_*o[0];for(let O=0;O<d;O++){const P=k+O*o[1],W=Math.floor(O*I),K=Math.floor(W-D/2);for(let q=0;q<h;q++){const V=P+q*o[2],X=Math.floor(q*F),Q=Math.floor(X-A/2);for(let Y=0;Y<p;Y++){let j=0;for(let J=0;J<D;J++){const M=J+K;if(M<0||M>=g)continue;const z=k+M*l[1],G=M*N,U=Math.min(d-1,i?Math.round(G):Math.floor(G));if(O===U)for(let se=0;se<A;se++){const pe=se+Q;if(pe<0||pe>=x)continue;const me=z+pe*l[2],be=pe*C,ge=Math.min(h-1,i?Math.round(be):Math.floor(be));q===ge&&(j+=b[me+Y])}}y[V+Y]=j}}}}return t.makeTensorInfo(s.shape,s.dtype,y)}const ZAe={kernelName:L2,backendName:"cpu",kernelFunc:QAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JAe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dims:a}=r;Tt(s,"reverse");const i=s.shape.length,o=nn(a,s.shape);if(i===0)return rl({inputs:{x:s},backend:t});const l=new zr(s.shape,s.dtype),c=t.bufferSync(s);for(let d=0;d<l.size;d++){const h=l.indexToLoc(d),p=h.slice();o.forEach(g=>p[g]=s.shape[g]-1-p[g]),l.set(c.get(...p),...h)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}const e$e={kernelName:Vx,backendName:"cpu",kernelFunc:JAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$e={kernelName:eS,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:s,fillValue:a,center:i}=e,o=t,l=fs(r.dtype,Fe(r.shape)),[c,d,h,p]=r.shape,[g,x]=PA(i,d,h),y=255,b=Math.sin(s),S=Math.cos(s),T=o.data.get(r.dataId).values;for(let C=0;C<c;C++){const I=C*h*d*p;for(let F=0;F<d;F++){const D=F*(h*p);for(let A=0;A<h;A++){const _=A*p;for(let k=0;k<p;k++){const O=[c,F,A,k],P=O[2],W=O[1];let K=(P-g)*S-(W-x)*b,q=(P-g)*b+(W-x)*S;K=Math.round(K+g),q=Math.round(q+x);let V=a;if(typeof a!="number"&&(k===3?V=y:V=a[k]),K>=0&&K<h&&q>=0&&q<d){const Q=q*(h*p),Y=K*p,j=I+Q+Y+k;V=T[j]}const X=I+D+_+k;l[X]=V}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$e=On(Rp,n=>{const e=Math.floor(n);return n-e<.5?Math.floor(n):n-e>.5?Math.ceil(n):e%2===0?e:e+1}),r$e={kernelName:Rp,backendName:"cpu",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=Eu(a,s,i),p=!0,g=t.bufferSync(s),x=t.bufferSync(a),y=gd(g,x,i,h,c,l,o,d,0,p);return t.makeTensorInfo(i,y.dtype,y.values)}const a$e={kernelName:P2,backendName:"cpu",kernelFunc:s$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(n,e){let t=0,r=n.length,s=0;for(;t<r;)s=Math.floor((t+r)/2),n[s]<e?t=s+1:r=s;return r}function o$e(n,e){let t=0,r=n.length,s=0;for(;t<r;)s=Math.floor((t+r)/2),n[s]<=e?t=s+1:r=s;return r}function l$e(n,e,t,r,s,a){const i=wr("int32",t*s);for(let o=0;o<t;++o){const l=n.slice(o*r,(o+1)*r),c=o*s;for(let d=0;d<s;++d)i[c+d]=a==="left"?i$e(l,e[d+c]):o$e(l,e[d+c])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:s,values:a}=e,{side:i}=r,o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values,c=l$e(o,l,s.shape[0],s.shape[1],a.shape[1],i);return t.makeTensorInfo(a.shape,"int32",c)}const u$e={kernelName:j2,backendName:"cpu",kernelFunc:c$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$e(n){const{inputs:e,backend:t}=n,{condition:r,t:s,e:a}=e;Tt([r,s,a],"select");const i=r.shape.length,o=t.data.get(r.dataId).values,l=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,d=ya(s.dtype,a.dtype),h=Es(Fe(s.shape),d);let p=0;const g=i===0||i>1||s.shape.length===1?1:Fe(s.shape.slice(1));for(let x=0;x<o.length;x++)for(let y=0;y<g;y++)o[x]===1?h[p++]=l[x]:h[p++]=c[x];return t.makeTensorInfo(s.shape,d,h)}const f$e={kernelName:Wx,backendName:"cpu",kernelFunc:d$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h$e=VS,p$e=WS,m$e=On(Dp,n=>n>=0?p$e*n:h$e*(Math.exp(n)-1)),g$e={kernelName:Dp,backendName:"cpu",kernelFunc:m$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x$e=On(Mp,n=>n<0?-1:n>0?1:0),y$e={kernelName:Mp,backendName:"cpu",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e=On(Fp,n=>Math.sin(n)),v$e={kernelName:Fp,backendName:"cpu",kernelFunc:b$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w$e=On(Lp,n=>Math.sinh(n)),S$e={kernelName:Lp,backendName:"cpu",kernelFunc:w$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e=11920928955078125e-23,$M=Math.log(T$e)+2,N$e=On(Bp,n=>{const e=n>-$M,t=n<$M,r=Math.exp(n);let s;return t?s=r:e?s=n:s=Math.log(1+r),s}),C$e={kernelName:Bp,backendName:"cpu",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,paddings:i}=r;Tt([s],"spaceToBatchND");const o=Fe(a),l=[[0,0]];l.push(...i);for(let F=1+a.length;F<s.shape.length;++F)l.push([0,0]);const c=i7.kernelFunc({inputs:{x:s},backend:t,attrs:{paddings:l,constantValue:0}}),d=v1(c.shape,a,o,!1),h=w1(d.length,a.length,!1),p=S1(c.shape,a,o,!1),y=ar({inputs:{x:c},backend:t,attrs:{shape:d}}),T=Ta({inputs:{x:y},backend:t,attrs:{perm:h}}),I=ar({inputs:{x:T},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(T),I}const k$e={kernelName:qx,backendName:"cpu",kernelFunc:E$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(n){const{inputs:e,backend:t}=n,{indices:r,values:s,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=t.data.get(r.dataId).values,l=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,d=t.data.get(i.dataId).values[0],[h,p,g,x,y]=RW(o,r.shape,r.dtype,l,s.dtype,c,d);return[t.makeTensorInfo(p,r.dtype,h),t.makeTensorInfo([p[0]],s.dtype,g),t.makeTensorInfo([x.length],"bool",new Uint8Array(x.map(b=>Number(b)))),t.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const I$e={kernelName:z2,backendName:"cpu",kernelFunc:_$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$e(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(t.data.get(s.dataId).values),o=t.data.get(r.dataId).values,l=Array.from(t.data.get(a.dataId).values),[c,d,h]=OW(o,r.shape,r.dtype,i,l);return[t.makeTensorInfo(d,r.dtype,c),t.makeTensorInfo([h.length],a.dtype,new Int32Array(h))]}const $$e={kernelName:U2,backendName:"cpu",kernelFunc:A$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$e(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values,[c,d]=A$(i,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(d,r.dtype,c)}const O$e={kernelName:V2,backendName:"cpu",kernelFunc:R$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$e(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,l=t.data.get(a.dataId).values,[c,d]=A$(i,r.shape,r.dtype,o,l);return t.makeTensorInfo(d,r.dtype,c)}const F$e={kernelName:W2,backendName:"cpu",kernelFunc:D$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L$e(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:d,strides:h,outputSize:p}=Eu(a,s,o),g=!1,x=t.bufferSync(s);let y;switch(a.dtype){case"bool":{const b=t.bufferSync(a),S=!!t.data.get(i.dataId).values[0];y=gd(x,b,o,p,d,c,l,h,S,g);break}case"float32":{const b=t.bufferSync(a),S=t.data.get(i.dataId).values[0];y=gd(x,b,o,p,d,c,l,h,S,g);break}case"int32":{const b=t.bufferSync(a),S=t.data.get(i.dataId).values[0];y=gd(x,b,o,p,d,c,l,h,S,g);break}case"string":{const b=t.bufferSync(a),S=ql(t.data.get(i.dataId).values[0]);y=gd(x,b,o,p,d,c,l,h,S,g);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return t.makeTensorInfo(o,y.dtype,y.values)}const M$e={kernelName:H2,backendName:"cpu",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=nn(i,s.shape)[0],l=JA(s,a,o),c=new Array(s.shape.length).fill(0),d=s.shape.slice();return l.map(h=>{const p=[...d];p[o]=h;const g=zd({inputs:{x:s},backend:t,attrs:{begin:c,size:p}});return c[o]+=h,g})}const B$e={kernelName:Kx,backendName:"cpu",kernelFunc:P$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e={kernelName:G2,backendName:"cpu",kernelFunc:({inputs:n,backend:e})=>{const{x:t}=n,r=e;Tt(t,"square");const s=r.data.get(t.dataId).values,a=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];a[o]=l*l}return{dataId:r.write(a,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z$e=On(Gp,(n,e)=>{const t=e;return isNaN(n)?NaN:n>0?1:t.alpha}),U$e={kernelName:Gp,backendName:"cpu",kernelFunc:z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p}=r;Tt(s,"stridedSlice");const{finalShapeSparse:g,finalShape:x,isIdentity:y,sliceDim0:b,isSimpleSlice:S,begin:T,end:N,strides:C}=DA(s.shape,a,i,o,l,c,d,h,p);let I;if(y)I=ar({inputs:{x:s},backend:t,attrs:{shape:x}});else if(b||S){Z(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const F=$A(T,N,C),D=zd({inputs:{x:s},backend:t,attrs:{begin:T,size:F}});I=ar({inputs:{x:D},backend:t,attrs:{shape:x}}),t.disposeIntermediateTensorInfo(D)}else{const F=t.bufferSync(s),D=LW(g,F,C,T);I=t.makeTensorInfo(x,D.dtype,D.values)}return I}const W$e={kernelName:q2,backendName:"cpu",kernelFunc:V$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(n){const{inputs:e,backend:t,attrs:r}=n,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:d,dataSplits:h}=e,p=t.data.get(d.dataId).values,g=t.data.get(h.dataId).values,[x,y]=MW(p,g,s,a,i,o,l,c);return[t.makeTensorInfo([x.length],"string",x),t.makeTensorInfo(h.shape,"int32",y)]}const G$e={kernelName:K2,backendName:"cpu",kernelFunc:H$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:s}=r,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=t.data.get(a.dataId).values,l=t.data.get(i.dataId).values[0],[c,d,h]=PW(o,l,s),p=d.length;return[t.makeTensorInfo([p,2],"int32",c),t.makeTensorInfo([p],"string",d),t.makeTensorInfo([2],"int32",new Int32Array(h))]}const K$e={kernelName:X2,backendName:"cpu",kernelFunc:q$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=t.data.get(a.dataId).values,o=BW(i,s);return t.makeTensorInfo(a.shape,"int32",o)}const Y$e={kernelName:Y2,backendName:"cpu",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q$e=On(Vp,n=>Math.tan(n)),Z$e={kernelName:Vp,backendName:"cpu",kernelFunc:Q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J$e=On(Wp,n=>Math.tanh(n)),eRe={kernelName:Wp,backendName:"cpu",kernelFunc:J$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(n){const{inputs:e,backend:t}=n,{tensor:r,indices:s,updates:a}=e,{sliceRank:i,numUpdates:o,sliceSize:l,strides:c,outputSize:d}=Eu(a,s,r.shape),h=!1,p=t.bufferSync(s),g=t.bufferSync(a),x=t.bufferSync(r),y=gd(p,g,r.shape,d,l,o,i,c,x,h);return t.makeTensorInfo(r.shape,y.dtype,y.values)}const nRe={kernelName:B2,backendName:"cpu",kernelFunc:tRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reps:a}=r;Tt(s,"tile");const i=zW(t.bufferSync(s),a);return t.makeTensorInfo(i.shape,i.dtype,i.values)}const sRe={kernelName:Hp,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{k:a,sorted:i}=r;Tt(s,"topk");const o=t.data.get(s.dataId).values,[l,c]=VW(o,s.shape,s.dtype,a,i);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(c.shape,c.dtype,c.values)]}const iRe={kernelName:Q2,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(n){const{inputs:e,attrs:t,backend:r}=n,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=t,[d,h,p,g]=s.shape,[x,y]=c??[h,p],b=[d,x,y,g],S=$t(s.shape),T=S[0],N=S[1],C=S[2],I=$t(b),F=I[0],D=I[1],A=I[2],_=fs(s.dtype,Fe(b));_.fill(l);const k=r.data.get(s.dataId).values,O=r.data.get(a.dataId).values;for(let W=0;W<d;++W){const K=a.shape[0]===1?O:O.subarray(W*8,W*8+8);for(let q=0;q<x;++q)for(let V=0;V<y;++V)for(let X=0;X<g;++X){let Q;const Y=K[6]*V+K[7]*q+1;if(Y===0)continue;const j=(K[0]*V+K[1]*q+K[2])/Y,J=(K[3]*V+K[4]*q+K[5])/Y,M=RM(j,p,o),z=RM(J,h,o);switch(i){case"nearest":Q=hRe(k,h,p,T,N,C,W,z,M,X,l);break;case"bilinear":Q=pRe(k,h,p,T,N,C,W,z,M,X,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const G=W*F+q*D+V*A+X;_[G]=Q}return r.makeTensorInfo(b,s.dtype,_)}return{dataId:r.write(_,b,s.dtype),shape:s.shape,dtype:s.dtype}}const lRe={kernelName:Z2,backendName:"cpu",kernelFunc:oRe};function RM(n,e,t){switch(t){case"reflect":return cRe(n,e);case"wrap":return uRe(n,e);case"nearest":return fRe(n,e);case"constant":default:return dRe(n)}}function cRe(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=2*e;t<r&&(t=r*Math.trunc(-t/r)+t),t=t<-e?t+r:-t-1}else if(t>e-1)if(e<=1)t=0;else{const r=2*e;t-=r*Math.trunc(t/r),t>=e&&(t=r-t-1)}return nu(0,t,e-1)}function uRe(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=e-1;t+=e*(Math.trunc(-t/r)+1)}else if(t>e-1)if(e<=1)t=0;else{const r=e-1;t-=e*Math.trunc(t/r)}return nu(0,t,e-1)}function dRe(n,e){return n}function fRe(n,e){return nu(0,n,e-1)}function R0(n,e,t,r,s,a,i,o,l,c,d){const h=i*r+o*s+l*a+c;return 0<=o&&o<e&&0<=l&&l<t?n[h]:d}function hRe(n,e,t,r,s,a,i,o,l,c,d){const h=Math.round(o),p=Math.round(l);return R0(n,e,t,r,s,a,i,h,p,c,d)}function pRe(n,e,t,r,s,a,i,o,l,c,d){const h=Math.floor(o),p=Math.floor(l),g=h+1,x=p+1,y=(x-l)*R0(n,e,t,r,s,a,i,h,p,c,d)+(l-p)*R0(n,e,t,r,s,a,i,h,x,c,d),b=(x-l)*R0(n,e,t,r,s,a,i,g,p,c,d)+(l-p)*R0(n,e,t,r,s,a,i,g,x,c,d);return(g-o)*y+(o-h)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(n){const{inputs:e,attrs:t,backend:r}=n,{axis:s}=t,{x:a}=e;Tt(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:c}=WW(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const gRe={kernelName:J2,backendName:"cpu",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xRe(n){const{inputs:e,backend:t,attrs:r}=n,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s.shape.length,o=s.shape[a],l=new Array(i-1);let c=0;for(let g=0;g<i;g++)g!==a&&(l[c++]=s.shape[g]);const d=new Array(i).fill(0),h=s.shape.slice();h[a]=1;const p=new Array(o);for(let g=0;g<p.length;g++){d[a]=g;const x=zd({inputs:{x:s},backend:t,attrs:{begin:d,size:h}});p[g]=ar({inputs:{x},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(x)}return p}const yRe={kernelName:Qx,backendName:"cpu",kernelFunc:xRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bRe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,segmentIds:a}=e,{numSegments:i}=r;Tt(s,"unsortedSegmentSum");const o=s.shape.length,l=a.shape.length,c=[],d=[],h=o-l;let p=a;for(let x=0;x<h;++x){const y=tw({inputs:{input:p},backend:t,attrs:{dim:x+1}});p=y,d.push(y)}for(let x=0;x<i;++x){const y=nc(x,"int32"),b=t.makeTensorInfo([],"int32",y),S=aW({inputs:{a:b,b:p},backend:t}),T=hu({inputs:{x:S},backend:t,attrs:{dtype:"float32"}}),N=nT({inputs:{a:T,b:s},backend:t}),C=$1({inputs:{x:N},backend:t,attrs:{axis:0,keepDims:!1}});c.push(C),d.push(b),d.push(S),d.push(T),d.push(N),d.push(C)}const g=a7({inputs:c,backend:t,attrs:{axis:0}});return d.forEach(x=>t.disposeIntermediateTensorInfo(x)),g}const vRe={kernelName:Zx,backendName:"cpu",kernelFunc:bRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wRe=[mke,XCe,xke,bke,tEe,wke,Tke,Cke,kke,Ike,$ke,Oke,Fke,Pke,jke,Vke,Hke,qke,Xke,hke,Qke,Jke,t_e,rEe,r_e,JCe,aEe,a_e,YCe,o_e,c_e,u_e,f_e,p_e,g_e,y_e,v_e,S_e,N_e,E_e,__e,A_e,R_e,D_e,F_e,M_e,B_e,z_e,U_e,V_e,W_e,G_e,X_e,ike,Q_e,iEe,aIe,oEe,iIe,cEe,fIe,hIe,mIe,dEe,hEe,xIe,bIe,wIe,TIe,mEe,xEe,QCe,CIe,l_e,kIe,IIe,$Ie,oke,bEe,wEe,OIe,TEe,FIe,PIe,jIe,VIe,HIe,qIe,KIe,CEe,YIe,ZIe,eAe,nAe,sAe,iAe,lAe,kEe,uAe,hAe,gAe,IEe,$Ee,bAe,SAe,CAe,OEe,kAe,IAe,AAe,i7,DAe,cke,LEe,LAe,PAe,jAe,UAe,ZCe,Dk,WAe,uke,dke,fke,GAe,KAe,YAe,ZAe,e$e,t$e,r$e,WEe,a$e,u$e,f$e,g$e,GEe,y$e,v$e,S$e,qEe,pAe,C$e,k$e,I$e,$$e,O$e,F$e,M$e,B$e,YEe,j$e,ZEe,eke,U$e,W$e,G$e,K$e,Y$e,ske,q_e,Z$e,eRe,nRe,sRe,iRe,lRe,DEe,gRe,yRe,vRe,_Ae];for(const n of wRe)tS(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dd={},wb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function SRe(n,e){dd[n]=e}function xo(n,e){if(!(n in dd)||e!=null){const r=NRe(n,e);if(r!==null)dd[n]=r;else return console.log("Could not get context for WebGL version",n),null}const t=dd[n];return t==null||t.isContextLost()?(delete dd[n],xo(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),dd[n])}function TRe(n){if(!Ce().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function NRe(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??TRe(n);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete dd[n]},!1),Ce().getBool("SOFTWARE_WEBGL_ENABLED")&&(wb.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",wb)||t.getContext("experimental-webgl",wb):t.getContext("webgl2",wb)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Cg;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(Cg||(Cg={}));var si;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(si||(si={}));var Ss;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ss||(Ss={}));function R1(n,e){return[e,n]}function CRe(n,e){return n*e}function Sb(n){const e=Fe(n),t=Math.ceil(e/4);return $v(t)}function tm(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function ERe(n,e){const[t,r]=tm(n,e);return t*r*4}function F$(n,e){const t=n;let r,s,a,i,o,l,c,d,h,p;return Ce().getNumber("WEBGL_VERSION")===2?(r=t.R32F,s=t.R16F,a=t.RGBA16F,i=t.RGBA32F,o=t.RED,c=4,d=1,h=t.HALF_FLOAT,p=t.FLOAT,l=t.RGBA8):(r=n.RGBA,s=n.RGBA,a=n.RGBA,i=t.RGBA,o=n.RGBA,c=4,d=4,h=e!=null?e.HALF_FLOAT_OES:null,p=n.FLOAT,l=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:d,textureTypeHalfFloat:h,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gt(n,e){const t=e();return Ce().getBool("DEBUG")&&kRe(n),t}function kRe(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+$Re(n,e))}const _Re=596e-10,IRe=65504;function ARe(n){return!!(Ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||_Re<Math.abs(n)&&Math.abs(n)<IRe)}function $Re(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Tb(n,e){return cc(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function RRe(n,e){const t=cc(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(gt(n,()=>n.shaderSource(t,e)),gt(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function ORe(n,e){const t=cc(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(gt(n,()=>n.shaderSource(t,e)),gt(n,()=>n.compileShader(t)),Ce().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw o7(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const DRe=/ERROR: [0-9]+:([0-9]+):/g;function o7(n,e){const t=DRe.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const r=+t[1],s=n.split(`
`),a=s.length.toString().length+2,i=s.map((h,p)=>yd((p+1).toString(),a)+h);let o=0;for(let h=0;h<i.length;h++)o=Math.max(i[h].length,o);const l=i.slice(0,r-1),c=i.slice(r-1,r),d=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${yd(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join(`
`))}function FRe(n){return cc(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function LRe(n,e){if(gt(n,()=>n.linkProgram(e)),!Ce().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function oE(n,e){if(gt(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function MRe(n,e){const t=cc(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return gt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),gt(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function PRe(n,e){const t=cc(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return gt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),gt(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function BRe(n){return cc(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function jRe(n,e){const t=Ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const r=`[${n}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t){const r=`[${n}x${e}]`,s=`[${t}x${t}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function zRe(n){return cc(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function OM(n,e,t,r,s,a,i){const o=n.getAttribLocation(e,t);return o===-1?!1:(gt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),gt(n,()=>n.vertexAttribPointer(o,s,n.FLOAT,!1,a,i)),gt(n,()=>n.enableVertexAttribArray(o)),!0)}function URe(n,e,t){qRe(n,t),gt(n,()=>n.activeTexture(n.TEXTURE0+t)),gt(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function VRe(n,e,t){return cc(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function WRe(n,e,t){return n.getUniformLocation(e,t)}function HRe(n,e,t,r){gt(n,()=>URe(n,e,r)),gt(n,()=>n.uniform1i(t,r))}function lE(n,e,t){gt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),gt(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function DM(n,e){gt(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),gt(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function Nb(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+GRe(n,e))}function GRe(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function cc(n,e,t){const r=gt(n,()=>e());if(r==null)throw new Error(t);return r}function qRe(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t){const s=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${s}.`)}}function zh(n,e=2){return Fe(n.slice(0,n.length-e))}function Uh(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function Cb(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[zh(n),...Uh(n)]),e}function KRe(n,e=!1){let t=Ce().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ce().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Ce().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),e&&(t=t*2,r=r*2,n=n.map((o,l)=>l>=n.length-2?Kw(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=tc(n).newShape);let s=Fe(n),a=null;n.length<=1&&s<=t?a=[1,s]:n.length===2&&n[0]<=t&&n[1]<=t?a=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?a=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?a=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?a=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(a=[n[0],n[1]*n[2]*n[3]]);const i=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||i)if(e){const o=zh(n);let l=2,c=2;n.length&&([l,c]=Uh(n)),s=o*(l/2)*(c/2),a=$v(s).map(d=>d*2)}else a=$v(s);return a}function Eb(n){return n%2===0}function rw(n,e){if(n=n.slice(-2),e=e.slice(-2),on(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n[n.length-1],r=e[e.length-1];if(t===r||Eb(t)&&Eb(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&Eb(n[0])&&Eb(e[0])}let cE,uE;function XRe(n){if(cE==null){const e=xo(n);cE=e.getParameter(e.MAX_TEXTURE_SIZE)}return cE}function YRe(n){if(uE==null){const e=xo(n);uE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,uE)}function QRe(n){if(n===0)return 0;let e;const t=xo(n);return Di(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:Di(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function Di(n,e){return n.getExtension(e)!=null}function FM(n){try{if(xo(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function ZRe(n){if(n===0)return!1;const e=xo(n);if(n===1){if(!Di(e,"OES_texture_float"))return!1}else if(!Di(e,"EXT_color_buffer_float"))return!1;return Lk(e)}function JRe(n){if(n===0)return!1;const e=xo(n);if(n===1){if(!Di(e,"OES_texture_float")||!Di(e,"WEBGL_color_buffer_float"))return!1}else{if(Di(e,"EXT_color_buffer_float"))return Lk(e);const r="EXT_color_buffer_half_float";if(Di(e,r)){const s=e.getExtension(r);return eOe(e,s)}return!1}return Lk(e)}function Lk(n){const e=F$(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(a),i}function eOe(n,e){const t=F$(n,e),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(i),o}function tOe(n){return n!==2?!1:xo(n).fenceSync!=null}function O1(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&Z(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Et=Ce();Et.registerFlag("HAS_WEBGL",()=>Et.getNumber("WEBGL_VERSION")>0);Et.registerFlag("WEBGL_VERSION",()=>FM(2)?2:FM(1)?1:0);Et.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Et.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Et.get("WEBGL_VERSION")===2);Et.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Et.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Et.registerFlag("WEBGL_PACK",()=>Et.getBool("HAS_WEBGL"));Et.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_CLIP",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_REDUCE",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_LAZILY_UNPACK",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_CONV_IM2COL",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Et.getBool("WEBGL_PACK"));Et.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>XRe(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>YRe(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Et.getNumber("WEBGL_VERSION");return n===0?0:QRe(n)});Et.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Et.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!lI());Et.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>ZRe(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Et.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Et.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Et.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>JRe(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_FENCE_API_ENABLED",()=>tOe(Et.getNumber("WEBGL_VERSION")));Et.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Et.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Et.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});Et.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>lI()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});Et.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Et.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Et.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Et.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Et.registerFlag("WEBGL_EXP_CONV",()=>!1);Et.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Et.getBool("IS_TEST"));Et.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Et.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Et.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Et.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ia(){let n,e,t,r,s,a,i,o,l,c;return Ce().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",s="texture",a="outputColor",i="out vec4 outputColor;",o=Ce().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",s="texture2D",a="gl_FragColor",i="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:s,output:a,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function of(n,e,t="index"){const r=$t(e);return r.map((s,a)=>{const i=`int ${n[a]} = ${t} / ${s}`,o=a===r.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * ${s}`:`index -= ${n[a]} * ${s}`;return`${i}; ${o};`}).join("")}function rT(n,e,t="index"){const r=$t(e);return r.map((s,a)=>{const i=`int ${n[a]} = ${t} / outShapeStrides[${a}]`,o=a===r.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * outShapeStrides[${a}]`:`index -= ${n[a]} * outShapeStrides[${a}]`;return`${i}; ${o};`}).join("")}function nOe(n,e){const t=n.length,r=n.map(a=>`${e}[${a}]`),s=new Array(t-1);s[t-2]=r[t-1];for(let a=t-3;a>=0;--a)s[a]=`(${s[a+1]} * ${r[a+1]})`;return s}function rOe(n,e,t="index"){const r=n.map((a,i)=>i),s=nOe(r,e);return s.map((a,i)=>{const o=`int ${n[i]} = ${t} / ${s[i]}`,l=i===s.length-1?`int ${n[i+1]} = ${t} - ${n[i]} * ${s[i]}`:`index -= ${n[i]} * ${s[i]}`;return`${o}; ${l};`}).join("")}function L$(n){const e=$t(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function M$(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const l7=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:c7}=I8;function sOe(n,e,t){const r=[];if(n.forEach(g=>{const x=Fe(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${x>1?`[${x}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),t.enableShapeUniforms){const{uniformShape:y}=P$(t.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(y.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const s=r.join(`
`),a=n.map(g=>aOe(g,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),i=e.texShape,o=ia(),l=lOe(o);let c,d,h=dOe(o);return e.isPacked?(c=iOe(e.logicalShape,i,t.enableShapeUniforms),d=uOe(o)):(c=oOe(e.logicalShape,i,t.enableShapeUniforms),d=cOe(o)),t.packedInputs&&(h+=mOe),[h,l,d,s,c,a,t.userCode].join(`
`)}function nm(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return kOe(n,e);case 1:return IOe(n,e);case 2:return $Oe(n,e);case 3:return OOe(n,e);case 4:return FOe(n,e);case 5:return LOe(n);case 6:return MOe(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function u7(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return EOe(n);case 1:return _Oe(n,e);case 2:return AOe(n,e);case 3:return ROe(n,e);default:return DOe(n,e)}}function aOe(n,e,t=!1,r){let s="";t?s+=u7(n,r):s+=nm(n,r);const a=n.shapeInfo.logicalShape,i=e.logicalShape;return a.length<=i.length&&(t?s+=POe(n,e):s+=BOe(n,e)),s}function iOe(n,e,t){switch(n.length){case 0:return d7();case 1:return gOe(n,e,t);case 2:return NOe(n,e,t);case 3:return yOe(n,e,t);default:return vOe(n,e,t)}}function oOe(n,e,t){switch(n.length){case 0:return d7();case 1:return xOe(n,e,t);case 2:return COe(n,e,t);case 3:return bOe(n,e,t);case 4:return wOe(n,e,t);case 5:return SOe(n,e);case 6:return TOe(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function lOe(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function cOe(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function uOe(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function dOe(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${fOe}
    ${hOe}
    ${pOe}
  `}const fOe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hOe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,pOe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,mOe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function d7(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function gOe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function xOe(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function yOe(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(n[2]/2),a=s*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function bOe(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${rT(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=of(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function vOe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(n[n.length-1]/2),a=s*Math.ceil(n[n.length-2]/2);let i=a,o="",l="b, r, c";for(let c=2;c<n.length-1;c++)i*=n[n.length-c-1],o=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+o,l=`b${c}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${n.length}(${l});
    }
  `}function wOe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${rT(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=of(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function SOe(n,e){const t=of(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function TOe(n,e){const t=of(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function NOe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(on(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function COe(n,e,t){return on(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function lf(n){return`offset${n}`}function EOe(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ia();return`
    vec4 ${t}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function kOe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[s,a]=n.shapeInfo.texShape;if(s===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const i=lf(t);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${i});
      return sampleTexture(${t}, uv);
    }
  `;const[o,l]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${i});
      return sampleTexture(${t}, uv);
    }
  `}function _Oe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=n.shapeInfo.texShape,a=ia();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${t}, uv);
    }
  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${a.texture2D}(${t}, uv);
    }
  `}function IOe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${rm(n)}
      }
    `;const s=n.shapeInfo.texShape,a=s[0],i=s[1];if(i===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=lf(t);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);
        return sampleTexture(${t}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${o});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${i}, index + ${o});
      return sampleTexture(${t}, uv);
    }
  `}function AOe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape,i=a[0],o=a[1],l=ia();if(a!=null&&on(t,a))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],d=Math.ceil(t[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${d}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function $Oe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape;if(a!=null&&on(t,a)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=a[0],g=a[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:o}=tc(t),l=i;if(l.length<t.length){const p=sm(n,l),g=["row","col"];return`
      ${nm(p,e)}
      float ${s}(int row, int col) {
        return ${s}(${am(g,o)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${rm(n)}
      }
    `;const c=a[0],d=a[1],h=lf(r);return d===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${d}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${d}, index);
    return sampleTexture(${r}, uv);
  }
`}function ROe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(t[0]===1){const p=t.slice(1),g=[1,2],x=sm(n,p),y=["b","row","col"];return`
        ${u7(x,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${am(y,g)});
        }
      `}const o=ia();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=i[0],c=i[1],d=Math.ceil(t[2]/2),h=d*Math.ceil(t[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${d}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function OOe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[1]*t[2],i=t[2],{newShape:o,keptDims:l}=tc(t),c=o;if(c.length<t.length){const y=sm(n,c),b=["row","col","depth"];return`
        ${nm(y,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${am(b,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${i}, 1)));
        ${rm(n)}
      }
    `;const d=n.shapeInfo.texShape,h=d[0],p=d[1],g=n.shapeInfo.flatOffset;if(p===a&&g==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===i&&g==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const x=lf(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${x};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${i} + depth + ${x};
        vec2 uv = uvFromFlat(${h}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function DOe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=ia();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${t}, uv);
    }
  `;const a=n.shapeInfo.logicalShape,i=a.length,o=n.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],d=l[1],h=Math.ceil(a[i-1]/2);let p=h*Math.ceil(a[i-2]/2),g="int b, int row, int col",x=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let y=2;y<i-1;y++)g=`int b${y}, `+g,p*=a[i-y-1],x=`b${y} * ${p} + `+x;return`
    vec4 ${r}(${g}) {
      int index = ${x};
      int texR = index / ${d};
      int texC = index - texR * ${d};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}, ${c});
      return ${s.texture2D}(${t}, uv);
    }
  `}function FOe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,{newShape:l,keptDims:c}=tc(t);if(l.length<t.length){const T=sm(n,l),N=["row","col","depth","depth2"];return`
      ${nm(T,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${am(N,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${i}, ${a}, 1)));
        ${rm(n)}
      }
    `;const d=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,p=h[0],g=h[1],x=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(g===o&&d==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${x}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===a&&d==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const S=lf(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${x}
      ${y}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${S});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${S});
      return sampleTexture(${r}, uv);
    }
  `}function LOe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=e[4],a=e[3]*s,i=e[2]*a,o=e[1]*i,{newShape:l,keptDims:c}=tc(e);if(l.length<e.length){const y=sm(n,l),b=["row","col","depth","depth2","depth3"];return`
      ${nm(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${am(b,c)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${i}, ${a}, ${s})) +
          depth3;
        ${rm(n)}
      }
    `;const d=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,p=h[0],g=h[1];if(g===o&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(g===s&&d==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${t}, uv);
      }
    `;const x=lf(t);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} + depth * ${a} +
          depth2 * ${s} + depth3 + ${x};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${t}, uv);
    }
  `}function MOe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:s,keptDims:a}=tc(e);if(s.length<e.length){const b=sm(n,s),S=["row","col","depth","depth2","depth3","depth4"];return`
      ${nm(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${am(S,a)});
      }
    `}const i=e[5],o=e[4]*i,l=e[3]*o,c=e[2]*l,d=e[1]*c;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${d}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${rm(n)}
      }
    `;const h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,g=p[0],x=p[1];if(x===d&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${g}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(x===i&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${g}.0);
        return sampleTexture(${t}, uv);
      }
    `;const y=lf(t);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${d} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${i} + depth4 + ${y};
      vec2 uv = uvFromFlat(${g}, ${x}, index);
      return sampleTexture(${t}, uv);
    }
  `}function rm(n){const e=n.name,t=Fe(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function POe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),s="get"+r+"AtOutCoords",a=n.shapeInfo.logicalShape.length,i=e.logicalShape.length,o=c7(n.shapeInfo.logicalShape,e.logicalShape),l=Un(i),c=i-a;let d;const h=["x","y","z","w","u","v"];a===0?d="":i<2&&o.length>=1?d="coords = 0;":d=o.map(T=>`coords.${h[T+c]} = 0;`).join(`
`);let p="";i<2&&a>0?p="coords":p=n.shapeInfo.logicalShape.map((T,N)=>`coords.${h[N+c]}`).join(", ");let g="return outputValue;";const y=Fe(n.shapeInfo.logicalShape)===1,S=Fe(e.logicalShape)===1;if(a===1&&!y&&!S)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!S)i===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(o.length){const T=a-2,N=a-1;o.indexOf(T)>-1&&o.indexOf(N)>-1?g="return vec4(outputValue.x);":o.indexOf(T)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(N)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${d}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function BOe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),s="get"+r+"AtOutCoords",a=e.texShape,i=n.shapeInfo.texShape,o=n.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!n.shapeInfo.isUniform&&o===l&&n.shapeInfo.flatOffset==null&&on(i,a))return`
      float ${s}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const c=Un(l),d=c7(n.shapeInfo.logicalShape,e.logicalShape),h=l-o;let p;const g=["x","y","z","w","u","v"];o===0?p="":l<2&&d.length>=1?p="coords = 0;":p=d.map(y=>`coords.${g[y+h]} = 0;`).join(`
`);let x="";return l<2&&o>0?x="coords":x=n.shapeInfo.logicalShape.map((y,b)=>`coords.${g[b+h]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${x});
    }
  `}function Un(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function P$(n,e,t){const{newShape:r,keptDims:s}=tc(e),a=e.length,i=n&&a===3&&e[0]===1,o=i?e.slice(1):r,l=!n&&a>1&&!on(e,t)&&r.length<a||i;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function sm(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function am(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(n,e,t,r){const s=t.map((d,h)=>{const p={logicalShape:d.shape,texShape:d.isUniform?null:d.texData.texShape,isUniform:d.isUniform,isPacked:d.isUniform?!1:d.texData.isPacked,flatOffset:null};return d.texData!=null&&d.texData.slice!=null&&d.texData.slice.flatOffset>0&&(p.flatOffset=d.texData.slice.flatOffset),{name:e.variableNames[h],shapeInfo:p}}),a=s.map(d=>d.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=sOe(s,i,e),l=ORe(n.gl,o),c=n.createProgram(l);return Ce().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:i},f7(n,e,c)))}function f7(n,e,t){const r=[],s=[];let a,i,o,l=null,c=null;c=n.getUniformLocation(t,"NAN",!1),Ce().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(t,"INFINITY",!1));const d=!1;for(const h of e.variableNames){const p={name:h,uniform:n.getUniformLocation(t,h,d),offset:n.getUniformLocation(t,`offset${h}`,d)};e.enableShapeUniforms&&(p.shape=n.getUniformLocation(t,`${h}Shape`,d),p.texShape=n.getUniformLocation(t,`${h}TexShape`,d)),r.push(p)}if(e.enableShapeUniforms&&(a=n.getUniformLocation(t,"outShape",d),o=n.getUniformLocation(t,"outShapeStrides",d),i=n.getUniformLocation(t,"outTexShape",d)),e.customUniforms)for(const h of e.customUniforms)s.push(n.getUniformLocation(t,h.name,d));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:i}}function LM(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,r)=>{const s=t.logicalShape,a=e[r],i=a.shape;if(!on(s,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${i} must match`);if(t.isUniform&&a.isUniform)return;const o=t.texShape,l=a.isUniform?null:a.texData.texShape;if(!on(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function zOe(n,e,t,r,s){e.program.enableShapeUniforms||(LM(e.inShapeInfos,t),LM([e.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):n.setOutputMatrixTexture(a.texture,i[0],i[1]),n.setProgram(e.webGLProgram),n.bindVertexArray(e.webGLProgram.vao),Ce().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<t.length;++l){const c=t[l],{uniform:d,offset:h,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:x}=P$(e.program.packedInputs,c.shape,c.texData.texShape);switch(x.length){case 1:n.gl.uniform1iv(p,new Int32Array(x));break;case 2:n.gl.uniform2iv(p,new Int32Array(x));break;case 3:n.gl.uniform3iv(p,new Int32Array(x));break;case 4:n.gl.uniform4iv(p,new Int32Array(x));break}}if(g&&n.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),d!=null){if(c.isUniform){if(Fe(c.shape)<2)n.gl.uniform1f(d,c.uniformValues[0]);else{let x=c.uniformValues;x instanceof Float32Array||(x=new Float32Array(x)),n.gl.uniform1fv(d,x)}continue}c.texData.slice!=null&&h!=null&&n.gl.uniform1i(h,c.texData.slice.flatOffset),n.setInputMatrixTexture(c.texData.texture.texture,d,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:n.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=$t(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],d=e.customUniformLocations[l],h=s[l];if(c.type==="float")n.gl.uniform1fv(d,h);else if(c.type==="vec2")n.gl.uniform2fv(d,h);else if(c.type==="vec3")n.gl.uniform3fv(d,h);else if(c.type==="vec4")n.gl.uniform4fv(d,h);else if(c.type==="int")n.gl.uniform1iv(d,h);else if(c.type==="ivec2")n.gl.uniform2iv(d,h);else if(c.type==="ivec3")n.gl.uniform3iv(d,h);else if(c.type==="ivec4")n.gl.uniform4iv(d,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}n.executeProgram()}function UOe(n,e,t){let r="";e.concat(t).forEach(i=>{const o=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:d,keptDims:h}=P$(n.packedInputs,i.shape,l);let p="",g="",x="";if(d.length===1&&n.packedInputs){const I=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${I[0]>1}_${I[1]>1}`}else if(d.length===2&&!n.packedInputs)g=`${d[0]>1}_${d[1]>1}`;else if(d.length>2&&!n.packedInputs){const I=$t(d);x=`${I[0]===l[1]}_${I[I.length-1]===l[1]}`}const y=i.shape.length,b=d.length===2&&on(i.shape,l),S=Fe(i.shape)===1,T=Dd(i.shape,t.shape),N=!n.packedInputs&&y===t.shape.length&&on(l,t.texData.texShape),C=n.packedInputs||d.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${N}_${c?h:""}_${d.length}_${S}_${T}_${b}_${p}_${g}_${x}_${C}_${o}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${o}`}});const s=n.userCode;let a=n.constructor.name;return a+="_"+r+"_"+s+`${Ce().getNumber("WEBGL_VERSION")}`,a}function Hs(n){return Ce().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VOe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Cg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ia();this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?rT(["r","c","d"],e):of(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Cg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ia();this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?rT(["r","c","d"],e):of(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HOe{constructor(e){this.variableNames=["A"],this.outTexUsage=si.DOWNLOAD;const t=ia();this.outputShape=e,this.userCode=`
      ${l7}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=si.DOWNLOAD;const t=ia();this.outputShape=e,this.userCode=`
      ${l7}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qOe={R:0,G:1,B:2,A:3};class MM{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=ia();this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let o=0;o<r.length;o++){const l=r[o];i+=`
          if(offset == ${o}) {
            result = values[${qOe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?M$():L$(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${i}
        }
        ${s.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KOe{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ia();this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length);let s="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const l=i*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?M$():L$(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(n){const e=ia(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return RRe(n,t)}function YOe(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return MRe(n,e)}function QOe(n){const e=new Uint16Array([0,1,2,2,1,3]);return PRe(n,e)}function D1(n,e,t,r,s,a){jRe(e,t);const i=BRe(n),o=n.TEXTURE_2D;return gt(n,()=>n.bindTexture(o,i)),gt(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),gt(n,()=>n.texParameteri(o,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),gt(n,()=>n.texParameteri(o,n.TEXTURE_MIN_FILTER,n.NEAREST)),gt(n,()=>n.texParameteri(o,n.TEXTURE_MAG_FILTER,n.NEAREST)),Ce().getNumber("WEBGL_VERSION")===1?gt(n,()=>n.texImage2D(o,0,r,e,t,0,s,a,null)):gt(n,()=>n.texStorage2D(o,1,r,e,t)),gt(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:i,texShape:[t,e]}}function h7(n){return n.internalFormatFloat}function ZOe(n,e,t,r){const[s,a]=R1(e,t);return D1(n,s,a,h7(r),r.textureFormatFloat,n.FLOAT)}function p7(n){return n.internalFormatHalfFloat}function JOe(n,e,t,r){const[s,a]=R1(e,t);return D1(n,s,a,p7(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function m7(n){return n.downloadTextureFormat}function eDe(n,e,t,r){const[s,a]=R1(e,t);return D1(n,s,a,m7(r),n.RGBA,n.UNSIGNED_BYTE)}function g7(n){return n.internalFormatPackedFloat}function tDe(n,e,t,r){const[s,a]=tm(e,t);return D1(n,s,a,g7(r),n.RGBA,n.FLOAT)}function x7(n){return n.internalFormatPackedHalfFloat}function nDe(n,e,t,r){const[s,a]=tm(e,t);return D1(n,s,a,x7(r),n.RGBA,r.textureTypeHalfFloat)}function rDe(n,e,t){return gt(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),OM(n,e,"clipSpacePos",t,3,20,0)&&OM(n,e,"uv",t,2,20,12)}function sDe(n,e,t,r,s,a){gt(n,()=>n.bindTexture(n.TEXTURE_2D,e));let i,o,l;s instanceof Uint8Array?(i=new Uint8Array(t*r*4),o=n.UNSIGNED_BYTE,l=n.RGBA):(i=new Float32Array(t*r*4),o=n.FLOAT,l=a.internalFormatPackedFloat),i.set(s),Ce().getNumber("WEBGL_VERSION")===2?gt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,n.RGBA,o,i)):gt(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,t,r,0,n.RGBA,o,i)),gt(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function aDe(n,e,t){gt(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?Ce().getNumber("WEBGL_VERSION")===2?gt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):gt(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):Ce().getNumber("WEBGL_VERSION")===2?gt(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):gt(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),gt(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function iDe(n,e,t,r){const s=n.createBuffer();gt(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,s));const o=4*4*e*t;return gt(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)),gt(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),gt(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),s}function oDe(n,e,t){const r=n,s=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function lDe(n,e,t,r){const[s,a]=R1(e,t),i=4,o=new Uint8Array(CRe(e*t,i));return gt(n,()=>n.readPixels(0,0,s,a,r.downloadTextureFormat,n.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function cDe(n,e,t,r,s,a,i,o){const l=n,c=new Float32Array(ERe(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function uDe(n,e,t){const r=new Float32Array(e*t*4);return gt(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Ce().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,SRe(t,e)):this.gl=xo(t),e=this.gl,Ce().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>gt(a,()=>a.createVertexArray()),this.bindVertexArray=i=>gt(a,()=>a.bindVertexArray(i)),this.deleteVertexArray=i=>gt(a,()=>a.deleteVertexArray(i)),this.getVertexArray=()=>gt(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>gt(e,()=>a.createVertexArrayOES()),this.bindVertexArray=i=>gt(e,()=>a.bindVertexArrayOES(i)),this.deleteVertexArray=i=>gt(e,()=>a.deleteVertexArrayOES(i)),this.getVertexArray=()=>gt(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Ce().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Tb(this.gl,a),Di(this.gl,i))this.textureHalfFloatExtension=Tb(this.gl,i);else if(Ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Di(this.gl,s))this.colorBufferHalfFloatExtension=Tb(this.gl,s);else if(Ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Di(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Di(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=YOe(this.gl),this.indexBuffer=QOe(this.gl),this.framebuffer=zRe(this.gl),this.textureConfig=F$(this.gl,this.textureHalfFloatExtension)}get debug(){return Ce().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;gt(e,()=>e.finish()),gt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),gt(e,()=>e.deleteFramebuffer(this.framebuffer)),gt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),gt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),gt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),ZOe(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),JOe(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),eDe(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),aDe(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,s){this.throwIfDisposed(),sDe(this.gl,e,t,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),nDe(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),tDe(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(DM(this.gl,this.framebuffer),this.outputTexture=null),gt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>lDe(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,s,a,i){return cDe(this.gl,e,t,r,s,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return oDe(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const s=iDe(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(Ce().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,a=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=s.clientWaitSync(a,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},t=a}else Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>uDe(this.gl,t,r))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=XOe(t));const r=FRe(t);gt(t,()=>t.attachShader(r,this.vertexShader)),gt(t,()=>t.attachShader(r,e)),LRe(t,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&oE(t,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;gt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),rDe(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(gt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&oE(this.gl,this.program),gt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?VRe(this.gl,e,t):WRe(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),gt(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),HRe(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[s,a]=tm(t,r);this.setOutputMatrixTextureDriver(e,s,a)}setOutputMatrixWriteRegion(e,t,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,t)}setOutputPackedMatrixWriteRegion(e,t,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&oE(this.gl,this.program),Nb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}gt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),gt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Tb(this.gl,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await GE(()=>this.disposed||this.isQueryAvailable(e,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=dDe(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Ce().platform&&(r=Ce().platform.setTimeoutCustom.bind(Ce().platform)),GE(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),lE(this.gl,e,this.framebuffer),this.debug&&Nb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(lE(this.gl,this.outputTexture,this.framebuffer),this.debug&&Nb(this.gl)):DM(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const s=this.gl;lE(s,e,this.framebuffer),this.debug&&Nb(s),this.outputTexture=e,gt(s,()=>s.viewport(0,0,t,r)),gt(s,()=>s.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,s){this.throwIfDisposed(),gt(this.gl,()=>this.gl.scissor(e,t,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function dDe(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:fDe,bincountImpl:y7,bincountReduceImpl:hDe,bitwiseAndImpl:pDe,castImpl:mDe,ceilImpl:gDe,concatImpl:xDe,equalImpl:yDe,expImpl:bDe,expm1Impl:vDe,floorImpl:wDe,gatherNdImpl:SDe,gatherV2Impl:TDe,greaterImpl:NDe,greaterEqualImpl:CDe,lessImpl:EDe,lessEqualImpl:kDe,linSpaceImpl:_De,logImpl:IDe,maxImpl:ADe,maximumImpl:$De,minimumImpl:RDe,multiplyImpl:ODe,negImpl:DDe,notEqualImpl:FDe,prodImpl:LDe,raggedGatherImpl:MDe,raggedRangeImpl:PDe,raggedTensorToTensorImpl:BDe,rangeImpl:jDe,rsqrtImpl:zDe,scatterImpl:UDe,sigmoidImpl:VDe,simpleAbsImpl:b7,sliceImpl:WDe,sparseFillEmptyRowsImpl:HDe,sparseReshapeImpl:GDe,sparseSegmentReductionImpl:v7,sqrtImpl:qDe,staticRegexReplaceImpl:KDe,stridedSliceImpl:XDe,stringNGramsImpl:YDe,stringSplitImpl:QDe,stringToHashBucketFastImpl:ZDe,subImpl:JDe,tileImpl:e3e,topKImpl:t3e,transposeImpl:B$,uniqueImpl:n3e}=ake;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w7(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function Js(n,e){return e===1?[n]:w7(n,e)}function r3e(n,e){if(n===1)return"rc";let t="";for(let r=0;r<n;r++)t+=e[r],r<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s3e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Hs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=Js("rc",this.rank),r=Un(this.rank),s=this.getOutOfBoundsCondition(t),a=this.getSetup(t),i=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let a=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)a=`${e[e.length-1-i]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S7{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length);let r="";for(let s=0;s<4;s++){let a="thisRC = rc;";s%2===1&&(a+="thisRC.z += 1;"),s>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${a3e(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?M$():L$(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function a3e(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?rOe(["r","c","d"],"inputShape"):of(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i3e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,r){const s=BM(t,r),a=jM(e,s,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=PM(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let o;return s===Ss.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Ss.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Ss.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Ss.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Ss.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(e,t,r,s){if(this.freeTextures==null)return;const a=BM(r,s),i=jM(t,a,s);i in this.freeTextures||(this.freeTextures[i]=[]);const o=PM(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=Ce().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[i],d=c&&c.indexOf(e);if(d==null||d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[d]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function o3e(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function PM(n,e,t,r,s){const a=l3e(e,r);let i;if(s){const[l,c]=tm(n[0],n[1]);i=l*c}else{const[l,c]=R1(n[0],n[1]);i=l*c}const o=o3e(t,a);return i*o}function l3e(n,e){switch(n){case Ss.PACKED_2X2_FLOAT32:return g7(e);case Ss.PACKED_2X2_FLOAT16:return x7(e);case Ss.UNPACKED_FLOAT32:return h7(e);case Ss.UNPACKED_FLOAT16:return p7(e);case Ss.PACKED_4X1_UNSIGNED_BYTE:return m7(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function c3e(n){return Ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Ss.PACKED_2X2_FLOAT32:Ss.UNPACKED_FLOAT32:n?Ss.PACKED_2X2_FLOAT16:Ss.UNPACKED_FLOAT16}function BM(n,e){if(n===si.UPLOAD)return Ss.PACKED_2X2_FLOAT32;if(n===si.RENDER||n==null)return c3e(e);if(n===si.DOWNLOAD||n===si.PIXELS)return Ss.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function jM(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uo{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Vi="if (isnan(x)) return x;",u3e="return x;",zM="return abs(x);",d3e="return (x >= 0.0) ? x : (exp(x) - 1.0);",f3e=Vi+`
  return (x < 0.0) ? 0.0 : x;
`,h3e=Vi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,jc="return x;",p3e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e="return x;",g3e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,x3e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,y3e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,b3e="return 1.0 / (1.0 + exp(-1.0 * x));";class Gc{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length);const t=e.length,r=Js("rc",t),s=Un(t),a=r3e(t,r),i=r.slice(-2),o=t<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w3e=AS,S3e=1e-7,T3e=1e-4,kb={};function N3e(n){return n in kb||(kb[n]={}),kb[n]}const C3e=Ce().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),E3e=600;function k3e(){return Ce().global.screen==null?1024:Ce().global.screen.height*Ce().global.screen.width*window.devicePixelRatio*E3e/1024/1024}class sT extends qw{nextDataId(){return sT.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof dE)t=e;else{const r=xo(Ce().getNumber("WEBGL_VERSION"),e);t=new dE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=xo(Ce().getNumber("WEBGL_VERSION"));t=new dE(r),this.binaryCache=N3e(Ce().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new i3e(this.gpgpu),this.numMBBeforeWarning=k3e(),this.texData=new J_(this,to())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,s,a,i){const o=this.makeTensorInfo(t,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,a]},l.texShape=[s,a];const c=Cb(t),d=new MM(c,!1,i),h=this.runWebGLProgram(d,[o],r,[[s,a]]);return h.shape=t,l.texture=null,this.disposeIntermediateTensorInfo(o),h.dataId}write(e,t,r){if((Ce().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ce().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:t,dtype:r,values:e,usage:si.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,r,s,a){if(Ce().getBool("DEBUG")&&this.checkNumericalProblems(t),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:t,usage:si.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:a,slice:i,shape:o,isPacked:l}=t;if(i!=null){let p;l?p=new Gc(o,jc):p=new Uo(o,jc);const g=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:s}],s),x=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),x}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let d;c&&(d=Xs());let h;if(s==="complex64"){const p=this.readSync(a.real.dataId),g=this.readSync(a.imag.dataId);h=Yl(p,g)}else h=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Xs()-d),this.convertAndCacheOnCPU(e,h)}async read(e){if(this.pendingRead.has(e)){const x=this.pendingRead.get(e);return new Promise(y=>x.push(y))}const t=this.texData.get(e),{values:r,shape:s,slice:a,dtype:i,complexTensorInfos:o,isPacked:l}=t;if(a!=null){let x;l?x=new Gc(s,jc):x=new Uo(s,jc);const y=this.runWebGLProgram(x,[{dataId:e,shape:s,dtype:i}],i),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(Ce().getBool("DEBUG")&&!Ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,d;if(i!=="complex64"&&Ce().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);const x=this.texData.get(d.dataId);c=this.gpgpu.createBufferFromTexture(x.texture.texture,...Sb(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(i==="complex64"){const x=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),y=x[0],b=x[1];h=Yl(y,b)}else if(c==null)h=this.getValuesFromTexture(e);else{const x=Fe(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,x)}if(d!=null&&this.disposeIntermediateTensorInfo(d),c!=null){const x=this.gpgpu.gl;gt(x,()=>x.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,h),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(x=>x(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&to().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,t={}){const r=this.texData.get(e),{values:s,shape:a,slice:i,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let g;l?g=new Gc(a,jc):g=new Uo(a,jc);const x=this.runWebGLProgram(g,[{dataId:e,shape:a,dtype:o}],o),y=this.readToGPU(x,t);return this.disposeIntermediateTensorInfo(x),y}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const d=this.decode(e,t.customTexShape),h=to().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(s=>ql(s));return Yt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Yt(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const r=e[t];if(!ARe(r))throw Ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:s}=this.texData.get(e),a=Fe(t);if(Ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),x=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...Sb(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(p),x}const i=Ce().getBool("WEBGL_PACK")&&s===!0,o=i?Cb(t):t,l=i?new GOe(o):new HOe(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),d=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Zo(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=Zo(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=t,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);o.kernelMs=Z5(l),o.getExtraProfileInfo=()=>l.map((c,d)=>({name:i[d],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Xs(),endMs:null}}endTimer(e){return Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Xs(),e)}async getQueryTime(e){if(Ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:s,usage:a,isPacked:i,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),t!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(t,s,a,i)));const d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=C3e){return Ce().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Fe(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){ti("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return w3e(e.shape,t)}packedUnaryOp(e,t,r){const s=new Gc(e.shape,t),a=this.compileAndRun(s,[e],r);return to().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=b7(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,zM,e.dtype);const t=new Uo(e.shape,zM),r=this.compileAndRun(t,[e]);return to().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let s;if(t==="string"&&r!=null&&r.length>0&&zo(r[0])){const a=r.map(i=>Ho(i));s=this.write(a,e,t)}else s=this.write(r,e,t);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:t}}makeOutput(e,t,r){return to().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new v3e(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new s3e(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const r=[zh(e.shape),...Uh(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},a=[zh(t),...Uh(t)],i=new S7(a,r),o=!0,l=[r],c=this.runWebGLProgram(i,[s],e.dtype,l,o);return{dataId:c.dataId,shape:t,dtype:c.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:s,shape:a,dtype:i}=r;if(t!=null){const p=Fe(a),g=t[0]*t[1]*4;Z(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Cb(a);let l;s?l=new WOe(o):l=new VOe(o);const c=!0,d=[t??Sb(o)],h=this.runWebGLProgram(l,[{shape:o,dtype:i,dataId:e}],i,d,c,t);return{dtype:i,shape:a,dataId:h.dataId}}runWebGLProgram(e,t,r,s,a=!1,i){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Cg.DENSE){const S=i??Sb(e.outputShape);l.texShape=S.map(T=>T*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Fe(o.shape)===0)return l.values=fs(o.dtype,0),o;const c=[],d=t.map(S=>{if(S.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let T=this.texData.get(S.dataId);if(T.texture==null){if(!e.packedInputs&&Fe(S.shape)<=Ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:S.shape,texData:null,isUniform:!0,uniformValues:T.values};e.packedInputs&&(T.isPacked=!0,T.shape=S.shape)}if(this.uploadToGPU(S.dataId),!!T.isPacked!=!!e.packedInputs)S=T.isPacked?this.unpackTensor(S):this.packTensor(S),c.push(S),T=this.texData.get(S.dataId);else if(T.isPacked&&!rw(T.shape,S.shape)){const N=S,C=S.shape;S.shape=T.shape,S=this.packedReshape(S,C),c.push(S),T=this.texData.get(S.dataId),N.shape=C}return{shape:S.shape,texData:T,isUniform:!1}});this.uploadToGPU(o.dataId);const h={shape:o.shape,texData:l,isUniform:!1},p=UOe(e,d,h),g=this.getAndSaveBinary(p,()=>jOe(this.gpgpu,e,d,h)),x=this.activeTimers!=null;let y;x&&(y=this.startTimer()),Ce().get("ENGINE_COMPILE_ONLY")||zOe(this.gpgpu,g,d,h,s),c.forEach(S=>this.disposeIntermediateTensorInfo(S)),x&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const b=Ce().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const S=Xs();S-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=S)}if(!Ce().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const S=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),S}return o}compileAndRun(e,t,r,s,a=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,s,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Te(()=>{if(!Ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ce().getBool("DEBUG");Ce().set("DEBUG",!1);const t=this.abs(Rt(1e-8)).dataSync()[0];if(Ce().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?S3e:T3e}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:s,values:a,texture:i,usage:o,isPacked:l}=t;if(i!=null)return;const c=this.activeTimers!=null;let d;c&&(d=Xs());let h=t.texShape;if(h==null&&(h=KRe(r,l),t.texShape=h),a!=null){const p=Cb(r);let g,x=h[1],y=h[0];const b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!b)&&([x,y]=tm(h[0],h[1])),l?g=new KOe(p,b):g=new MM(p,b);const S=b?[y,x]:h,T=this.makeTensorInfo(S,s),N=this.texData.get(T.dataId);b?N.usage=si.PIXELS:N.usage=si.UPLOAD,N.texShape=S,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(T.dataId),x,y,a);const C=[[y,x]],F=this.runWebGLProgram(g,[T],s,C,!0),D=this.texData.get(F.dataId);t.texShape=D.texShape,t.isPacked=D.isPacked,t.usage=D.usage,Ce().get("ENGINE_COMPILE_ONLY")?this.disposeData(F.dataId):(t.texture=D.texture,t.values=null,this.texData.delete(F.dataId)),this.disposeIntermediateTensorInfo(T),c&&(this.uploadWaitMs+=Xs()-d)}else{const p=this.acquireTexture(h,o,s,l);t.texture=p}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:s}=r;return t!=null&&(r.values=_3e(t,s)),r.values}acquireTexture(e,t,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,s)}computeBytes(e,t){return e[0]*e[1]*cg(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(t),s(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await FA(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(o7(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:r,infLoc:s,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:l}=f7(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:s,height:a,width:i,channels:o}=e,l=to().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,t,r,a,i,o);return to().makeTensorFromDataId(c,t,r,l)}}sT.nextDataId=0;function _3e(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<t.length;++r)t[r]=Math.round(n[r]);return t}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */cI()&&dI("webgl",()=>new sT,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Ud{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=Gt(t,r),this.enableShapeUniforms=Hs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class im{constructor(e,t,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Gt(t,r);const a=this.outputShape.length;this.enableShapeUniforms=Hs(a);let i="";if(s)if(a===0||Fe(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Un(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Js("coords",a);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const I3e={kernelName:yp,backendName:"webgl",kernelFunc:ja};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iu(n){const{inputs:e,backend:t}=n,{real:r,imag:s}=e,a=t.makeTensorInfo(r.shape,"complex64"),i=t.texData.get(a.dataId),o=ja({inputs:{x:r},backend:t}),l=ja({inputs:{x:s},backend:t});return i.complexTensorInfos={real:o,imag:l},a}const A3e={kernelName:n2,backendName:"webgl",kernelFunc:Iu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7="return (a < 0.) ? b * a : a;",N7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function $3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{alpha:a}=r,i=t.makeTensorInfo([],"float32",nc(a,"float32")),o=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new im(N7,s.shape,i.shape):new Ud(T7,s.shape,i.shape),l=t.runWebGLProgram(o,[s,i],"float32");return t.disposeIntermediateTensorInfo(i),l}const R3e={kernelName:bx,backendName:"webgl",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7="return (a < 0.) ? b * a : a;",E7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function O3e(n){const{inputs:e,backend:t}=n,{x:r,alpha:s}=e,a=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new im(E7,r.shape,s.shape):new Ud(C7,r.shape,s.shape);return t.runWebGLProgram(a,[r,s],"float32")}const D3e={kernelName:Px,backendName:"webgl",kernelFunc:O3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const om="if (isnan(x)) return x;";function xn({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:r}){return({inputs:s,backend:a})=>{const{x:i}=s,o=a,l=r||i.dtype;if(o.shouldExecuteOnCPU([i])&&t!=null){const h=o.texData.get(i.dataId),p=t(h.values,l);return o.makeTensorInfo(i.shape,l,p)}const c=Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let d;return c?d=new Gc(i.shape,e):d=new Uo(i.shape,n),o.runWebGLProgram(d,[i],l)}}function $s({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:a}){return({inputs:i,backend:o})=>{const{a:l,b:c}=i,d=o;if(r&&l.dtype==="complex64"){const x=d.texData.get(l.dataId),y=d.texData.get(c.dataId),[b,S]=[[x.complexTensorInfos.real,y.complexTensorInfos.real],[x.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(N=>{const[C,I]=N,F={dataId:C.dataId,dtype:C.dtype,shape:l.shape},D={dataId:I.dataId,dtype:I.dtype,shape:c.shape},A=new Ud(n,l.shape,c.shape);return d.runWebGLProgram(A,[F,D],ya(C.dtype,I.dtype))}),T=Iu({inputs:{real:b,imag:S},backend:d});return d.disposeIntermediateTensorInfo(b),d.disposeIntermediateTensorInfo(S),T}const h=a||ya(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||d.shouldExecuteOnCPU([l,c]))&&s!=null){const x=d.texData.get(l.dataId).values,y=d.texData.get(c.dataId).values,b=l.dtype==="string"?Ql(x):x,S=l.dtype==="string"?Ql(y):y,[T,N]=s(l.shape,c.shape,b,S,h),C=d.makeTensorInfo(N,h),I=d.texData.get(C.dataId);return I.values=T,C}const p=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new im(e,l.shape,c.shape,t):g=new Ud(n,l.shape,c.shape),d.runWebGLProgram(g,[l,c],h)}}function Eg(n,e=!1){if(n==="linear")return e?m3e:u3e;if(n==="relu")return e?x3e:f3e;if(n==="elu")return e?g3e:d3e;if(n==="relu6")return e?y3e:h3e;if(n==="prelu")return e?E7:C7;if(n==="leakyrelu")return e?N7:T7;if(n==="sigmoid")return e?b3e:p3e;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k7{constructor(e,t,r,s=!1,a=!1,i=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Hs(this.outputShape.length);const d=s?e[1]:e[2],h=Math.ceil(d/2),p=s?"i * 2, rc.y":"rc.y, i * 2",g=a?"rc.z, i * 2":"i * 2, rc.z",x=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",S="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,S="result = activation(result);");const T=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let N="rc.x",C="rc.x";e[0]<t[0]?N=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(C=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${N};
        int batchB = ${C};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${x[0]} * ${y[0]});
          result += (${x[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${T}

        ${S}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UM={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class VM{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Gt(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WM="return a * b;";function z$(n){const{inputs:e,backend:t}=n,{a:r,b:s}=e,a=ya(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=t.texData.get(r.dataId),l=t.texData.get(s.dataId),c=new VM(UM.REAL,r.shape,s.shape),d=new VM(UM.IMAG,r.shape,s.shape),h=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],p=t.runWebGLProgram(c,h,"float32"),g=t.runWebGLProgram(d,h,"float32"),x=Iu({inputs:{real:p,imag:g},backend:t});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),x}if(t.shouldExecuteOnCPU([r,s])){const o=t.texData.get(r.dataId),l=t.texData.get(s.dataId),[c,d]=ODe(r.shape,s.shape,o.values,l.values,a),h=t.makeTensorInfo(d,a),p=t.texData.get(h.dataId);return p.values=c,h}let i;return Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new im(WM,r.shape,s.shape):i=new Ud(WM,r.shape,s.shape),t.runWebGLProgram(i,[r,s],a)}const F3e={kernelName:kp,backendName:"webgl",kernelFunc:z$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(n,e,t){const r=[zh(n.shape),...Uh(n.shape)],s={dtype:n.dtype,shape:r,dataId:n.dataId},a=[zh(e),...Uh(e)],i=new S7(a,r),o=!0,l=[r],c=t.runWebGLProgram(i,[s],n.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ht(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{shape:a}=r,i=t,o=Fe(s.shape),l=tI(a,o),c=Fe(l);Z(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const d=i.texData.get(s.dataId);return d.isPacked&&!rw(s.shape,l)&&!(d.texture!==null&&rw(d.shape,l))?L3e(s,l,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const M3e={kernelName:jx,backendName:"webgl",kernelFunc:ht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HM{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:i}=e;this.outputShape=[s,i];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(t!=null){const h=1/t;c=`sumValue += dot(values * ${_d(h)?h.toPrecision(2):h}, ones);`}let d="";a%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P3e{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:i}=e;this.outputShape=[s,i];let o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");const d=Math.floor(r/4)*4,h=r%4;let p=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";t==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):t==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let x="";a%r>0&&(x=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${x}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${d};
        if (${h===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],r=US(t);e.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return e}function uf(n,e,t,r){const s=B3e(n.shape);let a=n;for(let i=0;i<s.length;i++){const{inSize:o,windowSize:l,outSize:c}=s[i];let d,h;t==="mean"?d=i===0?new HM({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c},o):new HM({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c}):d=new P3e({windowSize:l,inSize:o,batchSize:n.shape[0],outSize:c},t),h=a,a=r.runWebGLProgram(d,[a],e),h.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(h)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j3e{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[t[i]];this.outputShape=r,this.rank=r.length;const s=Un(this.rank),a=z3e(t);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function z3e(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<n.length;s++)r[n[s]]=t[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U3e{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let d=0;d<r.length;d++)r[d]=e[t[d]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Un(this.rank),a=w7("rc",this.rank),i=new Array(this.rank);for(let d=0;d<t.length;d++)i[t[d]]=a[d];const o=`vec2(${i.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aT(n,e,t){const r=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U3e(n.shape,e):new j3e(n.shape,e);return t.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(n,e,t,r){const s=e,a=n.shape.length,i=nn(s,n.shape);let o=i;const l=yr(o,a),c=l!=null;let d=n;c&&(d=aT(n,l,r),o=Rr(o.length,a)),Is("sum",o,a);const[h,p]=ms(d.shape,o);let g=h;t&&(g=$r(h,i));const x=Fe(p),b=Fe(n.shape)/x,S=ht({inputs:{x:d},attrs:{shape:[b,x]},backend:r}),T=nS(n.dtype),N=uf(S,T,"sum",r),C=ht({inputs:{x:N},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(S),r.disposeIntermediateTensorInfo(N),c&&r.disposeIntermediateTensorInfo(d),C}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iT(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r;return V3e(s,a,i,t)}const W3e={kernelName:Gx,backendName:"webgl",kernelFunc:iT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ra(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{perm:a}=r,i=t,o=s.shape.length,l=new Array(o);for(let d=0;d<l.length;d++)l[d]=s.shape[a[d]];let c;if(i.shouldExecuteOnCPU([s])){const h=i.texData.get(s.dataId).values,p=B$(h,s.shape,s.dtype,a,l);c=i.makeTensorInfo(l,s.dtype);const g=i.texData.get(c.dataId);g.values=p}else c=aT(s,a,i);return c}const H3e={kernelName:bd,backendName:"webgl",kernelFunc:ra};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7=1e3;function sw({a:n,b:e,transposeA:t,transposeB:r,backend:s,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const c=n.shape.length,d=e.shape.length,h=t?n.shape[c-2]:n.shape[c-1],p=r?e.shape[d-1]:e.shape[d-2],g=t?n.shape[c-1]:n.shape[c-2],x=r?e.shape[d-2]:e.shape[d-1],y=n.shape.slice(0,-2),b=e.shape.slice(0,-2),S=Fe(y),T=Fe(b),C=Gt(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,x]);Z(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${r} must match.`);const I=t?[S,h,g]:[S,g,h],F=r?[T,x,p]:[T,p,x],D=ht({inputs:{x:n},backend:s,attrs:{shape:I}}),A=ht({inputs:{x:e},backend:s,attrs:{shape:F}}),_=[D,A],k=Math.max(S,T),O=t?D.shape[1]:D.shape[2],P=a!=null,W=i!=null,K=l==="leakyrelu",q=l!=null?Eg(l,!0):null,V=P||W||K||q!=null;let X;if((g===1||x===1)&&O>_7&&V===!1){let Y=D,j=A;t&&(Y=ra({inputs:{x:D},backend:s,attrs:{perm:[0,2,1]}}),_.push(Y)),r&&(j=ra({inputs:{x:A},backend:s,attrs:{perm:[0,2,1]}}),_.push(j));const J=x!==1,M=x===1;let z=Y;J&&(z=ht({inputs:{x:Y},backend:s,attrs:{shape:[k,O,1]}}),_.push(z));const G=x===1?2:1;let U=j;M&&(U=ht({inputs:{x:j},backend:s,attrs:{shape:[k,1,O]}}),_.push(U));const se=z$({inputs:{a:z,b:U},backend:s});X=iT({inputs:{x:se},backend:s,attrs:{axis:G,keepDims:!0}}),_.push(se)}else{const Y=ya(n.dtype,e.dtype),j=new k7(I,F,[k,g,x],t,r,P,q,W,K),J=[D,A];if(a!=null&&J.push(a),W&&J.push(i),K){const M=s.makeTensorInfo([],"float32",nc(o,"float32"));J.push(M),_.push(M)}X=s.runWebGLProgram(j,J,Y)}const Q=ht({inputs:{x:X},backend:s,attrs:{shape:C}});_.push(X);for(const Y of _)s.disposeIntermediateTensorInfo(Y);return Q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3e(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:d,leakyreluAlpha:h}=r;return sw({a:s,b:a,transposeA:l,transposeB:c,backend:t,bias:i,preluActivationWeights:o,leakyreluAlpha:h,activation:d})}const q3e={kernelName:ug,backendName:"webgl",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GM="return abs(x);";function K3e(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=t.texData.get(r.dataId),i=b7(a.values);return t.makeTensorInfo(r.shape,r.dtype,i)}let s;return Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Gc(r.shape,GM):s=new Uo(r.shape,GM),t.runWebGLProgram(s,[r],r.dtype)}const X3e={kernelName:Qg,backendName:"webgl",kernelFunc:K3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y3e=Vi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Q3e=xn({opSnippet:Y3e}),Z3e={kernelName:Zh,backendName:"webgl",kernelFunc:Q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J3e=Vi+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,e4e=xn({opSnippet:J3e}),t4e={kernelName:Jh,backendName:"webgl",kernelFunc:e4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qM="return a + b;",n4e=$s({opSnippet:qM,packedOpSnippet:qM,supportsComplex:!0,cpuKernelImpl:fDe}),r4e={kernelName:Jd,backendName:"webgl",kernelFunc:n4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s4e{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((a,i)=>`T${i}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a4e{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((a,i)=>`T${i}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(n){const{inputs:e,backend:t}=n,r=e;if(r.length===1)return ja({inputs:{x:r[0]},backend:t});if(r.length>Ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Yb({inputs:r.slice(0,l),backend:t}),d=Yb({inputs:r.slice(l),backend:t});return Yb({inputs:[c,d],backend:t})}const s=r.map(l=>l.dtype).reduce((l,c)=>ya(l,c)),a=r.map(l=>l.shape),o=Ce().getBool("WEBGL_PACK")?new a4e(r[0].shape,a):new s4e(r[0].shape,a);return t.runWebGLProgram(o,r,s)}const i4e={kernelName:Zg,backendName:"webgl",kernelFunc:Yb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=nn(a,s.shape);let c=l;const d=yr(c,o);let h=s;d!=null&&(h=ra({inputs:{x:s},backend:t,attrs:{perm:d}}),c=Rr(c.length,o)),Is("all",c,o);const[p,g]=ms(h.shape,c),x=Fe(g),y=ht({inputs:{x:h},backend:t,attrs:{shape:[-1,x]}}),b=uf(y,y.dtype,"all",t);let S;if(i){const T=$r(p,l);S=ht({inputs:{x:b},backend:t,attrs:{shape:T}})}else S=ht({inputs:{x:b},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(b),d!=null&&t.disposeIntermediateTensorInfo(h),S}const l4e={kernelName:Yw,backendName:"webgl",kernelFunc:o4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=nn(a,s.shape);let c=l;const d=yr(c,o);let h=s;d!=null&&(h=ra({inputs:{x:s},backend:t,attrs:{perm:d}}),c=Rr(c.length,o)),Is("any",c,o);const[p,g]=ms(h.shape,c),x=Fe(g),y=ht({inputs:{x:h},backend:t,attrs:{shape:[-1,x]}}),b=uf(y,y.dtype,"any",t);let S;if(i){const T=$r(p,l);S=ht({inputs:{x:b},backend:t,attrs:{shape:T}})}else S=ht({inputs:{x:b},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(b),d!=null&&t.disposeIntermediateTensorInfo(h),S}const u4e={kernelName:Qw,backendName:"webgl",kernelFunc:c4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d4e{constructor(e,t,r){this.variableNames=["A"];const{windowSize:s,batchSize:a,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const o=t==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f4e{constructor(e,t,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Z(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=Un(l),d=Js("coords",l);let h,p;if(i===1){p=l+1;const A=Un(p);h=`
        ${A} sourceLocR = ${A}(${d.join()}, 0);
        ++${d[l-1]};
        ${A} sourceLocG = ${A}(${d.join()}, 0);
        ++${d[l-2]};
        ${A} sourceLocA = ${A}(${d.join()}, 0);
        --${d[l-1]};
        ${A} sourceLocB = ${A}(${d.join()}, 0);
        --${d[l-2]};`}else p=l,h=`
        ${c} sourceLocR = coords;
        ++${d[l-1]};
        ${c} sourceLocG = coords;
        ++${d[l-2]};
        ${c} sourceLocA = coords;
        --${d[l-1]};
        ${c} sourceLocB = coords;
        --${d[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),x="."+g[p-1],y=g.map(A=>"int "+A),b=Js("sourceLocR",p-1).concat("inIdx.r"),S=Js("sourceLocG",p-1).concat("inIdx.g"),T=Js("sourceLocB",p-1).concat("inIdx.b"),N=Js("sourceLocA",p-1).concat("inIdx.a"),C=r==="max"?"greaterThan":"lessThan",I=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${T.join()}),
                             getBestIndicesAChannel(${N.join()})));`,F=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${S.join()}) : 0.,
            hasNextRow ? getAChannel(${T.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${N.join()}) : 0.)`,D=s?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${D}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${d[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${d[l-2]} < ${o[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${x}, sourceLocG${x},
          sourceLocB${x}, sourceLocA${x}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${F};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${I}
          vec4 candidate = ${F};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${C}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7(n,e,t,r=null){let s=e.shape[0],a=e.shape[1];r!=null&&(s=r.shape[0],a=r.shape[1]);const i=US(a),o={windowSize:i,inSize:a,batchSize:s,outSize:Math.ceil(a/i)},l=new d4e(o,t,r==null),c=[e];r!=null&&c.push(r);const d=n.runWebGLProgram(l,c,"int32");if(d.shape[1]===1)return d;const h=I7(n,e,t,d);return n.disposeIntermediateTensorInfo(d),h}function A7(n,e,t,r=null){const s=r!=null?r.shape:e.shape,a=s[s.length-1],i=US(a),o=new f4e(s,i,t,r==null),l=r==null?[e]:[e,r],c=n.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const d=A7(n,e,t,c);return n.disposeIntermediateTensorInfo(c),d}return c}function $7(n,e,t,r){const s=[t];if(Is("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!Ce().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],i=n.texData.get(e.dataId),o=i!==null&&i.isPacked;let l=e;o&&(l=n.unpackTensor(e),a.push(l));const[c,d]=ms(l.shape,s),h=Fe(d),p=ht({inputs:{x:l},backend:n,attrs:{shape:[-1,h]}});a.push(p);const g=I7(n,p,r);a.push(g);const x=ht({inputs:{x:g},backend:n,attrs:{shape:c}});return a.forEach(y=>n.disposeIntermediateTensorInfo(y)),x}return A7(n,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;let i=nn(a,s.shape);const o=yr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=ra({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),i=Rr(i.length,l.shape.length)),Is("argMax",[i[0]],l.shape.length);const d=$7(t,l,i[0],"max");return c.forEach(h=>t.disposeIntermediateTensorInfo(h)),d}const p4e={kernelName:Jg,backendName:"webgl",kernelFunc:h4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;let i=nn(a,s.shape);const o=yr(i,s.shape.length);let l=s;const c=[];o!=null&&(l=ra({inputs:{x:s},backend:t,attrs:{perm:o}}),c.push(l),i=Rr(i.length,l.shape.length)),Is("argMin",[i[0]],l.shape.length);const d=$7(t,l,i[0],"min");return c.forEach(h=>t.disposeIntermediateTensorInfo(h)),d}const g4e={kernelName:ex,backendName:"webgl",kernelFunc:m4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x4e=Vi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,y4e=xn({opSnippet:x4e}),b4e={kernelName:ep,backendName:"webgl",kernelFunc:y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e=Vi+"return log(x + sqrt(x * x + 1.0));",w4e=xn({opSnippet:v4e}),S4e={kernelName:tp,backendName:"webgl",kernelFunc:w4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e=Vi+`
  return atan(x);
`,N4e=xn({opSnippet:T4e}),C4e={kernelName:np,backendName:"webgl",kernelFunc:N4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e=j$+`
  return atan(a, b);
`,k4e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+cf+`
  return result;
`,_4e=$s({opSnippet:E4e,packedOpSnippet:k4e}),I4e={kernelName:sp,backendName:"webgl",kernelFunc:_4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e=Vi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,$4e=xn({opSnippet:A4e}),R4e={kernelName:rp,backendName:"webgl",kernelFunc:$4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kg{constructor(e,t,r,s=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,x=e.padInfo.left;this.outputShape=e.outShape;const y=t==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,S=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let T="0.0";if(y||(T="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${g}, ${x});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${d}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?a?b:S:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const N="max";let C=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(C="avgValue / max(count, 1.0)");const I=Math.floor(i/4)*4,F=i%4,D=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${N}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${g}, ${x});
      const float initializationValue = ${T};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${T});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${I}; wC += 4) {
            int xC = xCCorner + wC * ${d};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              getValue(batch, xR, xC + 3 * ${d}, d)
            );

            ${D}
          }

          int xC = xCCorner + ${I};
          if (${F===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${D}
          } else if (${F===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              initializationValue,
              initializationValue
            );

            ${D}
          } else if (${F===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${d}, d),
              getValue(batch, xR, xC + 2 * ${d}, d),
              initializationValue
            );

            ${D}
          }
        }
        setOutput(${C});
      }
    `}}class U${constructor(e,t,r,s=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,d=e.dilationDepth,h=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,x=e.effectiveFilterHeight,y=e.effectiveFilterWidth,b=e.padInfo.front,S=e.padInfo.top,T=e.padInfo.left;this.outputShape=e.outShape;const N=t==="avg";let C="0.0";if(N||(C="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${b}, ${S}, ${T});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${d}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${x};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${x} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const I="max";let F=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(F="avgValue / max(count, 1.0)");const D=Math.floor(i/4)*4,A=i%4,_=`
      if (${N}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${I}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${b}, ${S}, ${T});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${d}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${x};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${D}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${_}
            }

            int xC = xCCorner + ${D};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${_}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${_}
            }
          }
        }
        setOutput(${F});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;O1(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;Z(_s(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=zi(s.shape,a,i,c,o,l);if(d.filterWidth===1&&d.filterHeight===1&&on(d.inShape,d.outShape))return ja({inputs:{x:s},backend:t});const h=new kg(d,"avg",!1);return t.runWebGLProgram(h,[s],"float32")}const D4e={kernelName:tx,backendName:"webgl",kernelFunc:O4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:c}=r,d=[1,1,1],h=rc(s.shape,a,i,d,o,l,c),p=new U$(h,"avg",!1);return t.runWebGLProgram(p,[s],"float32")}const L4e={kernelName:nx,backendName:"webgl",kernelFunc:F4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M4e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,h=c-1-e.padInfo.left,p=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${d}, ${h});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class P4e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,x=h-1-e.padInfo.front,y=p-1-e.padInfo.top,b=g-1-e.padInfo.left,S=1/(t*r*s);this.userCode=`
      const ivec3 pads = ivec3(${x}, ${y}, ${b});
      const float avgMultiplier = float(${S});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${d}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:d}=r,h=[1,1,1],p=rc(i.shape,o,l,h,c,d),g=new P4e(p);return t.runWebGLProgram(g,[s],i.dtype)}const j4e={kernelName:Jw,backendName:"webgl",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,i=a;O1([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,d=zi(i.shape,o,l,1,c),h=new M4e(d);return t.runWebGLProgram(h,[s],i.dtype)}const U4e={kernelName:Zw,backendName:"webgl",kernelFunc:z4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4e(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;return sw({a:s,b:a,transposeA:i,transposeB:o,backend:t})}const W4e={kernelName:rx,backendName:"webgl",kernelFunc:V4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H4e{constructor(e,t,r,s,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Gt(e,t),Gt(e,r);let o="0.0";s!=null&&(Gt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";a!=null&&(Gt(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G4e{constructor(e,t,r,s,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Gt(e,t),Gt(e,r);let o="vec4(0.0)";s!=null&&(Gt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(Gt(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e=({inputs:n,backend:e,attrs:t})=>{const{x:r,mean:s,variance:a,offset:i,scale:o}=n;Z(s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;l==null&&(l=.001);const c=[r,s,a];let d=null;i!=null&&(d=i.shape,c.push(i));let h=null;o!=null&&(h=o.shape,c.push(o));const p=Ce().getBool("WEBGL_PACK_NORMALIZATION")?new G4e(r.shape,s.shape,a.shape,d,h,l):new H4e(r.shape,s.shape,a.shape,d,h,l);return e.runWebGLProgram(p,c,c[0].dtype)},K4e={kernelName:gx,backendName:"webgl",kernelFunc:q4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X4e{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Un(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=Y4e(this.rank);let s;const a=e.map((i,o)=>`sourceLoc.${Mk[o]} = start[${o}] + coords.${Mk[o]};`);s=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const Mk=["x","y","z","w","u","v"];function Y4e(n){if(n===1)return"sourceLoc";if(n<=6)return Mk.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q4e{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Un(this.rank),r=Js("coords",this.rank),s=Js("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,i=`getChannel(getSource(${s.join()}), ${a})`,o=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${i};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((d,h)=>`start[${h}]`).join()});`:e.map((d,h)=>`${s[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z4e(n,e,t,r){const s=r.texData.get(n.dataId),a=r.makeTensorInfo(t,n.dtype),i=r.texData.get(a.dataId);Object.assign(i,s),i.refCount=1,i.shape=t,i.dtype=n.dtype;let o=OA(e,$t(n.shape));s.slice&&(o+=s.slice.flatOffset),i.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||n.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),a}function lm(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,size:i}=r,[o,l]=zS(s,a,i);if(AA(s,o,l),Fe(l)===0)return t.makeTensorInfo(l,s.dtype,[]);if(t.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=t.texData.get(s.dataId),p=WDe(h.values,o,l,s.shape,s.dtype);return t.makeTensorInfo(l,s.dtype,p)}const{isPacked:c}=t.texData.get(s.dataId),d=RA(s.shape,o,l);if(c||!d){const h=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Q4e(l):new X4e(l),p=[o];return t.runWebGLProgram(h,[s],s.dtype,p)}return t.uploadToGPU(s.dataId),Z4e(s,o,l,t)}const J4e={kernelName:Hx,backendName:"webgl",kernelFunc:lm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,crops:i}=r;Z(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((T,N)=>T*N),l=v1(s.shape,a,o),c=w1(l.length,a.length),d=S1(s.shape,a,o),h=BA(i,a.length),p=jA(d,i,a.length),g=[],x=ht({inputs:{x:s},backend:t,attrs:{shape:l}}),y=ra({inputs:{x},backend:t,attrs:{perm:c}}),b=ht({inputs:{x:y},backend:t,attrs:{shape:d}}),S=lm({inputs:{x:b},backend:t,attrs:{begin:h,size:p}});return g.push(x),g.push(y),g.push(b),g.forEach(T=>t.disposeIntermediateTensorInfo(T)),S},tFe={kernelName:sx,backendName:"webgl",kernelFunc:eFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:i}=r,o=t.readSync(s.dataId),l=t.readSync(a.dataId),c=y7(o,l,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,c)}const rFe={kernelName:e2,backendName:"webgl",kernelFunc:nFe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sFe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,aFe=`
  return float(int(a.r) & int(b.r));
`;function iFe(n){const{inputs:e,backend:t}=n,{a:r,b:s}=e,a=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=Ce().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([r,s])||i===1){const l=t.texData.get(r.dataId).values,c=t.texData.get(s.dataId).values,[d,h]=pDe(r.shape,s.shape,l,c,r.dtype),p=t.makeTensorInfo(h,r.dtype),g=t.texData.get(p.dataId);return g.values=d,p}let o;return a?o=new im(sFe,r.shape,s.shape,!1):o=new Ud(aFe,r.shape,s.shape),t.runWebGLProgram(o,[r,s],r.dtype)}const oFe={kernelName:ax,backendName:"webgl",kernelFunc:iFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(n){const{inputs:e,backend:t}=n,{s0:r,s1:s}=e,a=t.readSync(r.dataId),i=t.readSync(s.dataId),o=Gt(Array.from(a),Array.from(i));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const cFe={kernelName:t2,backendName:"webgl",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe="return float(a != b);",R7=$s({opSnippet:uFe,cpuKernelImpl:FDe,dtype:"bool"}),dFe={kernelName:Ox,backendName:"webgl",kernelFunc:R7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.texData.get(r.dataId);return ja({inputs:{x:s.complexTensorInfos.real},backend:t})}const fFe={kernelName:F2,backendName:"webgl",kernelFunc:F1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe="return float(int(x));";function pFe(n,e){const t=new Uo(n.shape,hFe),r=e.runWebGLProgram(t,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pk(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return ja({inputs:{x:s},backend:t});const i=Pr(s.shape),o=Pk({inputs:{x:s},backend:t,attrs:{dtype:"float32"}}),l=Iu({inputs:{real:o,imag:i},backend:t});return i.dispose(),t.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const i=F1({inputs:{input:s},backend:t}),o=Pk({inputs:{x:i},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(i),o}if(!nI(s.dtype,a)){const i=ja({inputs:{x:s},backend:t});return{dataId:i.dataId,shape:i.shape,dtype:a}}if(t.shouldExecuteOnCPU([s])){const i=t.texData.get(s.dataId).values,[o,l,c]=mDe(i,s.shape,s.dtype,a);return t.makeTensorInfo(o,l,c)}if(a==="int32")return pFe(s,t);if(a==="bool"){const i=t.makeTensorInfo([],"bool",fs("bool",1)),l=R7({inputs:{a:s,b:i},backend:t});return t.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${a}`)}const mFe={kernelName:ap,backendName:"webgl",kernelFunc:Pk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KM="return ceil(x);",gFe=xn({opSnippet:KM,packedOpSnippet:KM,cpuKernelImpl:gDe}),xFe={kernelName:ip,backendName:"webgl",kernelFunc:gFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yFe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{clipValueMin:a,clipValueMax:i}=r;let o;Ce().getBool("WEBGL_PACK_CLIP")?o=new bFe(s.shape):o=new yFe(s.shape);const l=[[a],[i]];return t.runWebGLProgram(o,[s],s.dtype,l)}const wFe={kernelName:op,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SFe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XM(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function TFe(n){const{inputs:e,backend:t}=n,{x:r}=e,s=t.texData.get(r.dataId),a=new SFe(r.shape),i=[XM(r,s.complexTensorInfos.real),XM(r,s.complexTensorInfos.imag)];return t.runWebGLProgram(a,i,i[0].dtype)}const NFe={kernelName:ix,backendName:"webgl",kernelFunc:TFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CFe{constructor(e){this.outputShape=[],this.outputShape=qo(e,1),this.variableNames=e.map((i,o)=>`T${o}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<t.length;i++){const o=t[i-1];r.push(`else if (yC < ${t[i]}) setOutput(getT${i}(yR, yC-${o}));`)}const s=t.length,a=t[t.length-1];r.push(`else setOutput(getT${s}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EFe{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=qo(e,t);const r=this.outputShape,s=r.length,a=Un(s),i=Js("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((y,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][t];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][t];const c=o[t],d=o.slice(-2),h=o.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${d.join()}));
        }`;for(let y=1;y<l.length;y++){const b=l[y-1];p+=`
        if (${c} < ${l[y]}  && ${c} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${_b(o,c,b)}),
            vec2(${_b(d,c,b)}));
        }`}const g=l.length,x=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${_b(o,c,x)}),
          vec2(${_b(d,c,x)}));`,this.userCode=`
      float getValue(${o.map(y=>"int "+y)}) {
        ${p}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[s-1]} = ${i[s-1]} + 1;
        if (${i[s-1]} < ${r[s-1]}) {
          result.g = getValue(${i});
        }

        ${i[s-2]} = ${i[s-2]} + 1;
        if (${i[s-2]} < ${r[s-2]}) {
          result.a = getValue(${i});
        }

        ${i[s-1]} = ${i[s-1]} - 1;
        if (${i[s-2]} < ${r[s-2]} &&
            ${i[s-1]} < ${r[s-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function _b(n,e,t){const r=n.indexOf(e);return n.map((a,i)=>i===r?`${a} - ${t}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oT(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.texData.get(r.dataId);return ja({inputs:{x:s.complexTensorInfos.imag},backend:t})}const kFe={kernelName:w2,backendName:"webgl",kernelFunc:oT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0(n,e,t){const r=n[0].dtype;if(r==="complex64"){const g=n.map(T=>F1({inputs:{input:T},backend:t})),x=n.map(T=>oT({inputs:{input:T},backend:t})),y=O0(g,e,t),b=O0(x,e,t),S=Iu({inputs:{real:y,imag:b},backend:t});return g.forEach(T=>t.disposeIntermediateTensorInfo(T)),x.forEach(T=>t.disposeIntermediateTensorInfo(T)),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(b),S}let s=t.shouldExecuteOnCPU(n);if(r==="string"&&(s=!0),s){const g=n.map(C=>{const F=[-1,Fe(C.shape.slice(e))];return ht({inputs:{x:C},backend:t,attrs:{shape:F}})}),x=g.map(C=>({vals:t.readSync(C.dataId),shape:C.shape})),y=qo(g.map(C=>C.shape),1),b=g[0].shape[0]===1,S=xDe(x,y,r,b),T=qo(n.map(C=>C.shape),e),N=t.makeTensorInfo(T,r,S);return g.forEach(C=>t.disposeIntermediateTensorInfo(C)),N}const a=n.filter(g=>Fe(g.shape)>0),i=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const g=i?new Uo(n[0].shape,jc):new Gc(n[0].shape,jc);return t.runWebGLProgram(g,n,r)}const o=Ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const g=[];for(let y=0;y<a.length;y+=o){const b=a.slice(y,y+o);g.push(O0(b,e,t))}const x=O0(g,e,t);for(const y of g)t.disposeIntermediateTensorInfo(y);return x}if(i){const g=new EFe(a.map(x=>x.shape),e);return t.runWebGLProgram(g,a,r)}const{tensors2D:l,outShape:c}=_Fe(a,e,t),d=new CFe(l.map(g=>g.shape)),h=t.runWebGLProgram(d,l,r);l.forEach(g=>t.disposeIntermediateTensorInfo(g));const p=ht({inputs:{x:h},attrs:{shape:c},backend:t});return t.disposeIntermediateTensorInfo(h),p}function _Fe(n,e,t){const r=qo(n.map(a=>a.shape),e);return{tensors2D:n.map(a=>ht({inputs:{x:a},attrs:{shape:[-1,Fe(a.shape.slice(e))]},backend:t})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r,a=nn(s,e[0].shape)[0],i=e.map(c=>c.shape);LA(i,a);const o=qo(e.map(c=>c.shape),a);if(Fe(o)===0)return t.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>Fe(c.shape)>0);return l.length===1?ja({inputs:{x:l[0]},backend:t}):O0(l,a,t)}const IFe={kernelName:ox,backendName:"webgl",kernelFunc:O7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D7{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,h=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,x=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,b=e.dataFormat==="channelsLast",S=b?1:2,T=b?2:3,N=b?3:1;let C="",I="";r&&(s?C=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?C=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:C=`
          float activation(float x) {
            ${r}
          }
        `,I="result = activation(result);");const F=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${C}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${N}];

        ivec2 xRCCorner =
            ivec2(coords[${S}], coords[${T}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${d};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${x}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${x}) *
                    getW(wR, wC, ${x}, d2);
              } else {
                dotProd +=
                    getX(batch, ${x}, xR, xC) *
                    getW(wR, wC, ${x}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${x}, d2),
                getW(wR, wC, ${x} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${x}),
                  getX(batch, xR, xC, ${x} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${x}, xR, xC),
                  getX(batch, ${x} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${x}, d2),
                getW(wR, wC, ${x} + 1, d2),
                getW(wR, wC, ${x} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${x}),
                  getX(batch, xR, xC, ${x} + 1),
                  getX(batch, xR, xC, ${x} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${x}, xR, xC),
                  getX(batch, ${x} + 1, xR, xC),
                  getX(batch, ${x} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${F}
        ${I}
        setOutput(result);
      }
    `}}class AFe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterDepth,p=e.filterHeight,g=e.filterWidth,x=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${i}, ${o});
      const ivec3 pads = ivec3(${t}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${d};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${x}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${x}) *
                  getW(wF, wR, wC, ${x}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${x}),
                  getX(batch, xF, xR, xC, ${x} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${x}, d2),
                  getW(wF, wR, wC, ${x} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${x}),
                  getX(batch, xF, xR, xC, ${x} + 1),
                  getX(batch, xF, xR, xC, ${x} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${x}, d2),
                  getW(wF, wR, wC, ${x} + 1, d2),
                  getW(wF, wR, wC, ${x} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F7{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Hs(this.outputShape.length);const i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=d;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<d;b++)p+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<d;b++)p+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(h+1)/2;b++){const S=b*2;if(p+=`
           xC = xCCorner + ${S*l};
           `,o===1){if(S<d&&(i%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }
               `,l===1&&S>0?p+=`
                 xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                   } else {
                     xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xC${S} = xTexelC${S};
                 `,S+1<d)){const T=i%2===0?Kw(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${T};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                     xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${S+1}.zw = vec2(0.0);
                     }
                     xTexelC${S+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                     } else {
                      xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                     }
                     `:p+=`
                     xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                     `):T===1?p+=`
                     xC${S+1} = xTexelC${S};
                     `:p+=`
                     xCOffset = xC + ${T};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                       xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${S+1}.zw = vec2(0.0);
                       }
                       xTexelC${S+1}Ready = 1;
                     }

                     xC${S+1} = xTexelC${S+1};
                     `}}else S<d&&(i%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.0);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
               `,S+1<d&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(
                   xTexelC${S}.xy, xTexelC${S+1}.xy);
               `,S+1<d&&(p+=`
                   xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                 `)));S<d&&(p+=`
             wTexel = getW(r, ${S}, d1, d2);
             dotProd += xC${S}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${S}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,S+1<d&&(p+=`
               wTexel = getW(r, ${S+1}, d1, d2);
               dotProd += xC${S+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${S+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",x="";r&&(s?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,x="result = activation(result);");const y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${x}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Fe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Hs(this.outputShape.length);const{dataFormat:r}=t,s=ia(),a=r==="channelsLast",i=a?1:2,o=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let d=0;d<=1;d++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${d};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${d*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${d*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aw(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function L7({x:n,filter:e,convInfo:t,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const l=n.shape,c=r.texData.get(n.dataId),d=t.inChannels,h=l[0]*l[1]*l[2],p=t.outChannels,g=t.dataFormat==="channelsLast",x=!1,y=!1;let b;const S=[];if(a!=null){const C=aw(a.shape,g);C!=null&&(a=ht({inputs:{x:a},backend:r,attrs:{shape:C}}),S.push(a))}if(s!=null){const C=aw(s.shape,g);C!=null&&(s=ht({inputs:{x:s},backend:r,attrs:{shape:C}}),S.push(s))}if(!((h===1||p===1)&&d>_7)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&on(c.shape.slice(-3),l.slice(-3))){const C=l[0]*l[1]*(l[2]+1),I={dataId:n.dataId,shape:[1,C,t.inChannels],dtype:n.dtype},F=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Z(rw(c.shape,I.shape),()=>`packed reshape ${c.shape} to ${I.shape} isn't free`);const D=ht({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});S.push(D);const A=sw({a:I,b:D,backend:r,transposeA:x,transposeB:y,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i}),_=r.texData.get(A.dataId);Z(_.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=F,_.shape=t.outShape,b=ja({inputs:{x:A},backend:r}),b.shape=t.outShape,S.push(A)}else{const C=t.outHeight*t.outWidth,I=ht({inputs:{x:n},backend:r,attrs:{shape:g?[t.batchSize,C,t.inChannels]:[t.batchSize,t.inChannels,C]}}),F=ht({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),D=sw({a:g?I:F,b:g?F:I,transposeA:!g,transposeB:y,backend:r,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i});b=ht({inputs:{x:D},backend:r,attrs:{shape:t.outShape}}),S.push(I),S.push(F),S.push(D)}for(const C of S)r.disposeIntermediateTensorInfo(C);return b}function M7({x:n,filter:e,convInfo:t,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:d,outWidth:h,outHeight:p,dataFormat:g}=t,x=g==="channelsLast",y=l*c*d,b=p*h,S=[t.batchSize,y,b],T=!0,N=!1,C=[];if(a!=null){const Q=aw(a.shape,x);Q!=null&&(a=ht({inputs:{x:a},backend:r,attrs:{shape:Q}}),C.push(a))}if(s!=null){const Q=aw(s.shape,x);Q!=null&&(s=ht({inputs:{x:s},backend:r,attrs:{shape:Q}}),C.push(s))}const I=ht({inputs:{x:e},backend:r,attrs:{shape:[1,y,Fe(e.shape)/y]}});C.push(I);const F=new $Fe(S,t),D=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],A=r.runWebGLProgram(F,[n],"float32",D),_=ht({inputs:{x:A},backend:r,attrs:{shape:S}});C.push(A),C.push(_);const k=s!=null,O=a!=null,P=o==="leakyrelu",W=o?Eg(o,!0):null,K=new k7(x?_.shape:I.shape,x?I.shape:_.shape,x?[t.batchSize,b,t.outChannels]:[t.batchSize,t.outChannels,b],T,N,k,W,O,P),q=x?[_,I]:[I,_];if(s&&q.push(s),O&&q.push(a),P){const Q=r.makeTensorInfo([],"float32",nc(i,"float32"));q.push(Q),C.push(Q)}const V=r.runWebGLProgram(K,q,"float32"),X=ht({inputs:{x:V},backend:r,attrs:{shape:t.outShape}});C.push(V);for(const Q of C)r.disposeIntermediateTensorInfo(Q);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:c,dimRoundingMode:d}=r,h=sc(l),p=ps(s.shape,a.shape,i,c,o,d,!1,h);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=L7({x:s,filter:a,convInfo:p,backend:t});else if(p.strideWidth<=2&&h==="channelsLast"&&Ce().getBool("WEBGL_EXP_CONV")){const y=new F7(p),b=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=t.runWebGLProgram(y,[s,a],"float32",b)}else if(Ce().getBool("WEBGL_CONV_IM2COL"))g=M7({x:s,filter:a,convInfo:p,backend:t});else{const y=new D7(p);g=t.runWebGLProgram(y,[s,a],"float32")}const x=ht({inputs:{x:g},backend:t,attrs:{shape:p.outShape}});return t.disposeIntermediateTensorInfo(g),x}const OFe={kernelName:lx,backendName:"webgl",kernelFunc:RFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DFe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class FFe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,h=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${d}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class LFe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class MFe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,d=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:d}=r,h=sc(l),p=ps(s.shape,d,i,1,o,c,!1,h),g=new DFe(p);return t.runWebGLProgram(g,[s,a],"float32")}const BFe={kernelName:r2,backendName:"webgl",kernelFunc:PFe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jFe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Hs(this.outputShape.length);const t=e.filterHeight,r=e.filterWidth,s=t-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:c,dimRoundingMode:d}=r,h=sc(c),p=ps(i,a.shape,o,1,l,d,!1,h);if(Ce().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],x=new jFe(p);return t.runWebGLProgram(x,[s,a],"float32",g)}else{const g=new FFe(p);return t.runWebGLProgram(g,[s,a],"float32")}}const UFe={kernelName:cx,backendName:"webgl",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,c=wu(s.shape,a.shape,i,l,o),d=new AFe(c);return t.runWebGLProgram(d,[s,a],"float32")}const WFe={kernelName:ux,backendName:"webgl",kernelFunc:VFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r,c=wu(s.shape,l,i,1,o),d=new LFe(c);return t.runWebGLProgram(d,[s,a],"float32")}const GFe={kernelName:s2,backendName:"webgl",kernelFunc:HFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{pad:i,strides:o,inputShape:l}=r,c=wu(l,a.shape,o,1,i),d=new MFe(c);return t.runWebGLProgram(d,[s,a],"float32")}const KFe={kernelName:a2,backendName:"webgl",kernelFunc:qFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XFe=om+`
  return cos(x);
`,YFe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${cf}
  return result;
`,QFe=xn({opSnippet:XFe,packedOpSnippet:YFe}),ZFe={kernelName:lp,backendName:"webgl",kernelFunc:QFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JFe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,eLe=xn({opSnippet:JFe}),tLe={kernelName:cp,backendName:"webgl",kernelFunc:eLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nLe{constructor(e,t,r,s,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,l,c]=e,[d]=t,[h,p]=r;this.outputShape=[d,h,p,c];const g=s==="bilinear"?1:0,[x,y]=[`${o-1}.0`,`${l-1}.0`],[b,S,T]=h>1?[`${(o-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${x} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${x}`],[N,C,I]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${N});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${S};
        float width_scale = ${C};

        float in_y = ${T};
        if( in_y < 0.0 || in_y > ${x} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${I};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLe=n=>{const{inputs:e,backend:t,attrs:r}=n,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:c}=r,d=new nLe(s.shape,a.shape,o,l,c);return t.runWebGLProgram(d,[s,a,i],"float32")},sLe={kernelName:o2,backendName:"webgl",kernelFunc:rLe};var _g;(function(n){n.Prod="*",n.Sum="+"})(_g||(_g={}));class YM{constructor(e,t,r,s){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,i=this.op===_g.Prod?"1.0":"0.0",o=r?i:`getX(${QM(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",d="";r?(c=s?`end != ${l-1}`:"end != 0",d=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",d=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Un(a)} coords = getOutputCoords();
        int end = ${ZM(a,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${d};
          ${ZM(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${QM(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function QM(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function ZM(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7(n,e,t,r,s,a){const i=e.shape.length,o=yr([r],i);let l=e;o!=null&&(l=ra({inputs:{x:e},backend:t,attrs:{perm:o}}));const c=Rr(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const d=l.shape[c];let h=ja({inputs:{x:l},backend:t});for(let p=0;p<=Math.ceil(Math.log2(d))-1;p++){const g=new YM(n,l.shape,!1,a),x=[[p]],y=h;h=t.runWebGLProgram(g,[h],h.dtype,x),t.disposeIntermediateTensorInfo(y)}if(s){const p=new YM(n,l.shape,s,a),g=h;h=t.runWebGLProgram(p,[h],h.dtype),t.disposeIntermediateTensorInfo(g)}if(o!=null){const p=Su(o),g=ra({inputs:{x:h},backend:t,attrs:{perm:p}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(l),g}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return P7(_g.Prod,s,t,a,i,o)}const iLe={kernelName:i2,backendName:"webgl",kernelFunc:aLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return P7(_g.Sum,s,t,a,i,o)}const lLe={kernelName:dx,backendName:"webgl",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r;if(s.shape.length===1){const l=t.readSync(s.dataId),c=t.readSync(a.dataId),d=y7(l,c,a.dtype,a.shape,i);return t.makeTensorInfo([i],a.dtype,d)}else if(s.shape.length===2){const l=t.bufferSync(s),c=t.bufferSync(a),d=hDe(l,c,i,o);return t.makeTensorInfo(d.shape,a.dtype,d.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const uLe={kernelName:l2,backendName:"webgl",kernelFunc:cLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dLe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockSize:a,dataFormat:i}=r,o=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],c=i==="NHWC"?s.shape[2]:s.shape[3],d=i==="NHWC"?s.shape[3]:s.shape[1],h=l*a,p=c*a,g=d/(a*a),x=i==="NHWC"?[o,h,p,g]:[o,g,h,p],y=new dLe(x,a,i);return t.runWebGLProgram(y,[s],s.dtype)}const hLe={kernelName:c2,backendName:"webgl",kernelFunc:fLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B7{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Hs(this.outputShape.length);const i=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",d="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,d="result = activation(result);");const h=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j7{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Hs(this.outputShape.length);const i=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=h;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let S=0;S<h;S++)g+=`
          vec4 xTexelC${S*2};
          int xTexelC${S*2}Ready;
          vec4 xTexelC${S*2+1};
          int xTexelC${S*2+1}Ready;
          vec4 xC${S};`;g+=`
    for (int r = 0; r < ${d}; r++) {
      `;for(let S=0;S<h;S++)g+=`
          xTexelC${S*2} = vec4(0.0);
          xTexelC${S*2}Ready = 0;
          xTexelC${S*2+1} = vec4(0.0);
          xTexelC${S*2+1}Ready = 0;
          xC${S} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let S=0;S<(p+1)/2;S++){const T=S*2;if(g+=`
          xC = xCCorner + ${T*c};
          `,l===1){if(T<h&&(o%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${T}Ready == 0) {
                  xTexelC${T} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${T}.zw = vec2(0.0);
                  }
                  xTexelC${T}Ready = 1;
                }
              `,c===1&&T>0?g+=`
                xC${T} = vec4(xTexelC${T-2}.zw, xTexelC${T}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${T} = vec4(previous.zw, xTexelC${T}.xy);
                  } else {
                    xC${T} = vec4(0.0, 0.0, xTexelC${T}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${T}Ready == 0) {
                  xTexelC${T} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${T}.zw = vec2(0.0);
                  }
                  xTexelC${T}Ready = 1;
                }

                xC${T} = xTexelC${T};
                `,T+1<h)){const N=o%2===0?Kw(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${N};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${T+1}Ready == 0) {
                    xTexelC${T+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${T+1}.zw = vec2(0.0);
                    }
                    xTexelC${T+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${T+1} = vec4(previous.zw, xTexelC${T+1}.xy);
                    } else {
                     xC${T+1} = vec4(0.0, 0.0, xTexelC${T+1}.xy);
                    }
                    `:g+=`
                    xC${T+1} = vec4(xTexelC${T}.zw, xTexelC${T+1}.xy);
                    `):N===1?g+=`
                    xC${T+1} = xTexelC${T};
                    `:g+=`
                    xCOffset = xC + ${N};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${T+1}Ready == 0) {
                      xTexelC${T+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${T+1}.zw = vec2(0.0);
                      }
                      xTexelC${T+1}Ready = 1;
                    }

                    xC${T+1} = xTexelC${T+1};
                    `}}else T<h&&(o%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${T}Ready == 0) {
                  xTexelC${T} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${T}.zw = vec2(0.0);
                  }
                  xTexelC${T}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${T+1}Ready == 0) {
                  xTexelC${T+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${T+1}.zw = vec2(0.0);
                  }
                  xTexelC${T+1}Ready = 1;
                }

                xC${T} = vec4(xTexelC${T}.zw, xTexelC${T+1}.zw);
              `,T+1<h&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${T+1} = vec4(xTexelC${T+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${T}Ready == 0) {
                  xTexelC${T} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${T}.zw = vec2(0.0);
                  }
                  xTexelC${T}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${T+1}Ready == 0) {
                  xTexelC${T+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${T+1}.zw = vec2(0.);
                  }
                  xTexelC${T+1}Ready = 1;
                }

                xC${T} = vec4(
                  xTexelC${T}.xy, xTexelC${T+1}.xy);
              `,T+1<h&&(g+=`
                  xC${T+1} = vec4(xTexelC${T}.zw, xTexelC${T+1}.zw);
                `)));T<h&&(g+=`
            wTexel = getW(r, ${T}, d1, q);
            dotProd += xC${T} * vec4(wTexel.xz, wTexel.xz);
          `,T+1<h&&(g+=`
              wTexel = getW(r, ${T+1}, d1, q);
              dotProd += xC${T+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let x="",y="";r&&(s?x=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?x=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:x=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${x}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:c}=r;let d=l;d==null&&(d=[1,1]),Z(_s(i,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${d}'`);const h=ps(s.shape,a.shape,i,d,o,c,!0);let p;Ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?p=new j7(h):p=new B7(h);const g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return t.runWebGLProgram(p,[s,a],"float32",g)}const mLe={kernelName:fx,backendName:"webgl",kernelFunc:pLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class xLe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,filterShape:d}=r,h=ps(s.shape,d,i,o,l,c,!0),p=new gLe(h);return t.runWebGLProgram(p,[s,a],"float32")}const bLe={kernelName:u2,backendName:"webgl",kernelFunc:yLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:c,inputShape:d}=r,h=ps(d,a.shape,i,o,l,c,!0),p=new xLe(h);return t.runWebGLProgram(p,[s,a],"float32")}const wLe={kernelName:d2,backendName:"webgl",kernelFunc:vLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SLe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(n){const{inputs:e,backend:t}=n,{x:r}=e,s=[...r.shape,...r.shape],a=Fe(r.shape),i=ht({inputs:{x:r},backend:t,attrs:{shape:[a]}}),o=new SLe(a),l=t.runWebGLProgram(o,[i],i.dtype),c=ht({inputs:{x:l},backend:t,attrs:{shape:s}});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(l),c}const NLe={kernelName:f2,backendName:"webgl",kernelFunc:TLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CLe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:r,padInfo:s,strideHeight:a,strideWidth:i,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:d}=e,{top:h,left:p}=s;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${i});
      const ivec2 pads = ivec2(${h}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${d};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,c=n1(s.shape,a.shape,i,o,"NHWC",l);let d;const h=new CLe(c);d=t.runWebGLProgram(h,[s,a],"float32");const p=ht({inputs:{x:d},backend:t,attrs:{shape:c.outShape}});return t.disposeIntermediateTensorInfo(d),p}const kLe={kernelName:hx,backendName:"webgl",kernelFunc:ELe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(n){const{inputs:e,backend:t,attrs:r}=n,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=KA(s,a.length);YA(i.length,l,a);const{path:c,steps:d}=QA(o,l),h=d.length;let p=null,g=i.length;const x=[];for(let y=0;y<h;++y){for(const b of d[y]){const{permutationIndices:S,expandDims:T}=XA(g,l[b]);let N;ZA(S)?N=a[b]:(N=ra({inputs:{x:a[b]},backend:t,attrs:{perm:S}}),x.push(N));const C=N.shape.slice();for(let I=0;I<T.length;++I)C.splice(T[I],0,1);on(N.shape,C)||(N=ht({inputs:{x:N},backend:t,attrs:{shape:C}}),x.push(N)),p===null?p=N:(p=z$({inputs:{a:N,b:p},backend:t}),x.push(p))}y<h-1&&(c[y]>=0&&(p=iT({inputs:{x:p},backend:t,attrs:{axis:c[y]-(i.length-g),keepDims:!1}}),x.push(p)),g--)}for(const y of x)y!==p&&t.disposeIntermediateTensorInfo(y);return p}const ILe={kernelName:p2,backendName:"webgl",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe="return (x >= 0.0) ? x : (exp(x) - 1.0);",$Le=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RLe=xn({opSnippet:ALe,packedOpSnippet:$Le}),OLe={kernelName:dp,backendName:"webgl",kernelFunc:RLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLe="return (b >= 0.0) ? a : a * (b + 1.0);",FLe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,LLe=n=>{const{inputs:e,backend:t}=n,{dy:r,y:s}=e,a=Ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new im(FLe,r.shape,s.shape):new Ud(DLe,r.shape,s.shape);return t.runWebGLProgram(a,[r,s],r.dtype)},MLe={kernelName:m2,backendName:"webgl",kernelFunc:LLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLe=`
  return vec4(equal(a, b));
`,BLe="return float(a == b);",jLe=$s({opSnippet:BLe,packedOpSnippet:PLe,dtype:"bool",cpuKernelImpl:yDe}),zLe={kernelName:px,backendName:"webgl",kernelFunc:jLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ULe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${zA};
  float a1 = ${UA};
  float a2 = ${VA};
  float a3 = ${WA};
  float a4 = ${HA};
  float a5 = ${GA};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,VLe=xn({opSnippet:ULe}),WLe={kernelName:fp,backendName:"webgl",kernelFunc:VLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HLe=om+`
  return exp(x);
`,GLe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,z7=xn({opSnippet:HLe,packedOpSnippet:GLe,cpuKernelImpl:bDe,dtype:"float32"}),qLe={kernelName:hp,backendName:"webgl",kernelFunc:z7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bk(n){const{inputs:e,attrs:t,backend:r}=n,{dim:s}=t,{input:a}=e,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(Z(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),ht({inputs:{x:a},backend:r,attrs:{shape:o}})}const KLe={kernelName:mx,backendName:"webgl",kernelFunc:Bk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JM="return exp(x) - 1.0;",XLe=xn({opSnippet:JM,packedOpSnippet:JM,cpuKernelImpl:vDe}),YLe={kernelName:pp,backendName:"webgl",kernelFunc:XLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eP{constructor(e,t,r){this.variableNames=["real","imag"];const s=t[1];this.outputShape=t;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7(n,e,t){const r=t.texData.get(n.dataId),s=Fe(n.shape),a=n.shape[n.shape.length-1],i=s/a,o=ht({inputs:{x:n},backend:t,attrs:{shape:[i,a]}}),l=o.shape,c=new eP("real",l,e),d=new eP("imag",l,e),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=t.runWebGLProgram(c,h,"float32"),g=t.runWebGLProgram(d,h,"float32"),x=Iu({inputs:{real:p,imag:g},backend:t});t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g);const y=ht({inputs:{x},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(x),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(n){const{inputs:e,backend:t}=n,{input:r}=e;return U7(r,!1,t)}const ZLe={kernelName:g2,backendName:"webgl",kernelFunc:QLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JLe{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1(n){const{backend:e,attrs:t}=n,{shape:r,value:s}=t;let{dtype:a}=t;if(a=a||Qd(s),a==="string"){const i=wr(a,Fe(r));return i.fill(s),e.makeTensorInfo(r,a,i)}else{const i=new JLe(r,s),o=[[s]];return e.runWebGLProgram(i,[],a,o)}}const eMe={kernelName:x2,backendName:"webgl",kernelFunc:L1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tMe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nMe={kernelName:y2,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,r=e,s=new tMe(t.shape);return r.runWebGLProgram(s,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tP="return floor(x);",rMe=xn({opSnippet:tP,packedOpSnippet:tP,cpuKernelImpl:wDe}),sMe={kernelName:mp,backendName:"webgl",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,iMe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,oMe=$s({opSnippet:aMe,packedOpSnippet:iMe,dtype:"int32"}),lMe={kernelName:gp,backendName:"webgl",kernelFunc:oMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cMe{constructor(e){this.variableNames=["A"];const t=ia(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uMe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ia(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dMe={kernelName:Lv,backendName:"webgl",kernelFunc:fMe};let ah,fE=Ce().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function fMe(n){const{inputs:e,backend:t,attrs:r}=n;let{pixels:s}=e;const{numChannels:a}=r,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=[c,l],h=[c,l,a];if(o||i){const y=Ce().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ah==null||y!==fE)&&(fE=y,ah=document.createElement("canvas").getContext("2d",{willReadFrequently:fE})),ah.canvas.width=l,ah.canvas.height=c,ah.drawImage(s,0,0,l,c),s=ah.canvas}const p=t.makeTensorInfo(d,"int32");t.texData.get(p.dataId).usage=si.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(p.dataId),s);const g=Ce().getBool("WEBGL_PACK")?new uMe(h):new cMe(h),x=t.runWebGLProgram(g,[p],"int32");return t.disposeData(p.dataId),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hMe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:d,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:x}=r,y=sc(d),b=ps(s.shape,a.shape,l,h,c,p,!1,y);let S;const T=[],N=i!=null,C=o!=null,I=g==="leakyrelu",F=()=>{const A=[s,a],_=(k,O)=>{if(O==="NCHW"&&k.shape.length===1&&k.shape[0]!==1){const P=ht({inputs:{x:k},backend:t,attrs:{shape:[k.shape[0],1,1]}});return T.push(P),P}return k};if(N&&A.push(_(i,d)),C&&A.push(_(o,d)),I){const k=t.makeTensorInfo([],"float32",nc(x,"float32"));A.push(k),T.push(k)}return A};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))S=L7({x:s,filter:a,convInfo:b,backend:t,bias:i,activation:g,preluActivationWeights:o,leakyreluAlpha:x});else if(b.strideWidth<=2&&y==="channelsLast"&&Ce().getBool("WEBGL_EXP_CONV")){const A=g?Eg(g,!0):null,_=new F7(b,N,A,C,I),k=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],O=F();S=t.runWebGLProgram(_,O,"float32",k)}else if(Ce().getBool("WEBGL_CONV_IM2COL"))S=M7({x:s,filter:a,convInfo:b,backend:t,bias:i,activation:g,preluActivationWeights:o,leakyreluAlpha:x});else{const A=g?Eg(g,!1):null,_=new D7(b,N,A,C,I),k=F();S=t.runWebGLProgram(_,k,"float32")}const D=ht({inputs:{x:S},backend:t,attrs:{shape:b.outShape}});return T.push(S),T.forEach(A=>t.disposeIntermediateTensorInfo(A)),D}const pMe={kernelName:dg,backendName:"webgl",kernelFunc:hMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r,x=[];let y=d;y==null&&(y=[1,1]),Z(_s(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const b=ps(s.shape,a.shape,l,y,c,h,!0),S=Ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,T=p?Eg(p,S):null,N=[s,a],C=i!=null,I=o!=null,F=p==="leakyrelu";if(C&&N.push(i),I&&N.push(o),F){const k=t.makeTensorInfo([],"float32",nc(g,"float32"));N.push(k),x.push(k)}let D;S?D=new j7(b,C,T,I,F):D=new B7(b,C,T,I,F);const A=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],_=t.runWebGLProgram(D,N,"float32",A);return x.forEach(k=>t.disposeIntermediateTensorInfo(k)),_}const gMe={kernelName:fg,backendName:"webgl",kernelFunc:mMe};class xMe{constructor(e,t,r,s){this.sliceDim=e,this.strides=t,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const a=Un(r.length);let i=`
    int index;`;for(let o=0;o<this.sliceDim;o++)i+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(n){const{inputs:e,backend:t}=n,{params:r,indices:s}=e,a=s.shape,i=a[a.length-1],o=Fe(r.shape),[l,c,d,h]=jS(r,s),p=ht({inputs:{x:s},backend:t,attrs:{shape:[c,i]}}),g=ht({inputs:{x:r},backend:t,attrs:{shape:[Fe(r.shape)/d,d]}});if(t.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const S=t.readSync(s.dataId),T=t.bufferSync(r),N=SDe(S,T,r.dtype,c,i,d,h,r.shape,o);return t.makeTensorInfo(l,r.dtype,N.values)}const x=new xMe(i,h,[c,d],r.shape),y=t.runWebGLProgram(x,[g,p],g.dtype),b=ht({inputs:{x:y},backend:t,attrs:{shape:l}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(y),b}const bMe={kernelName:b2,backendName:"webgl",kernelFunc:yMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vMe{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const r=Un(this.rank),s=wMe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function wMe(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<n.length;s++)s===2?r.push("index"):r.push(`${t[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,indices:a}=e,{axis:i,batchDims:o}=r,l=nn(i,s.shape)[0];if(Ce().get("DEBUG")){const T=t.readSync(a.dataId),N=s.shape[l];for(let C=0;C<T.length;++C){const I=T[C];Z(I<=N-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${N-1}]`)}}const c=e$(s,a,l,o),d=Fe(a.shape),h=[],p=ht({inputs:{x:s},backend:t,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=ht({inputs:{x:a},backend:t,attrs:{shape:[c.batchSize,d/c.batchSize]}});h.push(p),h.push(g);const x=[c.batchSize,c.outerSize,d/c.batchSize,c.sliceSize];if(t.shouldExecuteOnCPU([s,a])||s.dtype==="string"){const T=t.bufferSync(g),N=t.bufferSync(p),C=TDe(N,T,x);return h.forEach(I=>t.disposeIntermediateTensorInfo(I)),t.makeTensorInfo(c.outputShape,C.dtype,C.values)}const y=new vMe(p.shape,x),b=t.runWebGLProgram(y,[p,g],p.dtype);h.push(b);const S=ht({inputs:{x:b},backend:t,attrs:{shape:c.outputShape}});return h.forEach(T=>t.disposeIntermediateTensorInfo(T)),S}const SMe={kernelName:xx,backendName:"webgl",kernelFunc:V7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TMe="return float(a > b);",NMe=`
  return vec4(greaterThan(a, b));
`,CMe=$s({opSnippet:TMe,packedOpSnippet:NMe,cpuKernelImpl:NDe,dtype:"bool"}),EMe={kernelName:yx,backendName:"webgl",kernelFunc:CMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kMe="return float(a >= b);",_Me=`
  return vec4(greaterThanEqual(a, b));
`,IMe=$s({opSnippet:kMe,packedOpSnippet:_Me,dtype:"bool",cpuKernelImpl:CDe}),AMe={kernelName:xp,backendName:"webgl",kernelFunc:IMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(n){const{inputs:e,backend:t}=n,{input:r}=e;return U7(r,!0,t)}const RMe={kernelName:v2,backendName:"webgl",kernelFunc:$Me};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OMe="return float(!isnan(x) && !isinf(x));",DMe=xn({opSnippet:OMe,dtype:"bool"}),FMe={kernelName:bp,backendName:"webgl",kernelFunc:DMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe="return float(isinf(x));",MMe=xn({opSnippet:LMe,dtype:"bool"}),PMe={kernelName:vp,backendName:"webgl",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BMe="return float(isnan(x));",jMe=xn({opSnippet:BMe,dtype:"bool"}),zMe={kernelName:wp,backendName:"webgl",kernelFunc:jMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UMe="return float(a < b);",VMe=`
  return vec4(lessThan(a, b));
`,WMe=$s({opSnippet:UMe,packedOpSnippet:VMe,cpuKernelImpl:EDe,dtype:"bool"}),HMe={kernelName:vx,backendName:"webgl",kernelFunc:WMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GMe="return float(a <= b);",qMe=`
  return vec4(lessThanEqual(a, b));
`,KMe=$s({opSnippet:GMe,packedOpSnippet:qMe,cpuKernelImpl:kDe,dtype:"bool"}),XMe={kernelName:wx,backendName:"webgl",kernelFunc:KMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(n){const{backend:e,attrs:t}=n,{start:r,stop:s,num:a}=t,i=_De(r,s,a);return e.makeTensorInfo([i.length],"float32",i)}const QMe={kernelName:S2,backendName:"webgl",kernelFunc:YMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=om+`
  return x < 0.0 ? 0./0. : log(x);
`,JMe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,ePe=xn({opSnippet:ZMe,packedOpSnippet:JMe,cpuKernelImpl:IDe}),tPe={kernelName:Sp,backendName:"webgl",kernelFunc:ePe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nPe=om+`
  return log(1.0 + x);
`,rPe=xn({opSnippet:nPe}),sPe={kernelName:Tp,backendName:"webgl",kernelFunc:rPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPe="return float(a >= 1.0 && b >= 1.0);",iPe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,oPe=$s({opSnippet:aPe,packedOpSnippet:iPe,dtype:"bool"}),lPe={kernelName:Sx,backendName:"webgl",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cPe="return float(!(x >= 1.0));",uPe=xn({opSnippet:cPe}),dPe={kernelName:Tx,backendName:"webgl",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fPe="return float(a >= 1.0 || b >= 1.0);",hPe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,pPe=$s({opSnippet:fPe,packedOpSnippet:hPe,dtype:"bool"}),mPe={kernelName:Nx,backendName:"webgl",kernelFunc:pPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gPe{constructor(e,t,r,s,a){this.variableNames=["x"],this.outputShape=[];const i=t,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xPe{constructor(e,t,r,s,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=t,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yPe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r,c=Ce().getBool("WEBGL_PACK_NORMALIZATION")?new xPe(s.shape,a,i,o,l):new gPe(s.shape,a,i,o,l);return t.runWebGLProgram(c,[s],s.dtype)},bPe={kernelName:Cx,backendName:"webgl",kernelFunc:yPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vPe{constructor(e,t,r,s,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=s,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:c,beta:d}=r,h=new vPe(s.shape,o,l,c,d);return t.runWebGLProgram(h,[s,a,i],s.dtype)},SPe={kernelName:T2,backendName:"webgl",kernelFunc:wPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TPe(n,e,t,r){const s=Fe(e),i=Fe(n.shape)/s,o=ht({inputs:{x:n},attrs:{shape:[i,s]},backend:r}),l=uf(o,n.dtype,"max",r),c=ht({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reductionIndices:a,keepDims:i}=r,o=s.shape.length,l=nn(a,s.shape);let c=l;const d=yr(c,o),h=d!=null,p=t.shouldExecuteOnCPU([s]);let g=s;if(h){if(p){const N=t.texData.get(g.dataId).values,C=new Array(o);for(let D=0;D<C.length;D++)C[D]=s.shape[d[D]];const I=B$(N,s.shape,s.dtype,d,C);g=t.makeTensorInfo(C,s.dtype);const F=t.texData.get(g.dataId);F.values=I}else g=aT(s,d,t);c=Rr(c.length,o)}Is("max",c,o);const[x,y]=ms(g.shape,c);let b=x;i&&(b=$r(x,l));let S;if(p){const N=t.texData.get(g.dataId).values,C=ADe(N,Fe(y),b,s.dtype);S=t.makeTensorInfo(b,s.dtype);const I=t.texData.get(S.dataId);I.values=C}else S=TPe(g,y,b,t);return h&&t.disposeIntermediateTensorInfo(g),S}const NPe={kernelName:Ex,backendName:"webgl",kernelFunc:W7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=j$+`
  return max(a, b);
`,EPe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+cf+`
  return result;
`,kPe=$s({opSnippet:CPe,packedOpSnippet:EPe,cpuKernelImpl:$De}),_Pe={kernelName:Np,backendName:"webgl",kernelFunc:kPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;O1(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=1;Z(_s(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=zi(s.shape,a,i,c,o,l);if(d.filterWidth===1&&d.filterHeight===1&&on(d.inShape,d.outShape))return ja({inputs:{x:s},backend:t});const h=new kg(d,"max",!1);return t.runWebGLProgram(h,[s],s.dtype)}const APe={kernelName:kx,backendName:"webgl",kernelFunc:IPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Pe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:c}=r,d=[1,1,1],h=rc(s.shape,a,i,d,o,c,l),p=new U$(h,"max",!1);return t.runWebGLProgram(p,[s],s.dtype)}const RPe={kernelName:_x,backendName:"webgl",kernelFunc:$Pe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OPe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,l=i-1-e.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class DPe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=d-1-e.padInfo.left,x=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${x} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${d} +
                  wR * ${d} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:d}=r,h=[1,1,1],p=rc(i.shape,o,l,h,c,d),g=new U$(p,"max",!0),x=t.runWebGLProgram(g,[i],i.dtype),y=new DPe(p),b=t.runWebGLProgram(y,[s,x],i.dtype);return t.disposeIntermediateTensorInfo(x),b}const LPe={kernelName:C2,backendName:"webgl",kernelFunc:FPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a,output:i}=e,o=a;O1([a,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:d,dimRoundingMode:h}=r,p=zi(o.shape,l,c,1,d,h),g=!0,x=new kg(p,"max",g),y=t.runWebGLProgram(x,[o],o.dtype),b=new OPe(p),S=t.runWebGLProgram(b,[s,y],o.dtype);return t.disposeIntermediateTensorInfo(y),S}const PPe={kernelName:N2,backendName:"webgl",kernelFunc:MPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(n,e,t,r){let s=new kg(t,"max",!1);const a=r.runWebGLProgram(s,[n],"float32");s=new kg(t,"max",!0,!0,e);const i=r.runWebGLProgram(s,[n],"float32");return[a,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jPe={kernelName:E2,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=e,l=t;Z(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];Z(_s(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const d=zi(r.shape,s,a,c,i),[h,p]=BPe(r,o,d,l);return[h,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zPe(n,e,t,r){const s=Fe(e),i=Fe(n.shape)/s,o=ht({inputs:{x:n},attrs:{shape:[i,s]},backend:r}),l=uf(o,"float32","mean",r),c=ht({inputs:{x:l},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UPe={kernelName:Ix,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{keepDims:s,axis:a}=e,i=t,o=r.shape.length,l=nn(a,r.shape);let c=l;const d=yr(c,o),h=d!=null,p=i.shouldExecuteOnCPU([r]),g=[];let x=r;if(h){if(p){const C=i.texData.get(x.dataId).values,I=new Array(o);for(let A=0;A<I.length;A++)I[A]=r.shape[d[A]];const F=B$(C,r.shape,r.dtype,d,I);x=i.makeTensorInfo(I,r.dtype);const D=i.texData.get(x.dataId);D.values=F}else x=aT(r,d,i);g.push(x),c=Rr(c.length,o)}Is("sum",c,o);const[y,b]=ms(x.shape,c);let S=y;s&&(S=$r(y,l));const T=zPe(x,b,S,i);for(const N of g)i.disposeIntermediateTensorInfo(N);return T}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VPe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=nn(a,s.shape);let c=l;const d=yr(c,o);let h=s;d!=null&&(h=ra({inputs:{x:s},backend:t,attrs:{perm:d}}),c=Rr(c.length,s.shape.length)),Is("min",c,o);const[p,g]=ms(h.shape,c),x=Fe(g),y=ht({inputs:{x:h},backend:t,attrs:{shape:[-1,x]}}),b=uf(y,y.dtype,"min",t);let S;if(i){const T=$r(p,l);S=ht({inputs:{x:b},backend:t,attrs:{shape:T}})}else S=ht({inputs:{x:b},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(b),d!=null&&t.disposeIntermediateTensorInfo(h),S}const WPe={kernelName:Ax,backendName:"webgl",kernelFunc:VPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe=j$+`
  return min(a, b);
`,GPe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+cf+`
  return result;
`,qPe=$s({opSnippet:HPe,packedOpSnippet:GPe,cpuKernelImpl:RDe}),KPe={kernelName:Cp,backendName:"webgl",kernelFunc:qPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XPe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((d,h)=>d[0]+e[h]+d[1]);const s=e.length,a=Un(s),i=t.map(d=>d[0]).join(","),o=t.map((d,h)=>d[0]+e[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YPe{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((x,y)=>x[0]+e[y]+x[1]);const s=e.length,a=Un(s),i=t.map(x=>x[0]).join(","),o=t.map((x,y)=>x[0]+e[y]).join(","),l=Js("rc",s),c=Js("source",s),d=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(s===1){const x=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${a} rc = outputLoc;
        ${x}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${d}) {
          ${x}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const x=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${a} rc = outputLoc;
        ${x}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${d}) {
          ${x}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${x}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[s-1]} += 1;
          if(${d}) {
            ${x}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe=({inputs:n,backend:e,attrs:t})=>{const{x:r}=n,{paddings:s,mode:a}=t,i=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YPe(r.shape,s,a):new XPe(r.shape,s,a);return e.runWebGLProgram(i,[r],r.dtype)},ZPe={kernelName:$x,backendName:"webgl",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe=`if (b == 0.0) return NAN;
  return mod(a, b);`,eBe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+cf+`
  return result;
`,tBe=$s({opSnippet:JPe,packedOpSnippet:eBe}),nBe={kernelName:Ep,backendName:"webgl",kernelFunc:tBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rBe{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe=`
if (a == b) {
  return 1.0;
};
return a / b;`,aBe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,H7=$s({opSnippet:sBe,packedOpSnippet:aBe,checkOutOfBounds:!0}),iBe={kernelName:up,backendName:"webgl",kernelFunc:H7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nP="return a - b;",G7=$s({opSnippet:nP,packedOpSnippet:nP,supportsComplex:!0,cpuKernelImpl:JDe}),oBe={kernelName:Up,backendName:"webgl",kernelFunc:G7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{dim:a}=r,i=nn([a],s.shape),o=W7({inputs:{x:s},backend:t,attrs:{reductionIndices:i,keepDims:!1}}),l=$r(o.shape,i),c=ht({inputs:{x:o},backend:t,attrs:{shape:l}}),d=G7({inputs:{a:s,b:c},backend:t}),h=z7({inputs:{x:d},backend:t}),p=iT({inputs:{x:h},backend:t,attrs:{axis:i,keepDims:!1}}),g=ht({inputs:{x:p},backend:t,attrs:{shape:l}}),x=H7({inputs:{a:h,b:g},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(g),x}const lBe={kernelName:Xx,backendName:"webgl",kernelFunc:q7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r,l=o?s:q7({inputs:{logits:s},backend:t,attrs:{dim:s.shape.length-1}}),c=l.shape[0],d=l.shape[1],h=new rBe(c,d,a),p=[[i]],g=t.runWebGLProgram(h,[l],"int32",p);return o||t.disposeIntermediateTensorInfo(l),g}const uBe={kernelName:k2,backendName:"webgl",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe=Vi+`
  return -x;
`,fBe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function hBe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])){const a=t.texData.get(r.dataId),[i,o]=DDe(a.values,r.shape,r.dtype);return t.makeTensorInfo(o,r.dtype,i)}let s;return Ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Gc(r.shape,fBe):s=new Uo(r.shape,dBe),t.runWebGLProgram(s,[r],r.dtype)}const pBe={kernelName:Rx,backendName:"webgl",kernelFunc:hBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mBe=LS;function gBe(n){ti("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,c=t.readSync(s.dataId),d=t.readSync(a.dataId),{selectedIndices:h}=mBe(c,d,i,o,l);return t.makeTensorInfo([h.length],"int32",new Int32Array(h))}const xBe={kernelName:_2,backendName:"webgl",kernelFunc:gBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yBe=MS;function bBe(n){ti("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,d=t.readSync(s.dataId),h=t.readSync(a.dataId),{selectedIndices:p,validOutputs:g}=yBe(d,h,i,o,l,c);return[t.makeTensorInfo([p.length],"int32",new Int32Array(p)),t.makeTensorInfo([],"int32",new Int32Array([g]))]}const vBe={kernelName:I2,backendName:"webgl",kernelFunc:bBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wBe=PS;function SBe(n){ti("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,d=t.readSync(s.dataId),h=t.readSync(a.dataId),p=i,g=o,x=l,y=c,{selectedIndices:b,selectedScores:S}=wBe(d,h,p,g,x,y);return[t.makeTensorInfo([b.length],"int32",new Int32Array(b)),t.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const TBe={kernelName:A2,backendName:"webgl",kernelFunc:SBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NBe{constructor(e,t,r,s){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CBe=n=>{const{inputs:e,backend:t,attrs:r}=n,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r,c=Fe(s.shape),d=new NBe(c,i,o,l),h=ht({inputs:{x:s},backend:t,attrs:{shape:[c]}}),p=t.runWebGLProgram(d,[h],a);t.disposeIntermediateTensorInfo(h);const g=[...s.shape,i],x=ht({inputs:{x:p},backend:t,attrs:{shape:g}});return t.disposeIntermediateTensorInfo(p),x},EBe={kernelName:Fx,backendName:"webgl",kernelFunc:CBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iw(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="complex64"){const s=F1({inputs:{input:r},backend:t}),a=iw({inputs:{x:s},backend:t}),i=oT({inputs:{input:r},backend:t}),o=iw({inputs:{x:i},backend:t}),l=Iu({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return L1({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:t})}const kBe={kernelName:Jx,backendName:"webgl",kernelFunc:iw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=F1({inputs:{input:r},backend:t}),a=K7({inputs:{x:s},backend:t}),i=oT({inputs:{input:r},backend:t}),o=iw({inputs:{x:i},backend:t}),l=Iu({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(o),l}else return L1({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}const _Be={kernelName:Dx,backendName:"webgl",kernelFunc:K7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IBe(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r;if(e.length===1)return Bk({inputs:{input:e[0]},backend:t,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(d=>{ks(a,d.shape,"All tensors passed to stack must have matching shapes"),Z(i===d.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(d=>{const h=Bk({inputs:{input:d},backend:t,attrs:{dim:s}});return o.push(h),h}),c=O7({inputs:l,backend:t,attrs:{axis:s}});return o.forEach(d=>t.disposeIntermediateTensorInfo(d)),c}const ABe={kernelName:Lx,backendName:"webgl",kernelFunc:IBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Be{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((c,d)=>c[0]+e[d]+c[1]);const s=e.length,a=Un(s),i=t.map(c=>c[0]).join(","),o=t.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RBe{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((y,b)=>y[0]+e[b]+y[1]);const s=e.length,a=Un(s),i=t.map(y=>y[0]).join(","),o=t.map((y,b)=>y[0]+e[b]).join(","),l=Js("rc",s),c=Js("source",s),d=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${a} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${d}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${d}) {`],g=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let x="";for(let y=0,b=s===1?2:4;y<b;y++)x+=`
        ${p[y]}
        if (${g}) {
          result[${y}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${y}] = getChannel(getX(${c.join()}), ${h});
        }
      `;x+=s===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:a,constantValue:i}=r;if(Fe(s.shape)===0){const c=a.map((d,h)=>d[0]+s.shape[h]+d[1]);return L1({backend:t,attrs:{shape:c,value:i,dtype:s.dtype}})}const o=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RBe(s.shape,a,i):new $Be(s.shape,a,i),l=[[i]];return t.runWebGLProgram(o,[s],s.dtype,l)},OBe={kernelName:Mx,backendName:"webgl",kernelFunc:X7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DBe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,FBe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+cf+`
  return result;
`,LBe=$s({opSnippet:DBe,packedOpSnippet:FBe}),MBe={kernelName:_p,backendName:"webgl",kernelFunc:LBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=[],c=nn(a,s.shape);let d=c;const h=yr(d,o);let p=s;h!=null&&(p=ra({inputs:{x:s},backend:t,attrs:{perm:h}}),d=Rr(d.length,o),l.push(p)),Is("prod",d,o);let g;if(t.shouldExecuteOnCPU([p])){const x=t.texData.get(p.dataId).values,{outVals:y,outShape:b,outDtype:S}=LDe(p.shape,p.dtype,x,d);g=t.makeTensorInfo(b,S,y)}else{const[x,y]=ms(p.shape,d),b=Fe(y),S=ht({inputs:{x:p},backend:t,attrs:{shape:[-1,b]}}),T=nS(s.dtype),N=uf(S,T,"prod",t);g=ht({inputs:{x:N},backend:t,attrs:{shape:x}}),l.push(S),l.push(N)}if(i){l.push(g);const x=$r(g.shape,c);g=ht({inputs:{x:g},backend:t,attrs:{shape:x}})}return l.forEach(x=>t.disposeIntermediateTensorInfo(x)),g}const BBe={kernelName:Bx,backendName:"webgl",kernelFunc:PBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jBe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=r,l=s.map(S=>t.readSync(S.dataId)),c=s.map(S=>S.shape),d=t.readSync(a.dataId),h=t.readSync(i.dataId),[p,g,x]=MDe(l,c,d,a.shape,a.dtype,h,i.shape,o),y=p.map(S=>t.makeTensorInfo([S.length],"int32",S)),b=t.makeTensorInfo(x,a.dtype,g);return y.concat([b])}const zBe={kernelName:$2,backendName:"webgl",kernelFunc:jBe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UBe(n){const{inputs:e,backend:t}=n,{starts:r,limits:s,deltas:a}=e,i=t.readSync(r.dataId),o=t.readSync(s.dataId),l=t.readSync(a.dataId),[c,d]=PDe(i,r.shape,r.dtype,o,s.shape,l,a.shape),h=t.makeTensorInfo([c.length],"int32",c),p=t.makeTensorInfo([d.length],r.dtype,d);return[h,p]}const VBe={kernelName:R2,backendName:"webgl",kernelFunc:UBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WBe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=t.readSync(s.dataId),d=t.readSync(a.dataId),h=t.readSync(i.dataId),p=o.map(b=>t.readSync(b.dataId)),g=o.map(b=>b.shape),[x,y]=BDe(c,s.shape,d,a.shape,a.dtype,h,i.shape,p,g,l);return t.makeTensorInfo(x,a.dtype,y)}const HBe={kernelName:O2,backendName:"webgl",kernelFunc:WBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y7=n=>{const{backend:e,attrs:t}=n,{start:r,stop:s,step:a,dtype:i}=t,o=jDe(r,s,a,i);return e.makeTensorInfo([o.length],i,o)},GBe={kernelName:D2,backendName:"webgl",kernelFunc:Y7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qBe="return 1.0 / x;",KBe=xn({opSnippet:qBe}),XBe={kernelName:Ip,backendName:"webgl",kernelFunc:KBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe=Vi+`
  return (x < 0.0) ? 0.0 : x;
`,QBe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ZBe=xn({opSnippet:YBe,packedOpSnippet:QBe}),JBe={kernelName:Ap,backendName:"webgl",kernelFunc:ZBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6e=Vi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,t6e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,n6e=xn({opSnippet:e6e,packedOpSnippet:t6e}),r6e={kernelName:$p,backendName:"webgl",kernelFunc:n6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s6e{constructor(e,t,r,s,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,t,r,c];const d=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r];let p;a?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/h[0]},
          ${d[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a6e{constructor(e,t,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,t,r,c];const d=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r];let p;a?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/h[0]},
          ${d[1]/h[1]},
          ${d[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,c]=o,d=Ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new a6e(s.shape,l,c,a,i):new s6e(s.shape,l,c,a,i);return t.runWebGLProgram(d,[s],"float32")}const o6e={kernelName:Ux,backendName:"webgl",kernelFunc:i6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l6e{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,s,a]=t,[,i,o]=e,l=[r&&i>1?s-1:s,r&&o>1?a-1:a],c=[r&&i>1?i-1:i,r&&o>1?o-1:o],d=l[0]/c[0],h=l[1]/c[1],p=1/d,g=1/h,x=Math.ceil(p)*2+2,y=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${x});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6e(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:i}=r,o=new l6e(a.shape,s.shape,i);return t.runWebGLProgram(o,[a],a.dtype)}const u6e={kernelName:M2,backendName:"webgl",kernelFunc:c6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d6e{constructor(e,t,r,s,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,t,r,c];const d=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;a?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${d[0]/h[0]},
          ${d[1]/h[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f6e{constructor(e,t,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,c]=e;this.outputShape=[i,t,r,c];const d=[s&&t>1?o-1:o,s&&r>1?l-1:l],h=[s&&t>1?t-1:t,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;a?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${d[0]/h[0]},
          ${d[1]/h[1]},
          ${d[1]/h[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,c]=o,d=Ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new f6e(s.shape,l,c,a,i):new d6e(s.shape,l,c,a,i);return t.runWebGLProgram(d,[s],s.dtype)}const p6e={kernelName:zx,backendName:"webgl",kernelFunc:h6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m6e{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,s,a]=t,[,i,o]=e,l=[r&&i>1?s-1:s,r&&o>1?a-1:a],c=[r&&i>1?i-1:i,r&&o>1?o-1:o],d=l[0]/c[0],h=l[1]/c[1],p=1/d,g=1/h,x=Math.ceil(p)*2+2,y=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${d});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${x});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6e(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:i}=r,o=new m6e(a.shape,s.shape,i);return t.runWebGLProgram(o,[a],a.dtype)}const x6e={kernelName:L2,backendName:"webgl",kernelFunc:g6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y6e{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>t.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,a=e.map((o,l)=>s(l)).join(","),i=Un(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b6e{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Js("rc",r),a=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Un(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${a}){
            result.g = ${c(s.slice())};
          }
          if(${i}) {
            result.b = ${d(s.slice())};
            if(${a}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(x){return p(x)}function c(x){return x[r-1]="("+x[r-1]+" + 1)",p(x)}function d(x){return x[r-2]="("+x[r-2]+" + 1)",p(x)}function h(x){return x[r-1]="("+x[r-1]+" + 1)",x[r-2]="("+x[r-2]+" + 1)",p(x)}function p(x){const y=e.map((T,N)=>g(N,x)),b=y.join(","),S=y.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${S}))`}function g(x,y){return t.indexOf(x)!==-1&&e[x]!==1?`${e[x]} - ${y[x]} - 1`:`${y[x]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v6e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dims:a}=r,i=s.shape.length,o=nn(a,s.shape);if(i===0)return ja({inputs:{x:s},backend:t});const l=Ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new b6e(s.shape,o):new y6e(s.shape,o);return t.runWebGLProgram(l,[s],s.dtype)}const w6e={kernelName:Vx,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S6e{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let a="";typeof t=="number"?a=`float outputValue = ${t.toFixed(2)};`:a=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e={kernelName:eS,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:s,fillValue:a,center:i}=e,o=t,l=new S6e(r.shape,a),[c,d]=PA(i,r.shape[1],r.shape[2]),h=[[c,d,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N6e=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,C6e=xn({opSnippet:N6e}),E6e={kernelName:Rp,backendName:"webgl",kernelFunc:C6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k6e="return inversesqrt(x);",_6e=xn({opSnippet:k6e,cpuKernelImpl:zDe}),I6e={kernelName:Op,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V${constructor(e,t,r,s,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=Un(a.length),d=Un(i.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const x=`getUpdates(${g})`;let y="";l&&(y="coords[0], coords[1]");const b=`getDefaultValue(${y})`,S=t>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${d} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${S};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${x};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A6e{constructor(e,t,r,s,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=Un(a.length),d=Un(i.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const x=`getUpdates(${g})`;let y="";l&&(y="coords[0], coords[1]");const b=`getDefaultValue(${y})`,S=t>1?"strides[j]":"strides",T=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${d} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${S};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${T};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${x};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=Eu(a,s,i),p=[h/c,c];if(h===0)return t.makeTensorInfo(i,s.dtype);const g=ht({inputs:{x:s},backend:t,attrs:{shape:[l,o]}}),x=ht({inputs:{x:a},backend:t,attrs:{shape:[l,c]}}),y=t.makeTensorInfo([],"float32",new Float32Array([0]));let b;Ce().getBool("WEBGL_PACK")?b=new A6e(l,o,g.shape.length,x.shape.length,d,p):b=new V$(l,o,g.shape.length,x.shape.length,d,p);const S=t.runWebGLProgram(b,[x,g,y],x.dtype),T=ht({inputs:{x:S},backend:t,attrs:{shape:i}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(y),T}const R6e={kernelName:P2,backendName:"webgl",kernelFunc:$6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O6e{constructor(e,t,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=Ce().getNumber("WEBGL_VERSION")===2?a:i,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:s,values:a}=e,{side:i}=r,o=new O6e(s.shape[0],s.shape[1],a.shape[1],i),l=[[s.shape[1]]];return t.runWebGLProgram(o,[s,a],"int32",l)}const F6e={kernelName:j2,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L6e{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let s,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let d=0;d<t.length;d++)c.push(`${o[d]}`),d<e&&l.push(`${o[d]}`);s=l.join(),a=c.join()}const i=Un(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M6e(n){const{inputs:e,backend:t}=n,{condition:r,t:s,e:a}=e,i=new L6e(r.shape.length,s.shape,s.shape.length);return t.runWebGLProgram(i,[r,s,a],ya(s.dtype,a.dtype))}const P6e={kernelName:Wx,backendName:"webgl",kernelFunc:M6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${VS};
  float scale = ${WS};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,j6e=xn({opSnippet:B6e}),z6e={kernelName:Dp,backendName:"webgl",kernelFunc:j6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6e=om+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,V6e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,W6e=xn({opSnippet:U6e,packedOpSnippet:V6e,cpuKernelImpl:VDe}),H6e={kernelName:Pp,backendName:"webgl",kernelFunc:W6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,q6e=xn({opSnippet:G6e}),K6e={kernelName:Mp,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6e=om+`
  return sin(x);
`,Y6e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${cf}
  return result;
`,Q6e=xn({opSnippet:X6e,packedOpSnippet:Y6e}),Z6e={kernelName:Fp,backendName:"webgl",kernelFunc:Q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,e5e=xn({opSnippet:J6e}),t5e={kernelName:Lp,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,r5e=xn({opSnippet:n5e}),s5e={kernelName:Bp,backendName:"webgl",kernelFunc:r5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5e=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,paddings:i}=r;Z(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((S,T)=>S*T),l=[[0,0]];l.push(...i);for(let S=1+a.length;S<s.shape.length;++S)l.push([0,0]);const c=[],d=X7({inputs:{x:s},backend:t,attrs:{paddings:l,constantValue:0}}),h=v1(d.shape,a,o,!1),p=w1(h.length,a.length,!1),g=S1(d.shape,a,o,!1),x=ht({inputs:{x:d},backend:t,attrs:{shape:h}}),y=ra({inputs:{x},backend:t,attrs:{perm:p}}),b=ht({inputs:{x:y},backend:t,attrs:{shape:g}});return c.push(d),c.push(x),c.push(y),c.forEach(S=>t.disposeIntermediateTensorInfo(S)),b},i5e={kernelName:qx,backendName:"webgl",kernelFunc:a5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(n){const{inputs:e,backend:t}=n,{indices:r,values:s,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=t.readSync(r.dataId),l=t.readSync(s.dataId),c=t.readSync(a.dataId),d=t.readSync(i.dataId)[0],[h,p,g,x,y]=HDe(o,r.shape,r.dtype,l,s.dtype,c,d);return[t.makeTensorInfo(p,r.dtype,h),t.makeTensorInfo([p[0]],s.dtype,g),t.makeTensorInfo([x.length],"bool",new Uint8Array(x.map(b=>Number(b)))),t.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const l5e={kernelName:z2,backendName:"webgl",kernelFunc:o5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5e(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(t.readSync(s.dataId)),o=t.readSync(r.dataId),l=Array.from(t.readSync(a.dataId)),[c,d,h]=GDe(o,r.shape,r.dtype,i,l);return[t.makeTensorInfo(d,r.dtype,c),t.makeTensorInfo([h.length],a.dtype,new Int32Array(h))]}const u5e={kernelName:U2,backendName:"webgl",kernelFunc:c5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const i=t.readSync(r.dataId),o=t.readSync(s.dataId),l=t.readSync(a.dataId),[c,d]=v7(i,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(d,r.dtype,c)}const f5e={kernelName:V2,backendName:"webgl",kernelFunc:d5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5e(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const i=t.readSync(r.dataId),o=t.readSync(s.dataId),l=t.readSync(a.dataId),[c,d]=v7(i,r.shape,r.dtype,o,l);return t.makeTensorInfo(d,r.dtype,c)}const p5e={kernelName:W2,backendName:"webgl",kernelFunc:h5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:d,strides:h,outputSize:p}=Eu(a,s,o),g=!1;if(a.dtype==="string"){const S=t.bufferSync(s),T=t.bufferSync(a),N=ql(t.readSync(i.dataId)[0]),C=UDe(S,T,o,p,d,c,l,h,N,g);return t.makeTensorInfo(o,C.dtype,C.values)}const x=new V$(c,l,s.shape.length,a.shape.length,h,[p,1],g),y=t.runWebGLProgram(x,[a,s,i],a.dtype),b=ht({inputs:{x:y},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(y),b}const g5e={kernelName:H2,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=nn(i,s.shape)[0],l=JA(s,a,o),c=s.shape.length,d=new Array(c).fill(0),h=s.shape.slice();return l.map(p=>{const g=[...h];g[o]=p;const x=lm({inputs:{x:s},backend:t,attrs:{begin:d,size:g}});return d[o]+=p,x})}const y5e={kernelName:Kx,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rP="return sqrt(x);",b5e=xn({opSnippet:rP,packedOpSnippet:rP,cpuKernelImpl:qDe}),v5e={kernelName:jp,backendName:"webgl",kernelFunc:b5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e="return x * x;",S5e=xn({opSnippet:w5e}),T5e={kernelName:G2,backendName:"webgl",kernelFunc:S5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sP="return (a - b) * (a - b);",N5e=$s({opSnippet:sP,packedOpSnippet:sP}),C5e={kernelName:zp,backendName:"webgl",kernelFunc:N5e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const a=t.readSync(s.dataId),i=Ql(a),o=KDe(i,"string",r);return t.makeTensorInfo(s.shape,"string",o)}const k5e={kernelName:Yx,backendName:"webgl",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e({inputs:n,attrs:e,backend:t}){const{x:r}=n,s=Vi+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new Uo(r.shape,s);return t.runWebGLProgram(a,[r],r.dtype)}const I5e={kernelName:Gp,backendName:"webgl",kernelFunc:_5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A5e{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,a=Un(r.length),i=Un(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((c,d)=>(l++,r.length===1?`coords * strides[${d}] + begin[${d}]`:`coords[${l-1}] * strides[${d}] + begin[${d}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${t});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:c,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:x,isIdentity:y,sliceDim0:b,isSimpleSlice:S,begin:T,end:N,strides:C}=DA(s.shape,a,i,o,l,c,d,h,p);let I;if(y)I=ht({inputs:{x:s},backend:t,attrs:{shape:x}});else if(b||S){Z(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const D=$A(T,N,C),A=lm({inputs:{x:s},backend:t,attrs:{begin:T,size:D}});I=ht({inputs:{x:A},backend:t,attrs:{shape:x}}),t.disposeIntermediateTensorInfo(A)}else if(t.shouldExecuteOnCPU([s])){const A=t.readSync(s.dataId),_=Yt(s.shape,s.dtype,A),k=XDe(g,_,C,T);I=t.makeTensorInfo(x,s.dtype,k.values)}else{const A=new A5e(T,C,g);I=t.runWebGLProgram(A,[s],s.dtype)}const F=ht({inputs:{x:I},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(I),F}const R5e={kernelName:q2,backendName:"webgl",kernelFunc:$5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5e(n){const{inputs:e,backend:t,attrs:r}=n,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:d,dataSplits:h}=e,p=t.readSync(d.dataId),g=t.readSync(h.dataId),[x,y]=YDe(p,g,s,a,i,o,l,c);return[t.makeTensorInfo([x.length],"string",x),t.makeTensorInfo(h.shape,"int32",y)]}const D5e={kernelName:K2,backendName:"webgl",kernelFunc:O5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F5e(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:s}=r,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=t.readSync(a.dataId),l=t.readSync(i.dataId)[0],[c,d,h]=QDe(o,l,s),p=d.length;return[t.makeTensorInfo([p,2],"int32",c),t.makeTensorInfo([p],"string",d),t.makeTensorInfo([2],"int32",new Int32Array(h))]}const L5e={kernelName:X2,backendName:"webgl",kernelFunc:F5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5e(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=t.readSync(a.dataId),o=ZDe(i,s);return t.makeTensorInfo(a.shape,"int32",o)}const P5e={kernelName:Y2,backendName:"webgl",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e="return tan(x);",j5e=xn({opSnippet:B5e}),z5e={kernelName:Vp,backendName:"webgl",kernelFunc:j5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,V5e=xn({opSnippet:U5e}),W5e={kernelName:Wp,backendName:"webgl",kernelFunc:V5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5e(n){const{inputs:e,backend:t,attrs:r}=n,{tensor:s,indices:a,updates:i}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=Eu(i,a,s.shape),p=[h/c,c];if(h===0)return t.makeTensorInfo(s.shape,a.dtype);const g=ht({inputs:{x:a},backend:t,attrs:{shape:[l,o]}}),x=ht({inputs:{x:i},backend:t,attrs:{shape:[l,c]}}),y=ht({inputs:{x:s},backend:t,attrs:{shape:p}}),b=new V$(l,o,g.shape.length,x.shape.length,d,p,!1,!0),S=t.runWebGLProgram(b,[x,g,y],y.dtype),T=ht({inputs:{x:S},backend:t,attrs:{shape:s.shape}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(S),T}const G5e={kernelName:B2,backendName:"webgl",kernelFunc:H5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q5e{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*t[i];this.outputShape=r,this.rank=r.length;const s=Un(this.rank),a=K5e(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function K5e(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<n.length;s++)r.push(`imod(${t[s]}, ${n[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reps:a}=r;if(s.dtype==="string"||s.shape.length>5){const l=t.readSync(s.dataId),c=s.dtype==="string"?l.map(p=>ql(p)):l,d=Yt(s.shape,s.dtype,c),h=e3e(d,a);return t.makeTensorInfo(h.shape,h.dtype,h.values)}const i=new q5e(s.shape,a);return t.runWebGLProgram(i,[s],s.dtype)}const X5e={kernelName:Hp,backendName:"webgl",kernelFunc:Q7};class Y5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Q5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function aP(n){let e=1;for(;e<n;)e*=2;return e}function Z5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{k:a,sorted:i}=r,o=Ce().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ce().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,d=c[c.length-1];if(t.shouldExecuteOnCPU([s])||d<o||a>l){const k=t.readSync(s.dataId),[O,P]=t3e(k,c,s.dtype,a,i);return[t.makeTensorInfo(O.shape,O.dtype,O.values),t.makeTensorInfo(P.shape,P.dtype,P.values)]}if(a===0)return c[c.length-1]=0,[t.makeTensorInfo(c,s.dtype,[]),t.makeTensorInfo(c,"int32",[])];if(d===1)return[s,L1({attrs:{shape:c,dtype:"int32",value:0},backend:t})];const h=t.texData.get(s.dataId),p=h!==null&&h.isPacked,g=p?t.unpackTensor(s):s,y=Fe(c)/d,b=ht({inputs:{x:g},attrs:{shape:[y,d]},backend:t});p&&Ju(t,g);const S=aP(a),T=aP(d);let N=null;const C=()=>N===null?[b,b]:[b,N],I=(k,O,P)=>{const W=C(),K=new Y5e(P),V=[[d],[N===null?1:0],[Number.NEGATIVE_INFINITY],[k],[O]],X=N;N=t.runWebGLProgram(K,W,"int32",V),Ju(t,X)};for(let k=1;k<S;k*=2){const O=k*2;for(let P=k;P>=1;P/=2)I(O,P,[y,T])}for(let k=T;k>S;k/=2){const O=C(),P=new Q5e([y,k/2]),K=[[d],[N===null?1:0],[S]],q=N;N=t.runWebGLProgram(P,O,"int32",K),Ju(t,q);const V=S/2,X=V*2;for(let Q=V;Q>=1;Q/=2)I(X,Q,N.shape)}let F=N;N=lm({inputs:{x:N},backend:t,attrs:{begin:0,size:[y,a]}}),Ju(t,F);let D=V7({inputs:{x:b,indices:N},backend:t,attrs:{axis:1,batchDims:1}});Ju(t,b);const A=c.slice(0,-1);A.push(a),F=N,N=ht({inputs:{x:N},attrs:{shape:A},backend:t}),Ju(t,F);const _=D;return D=ht({inputs:{x:D},attrs:{shape:A},backend:t}),Ju(t,_),[D,N]}const J5e={kernelName:Q2,backendName:"webgl",kernelFunc:Z5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eje{constructor(e,t,r,s,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tje(n){const{inputs:e,backend:t,attrs:r}=n,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:c}=r,[d,h,p,g]=s.shape,[x,y]=c??[h,p],b=[d,x,y,g],S=new eje(h,p,i,o,l,b);return t.runWebGLProgram(S,[s,a],"float32")}const nje={kernelName:Z2,backendName:"webgl",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rje(n){const{inputs:e,attrs:t,backend:r}=n,{axis:s}=t,{x:a}=e;O1(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:c}=n3e(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const sje={kernelName:J2,backendName:"webgl",kernelFunc:rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aje(n){const{inputs:e,backend:t,attrs:r}=n,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s,o=i.shape.length,l=s.shape[a],c=new Array(o-1);let d=0;for(let y=0;y<o;y++)y!==a&&(c[d++]=i.shape[y]);const h=[],p=new Array(o).fill(0),g=i.shape.slice();g[a]=1;const x=new Array(l);for(let y=0;y<x.length;y++){p[a]=y;const b=lm({inputs:{x:i},backend:t,attrs:{begin:p,size:g}}),S=ht({inputs:{x:b},backend:t,attrs:{shape:c}});x[y]=S,h.push(b)}return h.forEach(y=>t.disposeIntermediateTensorInfo(y)),x}const ije={kernelName:Qx,backendName:"webgl",kernelFunc:aje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oje{constructor(e,t){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/r);this.outputShape=[s,o];const l="0.0",c="sumValue",d=Math.floor(r/4)*4,h=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";a%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let x="";a%r>0&&(x=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${x}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${d}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${d};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,segmentIds:a}=e,{numSegments:i}=r,o=s.shape.length,l=[];let c=0;const d=yr([c],o);let h=s;d!=null&&(h=ra({inputs:{x:s},backend:t,attrs:{perm:d}}),l.push(h),c=Rr(1,o)[0]);const p=k8(h.shape,c,i),g=Fe([h.shape[c]]),x=ht({inputs:{x:h},backend:t,attrs:{shape:[-1,g]}});l.push(x);const y=nS(s.dtype),b=(C,I,F,D,A)=>{const _=C.shape[0],k=C.shape[1],O=E8(k,A),P={windowSize:O,inSize:k,batchSize:_,numSegments:A},W=new oje(P,I),K=t.compileAndRun(W,[C,F],D);if(l.push(K),K.shape[1]===A)return K;const q=Y7({backend:t,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),V=Q7({inputs:{x:q},backend:t,attrs:{reps:[k/O]}});return l.push(q),l.push(V),b(K,I,V,D,A)},S=b(x,"unsortedSegmentSum",a,y,i),T=ht({inputs:{x:S},backend:t,attrs:{shape:p}});let N=T;if(d!=null){l.push(T);const C=Su(d);N=ra({inputs:{x:N},backend:t,attrs:{perm:C}})}return l.forEach(C=>t.disposeIntermediateTensorInfo(C)),N}const cje={kernelName:Zx,backendName:"webgl",kernelFunc:lje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uje=[q3e,X3e,Z3e,t4e,r4e,i4e,l4e,u4e,p4e,g4e,b4e,S4e,C4e,I4e,R4e,D4e,L4e,j4e,U4e,W4e,K4e,tFe,rFe,oFe,cFe,mFe,xFe,wFe,A3e,NFe,IFe,OFe,BFe,UFe,WFe,GFe,KFe,ZFe,tLe,sLe,iLe,lLe,uLe,hLe,mLe,bLe,wLe,NLe,kLe,ILe,OLe,MLe,zLe,WLe,qLe,KLe,YLe,ZLe,eMe,nMe,sMe,lMe,dMe,pMe,gMe,bMe,SMe,EMe,AMe,I3e,RMe,kFe,FMe,PMe,zMe,R3e,HMe,XMe,QMe,tPe,sPe,lPe,dPe,mPe,bPe,SPe,NPe,_Pe,APe,RPe,LPe,PPe,jPe,UPe,WPe,KPe,ZPe,nBe,uBe,F3e,pBe,xBe,vBe,TBe,dFe,EBe,_Be,ABe,OBe,MBe,D3e,BBe,zBe,VBe,HBe,GBe,fFe,iBe,XBe,JBe,r6e,M3e,o6e,u6e,p6e,x6e,w6e,T6e,E6e,I6e,R6e,F6e,P6e,z6e,H6e,K6e,Z6e,t5e,J4e,lBe,s5e,i5e,l5e,u5e,f5e,p5e,g5e,y5e,v5e,T5e,C5e,k5e,I5e,R5e,D5e,L5e,P5e,oBe,W3e,z5e,W5e,G5e,X5e,J5e,nje,H3e,sje,ije,cje,kBe];for(const n of uje)tS(n);const dje=({text:n="Analyzing Document..."})=>w.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-85 flex flex-col items-center justify-center rounded-lg z-10",children:[w.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"}),w.jsx("p",{className:"mt-4 text-indigo-600 font-semibold",children:n})]});function fje({imageSrc:n,onProcessComplete:e}){const t=L.useRef(null),r=L.useRef(new Image),[s,a]=L.useState(null),[i,o]=L.useState(null),[l,c]=L.useState(!0),[d,h]=L.useState("Loading AI & CV Libraries..."),[p,g]=L.useState([]),[x,y]=L.useState(null),[b,S]=L.useState("");L.useEffect(()=>{let A=!1,_=!1;const k=()=>{A&&_&&console.log("Both AI model and CV library are ready.")};if(O8.load().then(O=>{a(O),A=!0,k()}).catch(O=>{console.error("Failed to load AI model",O),S("Failed to load AI model.")}),window.cv)o(window.cv),_=!0,k();else{const O=document.querySelector('script[src*="opencv.js"]');O&&(O.onload=()=>{window.cv?(o(window.cv),_=!0,k()):S("Failed to load CV library.")})}},[]);const T=L.useCallback(()=>{const A=t.current;if(!A||!r.current.src||p.length!==4)return;const _=A.getContext("2d");_.clearRect(0,0,A.width,A.height),_.drawImage(r.current,0,0,A.width,A.height);const k=iP(p),O=[k.tl,k.tr,k.br,k.bl];_.strokeStyle="rgba(0, 120, 255, 0.8)",_.lineWidth=3,_.beginPath(),_.moveTo(O[0].x,O[0].y),O.forEach(P=>_.lineTo(P.x,P.y)),_.closePath(),_.stroke(),p.forEach((P,W)=>{_.beginPath(),_.arc(P.x,P.y,15,0,2*Math.PI),_.fillStyle=x===W?"rgba(255, 0, 0, 0.95)":"rgba(255, 0, 0, 0.65)",_.fill()})},[p,x]);L.useEffect(()=>{if(!n||!s||!i){n&&(!s||!i)&&(c(!0),h("Waiting for libraries to load..."));return}c(!0),h("Analyzing Document..."),S("");const A=r.current;A.crossOrigin="anonymous",A.src=n,A.onload=async()=>{const _=t.current,k=1024,O=Math.min(k/A.width,k/A.height);_.width=A.width*O,_.height=A.height*O;const P=await s.detect(A);console.log("AI Detections:",P);const W=P.find(K=>K.class==="book");if(W){console.log("Found a 'book' prediction, using its bounding box.");const[K,q,V,X]=W.bbox;g([{x:K*O,y:q*O},{x:(K+V)*O,y:q*O},{x:(K+V)*O,y:(q+X)*O},{x:K*O,y:(q+X)*O}])}else{S("Smart detection couldn't find a document. Please adjust manually.");const K=_.width,q=_.height;g([{x:K*.15,y:q*.15},{x:K*.85,y:q*.15},{x:K*.85,y:q*.85},{x:K*.15,y:q*.85}])}c(!1)},A.onerror=()=>{c(!1),S("Could not load the image.")}},[n,s,i]),L.useEffect(()=>{T()},[p,T]);const N=A=>{const _=t.current,k=_.getBoundingClientRect(),O=A.clientX||A.touches[0].clientX,P=A.clientY||A.touches[0].clientY,W=_.width/k.width,K=_.height/k.height;return{x:(O-k.left)*W,y:(P-k.top)*K}},C=A=>{A.preventDefault();const _=N(A);for(let k=0;k<p.length;k++)if(Math.hypot(p[k].x-_.x,p[k].y-_.y)<25){y(k);return}},I=A=>{if(A.preventDefault(),x===null)return;const _=N(A);g(k=>k.map((O,P)=>P===x?_:O))},F=()=>y(null),D=()=>{if(!(p.length!==4||!i))try{const _=r.current.width/t.current.width,k=iP(p),O=[k.tl,k.tr,k.br,k.bl].map(U=>({x:U.x*_,y:U.y*_})),P=i.imread(r.current),W=Math.hypot(O[2].x-O[3].x,O[2].y-O[3].y),K=Math.hypot(O[1].x-O[0].x,O[1].y-O[0].y),q=Math.max(Math.floor(W),Math.floor(K)),V=Math.hypot(O[1].x-O[2].x,O[1].y-O[2].y),X=Math.hypot(O[0].x-O[3].x,O[0].y-O[3].y),Q=Math.max(Math.floor(V),Math.floor(X)),Y=new i.Size(q,Q),j=i.matFromArray(4,1,i.CV_32FC2,[O[0].x,O[0].y,O[1].x,O[1].y,O[3].x,O[3].y,O[2].x,O[2].y]),J=i.matFromArray(4,1,i.CV_32FC2,[0,0,q-1,0,0,Q-1,q-1,Q-1]),M=i.getPerspectiveTransform(j,J);let z=new i.Mat;i.warpPerspective(P,z,M,Y,i.INTER_LINEAR,i.BORDER_CONSTANT,new i.Scalar);const G=document.createElement("canvas");i.imshow(G,z),e(G.toDataURL("image/jpeg")),P.delete(),M.delete(),z.delete(),j.delete(),J.delete()}catch(A){console.error("Error during cropping:",A),S("Failed to crop the image. Please try again.")}};return w.jsxs("div",{className:"relative",children:[l&&w.jsx(dje,{text:d}),w.jsx("div",{className:"relative w-full",children:w.jsx("canvas",{ref:t,className:`w-full h-auto rounded-lg touch-none ${l?"invisible":"visible"}`,onMouseDown:C,onMouseMove:I,onMouseUp:F,onMouseLeave:F,onTouchStart:C,onTouchMove:I,onTouchEnd:F})}),b&&w.jsx("p",{className:"text-center text-orange-600 font-semibold mt-4",children:b}),!l&&w.jsx("div",{className:"mt-4 flex justify-center",children:w.jsx("button",{onClick:D,disabled:p.length!==4,className:"bg-green-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-green-700 transition-colors shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:bg-gray-400",children:"Crop & Confirm"})})]})}function iP(n){if(n.length!==4)return{tl:0,tr:0,br:0,bl:0};const e=n.reduce((i,o)=>({x:i.x+o.x/n.length,y:i.y+o.y/n.length}),{x:0,y:0});let t,r,s,a;if(n.forEach(i=>{i.x<e.x&&i.y<e.y?t=i:i.x>e.x&&i.y<e.y?r=i:i.x<e.x&&i.y>e.y?s=i:i.x>e.x&&i.y>e.y&&(a=i)}),!t||!r||!s||!a){n.sort((l,c)=>l.y-c.y);const i=n.slice(0,2).sort((l,c)=>l.x-c.x),o=n.slice(2,4).sort((l,c)=>l.x-c.x);return{tl:i[0],tr:i[1],bl:o[0],br:o[1]}}return{tl:t,tr:r,br:a,bl:s}}const hje=({message:n})=>w.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-85 flex flex-col items-center justify-center rounded-lg z-30",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"}),w.jsx("p",{className:"mt-4 text-indigo-600 font-semibold text-center px-4",children:n})]});function pje({onCapture:n,onCancel:e}){const t=L.useRef(null),r=L.useRef(null),s=L.useRef(null),a=L.useRef(0),[i,o]=L.useState(!1),[l,c]=L.useState("Initializing..."),[d,h]=L.useState(!1),p=L.useCallback(x=>{const y=s.current;if(!y){console.warn("OpenCV not ready, sending uncropped image."),n(x.toDataURL("image/jpeg"));return}try{let b=y.imread(x),S=new y.Mat;y.cvtColor(b,S,y.COLOR_RGBA2GRAY,0);let T=new y.Mat;y.GaussianBlur(S,T,new y.Size(5,5),0);let N=new y.Mat;y.Canny(T,N,50,150);let C=new y.MatVector,I=new y.Mat;y.findContours(N,C,I,y.RETR_EXTERNAL,y.CHAIN_APPROX_SIMPLE);let F=0,D=null;for(let se=0;se<C.size();++se){let pe=C.get(se),me=y.contourArea(pe);if(me>1e4){let be=y.arcLength(pe,!0),ge=new y.Mat;y.approxPolyDP(pe,ge,.02*be,!0),ge.rows===4&&me>F&&(F=me,D=ge.clone()),ge.delete()}pe.delete()}if(!D)throw new Error("OpenCV couldn't find precise corners.");const A=[];for(let se=0;se<D.data32S.length;se+=2)A.push({x:D.data32S[se],y:D.data32S[se+1]});A.sort((se,pe)=>se.y-pe.y);let _=A.slice(0,2).sort((se,pe)=>se.x-pe.x),k=A.slice(2,4).sort((se,pe)=>se.x-pe.x);const[O,P,W,K]=[_[0],_[1],k[0],k[1]],q=Math.hypot(K.x-W.x,K.y-W.y),V=Math.hypot(P.x-O.x,P.y-O.y),X=Math.max(Math.floor(q),Math.floor(V)),Q=Math.hypot(P.x-K.x,P.y-K.y),Y=Math.hypot(O.x-W.x,O.y-W.y),j=Math.max(Math.floor(Q),Math.floor(Y));if(X<=0||j<=0)throw new Error("Invalid crop dimensions.");const J=y.matFromArray(4,1,y.CV_32FC2,[O.x,O.y,P.x,P.y,W.x,W.y,K.x,K.y]),M=y.matFromArray(4,1,y.CV_32FC2,[0,0,X-1,0,0,j-1,X-1,j-1]),z=y.getPerspectiveTransform(J,M);let G=new y.Mat;y.warpPerspective(b,G,z,new y.Size(X,j));const U=document.createElement("canvas");y.imshow(U,G),n(U.toDataURL("image/jpeg")),b.delete(),S.delete(),T.delete(),N.delete(),C.delete(),I.delete(),D.delete(),z.delete(),G.delete(),J.delete(),M.delete()}catch(b){console.warn("Precise crop failed, sending uncropped image:",b),n(x.toDataURL("image/jpeg"))}},[n]),g=L.useCallback(async()=>{if(!r.current||!t.current||!t.current.srcObject||i)return;if((await r.current.detect(t.current)).find(b=>b.class==="book"&&b.score>.65)){if(a.current+=1,a.current>15){o(!0);const S=t.current,T=document.createElement("canvas");T.width=S.videoWidth,T.height=S.videoHeight,T.getContext("2d").drawImage(S,0,0),S.srcObject&&S.srcObject.getTracks().forEach(N=>N.stop()),p(T);return}}else a.current=0;requestAnimationFrame(g)},[i,p]);return L.useEffect(()=>{let x=!0;async function y(){try{c("Loading AI Model...");const b=await O8.load();if(!x)return;if(r.current=b,c("Loading CV Library..."),!window.cv){const T=document.createElement("script");T.src="https://docs.opencv.org/4.x/opencv.js",T.async=!0,await new Promise((N,C)=>{T.onload=N,T.onerror=C,document.body.appendChild(T)})}if(!x)return;s.current=window.cv,c("Starting Camera...");const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:1280,height:720}});if(!x||!t.current)return;t.current.srcObject=S,await new Promise(T=>{t.current.onloadeddata=T}),c(null),h(!0),g()}catch(b){x&&(console.error("Initialization failed:",b),c(`Error: ${b.name}.`))}}return y(),()=>{x=!1,t.current&&t.current.srcObject&&t.current.srcObject.getTracks().forEach(b=>b.stop())}},[g]),w.jsxs("div",{className:"relative w-full h-[80vh] bg-black rounded-lg",children:[!d&&w.jsx(hje,{message:l}),w.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover transition-opacity duration-300 ${d?"opacity-100":"opacity-0"}`}),w.jsx("button",{onClick:e,className:"absolute top-4 right-4 bg-white bg-opacity-80 text-black rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl shadow-lg z-20",children:""})]})}const mje=()=>w.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),gje=()=>w.jsxs("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]});function xje(){const n=JSON.parse(localStorage.getItem("user")||"{}"),[e,t]=L.useState(null),[r,s]=L.useState(null),[a,i]=L.useState("idle"),[o,l]=L.useState(""),[c,d]=L.useState(!1),h=L.useRef(null),p=T=>{const N=T.target.files[0];if(N&&N.type.startsWith("image/")){const C=new FileReader;C.onloadend=()=>{t(C.result),s(null),i("idle"),l("")},C.readAsDataURL(N)}else i("error"),l("Please select a valid image file (JPG, PNG).")},g=T=>{s(T),t(null),d(!1)},x=T=>{t(T),d(!1),s(null),i("idle"),l("")},y=async()=>{if(!r){l("No cropped image to upload."),i("error");return}i("uploading"),l("Uploading cropped image...");try{const N=await(await fetch(r)).blob(),C=new File([N],"cropped_invoice.jpg",{type:"image/jpeg"}),I=new FormData;I.append("invoiceImage",C);const D=await fetch("https://172.20.0.49:3000/api/upload",{method:"POST",body:I}),A=await D.json();if(!D.ok)throw new Error(A.message||"An unknown server error occurred.");i("success"),l(A.message)}catch(T){console.error("Upload failed:",T),i("error"),l(T.message)}},b=()=>{t(null),s(null),i("idle"),l(""),h.current&&(h.current.value="")},S=()=>{switch(a){case"success":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";case"uploading":return"bg-blue-100 text-blue-800";default:return"hidden"}};return c?w.jsx("div",{className:"bg-gray-900 min-h-screen w-full flex items-center justify-center p-4",children:w.jsx("div",{className:"w-full max-w-2xl",children:w.jsx(pje,{onCapture:x,onCancel:()=>d(!1)})})}):w.jsxs(w.Fragment,{children:[w.jsx(Jl,{user:n}),w.jsx(xu,{user:n}),w.jsx("div",{className:"bg-slate-100 min-h-screen w-full flex items-center justify-center p-4 sm:p-6 lg:p-8",children:w.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-6 sm:p-8 space-y-6 transition-all duration-300",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Scan & Upload Invoice"}),w.jsx("p",{className:"mt-2 text-md text-gray-500",children:"Let's get your invoice ready for processing."})]}),w.jsx("input",{type:"file",ref:h,onChange:p,accept:"image/*",className:"hidden"}),!e&&!r&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{onClick:()=>h.current.click(),className:"relative block w-full border-2 border-dashed border-gray-300 rounded-xl p-10 sm:p-12 text-center hover:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 cursor-pointer transition-all duration-300 group",children:[w.jsx(mje,{}),w.jsx("span",{className:"mt-4 block text-lg font-semibold text-gray-800 group-hover:text-indigo-600",children:"Click to upload a file"}),w.jsx("span",{className:"mt-1 block text-sm text-gray-500",children:"Supports: PNG, JPG"})]}),w.jsxs("div",{className:"flex items-center my-4",children:[w.jsx("div",{className:"flex-grow border-t border-gray-300"}),w.jsx("span",{className:"flex-shrink mx-4 text-gray-500 font-semibold",children:"OR"}),w.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),w.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[w.jsx(gje,{}),"Scan with Camera"]})]}),e&&w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-xl font-bold text-center text-gray-800",children:"Crop the Document"}),w.jsx("p",{className:"text-center text-sm text-gray-500 -mt-2",children:"Drag the corners to adjust the selection."}),w.jsx("div",{className:"bg-gray-200 p-2 rounded-lg",children:w.jsx(fje,{imageSrc:e,onProcessComplete:g})})]}),r&&w.jsxs("div",{className:"space-y-6 animate-fade-in",children:[w.jsxs("div",{className:"text-center",children:[w.jsx("h3",{className:"text-xl font-bold text-green-600",children:"Image Ready!"}),w.jsx("p",{className:"text-gray-500",children:"Here is the cropped and cleaned result."})]}),w.jsx("div",{className:"p-2 border bg-gray-50 rounded-lg",children:w.jsx("img",{src:r,alt:"Cropped preview",className:"mx-auto max-h-[50vh] rounded-md shadow-lg"})}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[w.jsx("button",{onClick:y,disabled:a==="uploading",className:"w-full flex items-center justify-center bg-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:a==="uploading"?"Uploading...":"Confirm & Upload"}),w.jsx("button",{onClick:b,className:"w-full flex items-center justify-center bg-gray-200 text-gray-800 font-semibold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors duration-200",children:"Scan Another"})]})]}),w.jsx("div",{className:`p-4 rounded-lg text-center font-medium transition-all duration-300 ${S()}`,children:o})]})})]})}const Qb="https://172.20.0.49:3000";function oP(n){const{children:e,value:t,index:r,...s}=n;return w.jsx("div",{role:"tabpanel",hidden:t!==r,id:`developer-tabpanel-${r}`,"aria-labelledby":`developer-tab-${r}`,...s,children:t===r&&w.jsx(p6,{sx:{p:{xs:2,sm:3}},children:e})})}const yje=()=>{const[n,e]=L.useState([]),[t,r]=L.useState(""),[s,a]=L.useState(!0),i=async()=>{a(!0);try{const c=await fetch(`${Qb}/api/cities`);if(!c.ok)throw new Error("Failed to load cities");const d=await c.json();e(d)}catch(c){Dt.error(c.message)}finally{a(!1)}};L.useEffect(()=>{i()},[]);const o=async c=>{if(c.preventDefault(),!t.trim())return;const d=fetch(`${Qb}/api/cities`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.trim()})}).then(h=>h.ok?h.json():h.json().then(p=>Promise.reject(p.message||"Failed to add city")));Dt.promise(d,{loading:"Adding city...",success:h=>(r(""),i(),`City "${h.name}" added successfully!`),error:h=>`${h.toString()}`})},l=async(c,d)=>{const h=fetch(`${Qb}/api/cities/${c}`,{method:"DELETE"}).then(p=>p.ok?p.json():p.json().then(g=>Promise.reject(g.message||"Failed to delete city")));Dt.promise(h,{loading:`Deleting "${d}"...`,success:()=>(i(),"City deleted successfully!"),error:p=>`${p.toString()}`})};return w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-lg font-medium text-slate-800",children:"Add New City"}),w.jsxs("form",{onSubmit:o,className:"flex items-center gap-2",children:[w.jsx("input",{type:"text",value:t,onChange:c=>r(c.target.value),className:"flex-grow h-10 w-full rounded-md border border-slate-300 bg-transparent px-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",placeholder:"e.g., Tel Aviv"}),w.jsx("button",{type:"submit",disabled:!t.trim(),className:"inline-flex items-center justify-center h-10 w-10 rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:w.jsx(__,{size:20})})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("h3",{className:"text-lg font-medium text-slate-800",children:["Existing Cities (",n.length,")"]}),w.jsx("div",{className:"border rounded-lg max-h-72 overflow-y-auto",children:s?w.jsx("div",{className:"p-6 text-center",children:w.jsx(e6,{className:"animate-spin mx-auto text-slate-400"})}):n.length===0?w.jsx("p",{className:"p-6 text-center text-slate-500",children:"No cities added yet."}):w.jsx("ul",{className:"divide-y divide-slate-200",children:n.map(c=>w.jsxs("li",{className:"px-4 py-3 flex justify-between items-center group hover:bg-slate-50",children:[w.jsx("span",{className:"text-slate-800",children:c.name}),w.jsx("button",{onClick:()=>l(c._id,c.name),className:"text-slate-400 opacity-0 group-hover:opacity-100 hover:text-red-600 transition-opacity","aria-label":`Delete ${c.name}`,children:w.jsx(hv,{size:16})})]},c._id))})})]})]})},bje=()=>{const[n,e]=L.useState(""),[t,r]=L.useState(!0),[s,a]=L.useState(null),i=async()=>{r(!0),a(null);try{const o=await fetch(`${Qb}/api/logs`);if(!o.ok)throw new Error(`Failed to fetch logs: ${o.statusText}`);const c=(await o.json()).logContent.split(`
`).reverse().join(`
`);e(c)}catch(o){console.error(o),a(o.message)}finally{r(!1)}};return L.useEffect(()=>{i()},[]),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("h3",{className:"text-lg font-medium text-slate-800",children:"Application Log (app.log)"}),w.jsx("button",{onClick:i,disabled:t,className:"inline-flex items-center justify-center h-9 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:t?w.jsx(e6,{size:16,className:"animate-spin"}):"Refresh"})]}),s&&w.jsxs("div",{className:"flex items-center p-4 text-sm text-red-800 rounded-lg bg-red-100",role:"alert",children:[w.jsx(cse,{size:20,className:"mr-2"}),w.jsx("span",{className:"font-medium",children:"Error:"}),"",s]}),w.jsx("pre",{className:"bg-gray-900 text-white font-mono text-sm p-4 rounded-lg overflow-x-auto h-96 w-full",children:w.jsx("code",{children:t?"Loading logs...":n||"Log file is empty or not found."})})]})},vje=()=>{const n=JSON.parse(localStorage.getItem("user")||"{}"),[e,t]=L.useState(0),r=(s,a)=>{t(a)};return w.jsxs(w.Fragment,{children:[w.jsx(Wg,{position:"top-center",toastOptions:{duration:5e3}}),w.jsx(Jl,{user:n}),w.jsx(xu,{user:n}),w.jsxs("div",{className:"bg-slate-50 min-h-screen p-4 sm:p-6 lg:p-8 md:ml-15",children:[w.jsxs("header",{className:"mb-6",children:[w.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Developer Tools"}),w.jsx("p",{className:"mt-1 text-slate-500",children:"Manage system settings and view logs."})]}),w.jsx("div",{className:"max-w-6xl mx-auto",children:w.jsxs(NB,{elevation:2,sx:{borderRadius:"12px",overflow:"hidden"},children:[w.jsx(p6,{sx:{borderBottom:1,borderColor:"divider"},children:w.jsxs(ite,{value:e,onChange:r,"aria-label":"developer tools tabs",variant:"scrollable",scrollButtons:"auto",children:[w.jsx(uF,{label:"Manage Cities",id:"developer-tab-0"}),w.jsx(uF,{label:"System Logs",id:"developer-tab-1"})]})}),w.jsx(oP,{value:e,index:0,children:w.jsx(yje,{})}),w.jsx(oP,{value:e,index:1,children:w.jsx(bje,{})})]})})]})]})},v0="https://172.20.0.49:3000",ed=n=>{if(!n)return"";let e;const t=n.match(/\((.*?)\)/);if(t&&t[1])e=t[1].trim();else{let r=n;r=r.replace(/^\s+\d+\s*-\s*/,""),r=r.replace(/-\d+$/,"");const s=["","","","","","","",""," ",""," 7","","","-",""],a=new RegExp(`\\s*-?\\s*(${s.join("|")})`,"g");r=r.replace(a,""),e=r.trim().replace(/\s*-$/,"").trim()}return e.startsWith("")&&(e=e.replace(/^/,"")),e===" "?" ":e===""?"":e},Ib=n=>{if(typeof n!="string"||n.length!==12)return{date:"N/A",time:"N/A"};try{const e=n.substring(0,8),t=n.substring(8),r=e.substring(0,4),s=e.substring(4,6),a=e.substring(6,8),o=new Date(r,s-1,a).toLocaleDateString("he-IL",{day:"2-digit",month:"2-digit",year:"numeric"}),l=t.substring(0,2),c=t.substring(2,4),d=`${l}:${c}`;return{date:o,time:d}}catch(e){return console.error("Error formatting time slot:",n,e),{date:"Invalid",time:"Format"}}},wje=({isOpen:n,onClose:e,onSave:t,rowData:r})=>{const[s,a]=L.useState({});L.useEffect(()=>{a(r||{})},[r]);const i=l=>{a({...s,[l.target.name]:l.target.value})},o=()=>{t(s)};return n?w.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg z-50",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[w.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Edit Record"}),w.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-800",children:w.jsx(Zc,{size:24})})]}),w.jsxs("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-slate-600",children:"Order No."}),w.jsx("p",{className:"mt-1 text-sm text-slate-800 font-medium p-2",children:s.so_no||""})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"wave_no",className:"block text-sm font-medium text-slate-600",children:"Wave No."}),w.jsx("p",{className:"mt-1 text-sm text-slate-800 font-medium p-2",children:s.wave_no||""})]}),w.jsxs("div",{className:"sm:col-span-2",children:[w.jsx("label",{htmlFor:"customer_city",className:"block text-sm font-medium text-slate-600",children:"City"}),w.jsx("input",{type:"text",id:"customer_city",name:"customer_city",value:s.customer_city??"",onChange:i,className:"mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})]}),w.jsxs("div",{className:"sm:col-span-2",children:[w.jsx("label",{htmlFor:"delivery_start_time",className:"block text-sm font-medium text-slate-600",children:"Time Slot"}),w.jsx("p",{className:"mt-1 text-sm text-slate-800 font-medium p-2",children:s.delivery_start_time||""})]})]}),w.jsxs("div",{className:"flex justify-end items-center p-4 bg-slate-50 border-t rounded-b-lg gap-3",children:[w.jsx("button",{onClick:e,className:"px-4 py-2 bg-white border border-slate-300 text-slate-700 rounded-md hover:bg-slate-100",children:"Cancel"}),w.jsxs("button",{onClick:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 inline-flex items-center",children:[w.jsx(Lw,{size:16,className:"mr-2"}),"Save Changes"]})]})]})}):null},Sje=()=>{const n=JSON.parse(localStorage.getItem("user")||"{}"),[e,t]=L.useState([]),[r,s]=L.useState(new Date().toISOString().substring(0,10)),[a,i]=L.useState(new Date().toISOString().substring(0,10)),[o,l]=L.useState(!1),[c,d]=L.useState({message:"",type:""}),[h,p]=L.useState(""),[g,x]=L.useState("All"),[y,b]=L.useState(!1),[S,T]=L.useState(null),[N,C]=L.useState(!0),[I,F]=L.useState({key:"so_no",direction:"ascending"}),D=async()=>{l(!0),d({message:"",type:""});try{if(!r||!a||new Date(r)>new Date(a))throw new Error("Invalid date range selected.");const Q=`${v0}/api/sync/mysql-to-mongo`,Y=await fetch(Q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:r,endDate:a})});if(!Y.ok){const se=await Y.json().catch(()=>null);throw new Error((se==null?void 0:se.message)||`Server Error: ${Y.statusText}`)}const j=await Y.json();if(j.length===0){d({message:"Synchronization complete. No new records found in the selected date range.",type:"success"}),t([]);return}const J=`${v0}/api/invoices`,M=await fetch(J);if(!M.ok)throw new Error("Could not fetch invoice files data.");const z=await M.json(),G=new Map;z.forEach(se=>{if(se.source_path&&se.order_reference){const pe=se.source_path.split(/[\\/]/).pop(),me=String(se.order_reference).trim();G.set(me,pe)}});const U=j.map(se=>({...se,filename:G.get(String(se.so_no).trim())||null}));t(U),d({message:`Successfully synced and enriched ${U.length} records.`,type:"success"}),C(!1)}catch(Q){d({message:`Error: ${Q.message}`,type:"error"}),console.error("Sync error:",Q)}finally{l(!1)}},A=async Q=>{try{const{so_no:Y}=Q,j=await fetch(`${v0}/api/sync/synced-invoices/${Y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!j.ok)throw new Error("Failed to save changes.");const J=await j.json();t(M=>M.map(z=>z.so_no===Y?{...z,...J}:z)),b(!1)}catch(Y){console.error("Save error:",Y),alert(Y.message)}},_=Q=>{T(Q),b(!0)},k=L.useMemo(()=>e.filter(Q=>(g==="All"||ed(Q.customer_city)===g)&&(h===""||Object.values(Q).some(Y=>String(Y).toLowerCase().includes(h.toLowerCase())))),[e,h,g]),O=L.useMemo(()=>["All",...Array.from(new Set(e.map(Q=>ed(Q.customer_city)).filter(Boolean))).sort()],[e]),P=L.useMemo(()=>{const Q=k.reduce((Y,j)=>{const J=ed(j.customer_city)||"Unknown";return Y[J]||(Y[J]={count:0,timeSlots:new Set}),Y[J].count++,j.delivery_start_time&&Y[J].timeSlots.add(Ib(j.delivery_start_time).time),Y},{});return Object.entries(Q).map(([Y,j])=>({city:Y,count:j.count,timeSlots:Array.from(j.timeSlots).join(", ")})).sort((Y,j)=>j.count-Y.count)},[k]),W=L.useMemo(()=>Object.entries(k.reduce((Q,Y)=>{const j=Y.wave_no||"Unknown";return Q[j]=(Q[j]||0)+1,Q},{})).sort((Q,Y)=>Q[0].localeCompare(Y[0])),[k]),K=L.useMemo(()=>{let Q=[...k];return I.key!==null&&Q.sort((Y,j)=>{let J=Y[I.key]??"",M=j[I.key]??"";return I.key==="customer_city"&&(J=ed(J),M=ed(M)),J<M?I.direction==="ascending"?-1:1:J>M?I.direction==="ascending"?1:-1:0}),Q},[k,I]),q=Q=>{let Y="ascending";I.key===Q&&I.direction==="ascending"&&(Y="descending"),F({key:Q,direction:Y})},V=Q=>I.key!==Q?w.jsx(TF,{className:"h-4 w-4 text-slate-400"}):I.direction==="ascending"?w.jsx(k_,{className:"h-4 w-4 text-slate-800"}):w.jsx(E_,{className:"h-4 w-4 text-slate-800"}),X=()=>{const Q=K.map(U=>({"Order No.":U.so_no,City:ed(U.customer_city),Date:Ib(U.delivery_start_time).date,"Time Slot":Ib(U.delivery_start_time).time,"Wave No.":U.wave_no,Filename:U.filename})),Y=ls.json_to_sheet(Q),j=P.map(U=>({City:U.city,"Order Count":U.count,"Time Slots":U.timeSlots})),J=W.map(([U,se])=>({Wave:U,Count:se})),M=ls.json_to_sheet(j),z=ls.json_to_sheet(J),G=ls.book_new();ls.book_append_sheet(G,Y,"Synced Data"),ls.book_append_sheet(G,M,"City Summary"),ls.book_append_sheet(G,z,"Wave Summary"),q5(G,`DataExport_${new Date().toISOString().split("T")[0]}.xlsx`)};return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-slate-50 min-h-screen",children:[w.jsx(xu,{user:n}),w.jsx(Jl,{user:n}),w.jsxs("main",{className:"md:ml-18 p-4 sm:p-6 lg:p-6",children:[w.jsxs("header",{className:"mb-8",children:[w.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Data Management"}),w.jsx("p",{className:"text-slate-500 mt-2",children:"Sync, filter, and edit data fetched from the database."})]}),w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[w.jsxs("button",{onClick:()=>C(!N),className:"w-full flex justify-between items-center p-4",children:[w.jsx("span",{className:"font-semibold text-slate-700",children:"Control Panel"}),w.jsx(TF,{className:`h-5 w-5 text-slate-500 transition-transform ${N?"rotate-180":""}`})]}),N&&w.jsxs("div",{className:"p-6 border-t grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[w.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Date"}),w.jsx("input",{id:"startDate",type:"date",value:r,onChange:Q=>s(Q.target.value),disabled:o,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-700 mb-1",children:"End Date"}),w.jsx("input",{id:"endDate",type:"date",value:a,onChange:Q=>i(Q.target.value),disabled:o,className:"w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})]})]}),w.jsx("div",{className:"w-full",children:w.jsx("button",{onClick:D,disabled:o||!r||!a,className:"w-full inline-flex items-center justify-center px-6 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-sm hover:bg-indigo-700 disabled:bg-indigo-400",children:o?w.jsxs(w.Fragment,{children:[w.jsx(P0,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),"Syncing..."]}):w.jsxs(w.Fragment,{children:[w.jsx(oae,{className:"-ml-1 mr-2 h-5 w-5"}),"Run Sync"]})})})]}),e.length>0&&w.jsxs("div",{className:"p-4 border-t grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[w.jsxs("div",{className:"md:col-span-2 relative",children:[w.jsx(I_,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),w.jsx("input",{type:"text",placeholder:"Search records...",value:h,onChange:Q=>p(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md"})]}),w.jsx("div",{children:w.jsx("select",{value:g,onChange:Q=>x(Q.target.value),className:"w-full py-2 pl-3 pr-8 border border-gray-300 rounded-md",children:O.map(Q=>w.jsx("option",{value:Q,children:Q||"N/A"},Q))})}),w.jsx("div",{children:w.jsxs("button",{onClick:X,className:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white font-semibold rounded-lg shadow-sm hover:bg-green-700",children:[w.jsx(YB,{className:"-ml-1 mr-2 h-5 w-5"}),"Export Excel"]})})]})]}),e.length>0&&w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[w.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-sm",children:[w.jsx("h3",{className:"font-semibold text-slate-700 mb-3",children:"Orders by City"}),w.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:P.map(Q=>w.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[w.jsx("span",{className:"text-slate-600",children:Q.city}),w.jsx("span",{className:"font-medium text-slate-800 bg-slate-100 px-2 py-0.5 rounded-full",children:Q.count})]},Q.city))})]}),w.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-sm",children:[w.jsx("h3",{className:"font-semibold text-slate-700 mb-3",children:"Orders by Wave"}),w.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:W.map(([Q,Y])=>w.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[w.jsx("span",{className:"text-slate-600",children:Q}),w.jsx("span",{className:"font-medium text-slate-800 bg-slate-100 px-2 py-0.5 rounded-full",children:Y})]},Q))})]})]}),w.jsxs("div",{children:[!o&&!e.length&&w.jsxs("div",{className:"text-center p-12 border-2 border-dashed border-gray-300 rounded-lg",children:[w.jsx(mse,{className:"mx-auto h-12 w-12 text-gray-400"}),w.jsx("h3",{className:"mt-2 text-lg font-medium text-slate-800",children:"No data to display"}),w.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Run a sync to fetch data from the database."})]}),e.length>0&&w.jsxs("div",{className:"bg-white overflow-hidden border border-gray-200 rounded-lg shadow-sm",children:[w.jsxs("div",{className:"p-4 flex justify-between items-center",children:[w.jsx("h3",{className:"font-semibold text-slate-700",children:"Synced Records"}),w.jsxs("span",{className:"text-sm text-slate-500",children:[K.length," of ",e.length," records shown"]})]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[w.jsx("thead",{className:"bg-slate-50",children:w.jsxs("tr",{children:[w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:w.jsxs("button",{onClick:()=>q("so_no"),className:"flex items-center gap-2",children:["Order No. ",V("so_no")]})}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:w.jsxs("button",{onClick:()=>q("customer_city"),className:"flex items-center gap-2",children:["City ",V("customer_city")]})}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:w.jsxs("button",{onClick:()=>q("delivery_start_time"),className:"flex items-center gap-2",children:["Date ",V("delivery_start_time")]})}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Time Slot"}),w.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:w.jsxs("button",{onClick:()=>q("wave_no"),className:"flex items-center gap-2",children:["Wave No. ",V("wave_no")]})}),w.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),w.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:K.map(Q=>{const{date:Y,time:j}=Ib(Q.delivery_start_time);return w.jsxs("tr",{className:"hover:bg-slate-50",children:[w.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900",children:Q.filename?w.jsx("a",{href:`${v0}/api/invoices/${Q.filename}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900 hover:underline",children:Q.so_no}):Q.so_no}),w.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:ed(Q.customer_city)||"N/A"}),w.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Y}),w.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:j}),w.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:Q.wave_no??"N/A"}),w.jsx("td",{className:"px-6 py-4 text-center",children:w.jsxs("div",{className:"flex justify-center items-center gap-2",children:[Q.filename&&w.jsx("a",{href:`${v0}/api/invoices/${Q.filename}`,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-blue-600 hover:text-blue-900",title:"View Invoice",children:w.jsx(vse,{className:"h-5 w-5"})}),w.jsx("button",{onClick:()=>_(Q),className:"p-1 text-indigo-600 hover:text-indigo-900",title:"Edit",children:w.jsx(kh,{className:"h-5 w-5"})})]})})]},Q._id)})})]})})]})]})]})]})]}),w.jsx(wje,{isOpen:y,onClose:()=>b(!1),onSave:A,rowData:S})]})},w0="https://172.20.0.49:3000",Tje=["None","200-39-201","879-04-501","595-54-901","534-76-202","97-733-31","217-03-901","685-24-602","764-56-601","33-846-33","33-578-66","41-825-62","80-878-37","38-208-62","64-755-58","24-663-59","   ..."],Nje=[" "," "," "," "," "," "," "," ","","   ..."],Cje=[{id:"largeCoolers",name:" ",icon:w.jsx(fv,{className:"w-5 h-5 text-green-500"})},{id:"smallCoolers",name:"",icon:w.jsx(fv,{className:"w-5 h-5 text-purple-500"})}];function Bc(n,e){const[t,r]=L.useState(()=>{if(typeof window<"u"){const s=window.localStorage.getItem(e);return s!==null?JSON.parse(s):n}return n});return L.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(t))},[e,t]),[t,r]}function Eje(){const n=typeof window<"u"?JSON.parse(localStorage.getItem("user")):null,[e,t]=Bc("","notesState_asset_v2"),[r,s]=L.useState(!1),[a,i]=Bc({largeCoolers:0,smallCoolers:0},"quantitiesState_asset_v2"),[o,l]=Bc("","vehicleNumberState_asset_v2"),[c,d]=Bc([],"scannedItemsState_asset_v3"),[h,p]=Bc([],"brokenItemsState_asset_v3"),[g,x]=Bc("incoming","transactionTypeState_asset_v2"),[y,b]=L.useState(!1),[S,T]=L.useState(""),[N,C]=L.useState(""),[I,F]=Bc("","driverName_asset_v1"),[D,A]=L.useState(""),[_,k]=L.useState(""),[O,P]=L.useState(!1),[W,K]=L.useState(!1),[q,V]=L.useState(null),[X,Q]=L.useState("move_to_broken"),[Y,j]=L.useState(""),[J,M]=Bc([],"correctionsLog_v1"),z=L.useRef(null),G=L.useRef(null);L.useEffect(()=>{var ne;O&&((ne=z.current)==null||ne.focus())},[O]),L.useEffect(()=>{W&&X==="replace"&&setTimeout(()=>{var ne;return(ne=G.current)==null?void 0:ne.focus()},100)},[W,X]);const U=(ne,Ae)=>{V({barcode:ne,currentStatus:Ae}),Q(Ae==="ok"?"move_to_broken":"move_to_ok"),K(!0)},se=()=>{if(!q)return;const{barcode:ne,currentStatus:Ae}=q;switch(X){case"replace":{const Me=Y.trim();if(!Me){Dt.error("   .");return}if(c.some(Ge=>Ge.barcode===Me)||h.some(Ge=>Ge.barcode===Me)){Dt.error("    .");return}if(Me===ne){Dt.error("   .");return}const ot={barcode:Me,scannedAt:new Date().toISOString()},st=(Ae==="ok"?c:h).find(Ge=>Ge.barcode===ne)||{barcode:ne,scannedAt:new Date().toISOString()};Ae==="ok"?d(Ge=>Ge.filter(at=>at.barcode!==ne)):p(Ge=>Ge.filter(at=>at.barcode!==ne)),p(Ge=>{const at=Ge.filter(Qt=>Qt.barcode!==ne);return[st,...at]}),Ae==="ok"?d(Ge=>[ot,...Ge]):p(Ge=>[ot,...Ge.filter(at=>at.barcode!==ne)]),M(Ge=>[...Ge,{oldBarcode:ne,newBarcode:Me,reason:"replacement",timestamp:new Date}]),Dt.success(` ${ne}    -${Me}.`);break}case"move_to_broken":{const Me=c.find(Ve=>Ve.barcode===ne);Me&&(d(Ve=>Ve.filter(ot=>ot.barcode!==ne)),p(Ve=>[Me,...Ve])),M(Ve=>[...Ve,{oldBarcode:ne,newBarcode:null,reason:"marked_as_broken",timestamp:new Date}]),Dt.success(` ${ne}  .`);break}case"move_to_ok":{const Me=h.find(Ve=>Ve.barcode===ne);Me&&(p(Ve=>Ve.filter(ot=>ot.barcode!==ne)),d(Ve=>[Me,...Ve])),M(Ve=>[...Ve,{oldBarcode:ne,newBarcode:null,reason:"marked_as_ok",timestamp:new Date}]),Dt.success(` ${ne}  .`);break}default:{Dt.error("  .");return}}K(!1),V(null),j("")},pe=()=>{const ne=S.trim();if(!ne)return;if(c.some(Me=>Me.barcode===ne)||h.some(Me=>Me.barcode===ne))Dt.error("   .");else{Dt.success("  !");const Me={barcode:ne,scannedAt:new Date().toISOString()};d(Ve=>[Me,...Ve]),navigator.vibrate&&navigator.vibrate(100)}T("")},me=()=>{const ne=N.trim();if(!ne)return;if(c.some(Me=>Me.barcode===ne)||h.some(Me=>Me.barcode===ne))Dt.error("   .");else{Dt.success("  !");const Me={barcode:ne,scannedAt:new Date().toISOString()};p(Ve=>[Me,...Ve]),navigator.vibrate&&navigator.vibrate(100)}C("")},be=(ne,Ae)=>i(Me=>({...Me,[ne]:Math.max(0,(Number(Me[ne])||0)+Ae)})),ge=ne=>{d(Ae=>Ae.filter(Me=>Me.barcode!==ne)),Dt.success("  ")},ke=ne=>{p(Ae=>Ae.filter(Me=>Me.barcode!==ne)),Dt.success("  ")},Le=(ne=!0)=>{var Ae;i({largeCoolers:0,smallCoolers:0}),l(""),d([]),p([]),t(""),F(""),T(""),C(""),M([]),A(""),k(""),ne?P(!1):(Ae=z.current)==null||Ae.focus()},rt=()=>{if(!r){s(!0),Dt("   ."),setTimeout(()=>s(!1),3e3);return}Le(!1),Dt(" !"),s(!1)},Be=async()=>{if(!n||!n.username){Dt.error(":      .");return}const ne=o==="   ..."?D.trim():o.trim(),Ae=I==="   ..."?_.trim():I.trim();if(!ne||ne==="None"){Dt.error("     .");return}if(!Ae){Dt.error("     .");return}const Me=c.length>0||h.length>0,Ve=Object.values(a).some(Ge=>Number(Ge)>0);if(!Me&&!Ve){Dt.error("     .");return}b(!0);const ot=[];c.length>0&&ot.push(fetch(`${w0}/api/assets/scan`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assets:c,transactionType:g,username:n.username,vehicleNumber:ne,actualDriverName:Ae,notes:e})}).then(Ge=>{if(!Ge.ok)throw new Error("   ");return Ge.json()})),h.length>0&&h.forEach(Ge=>ot.push(fetch(`${w0}/api/assets/${Ge.barcode}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Broken",notes:`  " ${n.username}  ${ne}`,scannedAt:Ge.scannedAt})}).then(at=>{if(!at.ok)throw new Error(`   : ${Ge.barcode}`);return at.json()})));const st=J.filter(Ge=>Ge.reason==="replacement");st.length>0&&st.forEach(Ge=>ot.push(fetch(`${w0}/api/assets/${Ge.oldBarcode}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Broken",notes:`  ${Ge.newBarcode} " ${n.username}  ${ne}`})}).then(at=>{if(!at.ok)throw new Error(`    : ${Ge.oldBarcode}`);return at.json()}))),Ve&&ot.push(fetch(`${w0}/api/quantitatives/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionType:g,driverName:Ae,scannedBy:n.username,vehicleNumber:ne,largeCoolers:Number(a.largeCoolers)||0,smallCoolers:Number(a.smallCoolers)||0,notes:e})}).then(Ge=>{if(!Ge.ok)throw new Error(" / ");return Ge.json()})),J.length>0&&ot.push(fetch(`${w0}/api/inventoryNew/log-corrections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({corrections:J,username:n.username,vehicleNumber:ne,driverName:Ae})}).then(Ge=>{if(!Ge.ok)throw new Error("   ");return Ge.json()}));try{await Dt.promise(Promise.all(ot),{loading:" ...",success:"  !",error:Ge=>`  : ${Ge.message}`}),Le(!0)}catch(Ge){console.error("Submit error:",Ge)}finally{b(!1)}},Ze=y||o!=="   ..."&&(!o.trim()||o==="None")||o==="   ..."&&!D.trim()||I!=="   ..."&&!I.trim()||I==="   ..."&&!_.trim(),He=ne=>{x(ne),P(!0)};return w.jsxs(w.Fragment,{children:[w.jsx(Jl,{user:n}),w.jsx(xu,{user:n}),w.jsx("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:w.jsx("main",{className:"flex-1 p-4 sm:p-6",children:w.jsxs("div",{className:"max-w-md mx-auto",children:[w.jsx(Wg,{position:"bottom-center"}),O?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"mb-6",children:w.jsxs("div",{className:`flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border-l-4 ${g==="incoming"?"border-green-500":"border-red-500"}`,children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm text-gray-500",children:" :"}),w.jsx("p",{className:`font-bold ${g==="incoming"?"text-green-600":"text-red-600"}`,children:g==="incoming"?" ":" "})]}),w.jsxs("button",{onClick:()=>P(!1),className:"flex items-center gap-1.5 text-sm text-blue-600 hover:text-blue-800 font-semibold",children:[w.jsx(s6,{className:"w-4 h-4"}),"  "]})]})}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"vehicleNumber",className:"flex items-center text-sm font-medium text-gray-700 mb-1 gap-2",children:[w.jsx(qh,{className:"w-4 h-4 text-gray-400"}),"  "]}),w.jsxs("select",{id:"vehicleNumber",value:o,onChange:ne=>l(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[w.jsx("option",{value:"",disabled:!0,children:" ..."}),Tje.map(ne=>w.jsx("option",{value:ne,children:ne},ne))]}),o==="   ..."&&w.jsx("input",{type:"text",value:D,onChange:ne=>A(ne.target.value),placeholder:"   ",className:"w-full px-3 py-2 mt-2 border border-gray-300 rounded-md shadow-sm",autoFocus:!0})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"driverName",className:"flex items-center text-sm font-medium text-gray-700 mb-1 gap-2",children:[w.jsx(Vl,{className:"w-4 h-4 text-gray-400"}),"  "]}),w.jsxs("select",{id:"driverName",value:I,onChange:ne=>F(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[w.jsx("option",{value:"",disabled:!0,children:" ..."}),Nje.map(ne=>w.jsx("option",{value:ne,children:ne},ne))]}),I==="   ..."&&w.jsx("input",{type:"text",value:_,onChange:ne=>k(ne.target.value),placeholder:"   ",className:"w-full px-3 py-2 mt-2 border border-gray-300 rounded-md shadow-sm",autoFocus:!0})]})]}),w.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-4",children:[w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"barcode-adder-good",className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[w.jsx(XB,{className:"w-5 h-5 text-green-500"}),"   "]}),w.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),pe()},className:"flex items-center gap-2",children:[w.jsx(dv,{className:"text-gray-400"}),w.jsx("input",{id:"barcode-adder-good",ref:z,type:"text",value:S,onChange:ne=>T(ne.target.value),placeholder:"   ...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-md",autoCorrect:"off",autoCapitalize:"none"})]})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"barcode-adder-broken",className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[w.jsx(Ug,{className:"w-5 h-5 text-red-500"}),"   "]}),w.jsxs("form",{onSubmit:ne=>{ne.preventDefault(),me()},className:"flex items-center gap-2",children:[w.jsx(dv,{className:"text-gray-400"}),w.jsx("input",{id:"barcode-adder-broken",type:"text",value:N,onChange:ne=>C(ne.target.value),placeholder:"   ...",className:"flex-1 w-full px-3 py-2 border border-gray-300 rounded-md",autoCorrect:"off",autoCapitalize:"none"})]})]})]}),(c.length>0||h.length>0)&&w.jsxs("div",{className:"space-y-4",children:[c.length>0&&w.jsxs("div",{children:[w.jsxs("h4",{className:"text-xs font-semibold text-gray-500 my-2 uppercase",children:[" (",c.length,")"]}),w.jsx("ul",{className:"border rounded-md max-h-36 overflow-y-auto bg-white",children:c.map(ne=>w.jsxs("li",{className:"p-2 flex justify-between items-center text-sm border-b last:border-b-0",children:[w.jsx("span",{className:"font-mono text-gray-800",children:ne.barcode}),w.jsxs("div",{children:[w.jsx("button",{onClick:()=>U(ne.barcode,"ok"),className:"p-1 text-gray-400 hover:text-blue-500 rounded-full",children:w.jsx(kh,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>ge(ne.barcode),className:"p-1 text-gray-400 hover:text-red-500 rounded-full",children:w.jsx(Zc,{className:"w-4 h-4"})})]})]},ne.barcode))})]}),h.length>0&&w.jsxs("div",{children:[w.jsxs("h4",{className:"text-xs font-semibold text-gray-500 my-2 uppercase",children:[" (",h.length,")"]}),w.jsx("ul",{className:"border border-red-200 rounded-md max-h-36 overflow-y-auto bg-white",children:h.map(ne=>w.jsxs("li",{className:"p-2 flex justify-between items-center text-sm border-b last:border-b-0",children:[w.jsx("span",{className:"font-mono text-gray-800",children:ne.barcode}),w.jsxs("div",{children:[w.jsx("button",{onClick:()=>U(ne.barcode,"broken"),className:"p-1 text-gray-400 hover:text-blue-500 rounded-full",children:w.jsx(kh,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>ke(ne.barcode),className:"p-1 text-gray-400 hover:text-red-500 rounded-full",children:w.jsx(Zc,{className:"w-4 h-4"})})]})]},ne.barcode))})]})]}),w.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:Cje.map(ne=>w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ne.icon," ",w.jsx("h3",{className:"font-semibold text-gray-800",children:ne.name})]}),w.jsxs("div",{className:"flex items-center",children:[w.jsx("button",{onClick:()=>be(ne.id,1),className:"px-4 h-12 border border-r-0 rounded-r-md bg-gray-50 hover:bg-gray-100",children:w.jsx(__,{className:"w-4 h-4"})}),w.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",min:"0",value:a[ne.id],onChange:Ae=>i(Me=>({...Me,[ne.id]:Ae.target.value})),className:"w-full h-12 border-t border-b text-center text-xl font-bold focus:outline-none"}),w.jsx("button",{onClick:()=>be(ne.id,-1),disabled:a[ne.id]<=0,className:"px-4 h-12 border border-l-0 rounded-l-md bg-gray-50 hover:bg-gray-100 disabled:opacity-50",children:w.jsx(t6,{className:"w-4 h-4"})})]})]},ne.id))}),w.jsxs("div",{className:"pt-4 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[w.jsxs("button",{onClick:rt,disabled:y,className:`w-full flex items-center justify-center gap-2 py-3 text-sm font-semibold rounded-lg transition-all disabled:opacity-50 ${r?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[w.jsx(i6,{className:"w-4 h-4"})," ",r?"  ":" "]}),w.jsxs("button",{onClick:Be,disabled:Ze,className:`w-full flex items-center justify-center gap-2 py-3 text-sm font-semibold rounded-lg transition-all sm:col-span-2 ${Ze?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800 shadow-sm"}`,children:[w.jsx(Lw,{className:"w-4 h-4"})," ",y?"...":""]})]})]})]}):w.jsx("div",{className:"fixed inset-0 bg-gray-100 flex items-center justify-center z-40 p-4",children:w.jsxs("div",{className:"w-full max-w-sm text-center",children:[w.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:[", ",(n==null?void 0:n.fullName)||(n==null?void 0:n.username)]}),w.jsx("p",{className:"text-gray-600 mb-8",children:"     ."}),w.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[w.jsxs("button",{onClick:()=>He("incoming"),className:"w-full flex items-center justify-center gap-3 py-4 px-6 text-lg font-semibold rounded-lg bg-green-600 text-white hover:bg-green-700 shadow-sm transition-transform transform hover:scale-105",children:[w.jsx(E_,{}),"   "]}),w.jsxs("button",{onClick:()=>He("outgoing"),className:"w-full flex items-center justify-center gap-3 py-4 px-6 text-lg font-semibold rounded-lg bg-red-600 text-white hover:bg-red-700 shadow-sm transition-transform transform hover:scale-105",children:[w.jsx(k_,{}),"   "]})]})]})}),W&&q&&w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",dir:"rtl",children:w.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm m-4",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h3",{className:"text-lg font-bold",children:" /  "}),w.jsx("button",{onClick:()=>{K(!1),j("")},children:w.jsx(Fw,{className:"text-gray-400 hover:text-gray-600"})})]}),w.jsxs("p",{className:"mb-4",children:[" :"," ",w.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:q.barcode})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:" :"}),w.jsxs("select",{value:X,onChange:ne=>Q(ne.target.value),className:"w-full p-2 border rounded-md mt-1",children:[q.currentStatus==="ok"&&w.jsx("option",{value:"move_to_broken",children:"  "}),q.currentStatus==="broken"&&w.jsx("option",{value:"move_to_ok",children:"  "}),w.jsx("option",{value:"replace",children:"  "})]})]}),X==="replace"&&w.jsxs("div",{children:[w.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[w.jsx(a6,{className:"w-4 h-4 text-blue-500"}),"   "]}),w.jsx("form",{onSubmit:ne=>{ne.preventDefault(),se()},children:w.jsx("input",{ref:G,type:"text",value:Y,onChange:ne=>j(ne.target.value),placeholder:"  ...",className:"w-full p-2 border rounded-md mt-1 font-mono",autoCorrect:"off",autoCapitalize:"none"})})]})]}),w.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>{K(!1),j("")},className:"px-4 py-2 text-sm font-semibold bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:""}),w.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-semibold bg-blue-600 text-white rounded-md hover:bg-blue-700",children:""})]})]})})]})})})]})}pG.createRoot(document.getElementById("root")).render(w.jsx(ao.StrictMode,{children:w.jsx(HQ,{dateAdapter:Dre,children:w.jsx(NK,{children:w.jsxs(tK,{children:[w.jsx(Ei,{path:"/login",element:w.jsx(iie,{})}),w.jsx(Ei,{path:"/",element:w.jsx(uae,{})}),w.jsx(Ei,{path:"/boxes",element:w.jsx(rie,{})}),w.jsx(Ei,{path:"/it",element:w.jsx(sie,{})}),w.jsx(Ei,{path:"/adminBox",element:w.jsx(Dpe,{})}),w.jsx(Ei,{path:"/admin",element:w.jsx(Fie,{})}),w.jsx(Ei,{path:"/invoice",element:w.jsx(Fpe,{})}),w.jsx(Ei,{path:"/invoiceUploader",element:w.jsx(xje,{})}),w.jsx(Ei,{path:"/AdminBoxInventoryNew",element:w.jsx(Sje,{})}),w.jsx(Ei,{path:"/BoxInventoryNew",element:w.jsx(Eje,{})}),w.jsx(Ei,{path:"/developer",element:w.jsx(vje,{})})]})})})}));
